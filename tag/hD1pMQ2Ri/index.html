<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="zhangyao blog">
<meta name="description" content="ÁîüÊ≠ªÁúãÊ∑°Ôºå‰∏çÊúçÂ∞±Âπ≤">
<meta name="theme-color" content="#000">
<title>will</title>
<link rel="shortcut icon" href="/favicon.ico?v=1649663885416">
<link rel="stylesheet" href="/media/css/pisces.css">
<link rel="stylesheet" href="/media/fonts/font-awesome.css">
<link
  href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Rosario:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"
  rel="stylesheet" type="text/css">

<link href="/media/hljs/styles/androidstudio.css"
  rel="stylesheet">

<link rel="stylesheet" href="/styles/main.css">

<script src="/media/hljs/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
  integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
  integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
  integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
  onload="renderMathInElement(document.body);"></script>





</head>

<body>
  <div class="head-top-line"></div>
  <div class="header-box">
    
<div class="pisces">
  <header class="header  ">
    <div class="blog-header box-shadow-wrapper bg-color " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="brand">
              <span>will</span>
            </a>  
          
        </div>
        
          <p class="subtitle">ÁîüÊ≠ªÁúãÊ∑°Ôºå‰∏çÊúçÂ∞±Âπ≤</p>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/" target="_self">
                  <i class="fa fa-home"></i> È¶ñÈ°µ
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/archives/" target="_self">
                  <i class="fa fa-archive"></i> ÂΩíÊ°£
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/tags/" target="_self">
                  <i class="fa fa-tags"></i> Ê†áÁ≠æ
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/post/about/" target="_self">
                  <i class="fa fa-user"></i> ÂÖ≥‰∫é
                </a>
              
            </li>
          
          
            
              <li class="nav-item ">
                <a href="/friends/" target="_self">
                  
                    <i class="fa fa-address-book"></i> ÂèãÊÉÖÈìæÊé•
                  
                </a>
              </li>
            
          
          
            <li id="fa_search" class="nav-item">
              <a href="javascript:void(0);">
                <i class="fa fa-search"></i> <span class="language" data-lan="search">ÊêúÁ¥¢</span>
              </a>
            </li>
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
  </div>
  <div class="main-continer">
    
    <div
      class="section-layout  pisces">
      <div class="section-layout-wrapper">
        <div id="sidebarMeta" class="sidebar">
    
<div class="sidebar-wrapper box-shadow-wrapper bg-color">
  <div class="sidebar-item">
    <img class="site-author-image right-motion" src="/images/avatar.png"/>
    <p class="site-author-name">will</p>
    
  </div>
  <div class="sidebar-item side-item-stat right-motion">
    <div class="sidebar-item-box">
      <a href="/archives/">
        
        <span class="site-item-stat-count">16</span>
        <span class="site-item-stat-name language" data-lan="article">ÊñáÁ´†</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="">
        <span class="site-item-stat-count">16</span>
        <span class="site-item-stat-name language" data-lan="category">ÂàÜÁ±ª</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="/tags/">
        <span class="site-item-stat-count">16</span>
        <span class="site-item-stat-name language" data-lan="tag">Ê†áÁ≠æ</span>
      </a>
    </div>
  </div>
  
    
      <div class="sidebar-item">
        <span class="site-item-rss">
            <i class="fa fa-rss"></i>
            <a href="https://zhangyaoo.github.io/atom.xml" target="_blank">RSS</a>
        </span>
      </div>
    
  
  



</div>
</div>
<script>
  let sidebarMeta = document.querySelector('#sidebarMeta');
  let scheme = 'pisces';
  let sidebarWrapper = document.querySelector('.sidebar-wrapper');
  if (sidebarMeta && (scheme === 'pisces' || scheme === 'gemini')) {
    document.addEventListener('scroll', function(e) {
      if (document.scrollingElement.scrollTop > parseInt(sidebarMeta.style.marginTop) + 10) {
        sidebarWrapper.classList.add('home-sidebar-fixed')
      } else {
        sidebarWrapper.classList.remove('home-sidebar-fixed')
      }
    });
  }
  </script>
        <div class="section-box tag-line box-shadow-wrapper">
          <section class="section tags-section posts-expand bg-color">
            <div class="padding-wrapper">
  <div class="tag-timeline-box">
    <div class="tag-timeline-wrapper">
      <div class="tag-timeline-title">
        <h2>
          ÊÄªÁªì
          <small class="language" data-lan="tag">Ê†áÁ≠æ</small>
        </h2>
      </div>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <a href="https://zhangyaoo.github.io/post/2020-nian-zong-jie/">
        <div class="motion-warpper">
          <div class="tag-post-node">
            <h1>
              12-31
              <small>2020Âπ¥ÊÄªÁªì</small>
            </h1>
          </div>
        </div>
      </a>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <a href="https://zhangyaoo.github.io/post/2019-nian-zong-jie/">
        <div class="motion-warpper">
          <div class="tag-post-node">
            <h1>
              01-01
              <small>2019Âπ¥ÊÄªÁªì</small>
            </h1>
          </div>
        </div>
      </a>
      
      
      
      
      
      
      
      <a href="https://zhangyaoo.github.io/post/2018-nian-zong-jie/">
        <div class="motion-warpper">
          <div class="tag-post-node">
            <h1>
              01-01
              <small>2018Âπ¥ÊÄªÁªì</small>
            </h1>
          </div>
        </div>
      </a>
      
      
      
    </div>
  </div>
</div>
          </section>
        </div>
      </div>
    </div>
    <div class="footer-box">
  <footer class="footer">
    <div class="copyright">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | ¬© 2019-2020 Theme By <a
        href="https://github.com/hsxyhao/gridea-theme-next" target="_blank">HsxyHao</a>
    </div>
    <div class="poweredby">
      <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <span id="busuanzi_container_site_pv">Êú¨Á´ôÊÄªËÆøÈóÆÈáè<span id="busuanzi_value_site_pv"></span>Ê¨°</span>
    </div>
  </footer>
  
  
  <div class="pisces back-to-top" id="back_to_top">
    <i class="fa fa-arrow-up"></i>
    
    <span class="scrollpercent">
      <span id="back_to_top_text">0</span>%
    </span>
    
  </div>
  
  
  
</div>
<script>

  let sideBarOpen = 'sidebar-open';
  let body = document.body;
  let back2Top = document.querySelector('#back_to_top'),
    back2TopText = document.querySelector('#back_to_top_text'),
    drawerBox = document.querySelector('#drawer_box'),
    rightSideBar = document.querySelector('.sidebar'),
    viewport = document.querySelector('body');

  function scrollAnimation(currentY, targetY) {

    let needScrollTop = targetY - currentY
    let _currentY = currentY
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10)
      _currentY += dist
      window.scrollTo(_currentY, currentY)
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY)
      } else {
        window.scrollTo(_currentY, targetY)
      }
    }, 1)
  }

  back2Top.addEventListener("click", function (e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });

  window.addEventListener('scroll', function (e) {
    let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
    if (percent > 1 && !back2Top.classList.contains('back-top-active')) {
      back2Top.classList.add('back-top-active');
    }
    if (percent == 0) {
      back2Top.classList.remove('back-top-active');
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });


  let hasCacu = false;
  window.onresize = function () {
    calcuHeight();
  }

  function calcuHeight() {
    // Âä®ÊÄÅË∞ÉÊï¥Á´ôÁÇπÊ¶ÇËßàÈ´òÂ∫¶
    if (!hasCacu && back2Top.classList.contains('pisces') || back2Top.classList.contains('gemini')) {
      let sideBar = document.querySelector('.sidebar');
      let navUl = document.querySelector('#site_nav');
      sideBar.style = 'margin-top:' + (navUl.offsetHeight + navUl.offsetTop + 15) + 'px;';
      hasCacu = true;
    }
  }
  calcuHeight();

  let open = false, MOTION_TIME = 300, RIGHT_MOVE_DIS = '320px';

  if (drawerBox) {
    let rightMotions = document.querySelectorAll('.right-motion');
    let right = drawerBox.classList.contains('right');

    let transitionDir = right ? "transition.slideRightIn" : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingRight: '0px'
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingLeft: '0px'
      };
    }

    drawerBox.onclick = function () {
      open = !open;
      window.Velocity(rightSideBar, 'stop');
      window.Velocity(viewport, 'stop');
      window.Velocity(rightMotions, 'stop');
      if (open) {
        window.Velocity(rightSideBar, {
          width: RIGHT_MOVE_DIS
        }, {
          duration: MOTION_TIME,
          begin: function () {
            window.Velocity(rightMotions, transitionDir, {});
          }
        })
        window.Velocity(viewport, openProp, {
          duration: MOTION_TIME
        });
      } else {
        window.Velocity(rightSideBar, {
          width: '0px'
        }, {
          duration: MOTION_TIME,
          begin: function () {
            window.Velocity(rightMotions, {
              opacity: 0
            });
          }
        })
        window.Velocity(viewport, closeProp, {
          duration: MOTION_TIME
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle('muse-line');
      }
      drawerBox.classList.toggle(sideBarOpen);
    }
  }

  // ÈìæÊé•Ë∑≥ËΩ¨
  let newWindow = 'true'
  if (newWindow === 'true') {
    let links = document.querySelectorAll('.post-body a')
    links.forEach(item => {
      if (!item.classList.contains('btn')) {
        item.setAttribute("target", "_blank");
      }
    })
  }

  let faSearch = document.querySelector('#fa_search');
  faSearch.addEventListener('click', function () {
    document.querySelector('#search_mask').style = ''
  })

  // ‰ª£Á†ÅÈ´ò‰∫Æ
  hljs.initHighlightingOnLoad();
  
  // Á¶ªÂºÄÂΩìÂâçÈ°µtitleÂèòÂåñ
  var leaveTitle = '';
  if (leaveTitle) {
    document.addEventListener('visibilitychange', function () {
      if (document.visibilityState == 'hidden') {
        normal_title = document.title;
        document.title = leaveTitle;
      } else {
        document.title = normal_title;
      }
    });
  }

</script>
  </div>
</body>

  <div class="search-mask" id="search_mask" style="display: none;">
  <div class="search-box">
    <div class="search-title">
      <i class="fa fa-search"></i>
      <div class="input-box">
        <input id="search" type="text" class="language" data-lan="search" placeholder="ÊêúÁ¥¢">
      </div>
      <i id="close" class="fa fa-times-circle"></i>
    </div>
    <div class="stat-box">
      <span id="stat_count">0</span><span class="language" data-lan="stat">Êù°Áõ∏ÂÖ≥Êù°ÁõÆÔºå‰ΩøÁî®‰∫Ü</span><span id="stat_times">0</span><span class="language" data-lan="stat-time">ÊØ´Áßí</span>
      <hr>
    </div>
    <div class="result" id="result">
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/ji-yu-netty-ji-shi-tong-xun-xi-tong-she-ji-yu-shi-xian/"" data-c="
          &lt;h2 id=&#34;imÁ≥ªÂàóÊñáÁ´†&#34;&gt;IMÁ≥ªÂàóÊñáÁ´†&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;#1-im%E6%9E%B6%E6%9E%84%E5%9B%BE&#34;&gt;IMÁ≥ªÁªü‰∏öÂä°ËÆ§Áü•,ÂæÆÂçö‰ø°ÊÅØÊµÅ‰∏öÂä°‰∏éÁõ¥Êí≠‰∏öÂä°Âå∫Âà´&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#1-im%E6%9E%B6%E6%9E%84%E5%9B%BE&#34;&gt;IMÊû∂ÊûÑËÆæËÆ°‰∏éÂÆûÁé∞ÔºåÊû∂ÊûÑËÆæËÆ°ÈöæÁÇπ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#1-im%E6%9E%B6%E6%9E%84%E5%9B%BE&#34;&gt;IMÊû∂ÊûÑËÆæËÆ°‰∏éÂÆûÁé∞ÔºåHTTPDNSÂíåLSBË¥üËΩΩÂùáË°°ËÆæËÆ°&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#1-im%E6%9E%B6%E6%9E%84%E5%9B%BE&#34;&gt;IMÊû∂ÊûÑËÆæËÆ°‰∏éÂÆûÁé∞ÔºåÈïøËøûÊé•ÁΩëÂÖ≥ËÆæËÆ°ÂíåÂÆûÁé∞&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#1-im%E6%9E%B6%E6%9E%84%E5%9B%BE&#34;&gt;Ê∂àÊÅØÂèØÈù†ÊÄß„ÄÅÂç≥Êó∂ÊÄß„ÄÅÈ°∫Â∫èÊÄßÂ¶Ç‰Ωï‰øùËØÅÔºåÊ∂àÊÅØÈÄöÁü•Êú∫Âà∂&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#1-im%E6%9E%B6%E6%9E%84%E5%9B%BE&#34;&gt;Ëá™ÂÆö‰πâÂçèËÆÆÊû∂ÊûÑÂíåËÆæËÆ°,ÂÖ®ÂèåÂ∑•ÂíåÁΩëÁªúÊî∂ÂèëÊ®°Âûã&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#1-im%E6%9E%B6%E6%9E%84%E5%9B%BE&#34;&gt;Êú™ËØªÊï∞Â¶Ç‰ΩïËÆæËÆ°,Á≥ªÁªüÊú™ËØªÊï∞ÂíåÁæ§ËÅäÊú™ËØªÊï∞Â¶Ç‰ΩïËÆæËÆ°&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#1-im%E6%9E%B6%E6%9E%84%E5%9B%BE&#34;&gt;Áæ§ËÅäËÆæËÆ°‰∏éÂÆûÁé∞ÔºåÊÄßËÉΩÈóÆÈ¢òËØªÊâ©Êï£orÂÜôÊâ©Êï£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#1-im%E6%9E%B6%E6%9E%84%E5%9B%BE&#34;&gt;IMÁ≥ªÁªüÈ´òÂèØÁî®Â¶Ç‰ΩïÂÆûÁé∞&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;‰∏Ä-ÂäüËÉΩ&#34;&gt;‰∏Ä„ÄÅÂäüËÉΩ&lt;/h2&gt;
&lt;p&gt;ÁÆÄ‰ªãÔºöüöÄFastIMÊòØÂü∫‰∫éNettyÈ´òÂèØÁî®ÂàÜÂ∏ÉÂºèÂç≥Êó∂ÈÄöËÆØÁ≥ªÁªüÔºåÊîØÊåÅÈïøËøûÊé•ÁΩëÂÖ≥ÁÆ°ÁêÜ„ÄÅÂçïËÅä„ÄÅÁæ§ËÅä„ÄÅËÅäÂ§©ËÆ∞ÂΩïÊü•ËØ¢„ÄÅÁ¶ªÁ∫øÊ∂àÊÅØÂ≠òÂÇ®„ÄÅÊ∂àÊÅØÊé®ÈÄÅ„ÄÅÂøÉË∑≥„ÄÅÂàÜÂ∏ÉÂºèÂîØ‰∏ÄID„ÄÅÁ∫¢ÂåÖ„ÄÅÊ∂àÊÅØÂêåÊ≠•Á≠âÂäüËÉΩÔºåÊîØÊåÅÈõÜÁæ§ÈÉ®ÁΩ≤ÁöÑÂàÜÂ∏ÉÂºèÊû∂ÊûÑ„ÄÇ&lt;br&gt;
ÈìæÊé•Ôºöhttps://github.com/zhangyaoo/fastim&lt;/p&gt;
&lt;h2 id=&#34;‰∫å-Á≥ªÁªüËÆæËÆ°&#34;&gt;‰∫å„ÄÅÁ≥ªÁªüËÆæËÆ°&lt;/h2&gt;
&lt;h3 id=&#34;1-imÊû∂ÊûÑÂõæ&#34;&gt;1. IMÊû∂ÊûÑÂõæ&lt;/h3&gt;
&lt;p&gt;Âü∫‰∫éÂèØÊâ©Â±ïÊÄßÈ´òÂèØÁî®ÂéüÂàôÔºåÊääÁΩëÂÖ≥Â±Ç„ÄÅÈÄªËæëÂ±Ç„ÄÅÊï∞ÊçÆÂ±ÇÂàÜÁ¶ªÔºåÂπ∂‰∏îÊîØÊåÅÂàÜÂ∏ÉÂºèÈÉ®ÁΩ≤&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/architecture_new.png&#34; alt=&#34;IMÊû∂ÊûÑÂõæ&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;2-Êû∂ÊûÑËÆæËÆ°&#34;&gt;2. Êû∂ÊûÑËÆæËÆ°&lt;/h3&gt;
&lt;h4 id=&#34;20-clientËÆæËÆ°&#34;&gt;2.0 CLIENTËÆæËÆ°Ôºö&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;clientÊØè‰∏™ËÆæÂ§á‰ºöÂú®Êú¨Âú∞Â≠òÊØè‰∏Ä‰∏™‰ºöËØùÔºå‰øùÁïôÊúâÊúÄÊñ∞‰∏ÄÊù°Ê∂àÊÅØÁöÑÈ°∫Â∫è ID&lt;/li&gt;
&lt;li&gt;‰∏∫‰∫ÜÈÅøÂÖçclientÂÆïÊú∫Ôºå‰πüÂ∞±ÊòØÈÄÄÂá∫Â∫îÁî®Ôºå‰øùÂ≠òÂú®ÂÜÖÂ≠òÁöÑÊ∂àÊÅØID‰∏¢Â§±Ôºå‰ºöÂ≠òÂà∞Êú¨Âú∞ÁöÑÊñá‰ª∂‰∏≠&lt;/li&gt;
&lt;li&gt;clientÈúÄË¶ÅÂú®Êú¨Âú∞Áª¥Êä§‰∏Ä‰∏™Á≠âÂæÖackÈòüÂàóÔºåÂπ∂ÈÖçÂêàtimerË∂ÖÊó∂Êú∫Âà∂ÔºåÊù•ËÆ∞ÂΩïÂì™‰∫õÊ∂àÊÅØÊ≤°ÊúâÊî∂Âà∞ackÔºöNÔºå‰ª•ÂÆöÊó∂ÈáçÂèë„ÄÇ&lt;/li&gt;
&lt;li&gt;ÂÆ¢Êà∑Á´ØÊú¨Âú∞ÁîüÊàê‰∏Ä‰∏™ÈÄíÂ¢ûÂ∫èÂàóÂè∑ÂèëÈÄÅÁªôÊúçÂä°Âô®ÔºåÁî®‰Ωú‰øùËØÅÂèëÈÄÅÈ°∫Â∫èÊÄß„ÄÇËØ•Â∫èÂàóÂè∑ËøòÁî®‰ΩúackÈòüÂàóÊî∂Ê∂àÊÅØÊó∂ÂÄôÁöÑÁßªÈô§„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;21-ÂÆ¢Êà∑Á´ØÂ∫èÂàóÂè∑ËÆæËÆ°&#34;&gt;2.1 ÂÆ¢Êà∑Á´ØÂ∫èÂàóÂè∑ËÆæËÆ°&lt;/h5&gt;
&lt;h5 id=&#34;ÊñπÊ°à‰∏Ä&#34;&gt;ÊñπÊ°à‰∏Ä&lt;/h5&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://zhangyaoo.github.io/post-images/sequenceId.png&#34; alt=&#34;ÂÆ¢Êà∑Á´ØÂ∫èÂàóÂè∑&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ËÆæËÆ°Ôºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Êï∞ÊçÆ‰º†Ëæì‰∏≠ÁöÑÂ§ßÂ∞èÂ∞ΩÈáèÂ∞èÁî®intÔºå‰∏çÁî®bigintÔºåËäÇÁúÅ‰º†ËæìÂ§ßÂ∞è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Âè™‰øùËØÅÈÄíÂ¢ûÂç≥ÂèØ,Âú®Áî®Êà∑ÈáçÊñ∞ÁôªÂΩïÊàñËÄÖÈáçËøûÂêéÂèØ‰ª•ËøõË°åÊó•ÊúüÈáçÁΩÆÔºåÂè™‰øùËØÅÂçïÊ¨°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ÂÆ¢Êà∑Á´ØÂèëÂè∑Âô®‰∏çÈúÄË¶ÅÂÉèÁ±ª‰ººÊúçÂä°Âô®Á´ØÂèëÂè∑Âô®ÈÇ£Ê†∑ÈõÜÁæ§ÈÉ®ÁΩ≤Ôºå‰∏çÈúÄË¶ÅËÄÉËôëÈõÜÁæ§ÂêåÊ≠•ÈóÆÈ¢ò&lt;br&gt;
ËØ¥ÊòéÔºö‰∏äËø∞ÁîüÊàêÂô®ÂèØ‰ª•Áî®18Âπ¥[(2^29-1)/3600/24/365]Â∑¶Âè≥Ôºå‰∏ÄÁßíÂÜÖÊúÄÂ§ö‰∫ßÁîü4‰∏™Ê∂àÊÅØ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;‰ºòÁÇπÔºöÂèØ‰ª•Âú®Êñ≠Á∫øÈáçËøûÂíåÈáçË£ÖAPPÁöÑÊÉÖÂÜµ‰∏ãÔºå18Âπ¥‰πãÂÜÖÊòØÊúâÂ∫èÁöÑ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Áº∫ÁÇπÔºöÊØèÁßíÂè™ËÉΩÂèë4‰∏™Ê∂àÊÅØÔºåÈôêÂà∂Â§™Â§ßÔºåÂØπ‰∫éÁæ§ÂèëÂú∫ÊôØ‰∏çÂêàÈÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ÊîπËøõÔºö‰ΩøÁî®longËøõË°å‰º†ËæìÔºåÂπ¥ÈôêÊâ©Â±ïÂæà‰πÖÂπ∂‰∏îÊúâÂ∫è&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;ÊñπÊ°à‰∫å&#34;&gt;ÊñπÊ°à‰∫å&lt;/h5&gt;
&lt;p&gt;ËÆæËÆ°Ôºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ÊØèÊ¨°ÈáçÊñ∞Âª∫Á´ãÈìæÊé•ÂêéËøõË°åÈáçÁΩÆÔºåÂ∞Üsequence_idÔºàintË°®Á§∫Ôºâ‰ªé0ÂºÄÂßãËøõË°å‰∏•Ê†ºÈÄíÂ¢û&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ÂÆ¢Êà∑Á´ØÂèëÈÄÅÊ∂àÊÅØ‰ºöÂ∏¶‰∏äÂîØ‰∏ÄÁöÑÈÄíÂ¢ûsequence_idÔºåÂêå‰∏ÄÊù°Ê∂àÊÅØÈáçÂ§çÊäïÈÄíÁöÑsequence_idÊòØ‰∏ÄÊ†∑ÁöÑ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ÂêéÁ´ØÂ≠òÂÇ®ÊØè‰∏™Áî®Êà∑ÁöÑsequence_idÔºåÂΩìsequence_idÂΩí0ÔºåÁî®Êà∑ÁöÑepochÂπ¥‰ª£Âä†1Â≠òÂÇ®ÂÖ•Â∫ìÔºåÂçïËÅäÂú∫ÊôØ‰∏ãËΩ¨ÂèëÁªôÊé•Êî∂ËÄÖÊó∂ÂÄôÔºåÊé•Êî∂ËÄÖÊåâÁÖßsequence_idÂíåepochÊù•ËøõË°åÊéíÂ∫è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;‰ºòÁÇπÔºöÂèØ‰ª•Âú®Êñ≠Á∫øÈáçËøûÂíåÈáçË£ÖAPPÁöÑÊÉÖÂÜµ‰∏ãÔºåÊé•Êî∂ËÄÖÂèØ‰ª•ÊåâÁÖßÂèëÈÄÅËÄÖÂèëÈÄÅÊó∂Â∫èÊù•ÊòæÁ§∫ÔºåÂπ∂‰∏îÂØπÂèëÈÄÅÊ∂àÊÅØÁöÑÈÄüÁéáÊ≤°ÈôêÂà∂&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;21-lsbËÆæËÆ°‰∏é‰ºòÂåñ&#34;&gt;2.1 LSBËÆæËÆ°‰∏é‰ºòÂåñÔºö&lt;/h4&gt;
&lt;h5 id=&#34;210-lsbËÆæËÆ°&#34;&gt;2.1.0 LSBËÆæËÆ°&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;Êé•ÂÖ•Â±ÇÁöÑÈ´òÂèØÁî®„ÄÅË¥üËΩΩÂùáË°°„ÄÅÊâ©Â±ïÊÄßÂÖ®ÈÉ®Âú®ËøôÈáåÈù¢ÂÅö&lt;/li&gt;
&lt;li&gt;ÂÆ¢Êà∑Á´ØÈÄöËøáLSBÔºåÊù•Ëé∑Âèñgate IPÂú∞ÂùÄÔºåÈÄöËøáIPÁõ¥ËøûÔºåÁõÆÁöÑÊòØ
&lt;ul&gt;
&lt;li&gt;ÁÅµÊ¥ªÁöÑË¥üËΩΩÂùáË°°Á≠ñÁï• ÂèØÊ†πÊçÆÊúÄÂ∞ëËøûÊé•Êï∞Êù•ÂàÜÈÖçIP&lt;/li&gt;
&lt;li&gt;ÂÅöÁÅ∞Â∫¶Á≠ñÁï•Êù•ÂàÜÈÖçIP&lt;/li&gt;
&lt;li&gt;AppId‰∏öÂä°ÈöîÁ¶ªÁ≠ñÁï• ‰∏çÂêå‰∏öÂä°ËøûÊé•‰∏çÂêåÁöÑgateÔºåÈò≤Ê≠¢Áõ∏‰∫íÂΩ±Âìç&lt;/li&gt;
&lt;li&gt;ÂçïËÅäÂíåÁæ§ËÅäÁöÑimÊé•ÂÖ•Â±ÇÈÄöÈÅìÂàÜÂºÄ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;211-lsb‰ºòÂåñ&#34;&gt;2.1.1 LSB‰ºòÂåñ&lt;/h5&gt;
&lt;p&gt;ÈóÆÈ¢òËÉåÊôØÔºöÂΩìÊüê‰∏™ÂÆû‰æãÈáçÂêØÂêéÔºåËØ•ÂÆû‰æãÁöÑËøûÊé•Êñ≠ÂºÄÂêéÔºåÂÆ¢Êà∑Á´Ø‰ºöÂèëËµ∑ÈáçËøûÔºåÈáçËøûÂ∞±Â§ßÊ¶ÇÁéáËΩ¨ÁßªÂÖ∂‰ªñÂÆû‰æã‰∏äÔºåÂØºËá¥ÊúÄËøëÂêØÂä®ÁöÑÂÆû‰æãËøûÊé•Êï∞ËæÉÂ∞ëÔºåÊúÄÊó©ÂêØÂä®ÁöÑÂÆû‰æãËøûÊé•Êï∞ËæÉÂ§ö&lt;br&gt;
Ëß£ÂÜ≥ÊñπÊ≥ïÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ÂÆ¢Êà∑Á´Ø‰ºöÂèëËµ∑ÈáçËøûÔºåË∑üÊúçÂä°Âô®Áî≥ËØ∑ÈáçËøûÁöÑÊñ∞ÁöÑÊúçÂä°Âô®IPÔºåÁ≥ªÁªüÊèê‰æõÂêàÈÄÇÁöÑÁÆóÊ≥ïÊù•Âπ≥ÊëägateÂ±ÇÁöÑÂéãÂäõÔºåÈò≤Ê≠¢Èõ™Â¥©ÊïàÂ∫î„ÄÇ&lt;/li&gt;
&lt;li&gt;gateÂ±ÇÂÆöÊó∂‰∏äÊä•Êú¨Êú∫ÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØ‰ª•ÂèäËøûÊé•Êï∞‰ø°ÊÅØÔºåÊèê‰æõÁªôLSB‰∏≠ÂøÉÔºåLSBÊ†πÊçÆÊúÄÂ∞ëËøûÊé•Êï∞Ë¥üËΩΩÂùáË°°ÂÆûÁé∞ÔºåÊù•ËÆ°ÁÆó‰∏Ä‰∏™ËäÇÁÇπ‰æõËøûÊé•„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;22-gateËÆæËÆ°&#34;&gt;2.2 GATEËÆæËÆ°Ôºö&lt;/h4&gt;
&lt;p&gt;GATEÂ±ÇÁΩëÂÖ≥Êúâ‰ª•‰∏ãÁâπÊÄßÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;‰ªª‰Ωï‰∏Ä‰∏™gateÁΩëÂÖ≥Êñ≠ÊéâÔºåÁî®Êà∑Á´ØÊ£ÄÊµãÂà∞‰ª•ÂêéÈáçÊñ∞ËøûÊé•LSBÊúçÂä°Ëé∑ÂèñÂè¶‰∏Ä‰∏™gateÁΩëÂÖ≥IPÔºåÊãøÂà∞IPÈáçÊñ∞ËøõË°åÈïøËøûÊé•ÈÄö‰ø°„ÄÇÂØπÊï¥‰ΩìÊúçÂä°ÂèØÈù†ÊÄßÂü∫Êú¨Ê≤°ÊúâÂΩ±Âìç„ÄÇ&lt;/li&gt;
&lt;li&gt;gateÂèØ‰ª•Êó†Áä∂ÊÄÅÁöÑÊ®™ÂêëÈÉ®ÁΩ≤ÔºåÊù•Êâ©Â±ïÊé•ÂÖ•Â±ÇÁöÑÊé•ÂÖ•ËÉΩÂäõ&lt;/li&gt;
&lt;li&gt;Ê†πÊçÆÂçèËÆÆÂàÜÁ±ªÂ∞ÜÂÖ•Âè£ËØ∑Ê±ÇÊâìÂà∞‰∏çÂêåÁöÑÁΩëÂÖ≥‰∏äÂéªÔºåHTTPÁΩëÂÖ≥Êé•Êî∂HTTPËØ∑Ê±ÇÔºåTCPÁΩëÂÖ≥Êé•Êî∂tcpÈïøËøûÊé•ËØ∑Ê±Ç&lt;/li&gt;
&lt;li&gt;ÈïøËøûÊé•ÁΩëÂÖ≥ÔºåÊèê‰æõÂêÑÁßçÁõëÊéßÂäüËÉΩÔºåÊØîÂ¶ÇÁΩëÂÖ≥ÊâßË°åÁ∫øÁ®ãÊï∞„ÄÅÈòüÂàó‰ªªÂä°Êï∞„ÄÅByteBuf‰ΩøÁî®Â†ÜÂÜÖÂ≠òÊï∞„ÄÅÂ†ÜÂ§ñÂÜÖÂ≠òÊï∞„ÄÅÊ∂àÊÅØ‰∏äË°åÂíå‰∏ãË°åÁöÑÊï∞Èáè‰ª•ÂèäÊó∂Èó¥&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;23-logicÂíåË∑ØÁî±sdkËÆæËÆ°&#34;&gt;2.3 LOGICÂíåË∑ØÁî±SDKËÆæËÆ°Ôºö&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;logicÊåâÁÖßÂàÜÂ∏ÉÂºèÂæÆÊúçÂä°ÁöÑÊãÜÂàÜÊÄùÊÉ≥ËøõË°åÊãÜÂàÜÔºåÊãÜÂàÜ‰∏∫Â§ö‰∏™Ê®°ÂùóÔºåÈõÜÁæ§ÈÉ®ÁΩ≤Ôºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ê∂àÊÅØÊúçÂä°&lt;/li&gt;
&lt;li&gt;Á∫¢ÂåÖÊúçÂä°&lt;/li&gt;
&lt;li&gt;ÂÖ∂‰ªñÊúçÂä°&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;logicÊ∂àÊÅØÊúçÂä°ÈõÜÊàêË∑ØÁî±ÂÆ¢Êà∑Á´ØSDKÔºåSDKËÅåË¥£Ôºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ë¥üË¥£ÂíåÁΩëÂÖ≥Â∫ïÂ±ÇÈÄö‰ø°‰∫§‰∫í&lt;/li&gt;
&lt;li&gt;Ë¥üË¥£ÁΩëÂÖ≥ÊúçÂä°ÂØªÂùÄ&lt;/li&gt;
&lt;li&gt;Ë¥üË¥£Â≠òÂÇ®uidÂíågateÂ±ÇÊú∫Âô®IDÂÖ≥Á≥ªÔºàÊúâÁä∂ÊÄÅÔºöÂ§öÁ∫ßÁºìÂ≠òÈÅøÂÖçÂíå‰∏≠Èó¥‰ª∂Â§öÊ¨°‰∫§‰∫í„ÄÇÊó†Áä∂ÊÄÅÔºöÂú®‰∏öÂä°ÂàùÊúüÂèØ‰ª•‰∏çÁî®Â≠òÔºâ&lt;/li&gt;
&lt;li&gt;ÈÖçÂêàÁΩëÂÖ≥Ë¥üË¥£Ë∑ØÁî±‰ø°ÊÅØ‰∏ÄËá¥ÊÄß‰øùËØÅ
&lt;ul&gt;
&lt;li&gt;Â¶ÇÊûúË∑ØÁî±Áä∂ÊÄÅÂíåchannelÈÄöÈÅì‰∏ç‰∏ÄËá¥ÔºåÊØîÂ¶ÇÊúâË∑ØÁî±Áä∂ÊÄÅÔºåÊ≤°ÊúâchannelÈÄöÈÅìÔºàÂ∑≤ÂÖ≥Èó≠ÔºâÈÇ£‰πàÔºåÂ∞±‰ºöËµ∞Á¶ªÁ∫øÊ∂àÊÅØÊµÅÂá∫ÔºåÂπ∂‰∏îÊ∏ÖÈô§Ë∑ØÁî±‰ø°ÊÅØ&lt;/li&gt;
&lt;li&gt;Âä®ÊÄÅÈáçÂêØgateÔºå‰ºöÂèäÊó∂Ê∏ÖÁêÜË∑ØÁî±‰ø°ÊÅØ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SDKÂíåÁΩëÂÖ≥Â∫ïÂ±ÇÈÄö‰ø°ËÆæËÆ°Ôºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/gate_sdk.png&#34; alt=&#34;‰∫§‰∫íËÆæËÆ°Âõæ&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ÁΩëÂÖ≥Â±ÇÂà∞ÊúçÂä°Â±ÇÔºåÂè™ÈúÄË¶ÅÂçïÂêë‰º†ËæìÂèëËØ∑Ê±ÇÔºåÁΩëÂÖ≥Â±Ç‰∏çÈúÄË¶ÅÂÖ≥ÂøÉË∞ÉÁî®ÁöÑÁªìÊûú„ÄÇËÄåÂÆ¢Êà∑Á´ØÊÉ≥Ë¶ÅÁöÑackÊàñËÄÖnotifyËØ∑Ê±ÇÊòØÁî±SDKÂèëÈÄÅÊï∞ÊçÆÂà∞ÁΩëÂÖ≥Â±ÇÔºåSDK‰πü‰∏çÈúÄË¶ÅÂÖ≥ÂøÉË∞ÉÁî®ÁöÑÁªìÊûúÔºåÊúÄÂêéÁΩëÂÖ≥Â±ÇÂè™ËΩ¨ÂèëÊï∞ÊçÆÔºå‰∏çÂÅöÈ¢ùÂ§ñÁöÑÈÄªËæëÂ§ÑÁêÜ&lt;/li&gt;
&lt;li&gt;SDKÂíåÊâÄÊúâÁöÑÁΩëÂÖ≥ËøõË°åÈïøËøûÊé•ÔºåÂΩìÂèëÈÄÅ‰ø°ÊÅØÁªôÂÆ¢Êà∑Á´ØÊó∂ÔºåÊ†πÊçÆË∑ØÁî±ÂØªÂùÄ‰ø°ÊÅØÔºåÂç≥ÂèØÈÄöËøáÈïøËøûÊé•Êé®ÈÄÅ‰ø°ÊÅØ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;3-ÂçèËÆÆËÆæËÆ°&#34;&gt;3. ÂçèËÆÆËÆæËÆ°&lt;/h3&gt;
&lt;h4 id=&#34;30-ÁõÆÊ†á&#34;&gt;3.0 ÁõÆÊ†á&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;È´òÊÄßËÉΩÔºöÂçèËÆÆËÆæËÆ°Á¥ßÂáëÔºå‰øùËØÅÊï∞ÊçÆÂåÖÂ∞èÔºåÂπ∂‰∏îÂ∫èÂàóÂåñÊÄßËÉΩÂ•Ω&lt;/li&gt;
&lt;li&gt;ÂèØÊâ©Â±ïÊÄßÔºöÈíàÂØπÂêéÁª≠‰∏öÂä°ÂèëÂ±ïÔºåÂèØ‰ª•Ëá™Áî±ÁöÑËá™ÂÆö‰πâÂçèËÆÆÔºåÊó†ÈúÄËæÉÂ§ßÊîπÂä®ÂçèËÆÆÁªìÊûÑ&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;31-ËÆæËÆ°&#34;&gt;3.1 ËÆæËÆ°&lt;/h4&gt;
&lt;p&gt;IMÂçèËÆÆÈááÁî®‰∫åËøõÂà∂ÂÆöÈïøÂåÖÂ§¥ÂíåÂèòÈïøÂåÖ‰ΩìÊù•ÂÆûÁé∞ÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÁöÑÈÄö‰ø°ÔºåÂπ∂‰∏îÈááÁî®Ë∞∑Ê≠åprotobufÂ∫èÂàóÂåñÂçèËÆÆÔºåËÆæËÆ°Â¶Ç‰∏ãÔºö&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://zhangyaoo.github.io/post-images/IM-protocol.png&#34; alt=&#34;IMÂçèËÆÆËÆæËÆ°Âõæ&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;p&gt;ÂêÑ‰∏™Â≠óÊÆµÂ¶Ç‰∏ãËß£ÈáäÔºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;headDataÔºöÂ§¥ÈÉ®Ê†áËØÜÔºåÂçèËÆÆÂ§¥Ê†áËØÜÔºåÁî®‰ΩúÁ≤òÂåÖÂçäÂåÖÂ§ÑÁêÜ„ÄÇ4‰∏™Â≠óËäÇ&lt;/li&gt;
&lt;li&gt;versionÔºöÂÆ¢Êà∑Á´ØÁâàÊú¨„ÄÇ4‰∏™Â≠óËäÇ&lt;/li&gt;
&lt;li&gt;cmdÔºö‰∏öÂä°ÂëΩ‰ª§ÔºåÊØîÂ¶ÇÂøÉË∑≥„ÄÅÊé®ÈÄÅ„ÄÅÂçïËÅä„ÄÅÁæ§ËÅä„ÄÇ1‰∏™Â≠óËäÇ&lt;/li&gt;
&lt;li&gt;msgTypeÔºöÊ∂àÊÅØÈÄöÁü•Á±ªÂûã request response notify„ÄÇ1‰∏™Â≠óËäÇ&lt;/li&gt;
&lt;li&gt;logIdÔºöË∞ÉËØïÊÄßÊó•ÂøóÔºåËøΩÊ∫Ø‰∏Ä‰∏™ËØ∑Ê±ÇÁöÑÂÖ®Ë∑ØÂæÑ„ÄÇ4‰∏™Â≠óËäÇ&lt;/li&gt;
&lt;li&gt;sequenceIdÔºöÂ∫èÂàóÂè∑ÔºåÂèØ‰ª•Áî®‰ΩúÂºÇÊ≠•Â§ÑÁêÜ„ÄÇ4‰∏™Â≠óËäÇ&lt;/li&gt;
&lt;li&gt;dataLengthÔºöÊï∞ÊçÆ‰ΩìÁöÑÈïøÂ∫¶„ÄÇ4‰∏™Â≠óËäÇ&lt;/li&gt;
&lt;li&gt;dataÔºöÊï∞ÊçÆ&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;32-ÂÆûË∑µ&#34;&gt;3.2 ÂÆûË∑µ&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;ÈíàÂØπÊï∞ÊçÆdataÔºå&lt;strong&gt;ÁΩëÂÖ≥gateÂ±Ç‰∏çÂÅöÂèçÂ∫èÂàóÂåñÔºåÂèçÂ∫èÂàóÂåñÊ≠•È™§Âú®serviceÂÅö&lt;/strong&gt;ÔºåÈÅøÂÖçÈáçÂ§çÂ∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñÂØºËá¥ÁöÑÊÄßËÉΩÊçüÂ§±&lt;/li&gt;
&lt;li&gt;ÁΩëÂÖ≥Â±Ç‰∏çÂÅö‰∏öÂä°ÈÄªËæëÂ§ÑÁêÜÔºåÂè™ÂÅöÊ∂àÊÅØËΩ¨ÂèëÂíåÊé®ÈÄÅÔºåÂáèÂ∞ëÁΩëÂÖ≥Â±ÇÁöÑÂ§çÊùÇÂ∫¶&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;4-ÂÆâÂÖ®ÁÆ°ÁêÜ&#34;&gt;4. ÂÆâÂÖ®ÁÆ°ÁêÜ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;‰∏∫Èò≤Ê≠¢Ê∂àÊÅØ‰º†ËæìËøáÁ®ã‰∏≠‰∏çË¢´Êà™Ëé∑„ÄÅÁØ°Êîπ„ÄÅ‰º™ÈÄ†ÔºåÈááÁî®TLS‰º†ËæìÂ±ÇÂä†ÂØÜÂçèËÆÆ&lt;/li&gt;
&lt;li&gt;ÁßÅÊúâÂåñÂçèËÆÆÂ§©ÁÑ∂ÂÖ∑Â§á‰∏ÄÂÆöÁöÑÈò≤Á™ÉÂèñÂíåÈò≤ÁØ°ÊîπÁöÑËÉΩÂäõÔºåÁõ∏ÂØπ‰∫é‰ΩøÁî®JSON„ÄÅXML„ÄÅHTMLÁ≠âÊòéÊñá‰º†ËæìÁ≥ªÁªüÔºåË¢´Á¨¨‰∏âÊñπÊà™Ëé∑ÂêéÂú®ÂÜÖÂÆπÁ†¥Ëß£‰∏äÁõ∏ÂØπÊàêÊú¨Êõ¥È´òÔºåÂõ†Ê≠§ÂÆâÂÖ®ÊÄß‰∏ä‰ºöÊõ¥Â•Ω‰∏Ä‰∫õ&lt;/li&gt;
&lt;li&gt;Ê∂àÊÅØÂ≠òÂÇ®ÂÆâÂÖ®ÊÄß:ÈíàÂØπË¥¶Âè∑ÂØÜÁ†ÅÁöÑÂ≠òÂÇ®ÂÆâÂÖ®ÂèØ‰ª•ÈÄöËøá‚ÄúÈ´òÂº∫Â∫¶ÂçïÂêëÊï£ÂàóÁÆóÊ≥ï‚ÄùÂíå‚ÄúÂä†Áõê‚ÄùÊú∫Âà∂Êù•ÊèêÂçáÂä†ÂØÜÂØÜÁ†ÅÂèØÈÄÜÊÄßÔºõIMÊ∂àÊÅØÈááÁî®‚ÄúÁ´ØÂà∞Á´ØÂä†ÂØÜ‚ÄùÊñπÂºèÊù•Êèê‰æõÊõ¥Âä†ÂÆâÂÖ®ÁöÑÊ∂àÊÅØ‰º†Ëæì‰øùÊä§„ÄÇ&lt;/li&gt;
&lt;li&gt;ÂÆâÂÖ®Â±ÇÂçèËÆÆËÆæËÆ°„ÄÇÂü∫‰∫éÂä®ÊÄÅÂØÜÈí•ÔºåÂÄüÈâ¥Á±ª‰ººSSLÔºå‰∏çÈúÄË¶ÅÁî®ËØÅ‰π¶Êù•ÁÆ°ÁêÜ„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;5-Ê∂àÊÅØÊµÅËΩ¨ËÆæËÆ°&#34;&gt;5. Ê∂àÊÅØÊµÅËΩ¨ËÆæËÆ°&lt;/h3&gt;
&lt;p&gt;‰∏Ä‰∏™Ê≠£Â∏∏ÁöÑÊ∂àÊÅØÊµÅËΩ¨ÈúÄË¶ÅÂ¶ÇÂõæÊâÄÁ§∫ÁöÑÊµÅÁ®ãÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/IM-pic1.png&#34; alt=&#34;IMÊ†∏ÂøÉÊµÅÁ®ãÂõæ&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ÂÆ¢Êà∑Á´ØAÂèëÈÄÅËØ∑Ê±ÇÂåÖR&lt;/li&gt;
&lt;li&gt;serverÂ∞ÜÊ∂àÊÅØÂ≠òÂÇ®Âà∞DB&lt;/li&gt;
&lt;li&gt;Â≠òÂÇ®ÊàêÂäüÂêéËøîÂõûÁ°ÆËÆ§ack&lt;/li&gt;
&lt;li&gt;server pushÊ∂àÊÅØÁªôÂÆ¢Êà∑Á´ØB&lt;/li&gt;
&lt;li&gt;ÂÆ¢Êà∑Á´ØBÊî∂Âà∞Ê∂àÊÅØÂêéËøîÂõûÁ°ÆËÆ§ack&lt;/li&gt;
&lt;li&gt;serverÊî∂Âà∞ackÂêéÊõ¥Êñ∞Ê∂àÊÅØÁöÑÁä∂ÊÄÅÊàñËÄÖÂà†Èô§Ê∂àÊÅØ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ÈúÄË¶ÅËÄÉËôëÁöÑÊòØÔºå‰∏Ä‰∏™ÂÅ•Â£ÆÁöÑÁ≥ªÁªüÈúÄË¶ÅËÄÉËôëÂêÑÁßçÂºÇÂ∏∏ÊÉÖÂÜµÔºåÂ¶Ç‰∏¢Ê∂àÊÅØÔºåÈáçÂ§çÊ∂àÊÅØÔºåÊ∂àÊÅØÊó∂Â∫èÈóÆÈ¢ò&lt;/p&gt;
&lt;h4 id=&#34;50-Ê∂àÊÅØÂèØÈù†ÊÄßÂ¶Ç‰Ωï‰øùËØÅ-‰∏ç‰∏¢Ê∂àÊÅØ&#34;&gt;5.0 Ê∂àÊÅØÂèØÈù†ÊÄßÂ¶Ç‰Ωï‰øùËØÅ ‰∏ç‰∏¢Ê∂àÊÅØ&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;Â∫îÁî®Â±ÇACK&lt;/li&gt;
&lt;li&gt;ÂÆ¢Êà∑Á´ØÈúÄË¶ÅË∂ÖÊó∂‰∏éÈáç‰º†&lt;/li&gt;
&lt;li&gt;ÊúçÂä°Á´ØÈúÄË¶ÅË∂ÖÊó∂‰∏éÈáç‰º†ÔºåÂÖ∑‰ΩìÂÅöÊ≥ïÂ∞±ÊòØÂ¢ûÂä†ackÈòüÂàóÂíåÂÆöÊó∂Âô®Timer&lt;/li&gt;
&lt;li&gt;‰∏öÂä°‰æßÂÖúÂ∫ï‰øùËØÅÔºåÂÆ¢Êà∑Á´ØÊãâÊ∂àÊÅØÈÄöËøá‰∏Ä‰∏™Êú¨Âú∞ÁöÑÊóßÁöÑÂ∫èÂàóÂè∑Êù•ÊãâÂèñÊúçÂä°Âô®ÁöÑÊúÄÊñ∞Ê∂àÊÅØ&lt;/li&gt;
&lt;li&gt;‰∏∫‰∫Ü‰øùËØÅÊ∂àÊÅØÂøÖËææÔºåÂú®Á∫øÂÆ¢Êà∑Á´ØËøòÂ¢ûÂä†‰∏Ä‰∏™ÂÆöÊó∂Âô®ÔºåÂÆöÊó∂ÂêëÊúçÂä°Á´ØÊãâÂèñÊ∂àÊÅØÔºåÈÅøÂÖçÊúçÂä°Á´ØÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅÊãâÂèñÈÄöÁü•ÁöÑÂåÖ‰∏¢Â§±ÂØºËá¥ÂÆ¢Êà∑Á´ØÊú™ÂèäÊó∂ÊãâÂèñÊï∞ÊçÆ„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;51-Ê∂àÊÅØÈáçÂ§çÊÄßÂ¶Ç‰Ωï‰øùËØÅ-‰∏çÈáçÂ§ç&#34;&gt;5.1 Ê∂àÊÅØÈáçÂ§çÊÄßÂ¶Ç‰Ωï‰øùËØÅ ‰∏çÈáçÂ§ç&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;Ë∂ÖÊó∂‰∏éÈáç‰º†Êú∫Âà∂Â∞ÜÂØºËá¥Êé•Êî∂ÁöÑclientÊî∂Âà∞ÈáçÂ§çÁöÑÊ∂àÊÅØÔºåÂÖ∑‰ΩìÂÅöÊ≥ïÂ∞±ÊòØ‰∏Ä‰ªΩÊ∂àÊÅØ‰ΩøÁî®Âêå‰∏Ä‰∏™Ê∂àÊÅØIDËøõË°åÂéªÈáçÂ§ÑÁêÜ„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;52-Ê∂àÊÅØÈ°∫Â∫èÊÄßÂ¶Ç‰Ωï‰øùËØÅ-‰∏ç‰π±Â∫è&#34;&gt;5.2 Ê∂àÊÅØÈ°∫Â∫èÊÄßÂ¶Ç‰Ωï‰øùËØÅ ‰∏ç‰π±Â∫è&lt;/h4&gt;
&lt;h5 id=&#34;520-Ê∂àÊÅØ‰π±Â∫èÂΩ±ÂìçÁöÑÂõ†Á¥†&#34;&gt;5.2.0 Ê∂àÊÅØ‰π±Â∫èÂΩ±ÂìçÁöÑÂõ†Á¥†&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;Êó∂Èíü‰∏ç‰∏ÄËá¥ÔºåÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏ãÊØè‰∏™Êú∫Âô®ÁöÑÊó∂Èó¥ÂèØËÉΩÊòØ‰∏ç‰∏ÄËá¥ÁöÑ&lt;/li&gt;
&lt;li&gt;Â§öÂèëÈÄÅÊñπÂíåÂ§öÊé•Êî∂ÊñπÔºåËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊó†Ê≥ï‰øùÂÖàÂèëÁöÑÊ∂àÊÅØË¢´ÂÖàÊî∂Âà∞&lt;/li&gt;
&lt;li&gt;ÁΩëÁªú‰º†ËæìÂíåÂ§öÁ∫øÁ®ãÔºåÁΩëÁªú‰º†Ëæì‰∏çÁ®≥ÂÆöÁöÑËØùÂèØËÉΩÂØºËá¥ÂåÖÂú®Êï∞ÊçÆ‰º†ËæìËøáÁ®ã‰∏≠ÊúâÁöÑÊÖ¢ÊúâÁöÑÂø´„ÄÇÂ§öÁ∫øÁ®ã‰πüÂèØËÉΩÊòØ‰ºöÂØºËá¥Êó∂Â∫è‰∏ç‰∏ÄËá¥ÂΩ±ÂìçÁöÑÂõ†Á¥†&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;‰ª•‰∏äÔºåÂ¶ÇÊûú‰øùÊåÅÁªùÂØπÁöÑÂÆûÁé∞ÔºåÈÇ£‰πàÂè™ËÉΩÊòØ‰∏Ä‰∏™ÂèëÈÄÅÊñπÔºå‰∏Ä‰∏™Êé•Êî∂ÊñπÔºå‰∏Ä‰∏™Á∫øÁ®ãÈòªÂ°ûÂºèÈÄöËÆØÊù•ÂÆûÁé∞„ÄÇÈÇ£‰πàÊÄßËÉΩ‰ºöÈôç‰Ωé„ÄÇ&lt;/p&gt;
&lt;h5 id=&#34;521-Â¶Ç‰Ωï‰øùËØÅÊó∂Â∫è&#34;&gt;5.2.1 Â¶Ç‰Ωï‰øùËØÅÊó∂Â∫è&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ÂçïËÅäÔºöÈÄöËøáÂèëÈÄÅÊñπÁöÑÁªùÂØπÊó∂Â∫èseqÔºåÊù•‰Ωú‰∏∫Êé•Êî∂ÊñπÁöÑÂ±ïÁé∞Êó∂Â∫èseq„ÄÇ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ÂÆûÁé∞ÊñπÂºèÔºöÂèØ‰ª•ÈÄöËøáÊó∂Èó¥Êà≥ÊàñËÄÖÊú¨Âú∞Â∫èÂàóÂè∑ÊñπÂºèÊù•ÂÆûÁé∞&lt;/li&gt;
&lt;li&gt;Áº∫ÁÇπÔºöÊú¨Âú∞Êó∂Èó¥Êà≥‰∏çÂáÜÁ°ÆÊàñËÄÖÊú¨Âú∞Â∫èÂàóÂè∑Âú®ÊÑèÂ§ñÊÉÖÂÜµ‰∏ãÂèØËÉΩ‰ºöÊ∏Ö0ÔºåÈÉΩ‰ºöÂØºËá¥ÂèëÈÄÅÊñπÁöÑÁªùÂØπÊó∂Â∫è‰∏çÂáÜÁ°Æ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Áæ§ËÅäÔºöÂõ†‰∏∫ÂèëÈÄÅÊñπÂ§öÁÇπÂèëÈÄÅÊó∂Â∫è‰∏ç‰∏ÄËá¥ÔºåÊâÄ‰ª•ÈÄöËøáÊúçÂä°Âô®ÁöÑÂçïÁÇπÂÅöÂ∫èÂàóÂåñÔºå‰πüÂ∞±ÊòØÈÄöËøáIDÈÄíÂ¢ûÂèëÂè∑Âô®ÊúçÂä°Êù•ÁîüÊàêseqÔºåÊé•Êî∂ÊñπÈÄöËøáseqÊù•ËøõË°åÂ±ïÁé∞Êó∂Â∫è„ÄÇ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ÂÆûÁé∞ÊñπÂºèÔºöÈÄöËøáÊúçÂä°Á´ØÁªü‰∏ÄÁîüÊàêÂîØ‰∏ÄË∂ãÂäøÈÄíÂ¢ûÊ∂àÊÅØIDÊù•ÂÆûÁé∞ÊàñËÄÖÈÄöËøáredisÁöÑÈÄíÂ¢ûincrÊù•ÂÆûÁé∞&lt;/li&gt;
&lt;li&gt;Áº∫ÁÇπÔºöredisÁöÑÈÄíÂ¢ûincrÊù•ÂÆûÁé∞ÔºåredisÂèñÂè∑ÈÉΩÊòØ‰ªé‰∏ªÂèñÁöÑÔºå‰ºöÊúâÊÄßËÉΩÁì∂È¢à„ÄÇIDÈÄíÂ¢ûÂèëÂè∑Âô®ÊúçÂä°ÊòØÈõÜÁæ§ÈÉ®ÁΩ≤ÔºåÂèØËÉΩ‰∏çÂêåÂèëÂè∑ÊúçÂä°‰∏äÁöÑÈõÜÁæ§Êó∂Èó¥Êà≥‰∏çÂêåÔºåÂèØËÉΩ‰ºöÂØºËá¥ÂêéÂà∞ÁöÑÊ∂àÊÅØseqËøòÂ∞è„ÄÇ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Áæ§ËÅäÊó∂Â∫èÁöÑ‰ºòÂåñÔºöÊåâÁÖß‰∏äÈù¢ÁöÑÁæ§ËÅäÂ§ÑÁêÜÔºå‰∏öÂä°‰∏äÊåâÁÖßÈÅìÁêÜÂè™ÈúÄË¶Å‰øùËØÅÂçï‰∏™Áæ§ÁöÑÊó∂Â∫èÔºå‰∏çÈúÄË¶Å‰øùËØÅÊâÄÊúâÁæ§ÁöÑÁªùÂØπÊó∂Â∫èÔºåÊâÄ‰ª•Ëß£ÂÜ≥ÊÄùË∑ØÂ∞±ÊòØ&lt;strong&gt;Âêå‰∏Ä‰∏™Áæ§ÁöÑÊ∂àÊÅØËêΩÂà∞Âêå‰∏Ä‰∏™ÂèëÂè∑service&lt;/strong&gt;‰∏äÈù¢ÔºåÊ∂àÊÅØseqÈÄöËøáserviceÊú¨Âú∞ÁîüÊàêÂç≥ÂèØ„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;522-ÂÆ¢Êà∑Á´ØÂ¶Ç‰Ωï‰øùËØÅÈ°∫Â∫è&#34;&gt;5.2.2 ÂÆ¢Êà∑Á´ØÂ¶Ç‰Ωï‰øùËØÅÈ°∫Â∫è&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;‰∏∫‰ªÄ‰πàË¶Å‰øùËØÅÈ°∫Â∫èÔºü&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ê∂àÊÅØÂç≥‰ΩøÊåâÁÖßÈ°∫Â∫èÂà∞ËææÊúçÂä°Âô®Á´ØÔºå‰πü‰ºöÂèØËÉΩÂá∫Áé∞Ôºö‰∏çÂêåÊ∂àÊÅØÂà∞ËææÊé•Êî∂Á´ØÂêéÔºåÂèØËÉΩ‰ºöÂá∫Áé∞‚ÄúÂÖà‰∫ßÁîüÁöÑÊ∂àÊÅØÂêéÂà∞‚Äù‚ÄúÂêé‰∫ßÁîüÁöÑÊ∂àÊÅØÂÖàÂà∞‚ÄùÁ≠âÈóÆÈ¢ò„ÄÇÊâÄ‰ª•ÂÆ¢Êà∑Á´ØÈúÄË¶ÅËøõË°åÂÖúÂ∫ïÁöÑÊµÅÈáèÊï¥ÂΩ¢Êú∫Âà∂&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Â¶Ç‰Ωï‰øùËØÅÈ°∫Â∫èÔºü&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Êé•Êî∂ÊñπÊî∂Âà∞Ê∂àÊÅØÂêéËøõË°åÂà§ÂÆöÔºåÂ¶ÇÊûúÂΩìÂâçÊ∂àÊÅØÂ∫èÂè∑Â§ß‰∫éÂâç‰∏ÄÊù°Ê∂àÊÅØÁöÑÂ∫èÂè∑Â∞±Â∞ÜÂΩìÂâçÊ∂àÊÅØËøΩÂä†Âú®‰ºöËØùÈáå&lt;/li&gt;
&lt;li&gt;Âê¶ÂàôÁªßÁª≠ÂæÄÂâçÊü•ÊâæÂÄíÊï∞Á¨¨‰∫åÊù°„ÄÅÁ¨¨‰∏âÊù°Á≠âÊ∂àÊÅØÔºå‰∏ÄÁõ¥Êü•ÊâæÂà∞ÊÅ∞Â•ΩÂ∞è‰∫éÂΩìÂâçÊé®ÈÄÅÊ∂àÊÅØÁöÑÈÇ£Êù°Ê∂àÊÅØÔºåÁÑ∂ÂêéÊèíÂÖ•Âú®ÂÖ∂ÂêéÂ±ïÁ§∫„ÄÇ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;6-Ê∂àÊÅØÈÄöÁü•ËÆæËÆ°&#34;&gt;6 Ê∂àÊÅØÈÄöÁü•ËÆæËÆ°&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Êï¥‰ΩìÊ∂àÊÅØÊé®ÈÄÅÂíåÊãâÂèñÁöÑÊó∂Â∫èÂõæÂ¶Ç‰∏ãÔºö&lt;/strong&gt;&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/msg-pull-push-model.png&#34; alt=&#34;IMÊ∂àÊÅØÊé®ÊãâÊ®°Âûã&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;60-Ê∂àÊÅØÊãâÂèñÊñπÂºèÁöÑÈÄâÊã©&#34;&gt;6.0 Ê∂àÊÅØÊãâÂèñÊñπÂºèÁöÑÈÄâÊã©&lt;/h4&gt;
&lt;p&gt;Êú¨È°πÁõÆÊòØËøõË°åÊé®ÊãâÁªìÂêàÊù•ËøõË°åÊúçÂä°Âô®Á´ØÊ∂àÊÅØÁöÑÊé®ÈÄÅÂíåÂÆ¢Êà∑Á´ØÁöÑÊãâÂèñÔºåÊàë‰ª¨Áü•ÈÅìÂçïpullÂíåÂçïpushÊúâ‰ª•‰∏ãÁº∫ÁÇπÔºö&lt;/p&gt;
&lt;p&gt;ÂçïpullÔºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pullË¶ÅËÄÉËôëÂà∞Ê∂àÊÅØÁöÑÂÆûÊó∂ÊÄßÔºå‰∏çÁü•ÈÅìÊ∂àÊÅØ‰ΩïÊó∂ÈÄÅËææ&lt;/li&gt;
&lt;li&gt;pullË¶ÅËÄÉËôëÂà∞Âì™‰∫õÂ•ΩÂèãÂíåÁæ§Êî∂Âà∞‰∫ÜÊ∂àÊÅØÔºåË¶ÅÂæ™ÁéØÊØè‰∏™Áæ§ÂíåÂ•ΩÂèãÊãøÂà∞Ê∂àÊÅØÂàóË°®ÔºåËØªÊâ©Êï£&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ÂçïpushÔºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pushÂÆûÊó∂ÊÄßÈ´òÔºåÂè™Ë¶ÅÂ∞ÜÊ∂àÊÅØÊé®ÈÄÅÁªôÊé•Êî∂ËÄÖÂ∞±okÔºå‰ΩÜÊòØ‰ºöÈõÜ‰∏≠Ê∂àËÄóÊúçÂä°Âô®ËµÑÊ∫ê„ÄÇÂπ∂‰∏îÂÜçÁæ§ËÅäÈùûÂ∏∏Â§öÔºåËÅäÂ§©È¢ëÁéáÈùûÂ∏∏È´òÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ºöÂ¢ûÂä†ÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÁöÑÁΩëÁªú‰∫§‰∫íÊ¨°Êï∞&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Êé®ÊãâÁªìÂêàÔºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Êé®ÊãâÁªìÂêàÁöÑÊñπÂºèËÉΩÂ§üÂàÜÊëäÊúçÂä°Á´ØÁöÑÂéãÂäõ,ËÉΩ‰øùËØÅÊó∂ÊïàÊÄßÔºåÂèàËÉΩ‰øùËØÅÊÄßËÉΩ&lt;/li&gt;
&lt;li&gt;ÂÖ∑‰ΩìÂÅöÊ≥ïÂ∞±ÊòØÊúâÊñ∞Ê∂àÊÅØÊó∂ÂÄôÔºåÊé®ÈÄÅÂì™‰∏™Â•ΩÂèãÊàñËÄÖÂì™‰∏™Áæ§ÊúâÊñ∞Ê∂àÊÅØÔºå‰ª•ÂèäÊñ∞Ê∂àÊÅØÁöÑÊï∞ÈáèÊàñËÄÖÊúÄÊñ∞Ê∂àÊÅØIDÔºåÂÆ¢Êà∑Á´ØÊåâÈúÄÊ†πÊçÆËá™Ë∫´Êï∞ÊçÆËøõË°åÊãâÂèñ&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;61-Êé®ÊãâÈöîÁ¶ªËÆæËÆ°&#34;&gt;6.1 Êé®ÊãâÈöîÁ¶ªËÆæËÆ°&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;‰∏∫‰ªÄ‰πàÂÅöÈöîÁ¶ª
&lt;ul&gt;
&lt;li&gt;Â¶ÇÊûúÂÆ¢Êà∑Á´Ø‰∏ÄËæπÊ≠£Âú®ÊãâÂèñÊï∞ÊçÆÔºå‰∏ÄËæπÊúâÊñ∞ÁöÑÂ¢ûÈáèÊ∂àÊÅØpushËøáÊù•&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Â¶Ç‰ΩïÂÅöÈöîÁ¶ª
&lt;ul&gt;
&lt;li&gt;Êú¨Âú∞ËÆæÁΩÆ‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑÁä∂ÊÄÅÔºåÂΩìÂÆ¢Êà∑Á´ØÊãâÂèñÂÆåÁ¶ªÁ∫øÊ∂àÊÅØÂêéËÆæÁΩÆÁä∂ÊÄÅ‰∏∫1ÔºàË°®Á§∫Á¶ªÁ∫øÊ∂àÊÅØÊãâÂèñÂÆåÊØïÔºâ„ÄÇÂΩìÂÆ¢Êà∑Á´ØÊî∂Âà∞ÊãâÂèñÂÆûÊó∂Ê∂àÊÅØÔºå‰ºöÂêØÁî®‰∏Ä‰∏™ËΩÆËØ¢ÁõëÂê¨Ëøô‰∏™Áä∂ÊÄÅÔºåÁä∂ÊÄÅ‰∏∫1ÂêéÔºåÂÜçÂéªÂêëÊúçÂä°Âô®ÊãâÂèñÊ∂àÊÅØ„ÄÇ&lt;/li&gt;
&lt;li&gt;Â¶ÇÊûúÊòØpushÊ∂àÊÅØËøáÊù•Ôºà‰∏çÊòØ‰∏ªÂä®ÊãâÂèñÔºâÔºåÈÇ£‰πà‰ºöÂÖàÂ∞ÜÊ∂àÊÅØÂ≠òÂÇ®Âà∞Êú¨Âú∞ÁöÑÊ∂àÊÅØÈòüÂàó‰∏≠ÔºåÁ≠âÂæÖÂÆ¢Êà∑Á´Ø‰∏ä‰∏ÄÊ¨°ÊãâÂèñÊï∞ÊçÆÂÆåÊØïÔºåÁÑ∂ÂêéÂ∞ÜÊï∞ÊçÆËøõË°åÂêàÂπ∂Âç≥ÂèØ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;7-Ê∂àÊÅØidÁîüÊàêËÆæËÆ°&#34;&gt;7 Ê∂àÊÅØIDÁîüÊàêËÆæËÆ°&lt;/h3&gt;
&lt;h5 id=&#34;70-ËÆæËÆ°&#34;&gt;7.0 ËÆæËÆ°&lt;/h5&gt;
&lt;p&gt;ÂÆûÈôÖ‰∏öÂä°ÁöÑÊÉÖÂÜµ„ÄêÂè™ÂÅöÂèÇËÄÉÔºåÂÆûÈôÖÂèØ‰ª•Ê†πÊçÆÂÖ¨Âè∏‰∏öÂä°Á∫øÊù•Ë∞ÉÊï¥„Äë&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ÂçïÊú∫È´òÂ≥∞Âπ∂ÂèëÈáèÂ∞è‰∫é1WÔºåÈ¢ÑËÆ°Êú™Êù•5Âπ¥ÂçïÊú∫È´òÂ≥∞Âπ∂ÂèëÈáèÂ∞è‰∫é10W&lt;/li&gt;
&lt;li&gt;Êúâ2‰∏™Êú∫ÊàøÔºåÈ¢ÑËÆ°Êú™Êù•5Âπ¥Êú∫ÊàøÊï∞ÈáèÂ∞è‰∫é4‰∏™ ÊØè‰∏™Êú∫ÊàøÊú∫Âô®Êï∞Â∞è‰∫é150Âè∞&lt;/li&gt;
&lt;li&gt;ÁõÆÂâçÂè™ÊúâÂçïËÅäÂíåÁæ§ËÅä‰∏§‰∏™‰∏öÂä°Á∫øÔºåÂêéÁª≠ÂèØ‰ª•Êâ©Â±ï‰∏∫Á≥ªÁªüÊ∂àÊÅØ„ÄÅËÅäÂ§©ÂÆ§„ÄÅÂÆ¢ÊúçÁ≠â‰∏öÂä°Á∫øÔºåÊúÄÂ§ö8‰∏™‰∏öÂä°Á∫ø&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ê†πÊçÆ‰ª•‰∏ä‰∏öÂä°ÊÉÖÂÜµÔºåÊù•ËÆæËÆ°ÂàÜÂ∏ÉÂºèIDÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/server-id.jpg&#34; alt=&#34;IMÊúçÂä°Á´ØÂàÜÂ∏ÉÂºèIDËÆæËÆ°&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h5 id=&#34;71-‰ºòÁÇπ&#34;&gt;7.1 ‰ºòÁÇπ&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;‰∏çÂêåÊú∫Êàø‰∏çÂêåÊú∫Âô®‰∏çÂêå‰∏öÂä°Á∫øÂÜÖÁîüÊàêÁöÑID‰∫í‰∏çÁõ∏Âêå&lt;/li&gt;
&lt;li&gt;ÊØè‰∏™Êú∫Âô®ÁöÑÊØèÊØ´ÁßíÂÜÖÁîüÊàêÁöÑID‰∏çÂêå&lt;/li&gt;
&lt;li&gt;È¢ÑÁïô‰∏§‰ΩçÁïô‰ΩúÊâ©Â±ï‰Ωç&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;72-Áº∫ÁÇπ&#34;&gt;7.2 Áº∫ÁÇπÔºö&lt;/h5&gt;
&lt;p&gt;ÂΩìÂπ∂ÂèëÂ∫¶‰∏çÈ´òÁöÑÊó∂ÂÄôÔºåÊó∂Èó¥Ë∑®ÊØ´ÁßíÁöÑÊ∂àÊÅØÔºåÂå∫ÂàÜ‰∏çÂá∫Êù•Ê∂àÊÅØÁöÑÂÖàÂêéÈ°∫Â∫è„ÄÇÂõ†‰∏∫Êó∂Èó¥Ë∑®ÊØ´ÁßíÁöÑÊ∂àÊÅØÁîüÊàêÁöÑIDÂêéÈù¢ÁöÑÊúÄÂêé‰∏Ä‰ΩçÈÉΩÊòØ0ÔºåÂêéÁª≠Â¶ÇÊûúÊåâÁÖßÊ∂àÊÅØIDÁª¥Â∫¶ËøõË°åÂàÜÂ∫ìÂàÜË°®Ôºå‰ºöÂØºËá¥Êï∞ÊçÆÂÄæÊñú&lt;/p&gt;
&lt;h5 id=&#34;73-‰∏§ÁßçËß£ÂÜ≥ÊñπÊ°à&#34;&gt;7.3 ‰∏§ÁßçËß£ÂÜ≥ÊñπÊ°àÔºö&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;ÊñπÊ°à‰∏ÄÔºöÂéªÊéâsnowflakeÊúÄÂêé8‰ΩçÔºåÁÑ∂ÂêéÂØπÂâ©‰ΩôÁöÑ‰ΩçËøõË°åÂèñÊ®°&lt;/li&gt;
&lt;li&gt;ÊñπÊ°à‰∫åÔºö‰∏çÂêåÊØ´ÁßíÁöÑËÆ°Êï∞ÔºåÊØèÊ¨°‰∏çÊòØÂΩí0ÔºåËÄåÊòØÂΩí‰∏∫ÈöèÊú∫Êï∞ÔºåÁõ∏ÊØîÊñπÊ°à‰∏ÄÔºåÊØîËæÉÁÆÄÂçïÂÆûÁî®&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;8-Ê∂àÊÅØÊú™ËØªÊï∞ËÆæËÆ°&#34;&gt;8 Ê∂àÊÅØÊú™ËØªÊï∞ËÆæËÆ°&lt;/h3&gt;
&lt;h4 id=&#34;80-ÂÆûÁé∞&#34;&gt;8.0 ÂÆûÁé∞&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;ÊØèÂèë‰∏Ä‰∏™Ê∂àÊÅØÔºåÊ∂àÊÅØÊé•Êî∂ËÄÖÁöÑ‰ºöËØùÊú™ËØªÊï∞+1ÔºåÂπ∂‰∏îÊé•Êî∂ËÄÖÊâÄÊúâÊú™ËØªÊï∞+1&lt;/li&gt;
&lt;li&gt;Ê∂àÊÅØÊé•Êî∂ËÄÖËøîÂõûÊ∂àÊÅØÊé•Êî∂Á°ÆËÆ§ackÂêéÔºåÊ∂àÊÅØÊú™ËØªÊï∞‰ºö-1&lt;/li&gt;
&lt;li&gt;Ê∂àÊÅØÊé•Êî∂ËÄÖÁöÑÊú™ËØªÊï∞+1ÔºåÊúçÂä°Á´ØÂ∞±‰ºöÊé®ÁÆóÊúâÂ§öÂ∞ëÊù°Êú™ËØªÊï∞ÁöÑÈÄöÁü•&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;81-ÂàÜÂ∏ÉÂºèÈîÅ‰øùËØÅÊÄªÊú™ËØªÊï∞Âíå‰ºöËØùÊú™ËØªÊï∞‰∏ÄËá¥&#34;&gt;8.1 ÂàÜÂ∏ÉÂºèÈîÅ‰øùËØÅÊÄªÊú™ËØªÊï∞Âíå‰ºöËØùÊú™ËØªÊï∞‰∏ÄËá¥&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;‰∏ç‰∏ÄËá¥ÂéüÂõ†ÔºöÂΩìÊÄªÊú™ËØªÊï∞Â¢ûÂä†ÔºåËøô‰∏™Êó∂ÂÄôÂÆ¢Êà∑Á´ØÊù•‰∫ÜËØ∑Ê±ÇÂ∞ÜÊú™Áü•Êï∞ÁΩÆ0ÔºåÁÑ∂ÂêéÂÜçÂ¢ûÂä†‰ºöËØùÊú™ËØªÊï∞ÔºåÈÇ£‰πà‰ºöÂØºËá¥‰∏ç‰∏ÄËá¥&lt;/li&gt;
&lt;li&gt;‰øùËØÅÔºö‰∏∫‰∫Ü‰øùËØÅÊÄªÊú™ËØªÊï∞Âíå‰ºöËØùÊú™ËØªÊï∞ÂéüÂ≠êÊÄßÔºåÈúÄË¶ÅÁî®ÂàÜÂ∏ÉÂºèÈîÅÊù•‰øùËØÅ&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;82-Áæ§ËÅäÊ∂àÊÅØÊú™ËØªÊï∞ÈöæÁÇπÂíå‰ºòÂåñ&#34;&gt;8.2 Áæ§ËÅäÊ∂àÊÅØÊú™ËØªÊï∞ÈöæÁÇπÂíå‰ºòÂåñ&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ÈöæÁÇπ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;‰∏Ä‰∏™Áæ§ËÅäÊØèÁßíÂá†ÁôæÁöÑÂπ∂ÂèëËÅäÂ§©ÔºåÊØîÂ¶ÇÊ∂àÊÅØÊú™ËØªÊï∞ÔºåÁõ∏ÂΩì‰∫éÊØèÁßíWÁ∫ßÂà´ÁöÑÂÜôÂÖ•redisÔºåÂç≥‰æøredisÂÅö‰∫ÜÈõÜÁæ§Êï∞ÊçÆÂàÜÁâá+‰∏ª‰ªéÔºå‰ΩÜÊòØÂÜôÂÖ•ËøòÊòØÂçïËäÇÁÇπÔºå‰ºöÊúâÂÜôÂÖ•Áì∂È¢à&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;‰ºòÂåñ&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Áæ§IDÂàÜÁªÑÊàñËÄÖÁî®Êà∑IDÂàÜÁªÑÔºåÊâπÈáèÂÜôÂÖ•ÔºåÂÜôÂÖ•ÁöÑ‰∏§ÁßçÊñπÂºè
&lt;ul&gt;
&lt;li&gt;ÂÆöÊó∂flush&lt;/li&gt;
&lt;li&gt;Êª°Â§öÂ∞ëÊ∂àÊÅØËøõË°åflush&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;9-ÁΩëÂÖ≥ËÆæËÆ°&#34;&gt;9. ÁΩëÂÖ≥ËÆæËÆ°&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Êé•ÂÖ•Â±ÇÁΩëÂÖ≥ÂíåÂ∫îÁî®Â±ÇÁΩëÂÖ≥‰∏çÂêåÂú∞Êñπ
&lt;ul&gt;
&lt;li&gt;Êé•ÂÖ•Â±ÇÁΩëÂÖ≥ÈúÄË¶ÅÊúâÊé•Êî∂ÈÄöÁü•ÂåÖÊàñËÄÖ‰∏ãË°åÊé•Êî∂Êï∞ÊçÆÁöÑÁ´ØÂè£ÔºåÂπ∂‰∏îÈúÄË¶ÅÂè¶Â§ñÂºÄÂêØÁ∫øÁ®ãÊ±†„ÄÇÂ∫îÁî®Â±ÇÁΩëÂÖ≥‰∏çÈúÄË¶ÅÂºÄÁ´ØÂè£ÔºåÂπ∂‰∏î‰∏çÈúÄË¶ÅÂºÄÂêØÁ∫øÁ®ãÊ±†„ÄÇ&lt;/li&gt;
&lt;li&gt;Êé•ÂÖ•Â±ÇÁΩëÂÖ≥ÈúÄË¶Å‰øùÊåÅÈïøËøûÊé•ÔºåÊé•ÂÖ•Â±ÇÁΩëÂÖ≥ÈúÄË¶ÅÊú¨Âú∞ÁºìÂ≠òchannelÊò†Â∞ÑÂÖ≥Á≥ª„ÄÇÂ∫îÁî®Â±ÇÁΩëÂÖ≥Êó†Áä∂ÊÄÅ‰∏çÈúÄË¶Å‰øùÂ≠ò„ÄÇ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;91-Êé•ÂÖ•Â±ÇÁΩëÂÖ≥ËÆæËÆ°&#34;&gt;9.1 Êé•ÂÖ•Â±ÇÁΩëÂÖ≥ËÆæËÆ°&lt;/h4&gt;
&lt;h5 id=&#34;910-ÁõÆÊ†á&#34;&gt;9.1.0 ÁõÆÊ†áÔºö&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;ÁΩëÂÖ≥ÁöÑÁ∫øÁ®ãÊ±†ÂÆûÁé∞1+8+4+1ÔºåÂáèÂ∞ëÁ∫øÁ®ãÂàáÊç¢&lt;/li&gt;
&lt;li&gt;ÈõÜ‰∏≠ÂÆûÁé∞ÈïøËøûÊé•ÁÆ°ÁêÜÂíåÊé®ÈÄÅËÉΩÂäõ&lt;/li&gt;
&lt;li&gt;‰∏é‰∏öÂä°ÊúçÂä°Âô®Ëß£ËÄ¶ÔºåÈõÜÁæ§ÈÉ®ÁΩ≤Áº©ÂÆπÊâ©ÂÆπ‰ª•ÂèäÈáçÂêØÂçáÁ∫ß‰∏çÁõ∏‰∫íÂΩ±Âìç&lt;/li&gt;
&lt;li&gt;ÈïøËøûÊé•ÁöÑÁõëÊéß‰∏éÊä•Ë≠¶ËÉΩÂäõ&lt;/li&gt;
&lt;li&gt;ÂÆ¢Êà∑Á´ØÈáçËøûÊåá‰ª§‰∏ÄÈîÆÂÆûÁé∞&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;911-ÊäÄÊúØÁÇπ&#34;&gt;9.1.1 ÊäÄÊúØÁÇπÔºö&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;ÊîØÊåÅËá™ÂÆö‰πâÂçèËÆÆ‰ª•ÂèäÂ∫èÂàóÂåñ&lt;/li&gt;
&lt;li&gt;ÊîØÊåÅwebsocketÂçèËÆÆ&lt;/li&gt;
&lt;li&gt;ÈÄöÈÅìËøûÊé•Ëá™ÂÆö‰πâ‰øùÊ¥ª‰ª•ÂèäÂøÉË∑≥Ê£ÄÊµã&lt;/li&gt;
&lt;li&gt;Êú¨Âú∞ÁºìÂ≠òchannel&lt;/li&gt;
&lt;li&gt;Ë¥£‰ªªÈìæ&lt;/li&gt;
&lt;li&gt;ÊúçÂä°Ë∞ÉÁî®ÂÆåÂÖ®ÂºÇÊ≠•&lt;/li&gt;
&lt;li&gt;Ê≥õÂåñË∞ÉÁî®&lt;/li&gt;
&lt;li&gt;ËΩ¨ÂèëÈÄöÁü•ÂåÖÊàñËÄÖPushÂåÖ&lt;/li&gt;
&lt;li&gt;ÂÆπÈîôÁΩëÂÖ≥downÊú∫Â§ÑÁêÜ&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;912-ËÆæËÆ°ÊñπÊ°à&#34;&gt;9.1.2 ËÆæËÆ°ÊñπÊ°àÔºö&lt;/h5&gt;
&lt;p&gt;ÂèÇËÄÉ&lt;a href=&#34;https://github.com/zhangyaoo/fastim/blob/master/fastim-gate/fastim-gate-tcp/README.md&#34;&gt;Âü∫‰∫éNettyÁöÑÈïøËøûÊé•ÁΩëÂÖ≥ËÆæËÆ°‰∏éÂÆûÁé∞&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;‰∏Ä‰∏™NotifyÂåÖÁöÑÊï∞ÊçÆÁªèÁΩëÂÖ≥ÁöÑÁ∫øÁ®ãÊ®°ÂûãÂõæÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/TCP-Gate-ThreadModel.png&#34; alt=&#34;TCPÁΩëÂÖ≥Á∫øÁ®ãÊ®°Âûã&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;92-Â∫îÁî®Â±ÇapiÁΩëÂÖ≥ËÆæËÆ°&#34;&gt;9.2 Â∫îÁî®Â±ÇAPIÁΩëÂÖ≥ËÆæËÆ°&lt;/h4&gt;
&lt;h5 id=&#34;920-ÁõÆÊ†á&#34;&gt;9.2.0 ÁõÆÊ†áÔºö&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;Âü∫‰∫éÁâàÊú¨ÁöÑËá™Âä®ÂèëÁé∞‰ª•ÂèäÁÅ∞Â∫¶/Êâ©ÂÆπ Ôºå‰∏çÈúÄË¶ÅÂÖ≥Ê≥®IP&lt;/li&gt;
&lt;li&gt;ÁΩëÂÖ≥ÁöÑÁ∫øÁ®ãÊ±†ÂÆûÁé∞1+8+1ÔºåÂáèÂ∞ëÁ∫øÁ®ãÂàáÊç¢&lt;/li&gt;
&lt;li&gt;ÊîØÊåÅÂçèËÆÆËΩ¨Êç¢ÂÆûÁé∞Â§ö‰∏™ÂçèËÆÆËΩ¨Êç¢ÔºåÂü∫‰∫éSPIÊù•ÂÆûÁé∞&lt;/li&gt;
&lt;li&gt;‰∏é‰∏öÂä°ÊúçÂä°Âô®Ëß£ËÄ¶ÔºåÈõÜÁæ§ÈÉ®ÁΩ≤Áº©ÂÆπÊâ©ÂÆπ‰ª•ÂèäÈáçÂêØÂçáÁ∫ß‰∏çÁõ∏‰∫íÂΩ±Âìç&lt;/li&gt;
&lt;li&gt;Êé•Âè£ÈîôËØØ‰ø°ÊÅØÁªüËÆ°ÂíåRTÊó∂Èó¥ÁöÑÁõëÊéßÂíåÊä•Ë≠¶ËÉΩÂäõ&lt;/li&gt;
&lt;li&gt;UIÁïåÈù¢ÂÆûÁé∞Ë∑ØÁî±ÁÆóÊ≥ïÔºåÊúçÂä°Êé•Âè£ÁâàÊú¨ÁÆ°ÁêÜÔºåÁÅ∞Â∫¶Á≠ñÁï•ÁÆ°ÁêÜ‰ª•ÂèäÊé•Âè£ÂíåÊúçÂä°‰ø°ÊÅØÂ±ïÁ§∫ËÉΩÂäõ&lt;/li&gt;
&lt;li&gt;Âü∫‰∫éOpenAPIÊèê‰æõÊé•Âè£Á∫ßÂà´ÁöÑËá™Âä®ÁîüÊàêÊñáÊ°£ÁöÑÂäüËÉΩ&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;921-ÊäÄÊúØÁÇπ&#34;&gt;9.2.1 ÊäÄÊúØÁÇπÔºö&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;Http2.0&lt;/li&gt;
&lt;li&gt;channelËøûÊé•Ê±†Â§çÁî®&lt;/li&gt;
&lt;li&gt;Netty http ÊúçÂä°Á´ØÁºñËß£Á†Å&lt;/li&gt;
&lt;li&gt;Ë¥£‰ªªÈìæ&lt;/li&gt;
&lt;li&gt;ÊúçÂä°Ë∞ÉÁî®ÂÆåÂÖ®ÂºÇÊ≠•&lt;/li&gt;
&lt;li&gt;ÂÖ®ÈìæË∑ØË∂ÖÊó∂Êú∫Âà∂&lt;/li&gt;
&lt;li&gt;Ê≥õÂåñË∞ÉÁî®&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;922-ËÆæËÆ°ÊñπÊ°à&#34;&gt;9.2.2 ËÆæËÆ°ÊñπÊ°àÔºö&lt;/h5&gt;
&lt;p&gt;ÂèÇËÄÉ&lt;a href=&#34;https://github.com/zhangyaoo/fastim/blob/master/fastim-gate/fastim-gate-http/README.md&#34;&gt;Âü∫‰∫éNettyÁöÑAPIÁΩëÂÖ≥ËÆæËÆ°‰∏éÂÆûÁé∞&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;‰∏Ä‰∏™ËØ∑Ê±ÇÂåÖÁöÑÊï∞ÊçÆÁªèÁΩëÂÖ≥ÁöÑÊû∂ÊûÑÂõæÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/HTTP-gate.png&#34; alt=&#34;ÁΩëÂÖ≥ÁöÑÊû∂ÊûÑÂõæ&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;10-È´òÂπ∂Âèë-È´òÂèØÁî®ËÆæËÆ°&#34;&gt;10. È´òÂπ∂Âèë„ÄÅÈ´òÂèØÁî®ËÆæËÆ°&lt;/h3&gt;
&lt;h4 id=&#34;100-È´òÂπ∂ÂèëËÆæËÆ°&#34;&gt;10.0 È´òÂπ∂ÂèëËÆæËÆ°&lt;/h4&gt;
&lt;h5 id=&#34;1000-Êû∂ÊûÑ‰ºòÂåñ&#34;&gt;10.0.0 Êû∂ÊûÑ‰ºòÂåñ&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;Ê∞¥Âπ≥Êâ©Â±ïÔºöÂêÑ‰∏™Ê®°ÂùóÊó†Áä∂ÊÄÅÈÉ®ÁΩ≤&lt;/li&gt;
&lt;li&gt;Á∫øÁ®ãÊ®°ÂûãÔºöÊØè‰∏™ÊúçÂä°Â∫ïÂ±ÇÁ∫øÁ®ãÊ®°ÂûãÈÅµ‰ªéNetty‰∏ª‰ªéreactorÊ®°Âûã&lt;/li&gt;
&lt;li&gt;Â§öÂ±ÇÁºìÂ≠òÔºöGateÂ±Ç‰∫åÁ∫ßÁºìÂ≠òÔºåRedis‰∏ÄÁ∫ßÁºìÂ≠ò&lt;/li&gt;
&lt;li&gt;ÈïøËøûÊé•ÔºöÂÆ¢Êà∑Á´ØÈïøËøûÊé•‰øùÊåÅÔºåÈÅøÂÖçÈ¢ëÁπÅÂàõÂª∫ËøûÊé•Ê∂àËÄó&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;1001-‰∏á‰∫∫Áæ§ËÅä‰ºòÂåñ&#34;&gt;10.0.1 ‰∏á‰∫∫Áæ§ËÅä‰ºòÂåñ&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ÈöæÁÇπ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ê∂àÊÅØÊâáÂá∫Â§ßÔºåÊØîÂ¶ÇÊØèÁßíÁæ§ËÅäÊúâ50Êù°Ê∂àÊÅØÔºåÁæ§ËÅä2000‰∫∫ÔºåÈÇ£‰πàÂÖâ‰∏Ä‰∏™Áæ§ÂØπÁ≥ªÁªüÂπ∂ÂèëÂ∞±Êúâ10WÁöÑÊ∂àÊÅØÊâáÂá∫&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;‰ºòÂåñ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ÊâπÈáèACKÔºöÊØèÊù°Áæ§Ê∂àÊÅØÈÉΩACKÔºå‰ºöÁªôÊúçÂä°Âô®ÈÄ†ÊàêÂ∑®Â§ßÁöÑÂÜ≤ÂáªÔºå‰∏∫‰∫ÜÂáèÂ∞ëACKËØ∑Ê±ÇÈáèÔºåÂèÇËÄÉTCPÁöÑDelay ACKÊú∫Âà∂ÔºåÂú®Êé•Êî∂ÊñπÂ±ÇÈù¢ËøõË°åÊâπÈáèACK„ÄÇ&lt;/li&gt;
&lt;li&gt;Áæ§Ê∂àÊÅØÂíåÊàêÂëòÊâπÈáèÂä†ËΩΩ‰ª•ÂèäÊáíÂä†ËΩΩÔºöÂú®ÁúüÊ≠£ËøõÂÖ•‰∏Ä‰∏™Áæ§Êó∂ÊâçÂÆûÊó∂ÊãâÂèñÁæ§ÂèãÁöÑÊï∞ÊçÆ&lt;/li&gt;
&lt;li&gt;Áæ§Á¶ªÁ∫øÊ∂àÊÅØËøáÂ§öÔºöÁæ§Ê∂àÊÅØÂàÜÈ°µÊãâÂèñ,Á¨¨‰∫åÊ¨°ÊãâÂèñËØ∑Ê±Ç‰Ωú‰∏∫Á¨¨‰∏ÄÊ¨°ÊãâÂèñËØ∑Ê±ÇÁöÑack&lt;/li&gt;
&lt;li&gt;ÂØπ‰∫éÊ∂àÊÅØÊú™ËØªÊï∞Âú∫ÊôØÔºåÊØè‰∏™Áî®Êà∑Áª¥Êä§‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑÊú™ËØªÊï∞ÂíåÊØè‰∏™‰ºöËØùÁöÑÊú™ËØªÊï∞ÔºåÂΩìÁæ§ËÅäÈùûÂ∏∏Â§ßÊó∂ÔºåÊú™ËØªËµÑÊ∫êÂèòÊõ¥ÁöÑQPSÈùûÂ∏∏Â§ß„ÄÇËøô‰∏™Êó∂ÂÄôÂ∫îÁî®Â±ÇÂØπÊú™ËØªÊï∞ËøõË°åÁºìÂ≠òÔºåÊâπÈáèÂÜô+ÂÆöÊó∂ÂÜôÊù•‰øùËØÅÊú™ËØªËÆ°Êï∞ÁöÑÂÜôÂÖ•ÊÄßËÉΩ&lt;/li&gt;
&lt;li&gt;Ë∑ØÁî±‰ø°ÊÅØÂ≠òÂÖ•redis‰ºöÊúâÂÜôÂÖ•ÂíåËØªÂèñÁöÑÊÄßËÉΩÁì∂È¢àÔºåÊØèÊù°Ê∂àÊÅØÂú®ÂèëÂá∫ÁöÑÊó∂ÂÄô‰ºöÊü•Ë∑ØÁî±‰ø°ÊÅØÊù•ÂèëÈÄÅÂØπÂ∫îÁöÑgateÊé•ÂÖ•Â±ÇÔºåÊØîÂ¶ÇÊúâ10‰∏™Áæ§ÔºåÊØè‰∏™Áæ§1WÔºåÈÇ£‰πà1s100Êù°Ê∂àÊÅØÔºåÈÇ£‰πà1000WÁöÑÊü•ËØ¢‰ºöÊâìÊª°redisÔºåÂç≥‰ΩøredisÂÅö‰∫ÜÈõÜÁæ§„ÄÇ‰ºòÂåñÁöÑÊÄùË∑ØÂ∞±ÊòØÂ∞ÜÈõÜ‰∏≠ÁöÑË∑ØÁî±‰ø°ÊÅØÂàÜÊï£Âà∞msgÂ±Ç JVMÊú¨Âú∞ÂÜÖÂ≠ò‰∏≠ÔºåÁÑ∂ÂêéÂÅöRouteÂèØÁî®ÔºåÈÅøÂÖçÂçïÁÇπÊïÖÈöú„ÄÇ&lt;/li&gt;
&lt;li&gt;Â≠òÂÇ®ÁöÑ‰ºòÂåñÔºåÊâ©Êï£ÂÜôÂÜôÂÖ•Âπ∂ÂèëÈáèÂ∑®Â§ßÔºåÂè¶‰∏ÄÊñπÈù¢‰πüÂ≠òÂú®Â≠òÂÇ®Êµ™Ë¥πÔºå‰∏ÄËà¨‰ºòÂåñÊàêÊâ©Êï£ËØªÁöÑÊñπÂºèÂ≠òÂÇ®&lt;/li&gt;
&lt;li&gt;Ê∂àÊÅØË∑ØÁî±Âà∞Áõ∏ÂêåÊé•ÂÖ•Â±ÇÊú∫Âô®ËøõË°åÂêàÂπ∂ËØ∑Ê±ÇÂáèÂ∞ëÁΩëÁªúÂåÖ‰º†Ëæì&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;1002-‰ª£Á†Å‰ºòÂåñ&#34;&gt;10.0.2 ‰ª£Á†Å‰ºòÂåñ&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;Êú¨Âú∞‰ºöËØù‰ø°ÊÅØÁî±‰∏Ä‰∏™hashmap‰øùÊåÅÔºåÂØºËá¥ÈîÅÊú∫Âà∂‰∏•ÈáçÔºåÊåâÁÖßÁî®Êà∑Ê†áËØÜËøõË°åhash,ËÆ≤‰ºöËØù‰ø°ÊÅØÂ≠òÂú®Â§ö‰∏™map‰∏≠ÔºåÂáèÂ∞ëÈîÅÁ´û‰∫â&lt;/li&gt;
&lt;li&gt;Âà©Áî®ÂèåbufferÊú∫Âà∂ÔºåÈÅøÂÖçÊú™ËØªËÆ°Êï∞ÂÜôÂÖ•ÈòªÂ°û&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;1003-Êé®ÊãâÁªìÂêà‰ºòÂåñÂêàÂπ∂&#34;&gt;10.0.3 Êé®ÊãâÁªìÂêà‰ºòÂåñÂêàÂπ∂&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;ËÉåÊôØÔºöÊ∂àÊÅØ‰∏ãÂèëÂà∞Áæ§ËÅäÊúçÂä°ÂêéÔºåÈúÄË¶ÅÂèëÈÄÅÊãâÂèñÈÄöÁü•ÁªôÊé•Êî∂ËÄÖÔºåÂÖ∑‰ΩìÈÄªËæëÊòØÁæ§ËÅäÊúçÂä°ÂêåÊ≠•Ê∂àÊÅØÂà∞Ë∑ØÁî±Â±ÇÔºåË∑ØÁî±Â±ÇÂèëÈÄÅÊ∂àÊÅØÁªôÊé•Êî∂ËÄÖÔºåÊé•Êî∂ËÄÖÂÜçÊù•ÊãâÂèñÊ∂àÊÅØ„ÄÇ&lt;/li&gt;
&lt;li&gt;ÈóÆÈ¢òÔºöÂ¶ÇÊûúÊ∂àÊÅØËøûÁª≠ÂèëÈÄÅÊàñËÄÖÂØπÂêå‰∏Ä‰∏™Êé•Êî∂ËÄÖËøûÁª≠ÂèëÈÄÅÊ∂àÊÅØÈ¢ëÁéáËøáÈ´òÔºå‰ºöÊúâËÆ∏Â§öÁöÑÈÄöÁü•Ê∂àÊÅØÂèëÈÄÅÁªôË∑ØÁî±Â±ÇÔºåÊ∂àÊÅØÈáèËøáÂ§ßÔºåÂèØËÉΩ‰ºöÂØºËá¥logicÁ∫øÁ®ãÂ†ÜÁßØÔºåËØ∑Ê±ÇË∑ØÁî±Â±ÇÈòªÂ°û„ÄÇ&lt;/li&gt;
&lt;li&gt;Ëß£ÂÜ≥ÔºöÂèëÈÄÅËÄÖÂèëÈÄÅÊ∂àÊÅØÂà∞ÈÄªËæëÂ±ÇÊåÅ‰πÖÂåñÂêéÔºåÂ∞ÜÈÄöÁü•Ê∂àÊÅØÂÖàÂ≠òÊîæ‰∏Ä‰∏™ÈòüÂàó‰∏≠ÔºåÁõ∏ÂêåÁöÑÊé•Êî∂ËÄÖÊé•Êî∂Ê∂àÊÅØÈÄöÁü•Ê∂àÊÅØÂêéÔºåÊõ¥Êñ∞Áõ∏Â∫îÁöÑÊúÄÊñ∞Ê∂àÊÅØÈÄöÁü•Êó∂Èó¥ÔºåÁÑ∂ÂêéËΩÆËÆ≠Á∫øÁ®ã‰ºöËΩÆËÆ≠ÈòüÂàóÔºåÂ∞ÜÂ§ö‰∏™Ê∂àÊÅØ‰ºöÂêàÂπ∂‰∏∫‰∏Ä‰∏™ÈÄöÁü•ÊãâÂèñÂèëÈÄÅËá≥Ë∑ØÁî±Â±ÇÔºåÈôç‰Ωé‰∫ÜÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Á´ØÁöÑÁΩëÁªúÊ∂àËÄóÂíåÊúçÂä°Âô®ÂÜÖÈÉ®ÁΩëÁªúÊ∂àËÄó„ÄÇ&lt;/li&gt;
&lt;li&gt;Â•ΩÂ§ÑÔºö‰øùËØÅÂêå‰∏ÄÊó∂ÂàªÔºå‰∏ãÂèëÁ∫øÁ®ã‰∏ÄËΩÆÂè™‰ºöÂêëÂêå‰∏ÄÁî®Êà∑ÂèëÈÄÅ‰∏Ä‰∏™ÈÄöÁü•ÊãâÂèñÔºå‰∏ÄËΩÆÁöÑÊó∂Èó¥ÂèØ‰ª•Ëá™Ë°åÊéßÂà∂&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/notifymerge.png&#34; alt=&#34;ÂÆ¢Êà∑Á´ØÂ∫èÂàóÂè∑&#34; loading=&#34;lazy&#34;&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;101-È´òÂèØÁî®ËÆæËÆ°&#34;&gt;10.1 È´òÂèØÁî®ËÆæËÆ°&lt;/h4&gt;
&lt;h5 id=&#34;1010-ÂøÉË∑≥ËÆæËÆ°&#34;&gt;10.1.0 ÂøÉË∑≥ËÆæËÆ°&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;ÊúçÂä°Á´ØÊ£ÄÊµãÂà∞Êüê‰∏™ÂÆ¢Êà∑Á´ØËøüËøüÊ≤°ÊúâÂøÉË∑≥ËøáÊù•ÂèØ‰ª•‰∏ªÂä®ÂÖ≥Èó≠ÈÄöÈÅìÔºåËÆ©ÂÆÉ‰∏ãÁ∫øÔºåÂπ∂‰∏îÊ∏ÖÈô§Âú®Á∫ø‰ø°ÊÅØÂíåË∑ØÁî±‰ø°ÊÅØÔºõ&lt;/li&gt;
&lt;li&gt;ÂÆ¢Êà∑Á´ØÊ£ÄÊµãÂà∞Êüê‰∏™ÊúçÂä°Á´ØËøüËøüÊ≤°ÊúâÂìçÂ∫îÂøÉË∑≥‰πüËÉΩÈáçËøûËé∑Âèñ‰∏Ä‰∏™Êñ∞ÁöÑËøûÊé•„ÄÇ&lt;/li&gt;
&lt;li&gt;Êô∫ËÉΩÂøÉË∑≥Á≠ñÁï•ÔºåÊØîÂ¶ÇÊ≠£Âú®ÂèëÂåÖÁöÑÊó∂ÂÄôÔºå‰∏çÈúÄË¶ÅÂèëÈÄÅÂøÉË∑≥„ÄÇÁ≠âÂæÖÂèëÂåÖÂÆåÊØïÂêéÂú®ÂºÄÂêØÂøÉË∑≥„ÄÇÂπ∂‰∏îËá™ÈÄÇÂ∫îÂøÉË∑≥Á≠ñÁï•Ë∞ÉÊï¥„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;1011-ÂºÇÂ∏∏Âú∫ÊôØËÆæËÆ°&#34;&gt;10.1.1 ÂºÇÂ∏∏Âú∫ÊôØËÆæËÆ°&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;gateÂ±ÇÈáçÂêØÂçáÁ∫ßÊàñËÄÖÊÑèÂ§ñdownÊú∫Êúâ‰ª•‰∏ãÈóÆÈ¢òÔºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ÂÆ¢Êà∑Á´ØÂíågateÊÑèÂ§ñ‰∏¢Â§±ÈïøËøûÊé•ÔºåÂØºËá¥ ÂÆ¢Êà∑Á´ØÂú®ÂèëÈÄÅÊ∂àÊÅØÁöÑÊó∂ÂÄôÂØºËá¥Ê∂àÊÅØË∂ÖÊó∂Á≠âÂæÖ‰ª•ÂèäÂÆ¢Êà∑Á´ØÈáçËØïÁ≠âÊó†ÊÑè‰πâÊìç‰Ωú&lt;/li&gt;
&lt;li&gt;ÂèëÈÄÅÁªôÂÆ¢Êà∑Á´ØÁöÑÊ∂àÊÅØÔºå‰ªéMsgÊ∂àÊÅØÂ±ÇËΩ¨ÂèëÁªôgateÁöÑÊ∂àÊÅØ‰∏¢Â§±ÔºåÂØºËá¥Ê∂àÊÅØË∂ÖÊó∂Á≠âÂæÖ‰ª•ÂèäÈáçËØï„ÄÇ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ëß£ÂÜ≥ÊñπÊ°àÂ¶Ç‰∏ãÔºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ÈáçÂêØÂçáÁ∫ßÊó∂ÂÄôÔºåÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅÈáçÊñ∞ËøûÊé•Êåá‰ª§ÔºåËÆ©ÂÆ¢Êà∑Á´ØÈáçÊñ∞ËØ∑Ê±ÇLSBËé∑ÂèñIPÁõ¥Ëøû„ÄÇ&lt;/li&gt;
&lt;li&gt;ÂΩìgateÂ±ÇdownÊú∫ÂºÇÂ∏∏ÂÅúÊ≠¢Êó∂ÂÄôÔºåÂ¢ûÂä†hookÈí©Â≠êÔºåÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅÈáçÊñ∞ËøûÊé•Êåá‰ª§„ÄÇ&lt;/li&gt;
&lt;li&gt;È¢ùÂ§ñÂ¢ûÂä†hookÔºåÂêëMsgÊ∂àÊÅØÂ±ÇÂèëÈÄÅËØ∑Ê±ÇÊ∏ÖÁ©∫Ë∑ØÁî±Ê∂àÊÅØÂíåÂú®Á∫øÁä∂ÊÄÅ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h5 id=&#34;1012-Á≥ªÁªüÁ®≥ÂÆöÊÄßËÆæËÆ°&#34;&gt;10.1.2 Á≥ªÁªüÁ®≥ÂÆöÊÄßËÆæËÆ°&lt;/h5&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ËÉåÊôØÔºöÈ´òÂ≥∞ÊúüÁ≥ªÁªüÂéãÂäõÂ§ßÔºåÂÅ∂ÂèëÁöÑÁΩëÁªúÊ≥¢Âä®ÊàñËÄÖÊú∫Âô®ËøáËΩΩÔºåÈÉΩÊúâÂèØËÉΩÂØºËá¥Â§ßÈáèÁöÑÁ≥ªÁªüÂ§±Ë¥•„ÄÇÂä†‰∏äIMÁ≥ªÁªüË¶ÅÊ±ÇÂÆûÊó∂ÊÄßÔºå‰∏çËÉΩÁî®ÂºÇÊ≠•Â§ÑÁêÜÂÆûÊó∂ÂèëËøáÊù•ÁöÑÊ∂àÊÅØ„ÄÇÊâÄ‰ª•Êúâ‰∫ÜÊüîÊÄß‰øùÊä§Êú∫Âà∂Èò≤Ê≠¢Èõ™Â¥©&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ÊüîÊÄß‰øùÊä§Êú∫Âà∂ÂºÄÂêØÂà§Êñ≠ÊåáÊ†áÔºåÂΩìÊØè‰∏™ÊåáÊ†á‰∏çÂú®Âπ≥ÂùáËåÉÂõ¥ÂÜÖÁöÑÊó∂ÂÄôÂ∞±ÂºÄÂêØ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ÊØèÊù°Ê∂àÊÅØÁöÑackÊó∂Èó¥ RTÊó∂Èó¥&lt;/li&gt;
&lt;li&gt;ÂêåÊó∂Âú®Á∫ø‰∫∫Êï∞‰ª•ÂèäÂêåÊó∂ÂèëÊ∂àÊÅØÁöÑ‰∫∫Êï∞&lt;/li&gt;
&lt;li&gt;ÊØèÂè∞Êú∫Âô®ÁöÑË¥üËΩΩCPUÂíåÂÜÖÂ≠òÂíåÁΩëÁªúIOÂíåÁ£ÅÁõòIO‰ª•ÂèäGCÂèÇÊï∞&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ÂΩìÂºÄÂêØ‰∫ÜÊüîÊÄß‰øùÊä§Êú∫Âà∂ÔºåÈÇ£‰πà‰ºöËøîÂõûÂ§±Ë¥•ÔºåÁî®Êà∑Á´Ø‰ΩìÈ™å‰∏çÂèãÂ•ΩÔºåÂ¶Ç‰Ωï‰ºòÂåñ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ÂΩìÂºÄÂêØ‰∫ÜÊüîÊÄß‰øùÊä§Êú∫Âà∂ÔºåÈÄªËæëÂ±Çhold‰ΩèÂ§ö‰ΩôÁöÑËØ∑Ê±ÇÔºåËøîÂõûÂâçÁ´ØÊàêÂäüÔºå‰∏çÊòæÁ§∫ÂèëÈÄÅÂ§±Ë¥•ÔºåÂêéÁ´ØÂºÇÊ≠•ÈáçËØïÔºåÁõ¥Ëá≥ÊàêÂäüÔºõ&lt;/li&gt;
&lt;li&gt;‰∏∫‰∫ÜÈÅøÂÖçÈáçËØïÂä†ÂâßÁ≥ªÁªüËøáËΩΩÔºåÊåáÊï∞Êó∂Èó¥Âª∂ËøüÈáçËØï&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;11-Ê†∏ÂøÉË°®ÁªìÊûÑËÆæËÆ°&#34;&gt;11. Ê†∏ÂøÉË°®ÁªìÊûÑËÆæËÆ°&lt;/h3&gt;
&lt;p&gt;Ê†∏ÂøÉËÆæËÆ°ÁÇπ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Áæ§Ê∂àÊÅØÂè™Â≠òÂÇ®‰∏Ä‰ªΩÔºåÁî®Êà∑‰∏çÈúÄË¶Å‰∏∫ÊØè‰∏™Ê∂àÊÅØÂçïÁã¨Â≠ò‰∏Ä‰ªΩ„ÄÇÁî®Êà∑‰πüÊó†ÈúÄÂéªÂà†Èô§Áæ§Ê∂àÊÅØ„ÄÇ&lt;/li&gt;
&lt;li&gt;ÂØπ‰∫éÂú®Á∫øÁöÑÁî®Êà∑ÔºåÊî∂Âà∞Áæ§Ê∂àÊÅØÂêéÔºå‰øÆÊîπËøô‰∏™last_ack_msg_id„ÄÇ&lt;/li&gt;
&lt;li&gt;ÂØπ‰∫éÁ¶ªÁ∫øÁî®Êà∑ÔºåÁî®Êà∑‰∏äÁ∫øÂêéÔºåÂØπÊØîÊúÄÊñ∞ÁöÑÊ∂àÊÅØIDÂíålast_ack_msg_idÔºåÊù•ËøõË°åÊãâÂèñ(ÂèÇËÄÉKafkaÁöÑÊ∂àË¥πËÄÖÊ®°Âûã)&lt;/li&gt;
&lt;li&gt;ÂØπÂ∫îÂçïËÅäÔºåÈúÄË¶ÅËÆ∞ÂΩïÊ∂àÊÅØÁöÑÈÄÅËææÁä∂ÊÄÅÔºå‰ª•‰æøÂú®ÂºÇÂ∏∏ÊÉÖÂÜµ‰∏ãÊù•ÂÅöÈáçËØïÂ§ÑÁêÜ&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;Áæ§Áî®Êà∑Ê∂àÊÅØË°®-t_group_user_msg&#34;&gt;Áæ§Áî®Êà∑Ê∂àÊÅØË°® t_group_user_msg&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Â≠óÊÆµ&lt;/th&gt;
&lt;th&gt;Á±ªÂûã&lt;/th&gt;
&lt;th&gt;ÊèèËø∞&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;id&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;Ëá™Â¢ûID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;group_id&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;Áæ§ID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;user_id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;Áî®Êà∑ID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;last_ack_msg_id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;ÊúÄÂêé‰∏ÄÊ¨°ackÁöÑÊ∂àÊÅØID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;user_device_type&lt;/td&gt;
&lt;td&gt;tinyint&lt;/td&gt;
&lt;td&gt;Áî®Êà∑ËÆæÂ§áÁ±ªÂûã&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;is_deleted&lt;/td&gt;
&lt;td&gt;tinyint&lt;/td&gt;
&lt;td&gt;ÊòØÂê¶Âà†Èô§,Ê†πÊçÆËøô‰∏™Â≠óÊÆµÂêéÁª≠ÂèØ‰ª•ÂÅöÂÜ∑Â§áÂΩíÊ°£&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;Áæ§Ê∂àÊÅØË°®-t_group_msg&#34;&gt;Áæ§Ê∂àÊÅØË°® t_group_msg&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Â≠óÊÆµ&lt;/th&gt;
&lt;th&gt;Á±ªÂûã&lt;/th&gt;
&lt;th&gt;ÊèèËø∞&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;id&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;Ëá™Â¢ûID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;msg_id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;Ê∂àÊÅØID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;group_id&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;Áæ§ID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;sender_id&lt;/td&gt;
&lt;td&gt;bigint&lt;/td&gt;
&lt;td&gt;ÂèëÈÄÅÊñπID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;msg_type&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;Ê∂àÊÅØÁ±ªÂûã&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;msg_content&lt;/td&gt;
&lt;td&gt;varchar&lt;/td&gt;
&lt;td&gt;Ê∂àÊÅØÂÜÖÂÆπ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;12-Ê†∏ÂøÉ‰∏öÂä°ÊµÅÁ®ã&#34;&gt;12 Ê†∏ÂøÉ‰∏öÂä°ÊµÅÁ®ã&lt;/h3&gt;
&lt;h4 id=&#34;120-Áî®Êà∑aÂèëÊ∂àÊÅØÁªôÁî®Êà∑b-ÂçïËÅä&#34;&gt;12.0 Áî®Êà∑AÂèëÊ∂àÊÅØÁªôÁî®Êà∑B „ÄêÂçïËÅä„Äë&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;AÈÄöËøáË¥¶Âè∑ÂØÜÁ†ÅÁôªÂΩïËé∑ÂèñtokenÔºå‰ª•ÂèäÊé•ÂÖ•Â±ÇIPÂíåport‰ø°ÊÅØ&lt;/li&gt;
&lt;li&gt;Êé•ÂÖ•Â±ÇIPÂíåport‰ø°ÊÅØËøõË°åËøúÁ®ãTCPËøûÊé•ÔºåÊé•ÂÖ•Â±ÇÁª¥Êä§ÁôªÂΩïÁä∂ÊÄÅ&lt;/li&gt;
&lt;li&gt;ÊúçÂä°Â±ÇÊ†°È™åtokenÔºåtokenÊ†°È™åÈÄöËøá&lt;/li&gt;
&lt;li&gt;AÊâìÂåÖÊï∞ÊçÆÂèëÈÄÅÁªôÊúçÂä°Á´ØÔºå ÊúçÂä°Á´ØÊ£ÄÊµãAÁî®Êà∑ÊòØÂê¶È£éÈô©Áî®Êà∑&lt;/li&gt;
&lt;li&gt;ÊúçÂä°Á´ØÂØπÊ∂àÊÅØËøõË°åÊïèÊÑüËØçÊ£ÄÊü•Ôºå‰ª•ÂèäÂèëÈÄÅÈ¢ëÁéáÁöÑÈôêÂà∂Ê£ÄÊü•&lt;/li&gt;
&lt;li&gt;ÊúçÂä°Á´ØÊé•Êî∂Ê∂àÊÅØÂêéÔºåÊ†πÊçÆÊé•Êî∂Ê∂àÊÅØÁöÑsequence_idÊù•ËøõË°åÂÆ¢Êà∑Á´ØÂèëÈÄÅÊ∂àÊÅØÁöÑÂéªÈáçÔºåÂπ∂‰∏îÁîüÊàêÈÄíÂ¢ûÁöÑÊ∂àÊÅØIDÔºåÂ∞ÜÂèëÈÄÅÁöÑ‰ø°ÊÅØÂíåIDÊâìÂåÖ‰∏ÄÂùóÂÖ•Â∫ìÔºåÂÖ•Â∫ìÊàêÂäüÂêéËøîÂõûACKÔºåACKÂåÖÂ∏¶‰∏äÊúçÂä°Á´ØÁîüÊàêÁöÑÊ∂àÊÅØID&lt;/li&gt;
&lt;li&gt;ÊúçÂä°Á´ØÊ£ÄÊµãÊé•Êî∂Áî®Êà∑BÊòØÂê¶Âú®Á∫øÔºåÂú®Á∫øÁõ¥Êé•Êé®ÈÄÅÁªôÁî®Êà∑B&lt;/li&gt;
&lt;li&gt;Â¶ÇÊûúÊ≤°ÊúâÊú¨Âú∞Ê∂àÊÅØIDÂàôÂ≠òÂÖ•ÔºåÂπ∂‰∏îËøîÂõûÊé•ÂÖ•Â±ÇACK‰ø°ÊÅØÔºõÂ¶ÇÊûúÊúâÂàôÊãøÊú¨Âú∞sequence_idÂíåÊé®ÈÄÅËøáÊù•ÁöÑsequence_idÂ§ßÂ∞èÂØπÊØîÔºåÂπ∂‰∏îÂéªÈáçÔºåËøõË°åÂ±ïÁé∞Êó∂Â∫èËøõË°åÊéíÂ∫èÂ±ïÁ§∫ÔºåÂπ∂‰∏îËÆ∞ÂΩïÊúÄÊñ∞‰∏ÄÊù°Ê∂àÊÅØID„ÄÇÊúÄÂêéËøîÂõûÊé•ÂÖ•Â±Çack&lt;/li&gt;
&lt;li&gt;ÊúçÂä°Á´ØÊé•Êî∂ACKÂêéÔºåÂ∞ÜÊ∂àÊÅØÊ†á‰∏∫Â∑≤ÈÄÅËææ&lt;/li&gt;
&lt;li&gt;Â¶ÇÊûúÁî®Êà∑B‰∏çÂú®Á∫ø,È¶ñÂÖàÂ∞ÜÊ∂àÊÅØÂ≠òÂÖ•Â∫ì‰∏≠ÔºåÁÑ∂ÂêéÁõ¥Êé•ÈÄöËøáÊâãÊú∫ÈÄöÁü•Êù•ÂëäÁü•ÂÆ¢Êà∑Êñ∞Ê∂àÊÅØÂà∞Êù•&lt;/li&gt;
&lt;li&gt;Áî®Êà∑B‰∏äÁ∫øÂêéÔºåÊãøÊú¨Âú∞ÊúÄÊñ∞ÁöÑÊ∂àÊÅØIDÔºåÂéªÊúçÂä°Á´ØÊãâÂèñÊâÄÊúâÂ•ΩÂèãÂèëÈÄÅÁªôBÁöÑÊ∂àÊÅØÔºåËÄÉËôëÂà∞‰∏ÄÊ¨°ÊãâÂèñÊâÄÊúâÊ∂àÊÅØÊï∞ÊçÆÈáèÂ§ßÔºåÈÄöËøáchannelÈÄöÈÅìÊù•ËøõË°åÂàÜÈ°µÊãâÂèñÔºåÂ∞Ü‰∏ä‰∏ÄÊ¨°ÊãâÂèñÊ∂àÊÅØÁöÑÊúÄÂ§ßÁöÑIDÔºå‰Ωú‰∏∫ËØ∑Ê±ÇÂèÇÊï∞ÔºåÊù•ËØ∑Ê±ÇÊúÄÊñ∞‰∏ÄÈ°µÁöÑÊØîIDÂ§ßÁöÑÊï∞ÊçÆ„ÄÇ&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;121-Áî®Êà∑aÂèëÊ∂àÊÅØÁªôÁæ§g-Áæ§ËÅä&#34;&gt;12.1 Áî®Êà∑AÂèëÊ∂àÊÅØÁªôÁæ§G „ÄêÁæ§ËÅä„Äë&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ÁôªÂΩïÔºåTCPËøûÊé•ÔºåtokenÊ†°È™åÔºåÂêçËØçÊ£ÄÊü•Ôºåsequence_idÂéªÈáçÔºåÁîüÊàêÈÄíÂ¢ûÁöÑÊ∂àÊÅØIDÔºåÁæ§Ê∂àÊÅØÂÖ•Â∫ìÊàêÂäüËøîÂõûÂèëÈÄÅÊñπACK&lt;/li&gt;
&lt;li&gt;Êü•ËØ¢Áæ§GÊâÄÊúâÁöÑÊàêÂëòÔºåÁÑ∂ÂêéÂéªredis‰∏≠Â§ÆÂ≠òÂÇ®‰∏≠ÊâæÂú®Á∫øÁä∂ÊÄÅ„ÄÇÁ¶ªÁ∫øÂíåÂú®Á∫øÊàêÂëòÂàÜ‰∏çÂêåÁöÑÊñπÂºèÂ§ÑÁêÜ&lt;/li&gt;
&lt;li&gt;Âú®Á∫øÊàêÂëòÔºöÂπ∂Ë°åÂèëÈÄÅÊãâÂèñÈÄöÁü•ÔºåÁ≠âÂæÖÂú®Á∫øÊàêÂëòËøáÊù•ÊãâÂèñÔºåÂèëÈÄÅÊãâÂèñÈÄöÁü•ÂåÖÂ¶Ç‰∏¢Â§±‰ºöÊúâÂÖúÂ∫ïÊú∫Âà∂&lt;/li&gt;
&lt;li&gt;Âú®Á∫øÊàêÂëòËøáÊù•ÊãâÂèñÔºå‰ºöÂ∏¶‰∏äËøô‰∏™Áæ§Ê†áËØÜÂíå‰∏ä‰∏ÄÊ¨°ÊãâÂèñÁæ§ÁöÑÊúÄÂ∞èÊ∂àÊÅØIDÔºåÊúçÂä°Á´Ø‰ºöÊâæÊØîËøô‰∏™Ê∂àÊÅØIDÂ§ßÁöÑÊâÄÊúâÁöÑÊï∞ÊçÆËøîÂõûÁªôÂÆ¢Êà∑Á´ØÔºåÁ≠âÂæÖÂÆ¢Êà∑Á´ØACK„ÄÇ‰∏ÄÊÆµÊó∂Èó¥Ê≤°ackÁªßÁª≠Êé®ÈÄÅ„ÄÇÂ¶ÇÊûúÈáçËØïÂá†Ê¨°ÂêéÊ≤°ÊúâÂõûackÔºåÈÇ£‰πàÂÖ≥Èó≠ËøûÊé•ÂíåÊ∏ÖÈô§ackÁ≠âÂæÖÈòüÂàóÊ∂àÊÅØ&lt;/li&gt;
&lt;li&gt;ÂÆ¢Êà∑Á´Ø‰ºöÊõ¥Êñ∞Êú¨Âú∞ÁöÑÊúÄÊñ∞ÁöÑÊ∂àÊÅØIDÔºåÁÑ∂ÂêéËøõË°åackÂõûÂåÖ„ÄÇÊúçÂä°Á´ØÊî∂Âà∞ackÂêé‰ºöÊõ¥Êñ∞Áæ§ÊàêÂëòÁöÑÊúÄÊñ∞ÁöÑÊ∂àÊÅØID&lt;/li&gt;
&lt;li&gt;Á¶ªÁ∫øÊàêÂëòÔºöÂèëÈÄÅÊâãÊú∫ÈÄöÁü•Ê†èÈÄöÁü•„ÄÇÁ¶ªÁ∫øÊàêÂëò‰∏äÁ∫øÂêéÔºåÊãøÊú¨Âú∞ÊúÄÊñ∞ÁöÑÊ∂àÊÅØIDÔºåÂéªÊúçÂä°Á´ØÊãâÂèñÁæ§GÂèëÈÄÅÁªôAÁöÑÊ∂àÊÅØÔºåÈÄöËøáchannelÈÄöÈÅìÊù•ËøõË°åÂàÜÈ°µÊãâÂèñÔºåÊØè‰∏ÄÊ¨°ËØ∑Ê±ÇÔºå‰ºöÂ∞Ü‰∏ä‰∏ÄÊ¨°ÊãâÂèñÊ∂àÊÅØÁöÑÊúÄÂ§ßÁöÑIDÔºå‰Ωú‰∏∫ËØ∑Ê±ÇÂèÇÊï∞Êù•ÊãâÂèñÊ∂àÊÅØÔºåËøôÈáåÁõ∏ÂΩì‰∫éÁ¨¨‰∫åÊ¨°ÊãâÂèñËØ∑Ê±ÇÂåÖÊòØ‰Ωú‰∏∫Á¨¨‰∏ÄÊ¨°ÊãâÂèñÁöÑackÂåÖ„ÄÇ&lt;/li&gt;
&lt;li&gt;ÂàÜÈ°µÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÆ¢Êà∑Á´ØÂú®Êî∂Âà∞‰∏ä‰∏ÄÈ°µËØ∑Ê±ÇÁöÑÁöÑÊï∞ÊçÆÂêéÊõ¥Êñ∞Êú¨Âú∞ÁöÑÊúÄÊñ∞ÁöÑÊ∂àÊÅØIDÂêéÔºåÂÜçËØ∑Ê±Ç‰∏ã‰∏ÄÈ°µÂπ∂‰∏îÂ∏¶‰∏äÊ∂àÊÅØID„ÄÇ‰∏ä‰∏ÄÈ°µËØ∑Ê±ÇÁöÑÁöÑÊï∞ÊçÆÂèØ‰ª•ÂΩì‰Ωú‰∏∫ackÊù•ËøîÂõûÊúçÂä°Á´ØÔºåÈÅøÂÖçÁΩëÁªúÂ§öÊ¨°‰∫§‰∫í„ÄÇÊúçÂä°Á´ØÊî∂Âà∞ackÂêé‰ºöÊõ¥Êñ∞Áæ§ÊàêÂëòÁöÑÊúÄÊñ∞ÁöÑÊ∂àÊÅØID&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;13-Á∫¢ÂåÖËÆæËÆ°&#34;&gt;13 Á∫¢ÂåÖËÆæËÆ°&lt;/h3&gt;
&lt;h4 id=&#34;131-Êä¢Á∫¢ÂåÖÁöÑÂ§ßËá¥Ê†∏ÂøÉÈÄªËæë&#34;&gt;13.1 Êä¢Á∫¢ÂåÖÁöÑÂ§ßËá¥Ê†∏ÂøÉÈÄªËæë&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;Èì∂Ë°åÂø´Êç∑ÊîØ‰ªòÔºå‰øùËØÅË¥¶Êà∑‰ΩôÈ¢ùÂíåÂèëÈÄÅÁ∫¢ÂåÖÈÄªËæëÁöÑ‰∏ÄËá¥ÊÄß&lt;/li&gt;
&lt;li&gt;ÂèëÈÄÅÁ∫¢ÂåÖÂêéÔºåÈ¶ñÂÖàËÆ°ÁÆóÂ•ΩÁ∫¢ÂåÖÁöÑ‰∏™Êï∞Ôºå‰∏™Êï∞Á°ÆÂÆöÂ•ΩÂêéÔºåÁ°ÆÂÆöÂ•ΩÊØè‰∏™Á∫¢ÂåÖÁöÑÈáëÈ¢ùÔºåÂ≠òÂÖ•Â≠òÂÇ®Â±Ç„ÄêËøôÈáåÂèØ‰ª•ÊòØredisÁöÑListÊàñËÄÖÊòØÈòüÂàó„ÄëÊñπ‰æøÂêéÁª≠ÊØè‰∏™‰∫∫Êù•Âèñ&lt;/li&gt;
&lt;li&gt;ÁîüÊàê‰∏Ä‰∏™24Â∞èÊó∂ÁöÑÂª∂Ëøü‰ªªÂä°ÔºåÊ£ÄÊµãÁ∫¢ÂåÖÊòØÂê¶ËøòÊúâÈí±Êñπ‰æøÈÄÄÂõû&lt;/li&gt;
&lt;li&gt;ÊØè‰∏™Á∫¢ÂåÖÁöÑÈáëÈ¢ùÈúÄË¶Å‰øùËØÅÊØè‰∏™Á∫¢ÂåÖÁöÑÁöÑÊä¢ÈáëÈ¢ùÊ¶ÇÁéáÊòØ‰∏ÄËá¥ÁöÑÔºåÁÆóÊ≥ïÈúÄË¶ÅËÄÉÈáè&lt;/li&gt;
&lt;li&gt;Â≠òÂÖ•Êï∞ÊçÆÂ∫ìË°®‰∏≠ÂêéÔºåÊúçÂä°Âô®ÈÄöËøáÈïøËøûÊé•ÔºåÁªôÁæ§ÈáånotifyÁ∫¢ÂåÖÊ∂àÊÅØ,‰æõÁæ§ÊàêÂëòÊä¢Á∫¢ÂåÖ&lt;/li&gt;
&lt;li&gt;Áæ§ÊàêÂëòÂπ∂ÂèëÊä¢Á∫¢ÂåÖÔºåÂú®Á¨¨‰∫åÊ≠•‰∏≠‰ºöÂ∞ÜÊØè‰∏™Á∫¢ÂåÖÁöÑÈáëÈ¢ùÊîæÂÖ•‰∏Ä‰∏™ÈòüÂàóÊàñËÄÖÂÖ∂‰ªñÂ≠òÂÇ®‰∏≠ÔºåÁæ§ÊàêÂëòÂÆûÈôÖÊòØÊù•Á´û‰∫âÂéªÈòüÂàó‰∏≠ÁöÑÁ∫¢ÂåÖÈáëÈ¢ù„ÄÇÂÖúÂ∫ïÊú∫Âà∂ÔºöÂ¶ÇÊûúredisÊåÇ‰∫ÜÔºåÂèØ‰ª•ÈáçÊñ∞ÁîüÊàêÁ∫¢ÂåÖ‰ø°ÊÅØÂà∞Êï∞ÊçÆÂ∫ì‰∏≠&lt;/li&gt;
&lt;li&gt;ÂèñÊàêÂäüÂêéÔºåÈúÄË¶Å‰øùËØÅÁ∫¢ÂåÖÂâ©‰ΩôÈáëÈ¢ù„ÄÅÊñ∞ÊèíÂÖ•ÁöÑÁ∫¢ÂåÖÊµÅÊ∞¥Êï∞ÊçÆ„ÄÅÈòüÂàó‰∏≠ÁöÑÁ∫¢ÂåÖÊï∞ÊçÆ‰ª•ÂèäÁæ§ÊàêÂëòÁöÑ‰ΩôÈ¢ùË¥¶Êà∑ÈáëÈ¢ù‰∏ÄËá¥ÊÄß„ÄÇ&lt;/li&gt;
&lt;li&gt;ËøôÈáåËøòÈúÄË¶Å‰øùËØÅ‰∏Ä‰∏™Áî®Êà∑Âè™ËÉΩÈ¢ÜÂèñ‰∏ÄÊ¨°ÔºåÂπ∂‰∏î‰øùÊåÅÂπÇÁ≠â&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;‰∏â-qa&#34;&gt;‰∏â„ÄÅQ&amp;amp;A&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;QÔºöÂØπ‰∫éÂçïËÅäÂíåÁæ§ËÅäÁöÑÂÆûÊó∂ÊÄßÊ∂àÊÅØÔºåÊòØÂê¶ÈúÄË¶ÅMQÊù•‰Ωú‰∏∫ÈÄö‰ø°ÁöÑ‰∏≠Èó¥‰ª∂Êù•‰ª£ÊõørpcÔºü&lt;/p&gt;
&lt;p&gt;AÔºöMQ‰Ωú‰∏∫Ëß£ËÄ¶ÂèØ‰ª•Êúâ‰ª•‰∏ãÂ•ΩÂ§ÑÔºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ÊòìÊâ©Â±ïÔºågateÂ±ÇÂà∞logicÂ±ÇÊó†ÈúÄË∑ØÁî±ÔºålogicÂ±ÇÂ§ö‰∏™ÊúâÊñ∞ÁöÑ‰∏öÂä°Êó∂ÂÄôÔºåÂè™ÈúÄË¶ÅÁõëÂê¨Êñ∞ÁöÑtopicÂç≥ÂèØ&lt;/li&gt;
&lt;li&gt;Ëß£ËÄ¶ÔºågateÂ±ÇÂà∞logicÂ±ÇËß£ËÄ¶Ôºå‰∏ç‰ºöÊúâ‰æùËµñÂÖ≥Á≥ª&lt;/li&gt;
&lt;li&gt;ËäÇÁúÅÁ´ØÂè£ËµÑÊ∫êÔºågateÂ±ÇÊó†ÈúÄÂÜçÂºÄÂêØÊñ∞ÁöÑÁ´ØÂè£Êé•Êî∂logicÁöÑËØ∑Ê±ÇÔºåËÄå‰∏îÁõ¥Êé•ÁõëÂê¨MQÊ∂àÊÅØÂç≥ÂèØ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;‰ΩÜÊòØÁº∫ÁÇπ‰πüÊúâÔºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ÁΩëÁªúÈÄö‰ø°Â§ö‰∏ÄÊ¨°ÁΩëÁªúÈÄö‰ø°ÔºåÂ¢ûÂä†RTÁöÑÊó∂Èó¥ÔºåÊ∂àÊÅØÂÆûÊó∂ÊÄßÂØπ‰∫éIMÂç≥‰ΩøÈÄö‰ø°ÁöÑÂú∫ÊôØÊòØÈùûÂ∏∏Ê≥®ÈáçÁöÑ‰∏Ä‰∏™ÁÇπ&lt;/li&gt;
&lt;li&gt;MQÁöÑÁ®≥ÂÆöÊÄßÔºå‰∏çÁÆ°‰ªª‰ΩïÁ≥ªÁªüÂè™Ë¶ÅÂºïÂÖ•‰∏≠Èó¥‰ª∂ÈÉΩ‰ºöÊúâÁ®≥ÂÆöÊÄßÈóÆÈ¢òÔºåÈúÄË¶ÅËÄÉËôëMQ‰∏çÂèØÁî®ÊàñËÄÖ‰∏¢Â§±Êï∞ÊçÆÁöÑÊÉÖÂÜµ&lt;/li&gt;
&lt;li&gt;ÈúÄË¶ÅËÄÉËôëÂà∞ËøêÁª¥ÁöÑÊàêÊú¨&lt;/li&gt;
&lt;li&gt;ÂΩìÁî®Ê∂àÊÅØ‰∏≠Èó¥‰ª£ÊõøË∑ØÁî±Â±ÇÁöÑÊó∂ÂÄôÔºågateÂ±ÇÈúÄË¶ÅÂπøÊí≠Ê∂àË¥πÊ∂àÊÅØÔºåËøô‰∏™Êó∂ÂÄôgateÂ±Ç‰ºöÊé•Êî∂Â§ßÈÉ®ÂàÜÁöÑÊó†ÊïàÊ∂àÊÅØÔºåÂõ†‰∏∫Ëøô‰∏™Ê∂àÊÅØÁöÑÊé•Êî∂ËÄÖchannel‰∏çÂú®Êú¨Êú∫Áª¥Êä§ÁöÑsession‰∏≠&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Áªº‰∏äÔºåÊòØÂê¶ËÄÉËôë‰ΩøÁî®MQÈúÄË¶ÅÊû∂ÊûÑÂ∏àÂéªËÄÉÈáèÔºåÊØîÂ¶ÇËÄÉËôë‰∏öÂä°ÊòØÂê¶ÂÖÅËÆ∏„ÄÅÊàñËÄÖÁ≥ªÁªüÁöÑÊµÅÈáèÁ≠âÁ≠âÂΩ±ÂìçÂõ†Á¥†„ÄÇ&lt;br&gt;
Êú¨È°πÁõÆÂü∫‰∫é‰ΩøÁî®ÊàêÊú¨„ÄÅËÄ¶ÂêàÊàêÊú¨ÂíåËøêÁª¥ÊàêÊú¨ËÄÉËôëÔºåÈááÁî®netty‰Ωú‰∏∫Â∫ïÂ±ÇËá™ÂÆö‰πâÈÄö‰ø°ÊñπÊ°àÊù•ÂÆûÁé∞Ôºå‰πüËÉΩÂêåÊ†∑ÂÆûÁé∞Â±ÇÁ∫ßËß£ËÄ¶„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QÔºö‰∏∫‰ªÄ‰πàÊé•ÂÖ•Â±ÇÁî®LSBËøîÂõûÁöÑIPÊù•ÂÅöÊé•ÂÖ•Âë¢Ôºü&lt;/p&gt;
&lt;p&gt;AÔºöÂèØ‰ª•Êúâ‰ª•‰∏ãÂ•ΩÂ§ÑÔºö1„ÄÅÁÅµÊ¥ªÁöÑË¥üËΩΩÂùáË°°Á≠ñÁï• ÂèØÊ†πÊçÆÊúÄÂ∞ëËøûÊé•Êï∞Êù•ÂàÜÈÖçIPÔºõ2„ÄÅÂÅöÁÅ∞Â∫¶Á≠ñÁï•Êù•ÂàÜÈÖçIPÔºõ3„ÄÅAppId‰∏öÂä°ÈöîÁ¶ªÁ≠ñÁï• ‰∏çÂêå‰∏öÂä°ËøûÊé•‰∏çÂêåÁöÑgateÔºåÈò≤Ê≠¢Áõ∏‰∫íÂΩ±Âìç&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QÔºö‰∏∫‰ªÄ‰πàÂ∫îÁî®Â±ÇÂøÉË∑≥ÂØπËøûÊé•ËøõË°åÂÅ•Â∫∑Ê£ÄÊü•Ôºü&lt;/p&gt;
&lt;p&gt;AÔºöÂõ†‰∏∫TCP KeepaliveÁä∂ÊÄÅÊó†Ê≥ïÂèçÂ∫îÂ∫îÁî®Â±ÇÁä∂ÊÄÅÈóÆÈ¢òÔºåÂ¶ÇËøõÁ®ãÈòªÂ°û„ÄÅÊ≠ªÈîÅ„ÄÅTCPÁºìÂÜ≤Âå∫Êª°Á≠âÊÉÖÂÜµÔºõÂπ∂‰∏îË¶ÅÊ≥®ÊÑèÂøÉË∑≥ÁöÑÈ¢ëÁéáÔºåÈ¢ëÁéáÂ∞èÂàôÂèØËÉΩÂèäÊó∂ÊÑüÁü•‰∏çÂà∞Â∫îÁî®ÊÉÖÂÜµÔºåÈ¢ëÁéáÂ§ßÂèØËÉΩÊúâ‰∏ÄÂÆöÁöÑÊÄßËÉΩÂºÄÈîÄ„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QÔºöMQÁöÑ‰ΩøÁî®Âú∫ÊôØÔºü&lt;/p&gt;
&lt;p&gt;AÔºöIMÊ∂àÊÅØÊòØÈùûÂ∏∏Â∫ûÂ§ßÁöÑÔºåÊØîÂ¶ÇËØ¥Áæ§ËÅäÁõ∏ÂÖ≥‰∏öÂä°„ÄÅÊé®ÈÄÅÔºåÂØπ‰∫é‰∏Ä‰∫õ‰∏öÂä°‰∏äÂèØ‰ª•ÂøçÂèóÁöÑÂú∫ÊôØÔºåÂ∞ΩÈáè‰ΩøÁî®MQÊù•Ëß£ËÄ¶ÂíåÈÄö‰ø°ÔºåÊù•Èôç‰ΩéÂêåÊ≠•ÈÄöËÆØÁöÑÊúçÂä°Âô®ÂéãÂäõ„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QÔºöÁæ§Ê∂àÊÅØÂ≠ò‰∏Ä‰ªΩËøòÊòØÂ§ö‰ªΩÔºåËØªÊâ©Êï£ËøòÊòØÂÜôÊâ©Êï£Ôºü&lt;/p&gt;
&lt;p&gt;AÔºöÂ≠ò1‰ªΩÔºåËØªÊâ©Êï£„ÄÇÂ≠òÂ§ö‰ªΩ‰∏ãÂêå‰∏ÄÊù°Ê∂àÊÅØÂ≠òÂÇ®‰∫ÜÂæàÂ§öÊ¨°ÔºåÂØπÁ£ÅÁõòÂíåÂ∏¶ÂÆΩÈÄ†Êàê‰∫ÜÂæàÂ§ßÁöÑÊµ™Ë¥π„ÄÇÂèØ‰ª•Âú®Êû∂ÊûÑ‰∏äÂíå‰∏öÂä°‰∏äËøõË°å‰ºòÂåñÔºåÊù•ÂÆûÁé∞ËØªÊâ©Êï£„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QÔºöÊ∂àÊÅØID‰∏∫‰ªÄ‰πàÊòØË∂ãÂäøÈÄíÂ¢ûÂ∞±ÂèØ‰ª•Ôºå‰∏•Ê†ºÈÄíÂ¢ûÁöÑ‰∏çË°åÂêóÔºü&lt;/p&gt;
&lt;p&gt;AÔºö‰∏•Ê†ºÈÄíÂ¢û‰ºöÊúâÂçïÁÇπÊÄßËÉΩÁì∂È¢àÔºåÊØîÂ¶ÇMySQL auto incrementsÔºõredisÊÄßËÉΩÂ•Ω‰ΩÜÊòØÊ≤°Êúâ‰∏öÂä°ËØ≠‰πâÔºåÊØîÂ¶ÇÁº∫Â∞ëÊó∂Èó¥Âõ†Á¥†ÔºåËøòÂèØËÉΩ‰ºöÊúâÊï∞ÊçÆ‰∏¢Â§±ÁöÑÈ£éÈô©ÔºåÂπ∂‰∏îÈõÜÁæ§ÁéØÂ¢É‰∏ãÂÜôÂÖ•ID‰πüÂ±û‰∫éÂçïÁÇπÔºåÂ±û‰∫éÈõÜ‰∏≠ÂºèÁîüÊàêÊúçÂä°„ÄÇÂ∞èÂûãIMÂèØ‰ª•Ê†πÊçÆ‰∏öÂä°Âú∫ÊôØÈúÄÊ±ÇÁõ¥Êé•‰ΩøÁî®redisÁöÑincrÂëΩ‰ª§Êù•ÂÆûÁé∞IMÊ∂àÊÅØÂîØ‰∏ÄID„ÄÇÊú¨È°πÁõÆÈááÁî®snowflakeÁÆóÊ≥ïÂÆûÁé∞ÂîØ‰∏ÄË∂ãÂäøÈÄíÂ¢ûIDÔºåÂç≥ÂèØÂÆûÁé∞IMÊ∂àÊÅØ‰∏≠ÔºåÊó∂Â∫èÊÄßÔºåÈáçÂ§çÊÄß‰ª•ÂèäÊü•ÊâæÂäüËÉΩ„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QÔºögateÂ±Ç‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂºÄ‰∏§‰∏™Á´ØÂè£Ôºü&lt;/p&gt;
&lt;p&gt;AÔºögate‰ºöÊé•Êî∂ÂÆ¢Êà∑Á´ØÁöÑËøûÊé•ËØ∑Ê±ÇÔºàË¢´Âä®ÔºâÔºåÈúÄË¶ÅÂ§ñÁΩëÁõëÂê¨Á´ØÂè£Ôºõentry‰ºö‰∏ªÂä®ÁªôlogicÂèëËØ∑Ê±ÇÔºà‰∏ªÂä®ÔºâÔºõentry‰ºöÊé•Êî∂ÊúçÂä°Á´ØÁªôÂÆÉÁöÑÈÄöÁü•ËØ∑Ê±ÇÔºàË¢´Âä®ÔºâÔºåÈúÄË¶ÅÂÜÖÁΩëÁõëÂê¨Á´ØÂè£„ÄÇ‰∏Ä‰∏™Á´ØÂè£ÂØπÂÜÖÔºå‰∏Ä‰∏™Á´ØÂè£ÂØπÂ§ñ„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QÔºöÁî®Êà∑ÁöÑË∑ØÁî±‰ø°ÊÅØÔºåÊòØÁª¥Êä§Âú®‰∏≠Â§ÆÂ≠òÂÇ®ÁöÑredis‰∏≠ÔºåËøòÊòØÁª¥Êä§Âú®ÊØè‰∏™msgÂ±ÇÂÜÖÂ≠ò‰∏≠Ôºü&lt;br&gt;
AÔºöÁª¥Êä§Âú®ÊØè‰∏™msgÂ±ÇÂÜÖÂ≠ò‰∏≠ÊúâÁä∂ÊÄÅÔºöÂ§öÁ∫ßÁºìÂ≠òÈÅøÂÖçÂíå‰∏≠Èó¥‰ª∂Â§öÊ¨°‰∫§‰∫í, Âπ∂ÂèëÈ´ò„ÄÇÁª¥Êä§Âú®‰∏≠Â§ÆÂ≠òÂÇ®ÁöÑredis‰∏≠ÔºåmsgÂ±ÇÊó†Áä∂ÊÄÅÔºöÂú®‰∏öÂä°ÂàùÊúüÔºåÊÄßËÉΩÁì∂È¢àÂú®redisÂíåÁΩëÁªúÂíåÂ∏¶ÂÆΩ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QÔºöÁΩëÂÖ≥Â±ÇÂíåÊúçÂä°Â±Ç‰ª•ÂèämsgÂ±ÇÂíåÁΩëÂÖ≥Â±ÇËØ∑Ê±ÇÊ®°ÂûãÂÖ∑‰ΩìÊòØÊÄéÊ†∑ÁöÑÔºü&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ÁΩëÂÖ≥Â±ÇÂà∞ÊúçÂä°Â±ÇÔºåÂè™ÈúÄË¶ÅÂçïÂêë‰º†ËæìÂèëËØ∑Ê±ÇÔºåÁΩëÂÖ≥Â±Ç‰∏çÈúÄË¶ÅÂÖ≥ÂøÉË∞ÉÁî®ÁöÑÁªìÊûú„ÄÇËÄåÂÆ¢Êà∑Á´ØÊÉ≥Ë¶ÅÁöÑackÊàñËÄÖnotifyËØ∑Ê±ÇÊòØÁî±SDKÂèëÈÄÅÊï∞ÊçÆÂà∞ÁΩëÂÖ≥Â±ÇÔºåSDK‰πü‰∏çÈúÄË¶ÅÂÖ≥ÂøÉË∞ÉÁî®ÁöÑÁªìÊûúÔºåÊúÄÂêéÁΩëÂÖ≥Â±ÇÂè™ËΩ¨ÂèëÊï∞ÊçÆÔºå‰∏çÂÅöÈ¢ùÂ§ñÁöÑÈÄªËæëÂ§ÑÁêÜ„ÄÇ&lt;/li&gt;
&lt;li&gt;SDKÂíåÊâÄÊúâÁöÑÁΩëÂÖ≥ËøõË°åÈïøËøûÊé•ÔºåÂΩìÂèëÈÄÅ‰ø°ÊÅØÁªôÂÆ¢Êà∑Á´ØÊó∂ÔºåÊ†πÊçÆË∑ØÁî±ÂØªÂùÄ‰ø°ÊÅØÔºåÂç≥ÂèØÈÄöËøáÈïøËøûÊé•Êé®ÈÄÅ‰ø°ÊÅØ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QÔºöÊú¨Âú∞ÂÜôÊï∞ÊçÆÊàêÂäüÔºå‰∏ÄÂÆö‰ª£Ë°®ÂØπÁ´ØÂ∫îÁî®‰æßÊé•Êî∂ËØªÂèñÊ∂àÊÅØ‰∫ÜÂêóÔºü&lt;br&gt;
AÔºöÊú¨Âú∞TCPÂÜôÊìç‰ΩúÊàêÂäüÔºå‰ΩÜÊï∞ÊçÆÂèØËÉΩËøòÂú®Êú¨Âú∞ÂÜôÁºìÂÜ≤Âå∫‰∏≠„ÄÅÁΩëÁªúÈìæË∑ØËÆæÂ§á‰∏≠„ÄÅÂØπÁ´ØËØªÁºìÂÜ≤Âå∫‰∏≠ÔºåÂπ∂‰∏ç‰ª£Ë°®ÂØπÁ´ØÂ∫îÁî®ËØªÂèñÂà∞‰∫ÜÊï∞ÊçÆ„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QÔºö‰∏∫‰ªÄ‰πàÁî®nettyÂÅöÊù•ÂÅöhttpÁΩëÂÖ≥, ËÄå‰∏çÁî®tomcatÔºü&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;nettyÂØπË±°Ê±†ÔºåÂÜÖÂ≠òÊ±†ÔºåÈ´òÊÄßËÉΩÁ∫øÁ®ãÊ®°Âûã&lt;/li&gt;
&lt;li&gt;nettyÂ†ÜÂ§ñÂÜÖÂ≠òÁÆ°ÁêÜÔºåÂáèÂ∞ëGCÂéãÂäõÔºåjvmÁÆ°ÁêÜÁöÑÂè™ÊòØ‰∏Ä‰∏™ÂæàÂ∞èÁöÑDirectByteBufferÂØπË±°ÂºïÁî®&lt;/li&gt;
&lt;li&gt;tomcatËØªÂèñÊï∞ÊçÆÂíåÂÜôÂÖ•Êï∞ÊçÆÈÉΩÈúÄË¶Å‰ªéÂÜÖÊ†∏ÊÄÅÁºìÂÜ≤copyÂà∞Áî®Êà∑ÊÄÅÁöÑJVM‰∏≠ÔºåÂ§ö1Ê¨°ÊàñËÄÖ2Ê¨°ÁöÑÊã∑Ë¥ù‰ºöÊúâÊÄßËÉΩÂΩ±Âìç&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QÔºö‰∏∫‰ªÄ‰πàÊ∂àÊÅØÂÖ•Â∫ìÂêéÔºåÂØπ‰∫éÂú®Á∫øÁä∂ÊÄÅÁöÑÁî®Êà∑ÔºåÂçïËÅäÁõ¥Êé•Êé®ÈÄÅÔºåÁæ§ËÅäÈÄöÁü•ÂÆ¢Êà∑Á´ØÊù•ÊãâÂèñÔºåËÄå‰∏çÊòØÁõ¥Êé•Êé®ÈÄÅÊ∂àÊÅØÁªôÂÆ¢Êà∑Á´ØÔºàÊé®ÊãâÁªìÂêàÔºâÔºü&lt;br&gt;
AÔºöÂú®‰øùËØÅÊ∂àÊÅØÂÆûÊó∂ÊÄßÁöÑÂâçÊèê‰∏ãÔºåÂØπ‰∫éÂçïËÅäÔºåÁõ¥Êé•Êé®ÈÄÅ„ÄÇÂØπ‰∫éÁæ§ËÅäÔºåÁî±‰∫éÁæ§ËÅä‰∫∫Êï∞Â§öÔºåÊé®ÈÄÅÁöÑËØù‰∏Ä‰ªΩÁæ§Ê∂àÊÅØ‰ºöÂØπÁæ§ÂÜÖÊâÄÊúâÁöÑÁî®Êà∑ÈÉΩ‰∫ßÁîü‰∏Ä‰ªΩÊé®ÈÄÅÁöÑÊ∂àÊÅØÔºåÊé®ÈÄÅÈáèÂ∑®Â§ß„ÄÇËß£ÂÜ≥ÂäûÊ≥ïÊòØÊåâÈúÄÊãâÂèñÔºåÂΩìÁæ§Ê∂àÊÅØÊúâÊñ∞Ê∂àÊÅØÊó∂ÂÄôÂèëÈÄÅÊó∂ÂÄôÔºåÊúçÂä°Á´Ø‰∏ªÂä®Êé®ÈÄÅÊñ∞ÁöÑÊ∂àÊÅØÊï∞ÈáèÔºåÁÑ∂ÂêéÂÆ¢Êà∑Á´ØÂàÜÈ°µÊåâÈúÄÊãâÂèñÊï∞ÊçÆ„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QÔºö‰∏∫‰ªÄ‰πàÈô§‰∫ÜÂçïËÅä Áæ§ËÅä Êé®ÈÄÅ Á¶ªÁ∫øÊãâÂèñÁ≠âÂÆûÊó∂ÊÄß‰∏öÂä°ÔºåÂÖ∂‰ªñÁöÑ‰∏öÂä°ÈÉΩËµ∞httpÂçèËÆÆÔºü&lt;br&gt;
AÔºöIMÂçèËÆÆÁÆÄÂçïÊúÄÂ•ΩÔºåÂ¶ÇÊûúËÆ©ÂÖ∂‰ªñÁöÑ‰∏öÂä°ËØ∑Ê±ÇÊ∑∑ËøõIMÂçèËÆÆ‰∏≠Ôºå‰ºöËÆ©ÂÖ∂IMÂèòÁöÑÊõ¥Â§çÊùÇÔºåÊØîÂ¶ÇÊü•ÊâæÁ¶ªÁ∫øÊ∂àÊÅØËÆ∞ÂΩïÊãâÂèñËµ∞httpÈÄöÈÅìÈÅøÂÖçtcp ÈÄöÈÅìÂéãÂäõËøáÂ§ßÔºåÂΩ±ÂìçÂç≥Êó∂Ê∂àÊÅØ‰∏ãÂèëÊïàÁéá„ÄÇÂú®ÊØîÂ¶Ç‰∏ä‰º†ÂõæÁâáÂíåÂ§ßÊñá‰ª∂ÔºåÂèØ‰ª•Âà©Áî®HTTPÁöÑÊñ≠ÁÇπ‰∏ä‰º†ÂíåÂàÜÊÆµ‰∏ä‰º†ÁâπÊÄß&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;Âõõ-contact&#34;&gt;Âõõ„ÄÅContact&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ÁΩëÁ´ôÔºözhangyaoo.github.io&lt;/li&gt;
&lt;li&gt;ÂæÆ‰ø°Ôºöwill_zhangyao&lt;/li&gt;
&lt;/ul&gt;
">Âü∫‰∫éNettyÁöÑIMÁ≥ªÁªüËÆæËÆ°‰∏éÂÆûÁé∞</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/netty-wei-he-xing-neng-zhe-me-gao/"" data-c="
          &lt;h2 id=&#34;Á∫øÁ®ãÊ®°Âûã&#34;&gt;Á∫øÁ®ãÊ®°Âûã&lt;/h2&gt;
&lt;p&gt;ÂÜÖÂ≠òÊ®°ÂûãÔºö&lt;br&gt;
ÈîÅÊ®°ÂûãÔºö&lt;br&gt;
ÁΩëÁªúIOÊ®°ÂûãÔºö&lt;br&gt;
Èõ∂Êã∑Ë¥ùÔºö&lt;br&gt;
ÂÜÖÂ≠òÊ±†Ôºö&lt;br&gt;
Â†ÜÂ§ñÂÜÖÂ≠òÔºö‰∏çÂèóÂ†ÜÂÜÖÂ≠òÁöÑÂ§ßÂ∞èÁöÑÂΩ±ÂìçÔºåJVMÂÜÖÂ≠òÊåÅÊúâÂ†ÜÂ§ñÂÜÖÂ≠òÁöÑÂºïÁî®ÔºåÂ•ΩÂ§ÑÊòØ‰∏çÂèóGCÂÅúÈ°øÂ∏¶Êù•ÁöÑÂΩ±Âìç„ÄÇÂ†ÜÂ§ñÂÜÖÂ≠òÂü∫‰∫éÂºïÁî®ËÆ°Êï∞Êù•ËøõË°åÂõûÊî∂&lt;br&gt;
ÂÖ∂‰ªñÔºöËá™Âª∫FastThreadLocalÔºåÂü∫Êú¨Á±ªÂûã‰ª£ÊõøÂºïÁî®Á±ªÂûãÔºåÊµ∑ÈáèÂØπË±°Âú∫ÊôØÁ±ªFieldUpdaterÂØπË±°‰ª£ÊõøÂéüÂ≠êÁ±ªÔºåIntObjectMap‰ª£ÊõøHashMapÔºåwrappedBufÈÅøÂÖçÂÜÖÂ≠òÂ§çÂà∂ÔºåÂÜÖÂª∫Â§öÁßçÂ∫èÂàóÂåñÊñπÂºèÔºåÂ§öÁßçÁ≤òÂåÖÂíåÂçäÂåÖÂ§ÑÁêÜÂíåËá™ÂÆö‰πâÂ§ÑÁêÜ&lt;/p&gt;
">Netty‰∏∫‰ΩïÊÄßËÉΩËøô‰πàÈ´ò</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/jie-gou-hua-si-wei/"" data-c="
          &lt;h3 id=&#34;what&#34;&gt;whatÔºö&lt;/h3&gt;
&lt;p&gt;ÊòØ‰∏ÄÁßç‰ª•Êó†Â∫èÂà∞ÊúâÂ∫èÁöÑÊï¥ÁêÜ‰ø°ÊÅØÂíåÊûÑÂª∫ÁªìÊûÑÂåñÁöÑÊÄùÁª¥ÊñπÂºèÔºåÁõÆÁöÑÊòØÂáèÂ∞ëËÆ§Áü•Â§çÊùÇÂ∫¶ÔºåÊòØÁöÑÊõ¥Âä†Ë¢´ÂÆπÊòìÁêÜËß£ÂíåËÆ∞ÂøÜÔºåË°®ËææÊ∏ÖÊô∞&lt;/p&gt;
&lt;h3 id=&#34;why&#34;&gt;why:&lt;/h3&gt;
&lt;p&gt;0213645879 Âíå 0123456789ÔºåËøô‰∏§‰∏≤Êï∞Â≠óÂì™‰∏™Êõ¥ÂÆπÊòìË¢´‰∫∫ËÆ∞‰Ωè„ÄÇ&lt;br&gt;
ÂΩìÁÑ∂ÊòØÊåâÁÖßÈ°∫Â∫èÊéíÂàóÁöÑÊï∞Â≠ó‰∏≤ÊØîÊùÇ‰π±Êó†Â∫èÊéíÂàóÁöÑË¶ÅÊõ¥ÂÆπÊòìË¢´ËÆ∞‰Ωè„ÄÇ&lt;br&gt;
Âõ†‰∏∫‰∫∫Á±ªÊõ¥ÂÆπÊòìËÆ∞‰ΩèÁªìÊûÑÂåñÁöÑ‰ø°ÊÅØ„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;how&#34;&gt;howÔºö&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1627012568883.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
Â°îÂ∞ñÂ∞±ÊòØÊàë‰ª¨ÁöÑ‰∏≠ÂøÉÊÄùÊÉ≥Êàñ‰∏ªÈ¢ò„ÄÇÂ°îË∫´Â∞±ÊòØÊûÑÊàê‰∏≠ÂøÉÊÄùËÄÉÊàñËÄÖ‰∏ªÈ¢òÁöÑÂêÑ‰∏™ÂàÜËÆ∫ÁÇπ„ÄÇËÄåÂ°îÂü∫ÂàôÊòØÊîØÊíëÂêÑ‰∏™ÂàÜËÆ∫ÁÇπÁöÑË¶ÅÁ¥†ÊàñËÆ∫ÊçÆ&lt;/p&gt;
&lt;p&gt;1„ÄÅÁªº‰∏äËÄå‰∏ãÁöÑÁªìÊûÑÂåñÊÄùÁª¥&lt;br&gt;
Á∫µÂêëÊòØËá™‰∏äËÄå‰∏ãÁöÑÂ±ÇÊ¨°ÁöÑÂÖ≥Á≥ªÔºå‰∏ã‰∏ÄÂ±ÇÊòØ‰∏ä‰∏ÄÂ±ÇÁöÑËß£ÈáäÂíåÊûÑÊàêÔºå‰∏ä‰∏ÄÂ±ÇÊòØ‰∏ã‰∏ÄÂ±ÇÁöÑÊÄªÁªìÂíåÊ¶ÇÊã¨&lt;br&gt;
ÊØîÂ¶ÇÔºåÂÖàÁªôÁªìËÆ∫ÂêéÁªôÂéüÂõ†ÔºåÂÖàÁõÆÁöÑÂêéÊñπÊ≥ïÔºåÂÖàÊäΩË±°ÂêéÂÖ∑‰ΩìÔºåÂÖàÊï¥‰ΩìÂêéÈÉ®ÂàÜ&lt;br&gt;
2„ÄÅ‰ªéÂ∑¶ÂæÄÂè≥ÁöÑÈ°∫Â∫èÊÄùÁª¥ÔºåÂú®Âêå‰∏Ä‰∏™ÁªÑÂÜÖÂøÖÈ°ªÊòØÂêå‰∏Ä‰∏™ÈÄªËæëËåÉÁï¥ÔºåÊåâÁÖßÈ°∫Â∫èÊù•ÁªÑÁªá&lt;/p&gt;
&lt;h4 id=&#34;ÂÖ∑‰ΩìÁöÑÊ≠•È™§&#34;&gt;ÂÖ∑‰ΩìÁöÑÊ≠•È™§Ôºö&lt;/h4&gt;
&lt;p&gt;1„ÄÅÁ°ÆÂÆöÈóÆÈ¢ò‰∫ßÁîüËÉåÊôØ&lt;br&gt;
2„ÄÅÁ°ÆÂÆöÊ†∏ÂøÉÁõÆÊ†á&lt;br&gt;
3„ÄÅÊãÜËß£Ê†∏ÂøÉÁõÆÊ†á&lt;br&gt;
4„ÄÅÁªßÁª≠ÂàÜËß£ÔºåÁõ¥Âà∞ËÉΩÂ§üÊääÈóÆÈ¢òËß£ÈáäÊ∏ÖÊ•öÔºåÂΩ¢ÊàêÊñπÊ≥ïËÆ∫&lt;/p&gt;
&lt;h3 id=&#34;example&#34;&gt;example&lt;/h3&gt;
&lt;h4 id=&#34;1-ÈááË¥≠Ê∏ÖÂçï&#34;&gt;1„ÄÅÈááË¥≠Ê∏ÖÂçï&lt;/h4&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1627012578248.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;2-Â∏¶Âõ¢Èòü&#34;&gt;2„ÄÅÂ∏¶Âõ¢Èòü&lt;/h4&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1627012581164.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h4 id=&#34;3-‰∫ãÊÉÖÂàíÂàÜÊñπÊ≥ï&#34;&gt;3„ÄÅ‰∫ãÊÉÖÂàíÂàÜÊñπÊ≥ï&lt;/h4&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1627012584884.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
">ÊµÖË∞àÁªìÊûÑÂåñÊÄùÁª¥</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/hikaridatasource-he-xin-yuan-ma-fen-xi/"" data-c="
          &lt;h2 id=&#34;‰∏Ä-ÂâçË®Ä&#34;&gt;‰∏Ä„ÄÅÂâçË®Ä&lt;/h2&gt;
&lt;p&gt;‰∏ä‰∏ÄÁØáÊñáÁ´†ËÆ≤‰∫Ü‰∏çÂêàÁêÜÁöÑËøûÊé•Ê±†‰ª£Á†ÅÂØºËá¥ÁöÑÂÜÖÂ≠òÊ≥ÑÈú≤‰∫ã‰ª∂ÔºåËØ¶ËßÅËøôÁØáÊñáÁ´†&lt;a href=&#34;https://zhangyaoo.github.io/post/ji-yi-ci-duo-shu-ju-yuan-lu-you-zao-cheng-de-shu-ju-ku-lian-jie-nei-cun-xie-lu/&#34;&gt;ËÆ∞‰∏ÄÊ¨°Â§öÊï∞ÊçÆÊ∫êË∑ØÁî±ÈÄ†ÊàêÁöÑÊï∞ÊçÆÂ∫ìËøûÊé•Ê≥ÑÈú≤ÊéíÊü•ËøáÁ®ã&lt;/a&gt;„ÄÇÂÖ∂‰∏≠Á≤óÁï•ÁöÑÂàÜÊûê‰∫ÜHikariDataSourceËøûÊé•Ê±†ÁöÑ‰ª£Á†ÅÔºåÂπ∂Ê≤°Êúâ‰ªîÁªÜÂàÜÊûê„ÄÇÊú¨ÁØáÊñáÁ´†Â∏¶ËØªËÄÖ‰ª¨‰∏ÄËµ∑ÂéªÂàÜÊûê‰∏ÄÊ≥¢Ê∫êÁ†ÅÔºåÁúãÂÆåÊú¨ÁØáÊñáÁ´†ÂêéÔºå‰Ω†ÂèØ‰ª•&lt;br&gt;
1„ÄÅÂØπÈîÅÂíåÈ´òÂπ∂ÂèëÊúâ‰∏ÄÂÆöÁêÜËß£‰ª•ÂèäÂÖ∂Âú®ËøûÊé•Ê±†‰∏≠ÁöÑËøêÁî®&lt;br&gt;
2„ÄÅ‰∫ÜËß£HikariDataSource‰∏öÁïåÊÄßËÉΩÊúÄÈ´òËøûÊé•Ê±†ÁöÑÂéüÂõ†&lt;br&gt;
3„ÄÅÂèØ‰ª•ÂØπËøûÊé•Ê±†ÁöÑÂéüÁêÜÊúâÂ§ßËá¥ÁöÑ‰∫ÜËß£ÔºåÂèØ‰ª•Â∞ùËØïËá™Â∑±ÂÆûÁé∞‰∏Ä‰∏™ËøûÊé•Ê±†&lt;/p&gt;
&lt;h2 id=&#34;‰∫å-Ê∫êÁ†ÅÂàÜÊûê&#34;&gt;‰∫å„ÄÅÊ∫êÁ†ÅÂàÜÊûê&lt;/h2&gt;
&lt;h3 id=&#34;20-ÂÖ≥ÈîÆ‰ª£Á†ÅÁ±ª‰ªãÁªç&#34;&gt;2.0 ÂÖ≥ÈîÆ‰ª£Á†ÅÁ±ª‰ªãÁªç&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;HikariDataSourceÂØπË±°ÔºöHikari‰∏≠ÁöÑÊ†∏ÂøÉÁ±ª‰∏∫HikariDataSourceÔºåÂÆûÁé∞‰∫ÜDataSourceÁöÑgetConnetionÊé•Âè£&lt;/li&gt;
&lt;li&gt;HikariPoolÂØπË±°ÔºöHikariDataSource‰∏≠Êúâ‰∏§‰∏™HikariPoolÂØπË±°,‰∏Ä‰∏™ÊòØfastPathPoolÊòØÂú®HikariPoolÊúâÂèÇÊûÑÈÄ†ÂáΩÊï∞‰∏≠ÂàõÂª∫, Â¶ÇÊûúÊ≤°ÊúâÂàõÂª∫fastPathPool,ÈÇ£‰πàÂ∞±‰ºöÂú®getConnectionÊñπÊ≥ïÊó∂ÂàõÂª∫poolÂØπË±°„ÄÇ&lt;/li&gt;
&lt;li&gt;ConcurrentBagÂØπË±°ÔºöËøûÊé•Ê±†ÁöÑÁúüÊ≠£ÂÆûÁé∞ÔºåÂÆûÁé∞‰∫Ü&lt;strong&gt;È´òÊÄßËÉΩÈ´òÂπ∂ÂèëÁöÑÊó†ÈîÅËÆæËÆ°&lt;/strong&gt;Ôºå‰∏ªË¶ÅÁöÑÊñπÊ≥ïÊúâborrow ÂÄü,requite ÂΩíËøò,add Êñ∞Â¢û,remove ÂéªÈô§„ÄÇ&lt;/li&gt;
&lt;li&gt;PoolEntryÂØπË±°ÔºöÂØπÊï∞ÊçÆÂ∫ìconnectionÂØπË±°ËøõË°åÂåÖË£ÖÔºåÂ¢ûÂä†È¢ùÂ§ñÁöÑÂ±ûÊÄßÔºåÂåÖÊã¨ÊúÄÂêé‰∏ÄÊ¨°ËÆøÈóÆÊó∂Èó¥ÔºåÊòØÂê¶‰∏¢ÂºÉÔºåÂΩìÂâçÁä∂ÊÄÅÁ≠âÁ≠â„ÄÇHikariDataSourceÊ∫êÁ†ÅÂ∫ïÂ±ÇÈáåÈù¢ÈÉΩÊòØÊìç‰ΩúËøô‰∏™ÂØπË±°„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;21-ÂàùÂßãÂåñ‰ª•‰∏ãÊâÄÊúâ‰ª£Á†ÅÂè™ÂàóÂá∫ÂÖ≥ÈîÆÂÆûÁé∞&#34;&gt;2.1 ÂàùÂßãÂåñÔºà‰ª•‰∏ãÊâÄÊúâ‰ª£Á†ÅÂè™ÂàóÂá∫ÂÖ≥ÈîÆÂÆûÁé∞Ôºâ&lt;/h3&gt;
&lt;p&gt;ÂàùÂßãÂåñÂ∑•‰ΩúÂåÖÊã¨HikariDataSourceÂàùÂßãÂåñÔºåHikariPoolÂàùÂßãÂåñÔºåconnectionBagÂàùÂßãÂåñÔºå‰∏Ä‰∫õÁ∫øÁ®ãÊ±†ÁöÑÂàùÂßãÂåñÔºåÊúÄÂ∞èËøûÊé•Êï∞ÁöÑÂàùÂßãÂåñÔºå‰ª•‰∏ãÈÄê‰∏ÄÂàÜÊûê&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public HikariDataSource(HikariConfig configuration)
{
  // ‰∏Ä‰∏™datasourceÊúâ‰∏§‰∏™HikariPoolÊàêÂëòÂèòÈáèÔºåfastPathPoolÊó†ÂèÇÊûÑÈÄ†‰∏∫nullÔºåÁî®final‰øÆÈ•∞ÔºåpoolÊúâÂèÇÊûÑÈÄ†ÔºåÁî®volatile‰øÆÈ•∞
  // Âõ†‰∏∫volatile‰øÆÈ•∞ÁöÑÂØπË±°ÔºåÈúÄË¶Å‰ªé‰∏ªÂÜÖÂ≠òËØªÂèñÔºåËÄå‰∏îÈúÄË¶ÅÂÜôÂÖ•‰∏ªÂÜÖÂ≠òÁ≠âÊìç‰ΩúÔºåÊâÄ‰ª•ÊúÄÂ•ΩÂú®‰ΩøÁî®‰∏äÁî®ÊúâÂèÇÊûÑÈÄ†Êù•ÊûÑÈÄ†HikariDataSource
  pool = fastPathPool = new HikariPool(this);
  // ËøûÊé•Ê±†ÈÖçÁΩÆÈîÅÂÆöÊó†Ê≥ï‰øÆÊîπ
  this.seal();
}
// HikariPoolÂàùÂßãÂåñÊàêÂëòÂèòÈáèEntryCreatorÔºåÂàõÂª∫PoolEntryÁöÑ‰ªªÂä°
private final PoolEntryCreator postFillPoolEntryCreator = new PoolEntryCreator(&amp;quot;After adding &amp;quot;);

public HikariPool(final HikariConfig config)
{
  // ÂàùÂßãÂåñÈÖçÁΩÆÔºåÊ†πÊçÆÈÖçÁΩÆÁîüÊàêdatasourceÂèòÈáè
  super(config);
  // ÁîüÊàêÁúüÊ≠£ÁöÑËøûÊé•Ê±†ÔºåÂêéÁª≠ÁöÑËé∑ÂèñËøûÊé•ÈáäÊîæËøûÊé•ÈÉΩÊòØ‰ªéËøôÈáåÈù¢ÂºÑÁöÑ
  this.connectionBag = new ConcurrentBag&amp;lt;&amp;gt;(this);
  // ÊµãËØïÊï∞ÊçÆÂ∫ìÁöÑËøûÈÄöÊÄß
  checkFailFast();
  // Â¢ûÂä†ËøûÊé•ÁöÑÁ∫øÁ®ãÊ±†
  this.addConnectionExecutor = createThreadPoolExecutor(addConnectionQueue, poolName + &amp;quot; connection adder&amp;quot;, threadFactory, new ThreadPoolExecutor.DiscardOldestPolicy());
  // ÂÖ≥Èó≠ËøûÊé•ÁöÑÁ∫øÁ®ãÊ±†
  this.closeConnectionExecutor = createThreadPoolExecutor(maxPoolSize, poolName + &amp;quot; connection closer&amp;quot;, threadFactory, new ThreadPoolExecutor.CallerRunsPolicy());
  // ÂàùÂßãÂåñÁª¥ÊåÅÊúÄÂ∞èËøûÊé•Êï∞‰ªªÂä°
  this.houseKeeperTask = houseKeepingExecutorService.scheduleWithFixedDelay(new HouseKeeper(), 100L, housekeepingPeriodMs, MILLISECONDS);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ÈáçÁÇπÊòØÁª¥ÊåÅÊúÄÂ∞èËøûÊé•Êï∞‰ªªÂä°ÔºåÂ¶Ç‰∏ãÔºö&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;private final class HouseKeeper implements Runnable{
  public void run(){
     // Detect retrograde time, allowing +128ms as per NTP spec.
    if (plusMillis(now, 128) &amp;lt; plusMillis(previous, housekeepingPeriodMs)) {
       previous = now;
       // Ê†á‰∏∫‰∏¢ÂºÉÁöÑËøûÊé•ÂÖ≥Èó≠
       softEvictConnections();
       return;
    }
    if (idleTimeout &amp;gt; 0L &amp;amp;&amp;amp; config.getMinimumIdle() &amp;lt; config.getMaximumPoolSize()) {
       // Ëé∑ÂèñÂΩìÂâçËøûÊé•Ê±†‰∏≠Â∑≤Áªè‰∏çÊòØ‰ΩøÁî®‰∏≠ÁöÑËøûÊé•ÈõÜÂêà
       final List&amp;lt;PoolEntry&amp;gt; notInUse = connectionBag.values(STATE_NOT_IN_USE);
       int toRemove = notInUse.size() - config.getMinimumIdle();
       for (PoolEntry entry : notInUse) {
          // Â¶ÇÊûúPoolEntryÁöÑÊúÄÂêé‰∏ÄÊ¨°ËÆøÈóÆÁöÑÊó∂Èó¥Ë∂ÖËøá‰∫ÜidleTimeoutÂπ∂‰∏îÂ∞ÜËøô‰∏™PoolEntryÁöÑÁä∂ÊÄÅÂèò‰∏∫‰∏çÂèØÂÄüÁä∂ÊÄÅSTATE_RESERVED
          // STATE_RESERVEDÁä∂ÊÄÅÂ∫ïÂ±ÇÂèòÊõ¥ÊòØCASÂèòÊõ¥ÔºåÁî®Âà∞ÁöÑÁ±ªÊòØAtomicIntegerFieldUpdaterÔºåÂèØ‰ª•ÂØπÊåáÂÆöÁ±ªÁöÑÊåáÂÆö volatile int Â≠óÊÆµËøõË°åÂéüÂ≠êÊõ¥Êñ∞
          if (toRemove &amp;gt; 0 &amp;amp;&amp;amp; elapsedMillis(entry.lastAccessed, now) &amp;gt; idleTimeout &amp;amp;&amp;amp; connectionBag.reserve(entry)) {
             // ÂÖ≥Èó≠ËøûÊé•
             closeConnection(entry, &amp;quot;(connection has passed idleTimeout)&amp;quot;);
             toRemove--;
          }
       }
    }
    // Â°´ÂÖÖÊúÄÂ∞èËøûÊé•Âà∞minimum„ÄÇ Âú®ÂàùÂßãÂåñÊó∂ÂÄôÂ∞±Â°´ÂÖÖËøûÊé•ÔºåÂºÇÊ≠•Â°´ÂÖÖ
    fillPool();
  }
}
// Â°´ÂÖÖËøûÊé•
// ÂΩìÊ≤°ÊúâËææÂà∞ÊúÄÂ§ßËøûÊé•Êï∞‰πãÂâç ÊàñËÄÖ Á©∫Èó≤ËøûÊé•Êï∞Â∞è‰∫éÊúÄÂ∞èËøûÊé•Êï∞Êó∂ÂÄô Â∞±ÂºÇÊ≠•Êèê‰∫§ÂàõÂª∫poolEntryCreator‰ªªÂä°
private synchronized void fillPool(){
  final int connectionsToAdd = Math.min(config.getMaximumPoolSize() - getTotalConnections(), config.getMinimumIdle() - getIdleConnections())
                               - addConnectionQueueReadOnlyView.size();
  for (int i = 0; i &amp;lt; connectionsToAdd; i++) {
     addConnectionExecutor.submit((i &amp;lt; connectionsToAdd - 1) ? poolEntryCreator : postFillPoolEntryCreator);
  }
}

// ÂÖ≥Èó≠ËøûÊé•
void closeConnection(final PoolEntry poolEntry, final String closureReason){
    // Â¶ÇÊûúremoveÊàêÂäüÔºåÂ∞ÜÁä∂ÊÄÅËÆæÁΩÆ‰∏∫STATE_REMOVED
	if (connectionBag.remove(poolEntry)) {
     final Connection connection = poolEntry.close();
     // ÂºÇÊ≠•ÂÖ≥Èó≠
     closeConnectionExecutor.execute(() -&amp;gt; {
        quietlyCloseConnection(connection, closureReason);
        if (poolState == POOL_NORMAL) {
           fillPool();
        }
     });
  }
}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;‰ª•‰∏äÂ§ßËá¥ÈÄªËæëÂ∞±ÊòØÔºåÂ∞ÜË¢´Ê†á‰∏∫‰∏¢ÂºÉÁöÑËøûÊé•ÂÖ≥Èó≠ÔºåÂ∞ÜÁ©∫Èó≤Ë∂ÖÊó∂ÁöÑËøûÊé•ËøõË°åÂÖ≥Èó≠ÔºåÁÑ∂ÂêéËøõË°åËøõËøûÊé•Â°´ÂÖÖËøûÊé•ÔºåÂ°´ÂÖÖËøûÊé•ÁöÑÈÄªËæëÂ∞±ÊòØÂ¢ûÂä†poolEntryCreator‰ªªÂä°,poolEntryCreatorÈÄªËæëÂú®ÂêéÈù¢ÂàÜÊûê„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;22-Ëé∑ÂèñËøûÊé•&#34;&gt;2.2 Ëé∑ÂèñËøûÊé•&lt;/h3&gt;
&lt;p&gt;Ëé∑ÂèñËøûÊé•ÊòØ‰∏ªË¶ÅÁöÑÂÆûÁé∞ÈÄªËæëÔºåÈ¶ñÂÖàÁúãHikariDataSourceÂØπË±°getConnnectionÊñπÊ≥ï&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;// ÂèåÈáçÈîÅÂÆûÁé∞
public Connection getConnection(){
	HikariPool result = pool;
	if (result == null) {
	 synchronized (this) {
	    result = pool;
	    if (result == null) {
	       pool = result = new HikariPool(this);
	       // ÈîÅÂÆöÈÖçÁΩÆÔºå‰∏çËÉΩÁÉ≠Êõ¥Êñ∞ÈÖçÁΩÆ
	       this.seal();
	    }
	 }
	}
	return result.getConnection();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;result.getConnection()Â∞±ÊòØHikariPool getConnectionÊñπÊ≥ïÔºåËøôÈáåÈù¢Â§ßËá¥Ê†∏ÂøÉÈÄªËæëÂ∞±ÊòØÂä†ÈîÅÂú®Ë∂ÖÊó∂Êó∂Èó¥ÂÜÖËé∑ÂèñpoolEntryÁöÑconnectionBag.borrowÊñπÊ≥ïÔºåÈáçÁÇπÁùÄÈáçborrowÊñπÊ≥ïÂÆûÁé∞„ÄÇ&lt;/p&gt;
&lt;p&gt;Âú®ËÆ≤‰πãÂâçÔºåÂÖà‰ªãÁªç‰ª•‰∏ãconnectionBagÁöÑÂá†‰∏™ÈáçË¶ÅÁöÑÊàêÂëòÂèòÈáè&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;final CopyOnWriteArrayList&lt;T&gt; sharedListÔºöÂΩìÂâçÊâÄÊúâÁºìÂ≠òÁöÑpoolEntryËøûÊé•ÔºåÈÉΩÂú®Ëøô‰∏™listÂÜÖÔºåCopyOnWriteArrayListÂÜôÊó∂Â§çÂà∂ÔºåÂú®ËØªÂ§öÂÜôÂ∞ëÁöÑÂú∫ÊôØ‰∏ãÊÄßËÉΩÊõ¥È´òÔºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãËøûÊé•Ê±†‰∏≠ÁöÑpoolEntryËøûÊé•‰∏ç‰ºöÂ¢ûÂä†ÊàñËÄÖÂÖ≥Èó≠ÔºåËØªÂú∫ÊôØÂ§ö„ÄÇ&lt;/li&gt;
&lt;li&gt;final ThreadLocal&amp;lt;List&lt;Object&gt;&amp;gt; threadList ÔºöÂΩìÂâçÁ∫øÁ®ãÁºìÂ≠òÁöÑÊú¨Âú∞poolEntryÁöÑlist„ÄÇÊúùÁîüÂ§ïÁÅ≠ÁöÑÁ∫øÁ®ãÔºåÊòØÊó†Ê≥ïÊúâÊïàÂà©Áî®Êú¨Âú∞Á∫øÁ®ãÁºìÂ≠òÁöÑÔºåÂè™ÊúâÂú®Á∫øÁ®ãÊ±†Âú∫ÊôØÊàñËÄÖÂΩìÂâçÁ∫øÁ®ãÂ§öÊ¨°‰ΩøÁî®getConnetionËé∑ÂèñconnectionÊñπÊ≥ïËøõË°åÂ¢ûÂà†ÊîπÊó∂ÂÄôÔºåÊâç‰ºöÊúâÊïàÁöÑ‰ΩøÁî®ThreadLocal„ÄÇ&lt;/li&gt;
&lt;li&gt;final boolean weakThreadLocalsÔºöÊòØÂê¶ÊòØÂº±ÂºïÁî®ÔºåThreadLocalÂèØËÉΩ‰ºöÂ≠òÂú®ÂÜÖÂ≠òÊ≥ÑÈú≤ÁöÑÈ£éÈô©ÔºåÂΩìÂÄº‰∏∫trueÊó∂ÂåÖË£ÖÁöÑpoolEntryÂØπË±°ÊòØÂº±ÂºïÁî®ÔºåÂú®ÂÜÖÂ≠ò‰∏çË∂≥Êó∂GCÁöÑÊó∂ÂÄô‰ºöË¢´ÂõûÊî∂ÔºåÈÅøÂÖç‰∫ÜÂá∫Áé∞ÂÜÖÂ≠òÊ≥ÑÈú≤ÁöÑÈóÆÈ¢ò„ÄÇ&lt;/li&gt;
&lt;li&gt;final IBagStateListener listenerÔºöÁõëÂê¨Âô®ÔºåÁõëÂê¨ÂàõÂª∫poolEntryÁöÑ‰ªªÂä°&lt;/li&gt;
&lt;li&gt;final AtomicInteger waitersÔºöÂΩìÂâçÊ≠£Âú®Á≠âÂæÖËé∑ÂèñËøûÊé•ÁöÑÊï∞Èáè&lt;/li&gt;
&lt;li&gt;final SynchronousQueue&lt;T&gt; handoffQueueÔºöÊó†Â≠òÂÇ®ÂÖÉÁ¥†ÁöÑÂçï‰∏™Êèê‰æõËÄÖÂíåÊ∂àË¥πËÄÖÈÄö‰ø°ÈòüÂàóÔºåÂπ∂‰∏îÊòØÂÖ¨Âπ≥Ê®°Âºè„ÄÇÊØîÂ¶ÇÔºåÊòØË∞ÅÂÖàÊù•takeÊìç‰ΩúÔºåË∞ÅÂ∞±‰ºö‰ºòÂÖàtakeÊàêÂäüÔºåÁ±ª‰ººFIFO„ÄÇ&lt;/li&gt;
&lt;li&gt;this.threadList = ThreadLocal.withInitial(() -&amp;gt; new FastList&amp;lt;&amp;gt;(IConcurrentBagEntry.class, 16))ÔºöÈªòËÆ§ÊÉÖÂÜµ‰∏ã‰ºöThreadLocal valueÈªòËÆ§‰ΩøÁî®fastListÊù•Â≠òÂÇ®poolEntryÔºåfastListÊòØHikariËá™Â∑±ÂÜô‰∏Ä‰∏™‰∏çÈúÄË¶ÅËåÉÂõ¥Ê£ÄÊü•ÁöÑ‰∏Ä‰∏™ListÔºåËÄå‰∏îÂÆÉÁöÑremoveÊñπÊ≥ïÊòØ‰ªéÂêéÂæÄÂâçÈÅçÂéÜÂà†Èô§ÁöÑÔºàÂíåarrayListÁõ∏ÂèçÔºâÔºåÂàöÂ•ΩÁ¨¶Âêà‰∏ãÈù¢ÂÄíÂèôÈÅçÂéÜËé∑ÂèñpoolEntryÁöÑÈÄªËæë&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public T borrow(long timeout, final TimeUnit timeUnit) throws InterruptedException
   {
      // Try the thread-local list first
      // 1„ÄÅ‰ºòÂÖà‰ªéÊú¨Âú∞Á∫øÁ®ãÁºìÂ≠ò‰∏≠Ëé∑ÂèñpoolEntry
      final List&amp;lt;Object&amp;gt; list = threadList.get();
      // ÂÄíÂèôÈÅçÂéÜÔºå‰ºòÂÖàËé∑ÂèñÊúÄËøë‰ΩøÁî®ÁöÑpoolEntry
      for (int i = list.size() - 1; i &amp;gt;= 0; i--) {
         final Object entry = list.remove(i);
         // ÂºÄÂêØÂº±ÂºïÁî®Â∞±ÂØπvalueËøõË°åÂº±ÂºïÁî®ÂåÖË£Ö
         final T bagEntry = weakThreadLocals ? ((WeakReference&amp;lt;T&amp;gt;) entry).get() : (T) entry;
         // CASÊàêÂäüÂ∞±ËøîÂõûpoolEntry
         if (bagEntry != null &amp;amp;&amp;amp; bagEntry.compareAndSet(STATE_NOT_IN_USE, STATE_IN_USE)) {
            return bagEntry;
         }
      }

      // Otherwise, scan the shared list ... then poll the handoff queue
      // 2„ÄÅÊú¨Âú∞ÁºìÂ≠òÊ≤°ÊúâÔºåÈÇ£‰πà‰ªéÊâÄÊúâÁºìÂ≠òÁöÑpoolEntryËøûÊé•ÂàóË°®‰∏≠Ëé∑Âèñ
      final int waiting = waiters.incrementAndGet();
      try {
         for (T bagEntry : sharedList) {
            if (bagEntry.compareAndSet(STATE_NOT_IN_USE, STATE_IN_USE)) {
               // If we may have stolen another waiter&#39;s connection, request another bag add.
               // Â¶ÇÊûúÁ≠âÂæÖÁöÑ‰ªªÂä°Â§ß‰∫é1ÔºåÊ∑ªÂä†‰∏Ä‰∏™ÁõëÂê¨‰ªªÂä°
               if (waiting &amp;gt; 1) {
                  listener.addBagItem(waiting - 1);
               }
               return bagEntry;
            }
         }

         // Â¶ÇÊûúsharedListÈÉΩÂú®‰ΩøÁî®Áä∂ÊÄÅ‰∏≠ÔºåÊ∑ªÂä†‰∏Ä‰∏™ÁõëÂê¨‰ªªÂä°
         listener.addBagItem(waiting);

		 // 3„ÄÅÊâÄÊúâÁöÑËøûÊé•Ê≠£Âú®Ë¢´‰ΩøÁî®ÔºåË∂ÖÊó∂Á≠âÂæÖÂÖ∂‰ªñpoolEntryË¢´ÂΩíËøòÈÄöÁü•handoffQueue
         timeout = timeUnit.toNanos(timeout);
         do {
            final long start = currentTime();
            // ‰ªéÈòªÂ°ûÈòüÂàó‰∏≠Ëé∑ÂèñbagEntry
            final T bagEntry = handoffQueue.poll(timeout, NANOSECONDS);
            if (bagEntry == null || bagEntry.compareAndSet(STATE_NOT_IN_USE, STATE_IN_USE)) {
               return bagEntry;
            }

            timeout -= elapsedNanos(start);
         } while (timeout &amp;gt; 10_000);
         return null;
      }finally {
         waiters.decrementAndGet();
      }
   }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;‰ª•‰∏äÂÖ∑‰ΩìÂÆûÁé∞Ê≠•È™§&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;‰ºòÂÖà‰ªéÊú¨Âú∞Á∫øÁ®ãÁºìÂ≠ò‰∏≠Ëé∑ÂèñpoolEntry&lt;/li&gt;
&lt;li&gt;Êú¨Âú∞ÁºìÂ≠òÊ≤°ÊúâÔºåÈÇ£‰πà‰ªéÊâÄÊúâÁºìÂ≠òÁöÑpoolEntryËøûÊé•ÂàóË°®‰∏≠Ëé∑Âèñ&lt;/li&gt;
&lt;li&gt;ÊâÄÊúâÁöÑËøûÊé•Ê≠£Âú®Ë¢´‰ΩøÁî®ÔºåÂ¢ûÂä†‰∏Ä‰∏™ÁõëÂê¨‰ªªÂä°ÔºåËøô‰∏™‰ªªÂä°Â∞±ÊòØÂºÇÊ≠•ÂàõÂª∫poolEntryÔºå‰ª•‰æøÁªôÊ≠§Ê¨°ÈòªÂ°ûÁöÑÁ∫øÁ®ãÊèê‰æõpoolEntry&lt;/li&gt;
&lt;li&gt;Ë∂ÖÊó∂Á≠âÂæÖÂÖ∂‰ªñpoolEntryË¢´ÂΩíËøòÊàñËÄÖÊñ∞Âª∫Âêé ÈÄöÁü•handoffQueueÔºå‰ª•‰æøËé∑ÂèñpoolEntry&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ÂèØ‰ª•ÊÄªÁªìÂá∫ÔºåHikariËøûÊé•Ê±†ÊúÄÂ§ßÈôêÂ∫¶‰∏äÂáèÂ∞ëÂ§öÁ∫øÁ®ãÈîÅÁ´û‰∫âÔºåÊèêÂçáËøûÊé•Ê±†ÁöÑÊÄßËÉΩ„ÄÇ&lt;/p&gt;
&lt;p&gt;ÁÑ∂ÂêéÁúã‰∏Ä‰∏ãÂºÇÊ≠•ÂàõÂª∫poolEntry poolEntryCreatorÁöÑÂÆûÁé∞Ôºö&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;private final class PoolEntryCreator implements Callable&amp;lt;Boolean&amp;gt; {
  @Override
  public Boolean call()
  {
     // Âè™ÊúâÁâπÂÆöÊù°‰ª∂‰∏ãÊâçÂàõÂª∫PoolEntry
     while (poolState == POOL_NORMAL &amp;amp;&amp;amp; shouldCreateAnotherConnection()) {
        // ÂàõÂª∫PoolEntry
        final PoolEntry poolEntry = createPoolEntry();
        if (poolEntry != null) {
           // Âú®ËøûÊé•Ê±†‰∏≠Â¢ûÂä†PoolEntry
           connectionBag.add(poolEntry);
           return Boolean.TRUE;
        }
     }

     // Pool is suspended or shutdown or at max size
     return Boolean.FALSE;
  }

  // 1„ÄÅÊÄªÁöÑËøûÊé•Êï∞Â∞è‰∫éÊúÄÂ§ßËøûÊé•Êï∞ 
  // 2„ÄÅÂΩìÂâçËøûÊé•Ê±†‰∏≠ÁöÑÁ≠âÂæÖËé∑ÂèñËøûÊé•ÁöÑÁ∫øÁ®ãÂ§ß‰∫é0  ÊàñËÄÖ ËøûÊé•Ê±†‰∏≠ÁöÑÁ©∫Èó≤ËøûÊé•Â∞è‰∫éÊúÄÂ∞èËøûÊé•Ê±†Êï∞
  // Êª°Ë∂≥ÊâÄÊúâ‰∏äËø∞Êù°‰ª∂ÂêéÊâçÂàõÂª∫poolEntry
  private synchronized boolean shouldCreateAnotherConnection() {
     return getTotalConnections() &amp;lt; config.getMaximumPoolSize() &amp;amp;&amp;amp;
        (connectionBag.getWaitingThreadCount() &amp;gt; 0 || getIdleConnections() &amp;lt; config.getMinimumIdle());
  }
}

// ÁúüÊ≠£ÂàõÂª∫poolEntryÁöÑÂÆûÁé∞
private PoolEntry createPoolEntry(){
  try {
      // ÂàõÂª∫poolEntry
     final PoolEntry poolEntry = newPoolEntry();

     final long maxLifetime = config.getMaxLifetime();
     if (maxLifetime &amp;gt; 0) {
        // variance up to 2.5% of the maxlifetime
        final long variance = maxLifetime &amp;gt; 10_000 ? ThreadLocalRandom.current().nextLong( maxLifetime / 40 ) : 0;
        final long lifetime = maxLifetime - variance;
        // Â¶ÇÊûúÈÖçÁΩÆ‰∫ÜmaxlifetimeÔºåÈÇ£‰πà‰ºöÁªôËøô‰∏Ä‰∏™ËøûÊé•Â¢ûÂä†‰∏Ä‰∏™Âª∂Ëøü‰ªªÂä°
        // Âª∂Ëøü‰ªªÂä°‰∏ªË¶ÅÂ∞±ÊòØÂ∞ÜËøô‰∏™ËøûÊé•Ê†áËÆ∞‰∏∫Evict‰∏çÂèØÁî®
        poolEntry.setFutureEol(houseKeepingExecutorService.schedule(
           () -&amp;gt; {
              if (softEvictConnection(poolEntry, &amp;quot;(connection has passed maxLifetime)&amp;quot;, false /* not owner */)) {
                 addBagItem(connectionBag.getWaitingThreadCount());
              }
           },
           lifetime, MILLISECONDS));
     }
     return poolEntry;
  }
  return null;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Áî±‰∏äÈù¢createPoolEntryÂèØ‰ª•Áü•ÈÅìÔºåHikariCPÂú®‰ΩøÁî®Êó∂‰∏ç‰ºöÂÖ≥Èó≠ËøûÊé•„ÄÇÂ¶ÇÊûú‰ΩøÁî®‰∏≠ÁöÑËøûÊé•Âà∞ËææmaxLifetimeÊó∂ÂÆÉÂ∞ÜË¢´Ê†áËÆ∞‰∏∫È©±ÈÄêÔºåÂπ∂‰∏îÂú®‰∏ã‰∏ÄÊ¨°Á∫øÁ®ãÂ∞ùËØïÂÄüÁî®ÂÆÉÊó∂Â∞ÜË¢´È©±ÈÄêÔºåËøô‰πüÊòØHikariËøûÊé•Ê±†ËÆæËÆ°ÁöÑ‰∏Ä‰∏™Ê†∏ÂøÉÁ≤æÈ´ì„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂÜçÊù•Áúã‰∏Ä‰∏ãconnectionBagÁöÑaddÊñπÊ≥ï&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public void add(final T bagEntry){
      // Âú®sharedListÂ¢ûÂä†bagEntry
      sharedList.add(bagEntry);
      // spin until a thread takes it or none are waiting
      // Êª°Ë∂≥‰∏Ä‰∏ãÊù°‰ª∂ÂêéÔºåËÆ©Âá∫ÂΩìÂâçÁ∫øÁ®ãCPUÊó∂Èó¥ÁâáÔºåËÆ©ÂÖ∂‰ªñÁ∫øÁ®ãÂéªÂ∑•‰Ωú
      // 1„ÄÅÂΩìÁ≠âÂæÖËé∑ÂèñËøûÊé•ÁöÑÁ∫øÁ®ãÂ§ß‰∫é0  2„ÄÅÂΩìÂâçÁöÑPoolEntryÁä∂ÊÄÅÊòØÊ≤°Âç†Áî®  3„ÄÅÊ≤°ÊúâÂÖ∂‰ªñÁ∫øÁ®ãÂéª‰ªéÈòüÂàó‰∏≠Âèñ‰ªªÂä°
      while (waiters.get() &amp;gt; 0 &amp;amp;&amp;amp; bagEntry.getState() == STATE_NOT_IN_USE &amp;amp;&amp;amp; !handoffQueue.offer(bagEntry)) {
         Thread.yield();
      }
   }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ÂèØ‰ª•ÁúãÂà∞ÔºåÊñ∞Â¢ûÁöÑpoolEntry‰ºöÂä†ÂÖ•Âà∞sharedListÊâÄÊúâÁöÑÁºìÂ≠òËøûÊé•‰∏≠ÔºåÂπ∂‰∏îË¶ÅÊª°Ë∂≥‰∏äËø∞‰∏â‰∏™Êù°‰ª∂ÁöÑÊó∂ÂÄô‰ºö‰∏ÄÁõ¥Âæ™ÁéØËÆ©Âá∫CPUÊó∂Èó¥ÁâáÔºåËÆ©ÂÖ∂‰ªñÁ∫øÁ®ã‰ªéÊó†ÁïåÈòüÂàó‰∏≠ÂéªÂèñËøûÊé•&lt;/p&gt;
&lt;h3 id=&#34;23-ÈáäÊîæËøûÊé•&#34;&gt;2.3 ÈáäÊîæËøûÊé•&lt;/h3&gt;
&lt;p&gt;HikariÂÆûÁé∞‰∫ÜÂÖ≥Èó≠ËøûÊé•ConnectionÁöÑÊñπÊ≥ïÔºå‰∏çÊòØÁúüÊ≠£ÁöÑÂÖ≥Èó≠ËøûÊé•ÔºåËÄåÊòØÂΩíËøòÂà∞ËøûÊé•Ê±†ÂΩì‰∏≠ÔºåÂÆûÁé∞ÈÄªËæëÂú®ProxyConnectionÁöÑcloseÊñπÊ≥ï‰∏≠ÔºåÁÑ∂Âêé‰ºöË∞ÉÁî®poolEntryÁöÑrecycleÊñπÊ≥ïÔºåÊúÄÁªà‰ºöË∞ÉÁî®ConcurrentBagÁöÑrequiteÊñπÊ≥ïÔºåÊàë‰ª¨ÁùÄÈáçÂàÜÊûêËøô‰∏™ÊñπÊ≥ïÔºö&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;// Ê≠§ÊñπÊ≥ï‰ºöÂ∞ÜÂÄüÊù•ÁöÑÂØπË±°ËøîÂõûÂà∞ConcurrentBag‰∏≠„ÄÇÂ¶ÇÊûú‰∏çÂΩíËøò‰ºöÂØºËá¥ÂÜÖÂ≠òÊ≥ÑÈú≤
public void requite(final T bagEntry){
  // ËÆæÁΩÆ‰∏∫Êú™‰ΩøÁî®Áä∂ÊÄÅ‰ª•‰æøÂÖ∂‰ªñÁ∫øÁ®ãËé∑ÂèñËøûÊé•
  bagEntry.setState(STATE_NOT_IN_USE);
  for (int i = 0; waiters.get() &amp;gt; 0; i++) {
     // ‰º†ÈÄí‰ø°Âè∑ÁªôÈòüÂàóÔºå‰ºòÂÖàÂëäËØâÂÖ∂‰ªñÈòªÂ°ûÁ≠âÂæÖËé∑ÂèñÁöÑÁ∫øÁ®ãËé∑ÂèñpoolEntry
     if (bagEntry.getState() != STATE_NOT_IN_USE || handoffQueue.offer(bagEntry)) {
        return;
     }
     // Âæ™ÁéØÂ§öÊ¨°ÂêéÔºåÁ≠âÂæÖÈòªÂ°û10Á∫≥Áßí
     else if ((i &amp;amp; 0xff) == 0xff) {
        parkNanos(MICROSECONDS.toNanos(10));
     }
     else {
        // ËÆ©Âá∫Êó∂Èó¥Áâá
        Thread.yield();
     }
  }

  // Êõ¥Êñ∞ÊúÄÊñ∞poolEntryÁöÑÊú¨Âú∞Á∫øÁ®ãÁöÑÁºìÂ≠ò‰∏≠Ôºå‰ª•‰æøÂΩìÂâçÁ∫øÁ®ã‰∏ãÊ¨°Ëé∑ÂèñËøûÊé•
  final List&amp;lt;Object&amp;gt; threadLocalList = threadList.get();
  if (threadLocalList.size() &amp;lt; 50) {
     // ÂØπÂ∫î‰∏äÊñá‰∏≠ÁöÑfastList, ÊØèÊ¨°Êñ∞Â¢ûÈÉΩÊòØÊîæÂà∞Êï∞ÁªÑÊúÄÂêéÈù¢
     threadLocalList.add(weakThreadLocals ? new WeakReference&amp;lt;&amp;gt;(bagEntry) : bagEntry);
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ÊúÄÂêéÊàë‰ª¨ÂàÜÊûê‰ª•‰∏ãremoveÊñπÊ≥ïÔºåÂæàÁÆÄÂçï&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public boolean remove(final T bagEntry)
   {
      if (!bagEntry.compareAndSet(STATE_IN_USE, STATE_REMOVED) &amp;amp;&amp;amp; !bagEntry.compareAndSet(STATE_RESERVED, STATE_REMOVED) &amp;amp;&amp;amp; !closed) {
         LOGGER.warn(&amp;quot;Attempt to remove an object from the bag that was not borrowed or reserved: {}&amp;quot;, bagEntry);
         return false;
      }
      // ‰ªéÊâÄÊúâÁºìÂ≠òÁöÑlistÂéªÈô§
      final boolean removed = sharedList.remove(bagEntry);
      // ‰ªéÂΩìÂâçÊú¨Âú∞Á∫øÁ®ãÁºìÂ≠ò‰∏≠ÂéªÈô§
      threadList.get().remove(bagEntry);
      return removed;
   }

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;‰ªÄ‰πàÊó∂ÂÄô‰ºöË∞ÉÁî®removeÔºåÁ¨îËÄÖÊÄªÁªì‰∫Ü‰ª•‰∏ãÔºö&lt;br&gt;
1„ÄÅÂΩìË∞ÉÁî®datasource shutdownÊñπÊ≥ïÊó∂ÂÄô&lt;br&gt;
2„ÄÅÂΩìÂâçconnetionÊ≤°ÊúâÁî®ÁöÑÊó∂ÂÄôÔºàÂèØËÉΩÊòØMySQLÊúçÂä°Âô®downÊú∫Ôºâ&lt;br&gt;
3„ÄÅÂΩìÂâçconntionË¢´Ê†áËÆ∞‰∏∫‰∏¢ÂºÉÊó∂ÂÄôÔºåË∂ÖËøá‰∫ÜmaxLifetimeË¢´Ê†áËÆ∞‰∏∫‰∏¢ÂºÉ&lt;br&gt;
4„ÄÅÂΩìÂâçconnetionÁöÑÊúÄÂêé‰∏ÄÊ¨°‰ΩøÁî®Êó∂Èó¥ÂíåÂΩìÂâçÊó∂Èó¥ÁöÑÂ∑ÆÂÄºÂ§ß‰∫éidleTimeoutÊó∂ÂÄô&lt;/p&gt;
&lt;p&gt;‰ª•‰∏äÂèØ‰ª•ÁêÜËß£‰∫Ü‰ªéÂàùÂßãÂåñÂà∞getConnectionËé∑ÂèñËøûÊé•ÔºåÂà∞closeConnectiondÁöÑÊ†∏ÂøÉÈÄªËæëÔºåÂÆûÁé∞‰∫ÜÊ†∏ÂøÉÈÄªËæëÁöÑÂ∞èÈó≠ÁéØ„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;‰∏â-Ëá™Â∑±ÂÜô‰∏™ËøûÊé•Ê±†ÈúÄË¶ÅËÄÉËôëÂì™‰∫õÊñπÈù¢&#34;&gt;‰∏â„ÄÅËá™Â∑±ÂÜô‰∏™ËøûÊé•Ê±†ÈúÄË¶ÅËÄÉËôëÂì™‰∫õÊñπÈù¢&lt;/h2&gt;
&lt;p&gt;Ê†πÊçÆ‰∏äÈù¢ÂàÜÊûêÁöÑÊ∫êÁ†ÅÔºåÂèØ‰ª•ÁúãÂà∞ÔºåÂ¶ÇÊûúËá™Â∑±ÂÆûÁé∞‰∏Ä‰∏™ËøûÊé•Ê±†ÁöÑËØùÔºåÈúÄË¶ÅËÄÉËôëÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ÂàùÂßãÂåñÁöÑÊ≠•È™§ÔºåÂàùÂßãÂåñÊúÄÂàùÁöÑÊúÄÂ∞èÁ©∫Èó≤Êï∞ËøûÊé•&lt;/li&gt;
&lt;li&gt;ÂèñËøûÊé•Ôºå‰ªéËøûÊé•Ê±†‰∏≠ÂèñÔºåÂπ∂‰∏îË¶Å‰∏äÈîÅ&lt;/li&gt;
&lt;li&gt;ÂΩíËøòËøûÊé•ÔºåÈúÄË¶ÅÊîæÂõûÂà∞ËøûÊé•Ê±†‰∏≠ÔºåË¶Å‰∏äÈîÅ&lt;/li&gt;
&lt;li&gt;Â¶ÇÊûúËøûÊé•Ê±†ÂÖ®Ë¢´Âç†Áî®ÔºåÊòØËøîÂõûÂ§±Ë¥•ÔºåËøòÊòØËÆ©‰∏äÊ∏∏Á≠âÂæÖ&lt;/li&gt;
&lt;li&gt;ÊãøÂà∞ÁöÑËøûÊé•ÔºåÈúÄË¶ÅÊ£ÄÊµãËøô‰∏™ËøûÊé•ÊòØÂê¶ÂèØÁî®ÔºåÊòØÂê¶ËøòÊòØÊ¥ªÁöÑÔºåÂõ†‰∏∫‰∏çÁü•ÈÅìÊúçÂä°Á´ØÊòØÂê¶ÊåÇÊéâÔºåÊäëÊàñÊòØËøûÊé•Ë∂ÖËøámaxlifeË¢´Ê†áËÆ∞‰∏∫evitÊ≠£Âú®ÂÖ≥Èó≠&lt;/li&gt;
&lt;li&gt;ËøûÊé•Ê±†Áî®‰ªÄ‰πàÊï∞ÊçÆÁªìÊûÑÂ≠òÂÇ®ÔºåÊï∞ÁªÑËøòÊòØÈìæË°®ÔºåËøòË¶ÅËÄÉËôëÂπ∂ÂèëÂÆâÂÖ®&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;Âõõ-ÊÄªÁªì&#34;&gt;Âõõ„ÄÅÊÄªÁªì&lt;/h2&gt;
&lt;p&gt;Êú¨ÁØáÊñáÁ´†‰ªéÊ∫êÁ†ÅËßíÂ∫¶ÂàÜÊûê‰∫Ü‰∏ÄÊ≥¢ÔºåÊòéÁôΩ‰∫Ü‰∏∫‰ªÄ‰πàHikariDataSourceÊòØ‰∏öÁïåÊÄßËÉΩÊúÄÈ´òËøûÊé•Ê±†ÁöÑÂéüÂõ†„ÄÇÊàë‰ª¨ÂèØ‰ª•Êõ¥Ê∑±ÂÖ•ÁêÜËß£ËøûÊé•Ê±†ËÉåÂêéÁöÑÂ∑•‰ΩúÂéüÁêÜÔºå‰ª•‰æøÂêéÈù¢Âá∫‰∫ÜÁ∫ø‰∏äÈóÆÈ¢òÂèØ‰ª•ËΩªÊùæÂ∫îÂØπ„ÄÇÊúÄÂêéËØªËÄÖÂèØ‰ª•ËØïËØïËá™Â∑±ÂÆûÁé∞‰∏Ä‰∏™ËøûÊé•Ê±†Âä†Ê∑±ÁêÜËß£„ÄÇ&lt;br&gt;
‰ª•‰∏äÊñáÁ´†Êúâ‰ªª‰ΩïË°®Ëææ‰∏äÊàñËÄÖÊäÄÊúØÈóÆÈ¢òÊ¨¢ËøéÊåáÊ≠£„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;Âõõ-ÂèÇËÄÉ&#34;&gt;Âõõ„ÄÅÂèÇËÄÉ&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Êï∞ÊçÆÂ∫ìËøûÊé•Ê±†‰πãHikariÊ∫êÁ†ÅËß£Êûê‚Äî‚Äîhttps://www.cnblogs.com/jackion5/p/14193025.html&lt;/li&gt;
&lt;/ol&gt;
">HikariDataSourceÊ†∏ÂøÉÊ∫êÁ†ÅÂàÜÊûê</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/ji-yi-ci-duo-shu-ju-yuan-lu-you-zao-cheng-de-shu-ju-ku-lian-jie-nei-cun-xie-lu/"" data-c="
          &lt;h3 id=&#34;ÂâçË®Ä&#34;&gt;ÂâçË®Ä&lt;/h3&gt;
&lt;p&gt;‰πãÂâç‰∏ÄÁØáÊñáÁ´†ËÆ≤‰∫ÜËá™Â∑±ÂÜô‰∫Ü‰∏Ä‰∏™Â§öÊï∞ÊçÆÊ∫êË∑ØÁî±ÁªÑ‰ª∂ÁªôÂÖ¨Âè∏ÂÜÖÈÉ®‰ΩøÁî®ÔºåËøõË°åÂø´ÈÄüËø≠‰ª£„ÄÇÊñáÁ´†URLÊòØ &lt;a href=&#34;https://zhangyaoo.github.io/post/saas-xi-tong-duo-shu-ju-yuan-lu-you-you-ya-jie-jue-fang-an&#34;&gt;SaaSÁ≥ªÁªüÂ§öÊï∞ÊçÆÊ∫êË∑ØÁî±‰ºòÈõÖËß£ÂÜ≥ÊñπÊ°à&lt;/a&gt;&lt;br&gt;
ÈöèÁùÄÊó∂Èó¥Êé®ÁßªÔºåÊüê‰∏ÄÂ§©ËøêÁª¥Êâæ‰∏äÈó®ËØ¥Êï∞ÊçÆÂ∫ìËøûÊé•ÊâìÊª°ÔºåÂ∞±ÂàöÂ•ΩËøô‰∏ÄÂè∞Êú∫Âô®‰∏äË£Ö‰∫ÜJavaÊúçÂä°ÂØºËá¥ÁöÑ„ÄÇ&lt;br&gt;
‰∏ãÈù¢ÊñáÁ´†Â∞±ÊòØËÆ≤ÁöÑËøôÊ¨°ËøûÊé•Ê≥ÑÈú≤ÂØºËá¥ÁöÑÊï∞ÊçÆÂ∫ìhang‰ΩèÈóÆÈ¢ò‰ª•ÂèäÂêéÈù¢ÁöÑËß£ÂÜ≥ËøáÁ®ã„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;‰∏Ä-Ê°àÂèëÂΩìÊó∂ÁöÑÊÉÖÂÜµ&#34;&gt;‰∏Ä„ÄÅÊ°àÂèëÂΩìÊó∂ÁöÑÊÉÖÂÜµÔºö&lt;/h3&gt;
&lt;p&gt;Á∫ø‰∏äMySQL session ÈÄêÊ∏êÂ¢ûÂä†Ôºå‰∏çÊ¥ªË∑ÉÁöÑÁöÑÊï∞ÈáèÈÄêÊ∏êÂ¢ûÂä†ÔºåÂØºËá¥ÁöÑÂêéÊûúÔºöÂç†Áî®ÈìæÊé•ÔºåÂØºËá¥ÈìæÊé•Êª°‰∫ÜÊó†Ê≥ïÂàÜÈÖçÊñ∞ÁöÑËøûÊé•&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612261925869.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;‰∫å-Á¥ßÊÄ•Â§ÑÁêÜÊñπÂºè&#34;&gt;‰∫å„ÄÅÁ¥ßÊÄ•Â§ÑÁêÜÊñπÂºèÔºö&lt;/h3&gt;
&lt;p&gt;Áî®Ëá™Á†îÁöÑÂ∫îÁî®Â±ÇÁΩëÂÖ≥Â∞ÜÊµÅÈáèÂàáÊç¢‰∏∫ÊóßÁöÑÁâàÊú¨‰∏≠ÔºåÂπ∂‰∏î‰∏çÂÅúÊú∫ÂàáÊç¢ÔºåÁÑ∂ÂêéÂ∞ÜÂΩìÂâçÁöÑÁâàÊú¨ÁöÑÊúçÂä°ÂÅúË∞ÉÔºåÁÑ∂ÂêéËßÇÂØüÈòøÈáå‰∫ëÁöÑÊï∞ÊçÆÂ∫ìËøûÊé•Êï∞ÈáèÂèòÂõûÊ≠£Â∏∏„ÄÇ&lt;/p&gt;
&lt;p&gt;ÁõÆÂâçÁ∫ø‰∏äÂ≠òÂú®Â§ö‰∏™ÁâàÊú¨Â≠òÂú®dockerÔºåÁÑ∂ÂêéÁî®K8sÈÉ®ÁΩ≤ÔºåÂÆûÁé∞Âø´ÈÄü‰∏çÂÅúÊú∫ÂàáÊç¢‰∏äÁ∫ø„ÄÇ&lt;br&gt;
Ëá™Á†îÁΩëÂÖ≥ËøôÁØáÊñáÁ´†Êúâ‰ªãÁªçÔºö &lt;a href=&#34;https://zhangyaoo.github.io/post/ying-yong-ceng-wang-guan-she-ji-yu-shi-xian&#34;&gt;Â∫îÁî®Â±ÇÁΩëÂÖ≥ËÆæËÆ°ÂíåÂÆûÁé∞&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;‰∏â-Á¨¨‰∏ÄÊ¨°Êü•ÊâæÈóÆÈ¢òÂπ∂‰∏îËß£ÂÜ≥ÁöÑËøáÁ®ã&#34;&gt;‰∏â„ÄÅÁ¨¨‰∏ÄÊ¨°Êü•ÊâæÈóÆÈ¢òÂπ∂‰∏îËß£ÂÜ≥ÁöÑËøáÁ®ãÔºö&lt;/h3&gt;
&lt;p&gt;1„ÄÅÂºÄÂêØÊú¨Âú∞ÊúçÂä°ÔºåËÆ©ÂÆÉÈ£û‰∏Ä‰ºöÔºåÊàñËÄÖÂ§öÁ∫øÁ®ãÂπ∂‰∏îÂàáÁßüÊà∑Êü•ËØ¢Êï∞ÊçÆÂ∫ìÔºådumpÂÜÖÂ≠òÂø´ÁÖßËøõË°åÂàÜÊûê&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612253583270.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;2„ÄÅÁÑ∂ÂêéÊü•ÁúãÊú¨Âú∞ÊúçÂä°Áõ∏ÂÖ≥Êï∞ÊçÆÂ∫ìËøûÊé•ÁöÑÂØπË±°&lt;br&gt;
1ÔºâÂàÜÊûêsqlsession ÂØπË±°ÔºåÂèëÁé∞sqlsessionÂØπË±°‰∏∫0ÔºåËÄå‰∏îÊó•Âøó‰∏≠ÊúâÊâìÂç∞ÂèäÊó∂ÂÖ≥Èó≠sqlsession„ÄÇÁªìËÆ∫ÔºösqlsessionÊ≠£Â∏∏ÔºåËØ¥ÊòéÊ≠£Â∏∏ÂÖ≥Èó≠‰∫Üsqlsession&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612237357285.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
2ÔºâÂàÜÊûêdatasource ÂØπË±°ÔºåÂèëÁé∞datasourceÂØπË±°ÂíåÊï∞ÊçÆÂ∫ìËøûÊé•ÈÖçÁΩÆ‰∏≠ÁöÑmax-pool-size‰∏ÄËá¥„ÄÇÁªìËÆ∫ÔºödatasourceÊ≠£Â∏∏ÔºåËØ¥ÊòéÊ≠£Â∏∏ÂÖ≥Èó≠‰∫Üdatasource&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612237380060.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
3ÔºâÂàÜÊûêconnectionÂØπË±°ÔºåÂèëÁé∞HikariProxyConnectionÂØπË±°ÂíåÊï∞ÊçÆÂ∫ìÈÖçÁΩÆ‰∏ÄËá¥„ÄÇÁªìËÆ∫ÔºöHikariProxyConnectionÊ≠£Â∏∏&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612237411657.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;3„ÄÅÂú®ÂàÜÊûêÊú¨Âú∞ÂÜÖÂ≠òÂø´ÁÖßÔºåÂèëÁé∞‰∏Ä‰∏™Á±ªÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÔºåÈÄêÊ∏êÂ¢ûÂ§öÔºåÂπ∂‰∏îÊ≤°ÊúâË¢´ÂõûÊî∂ÔºåÊ≠£ÊòØconnectionImplÂØπË±°ÔºåËøô‰∏™ÂØπË±°ÊòØMySQLÂ∫ïÂ±ÇËøûÊé•ÁöÑÂÆûÁé∞ÔºåÊù•Ëá™com.mysql.cj.jdbc&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612237433473.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÔºàÂõæÁâá‰∏≠ÊåáÁöÑÁ±ªÊúâ100Â§ö‰∏™ÂØπË±°Ôºâ&lt;/p&gt;
&lt;p&gt;4„ÄÅË∑üË∏™‰∫Ü‰∏ÄÊ≥¢Ê∫êÁ†ÅÔºåÂèëÁé∞HikariProxyConnectionÂØπË±°ÔºåÂÆûË¥®‰∏äÂ∫ïÂ±ÇÂ∞±ÊòØnew‰∫Ü‰∏Ä‰∏™Âπ∂ÁÆ°ÁêÜconnectionImplÂØπË±°ÔºåÁåúÊµãÊüê‰∏™Âõ†‰∏∫ÂèÇÊï∞ÂéüÂõ†ÂØºËá¥HikariProxyConnectionÂèäÊó∂ÈáäÊîæÔºåËÄåconnectionImplÊ≤°ÊúâÈáäÊîæÔºåÁßØÁ¥ØÊ≤°ÊúâÂèäÊó∂Ê∏ÖÈô§ÂØºËá¥ÁöÑ„ÄÇ&lt;/p&gt;
&lt;p&gt;5„ÄÅÁªèËøáGoogleÊü•ÊâæÈóÆÈ¢òÔºåÊÄÄÁñëÊòØmax_lifetimeÂØºËá¥ÁöÑÈóÆÈ¢ò„ÄÇmax_lifetimeÂÆòÁΩëËß£ÈáäÔºö‰∏Ä‰∏™ËøûÊé•ÁöÑÁîüÂëΩÊó∂ÈïøÔºàÊØ´ÁßíÔºâÔºåË∂ÖÊó∂ËÄå‰∏îÊ≤°Ë¢´‰ΩøÁî®ÂàôË¢´ÈáäÊîæÔºàretiredÔºâ„ÄÇÂª∫ËÆÆÊØîÊï∞ÊçÆÂ∫ìÁöÑwait_timeoutÂ∞èÂá†ÂàÜÈíü„ÄÇÈªòËÆ§30ÂàÜÈíü&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612237640791.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;6„ÄÅÊü•ÁúãÁ∫ø‰∏äÈÖçÁΩÆÂíåÊµãËØïÁéØÂ¢ÉÈÖçÁΩÆÔºåÊûúÁÑ∂ÊòØÂè™ÈÖçÁΩÆ‰∫Ü1ÂàÜÈíü„ÄÇ&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612262047685.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÈöèÂêéÂ∞ÜÂÖ∂ÊîπÊàê30ÂàÜÈíüÔºåÁÑ∂ÂêéÁªßÁª≠Â§öÁ∫øÁ®ãÂπ∂ÂèëË∑ëÊµãËØïÁî®‰æã„ÄÇÊµãËØïÁéØÂ¢ÉÈ™åËØÅÔºådumpÂÜÖÂ≠òÔºåËßÇÂØüconnectionImplÂØπË±°Âπ∂Ê≤°ÊúâÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÂ¢ûÂä†„ÄÇÂèëÁé∞connectionImplÂØπË±°Âπ∂Ê≤°ÊúâÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÂ¢ûÂä†„ÄÇÈ™åËØÅ‰∫Ü‰∏™‰∫∫ÁöÑÁåúÊÉ≥„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612237699007.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;7„ÄÅÊúÄÁªàÂ∞ÜÈÖçÁΩÆÊõ¥Êñ∞Âêé‰∏äÁ∫øÔºåËøá‰∫ÜÊ≤°2‰∏™Â∞èÊó∂ÔºåËøûÊé•Êï∞ÂèàÈ£ôÂçá„ÄÇÂàùÊ≠•ËßÇÂØüËøòÊòØconnectionImplÂØπË±°Â¢ûÂ§öÔºåËøûÊé•Ê≤°ÊúâÈáäÊîæ„ÄÇÊâÄ‰ª•ËÆ§‰∏∫Ôºå‰∏çÊòØmax_lifetimeÈÖçÁΩÆÁöÑÈóÆÈ¢ò„ÄÇËøòÊòØÂæó‰ªéÊ∫êÁ†Å‰∏≠ÂÖ•ÊâãÂíåÁ∫ø‰∏äÁöÑdumpÂÖ•ÊâãÁúã„ÄÇ&lt;/p&gt;
&lt;p&gt;Á¨¨‰∏ÄÊ¨°Êü•ÊâæÈóÆÈ¢òÂπ∂&lt;strong&gt;Ê≤°ÊúâËß£ÂÜ≥Ê†πÊú¨ÈóÆÈ¢ò&lt;/strong&gt;ÔºåÂØπÊ≠§ÊÄªÁªì‰∫Ü‰∏Ä‰∏ãÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Ëá™Â∑±ÁöÑÁåúÊÉ≥Áº∫Â∞ëÂÆûÈôÖÁöÑÊï∞ÊçÆÊîØÊåÅÂíåÂ§öÊñπ‰ΩçÁöÑÊúâÂäõËØÅÊòé&lt;/li&gt;
&lt;li&gt;ÂØπÊ∫êÁ†ÅÁ†îÁ©∂‰∏çÂ§üÊ∑±ÂÖ•ÔºåÂè™ÊòØÂÅúÁïôÂú®Ë°®Êòé&lt;/li&gt;
&lt;li&gt;ÂØπÂÆòÁΩëÁöÑÈÖçÁΩÆÂèÇÊï∞ÁêÜËß£‰∏çÂ§üÈÄèÂΩª&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;Âõõ-Á¨¨‰∫åÊ¨°Êü•ÊâæÈóÆÈ¢òÂπ∂‰∏îËß£ÂÜ≥ÁöÑËøáÁ®ã&#34;&gt;Âõõ„ÄÅÁ¨¨‰∫åÊ¨°Êü•ÊâæÈóÆÈ¢òÂπ∂‰∏îËß£ÂÜ≥ÁöÑËøáÁ®ãÔºö&lt;/h3&gt;
&lt;p&gt;Êú¨Âú∞ÁéØÂ¢ÉËßÇÂØüÊ≤°ÊúâÈóÆÈ¢òÔºåÊ≠£ÂºèÁéØÂ¢ÉËßÇÂØüÂ∞±ÊúâÈóÆÈ¢ò„ÄÇÂÉèËøôÁßçÈóÆÈ¢òÁÆóÊòØÊØîËæÉÈöæËß£ÂÜ≥ÁöÑÔºå‰∏∫‰∫ÜÂø´ÈÄüËß£ÂÜ≥ÈóÆÈ¢òÔºåÈÅøÂÖçÊääÁ∫ø‰∏äÊï∞ÊçÆcopyÂà∞Êú¨Âú∞ËøõË°åÊµãËØïÔºåÁõ¥Êé•downÁ∫ø‰∏äÁöÑdumpÊñá‰ª∂‰∏ãÊù•ËøõË°å‰ªîÁªÜÂàÜÊûê„ÄÇ&lt;/p&gt;
&lt;p&gt;1„ÄÅÊü•ÊâæÁ∫ø‰∏äÁöÑÂÜÖÂ≠òÔºådumpÊï∞ÈáèÔºåÂàöÂ•Ω100‰∏™ÔºåÂπ∂‰∏îÈöèÁùÄÊó∂Èó¥ÂÅèÁßªÔºåËøô‰∏™Á±ªÂØπË±°Ë∂äÊù•Ë∂äÂ§öÔºå‰∏™‰∫∫ÁåúÊÉ≥Â∞±ÊòØËøô‰∏™ÂØπË±°Ê≤°ÊúâË¢´ÂõûÊî∂ÂØºËá¥ËøûÊé•Êï∞Êú™ÈáäÊîæ„ÄÇÊúâÂº∫ÂºïÁî®ÂºïÁî®Ëøô‰∏™ÂØπË±°„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612420897419.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;2„ÄÅÊü•ÊâæËøô‰∏™ÂØπË±°GC rootÂØπË±°ÔºåÂè≥ÈîÆÈÄâÊã©Merge Shortest Paths to GC roots -&amp;gt; exclude all phantom/weak/soft etc.reference(ÊéíÈô§ÊâÄÊúâËôöÂº±ËΩØÂºïÁî®)ÔºåÂèëÁé∞Ëøô100‰∏™ÂØπË±°Â§ßÈÉ®ÂàÜË¢´‰∏Ä‰∏™ÂêçÂ≠óÂè´ÂÅöhousekeeperÁ∫øÁ®ãÊâÄÂº∫ÂºïÁî®ÔºåÂ¶Ç‰∏ãÂõæ„ÄÇ‰∏™‰∫∫È™åËØÅÁåúÊÉ≥ÊòØÁ∫øÁ®ãÊ≤°ÊúâÂèäÊó∂ÂõûÊî∂ÂÖ≥Èó≠ÊàñËÄÖÊòØÊ≤°ÊúâÂÖ≥Èó≠Á∫øÁ®ãÊ±†„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612423498302.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;3„ÄÅËøô‰∏™Êó∂ÂÄôdumpÊñá‰ª∂ÈáåÈù¢Â∞±Ê≤°Ê≥ïÂèëÁé∞Êõ¥Â§öÊúâÁî®ÁöÑ‰ø°ÊÅØ‰∫ÜÔºåÁÑ∂ÂêéÂ∞±ÂéªÁúãÊ∫êÁ†ÅÁúãËøô‰∏™housekeeperÁ∫øÁ®ã‰∏∫‰ªÄ‰πà‰∏ÄÁõ¥Âº∫ÂºïÁî®„ÄÇÊü•ÊâæÊ∫êÁ†ÅÂèëÁé∞Âú®Ëé∑Âèñdatasource ÁöÑ getConnetcionÊñπÊ≥ïÔºå‰ºöÂàùÂßãÂåñHikariPoolËøûÊé•Ê±†„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612423896839.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;ÂàùÂßãÂåñËøûÊé•Ê±†ÈáåÈù¢‰ºöÂàùÂßãÂåñhousekeeperËøûÊé•Ê±†ÔºåÂàöÂ•ΩÂØπÂ∫î‰∫Ü‰∏äÈù¢Âú®Ê†πÂºïÁî®ÁöÑÂØπË±°„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612423966034.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612425624943.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;Áúã‰∫Ü‰∏ãËøô‰∏™housekeeperÂØπË±°ÁöÑ‰ΩúÁî®ÔºåÁõÆÁöÑÊòØ‰∏∫‰∫ÜÁª¥ÊåÅÊúÄÂ∞ëÁöÑÁ©∫Èó≤ÁöÑËøûÊé•ÔºåËØ¥ÁôΩ‰∫ÜÂ∞±ÊòØÊ†πÊçÆÈÖçÁΩÆÂèÇÊï∞idleTimeoutÂíåminIdleÊù•Áª¥ÊåÅÊúÄÂ∞èÁöÑÁ©∫Èó≤ËøûÊé•Êï∞„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612425545450.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;4„ÄÅËá≥Ê≠§ÔºåÂèØ‰ª•ÂàùÊ≠•ÂæóÂá∫ÁªìËÆ∫ÔºåÊòØÁî±‰∫éÂ∫îÁî®Á®ãÂ∫è‰∏çÂÅúÁöÑnew HikariPoolÔºåÁÑ∂ÂêéÊ≤°ÊúâÂèäÊó∂closeÂØºËá¥ÁöÑÈóÆÈ¢ò„ÄÇÁÑ∂ÂêéÈ°∫ÁùÄËøô‰∏™ÁªìËÆ∫ÂéªÊü•ÁúãÂ∫îÁî®Á®ãÂ∫èÁöÑBUG&lt;/p&gt;
&lt;p&gt;5„ÄÅÂú®Á®ãÂ∫èÂèëÁé∞‰∏ãÈù¢ÈÄªËæëÔºå‰∏ãÈù¢Ëøô‰∏ÄÊÆµÈÄªËæëÂ∞±ÊòØÊ†πÊçÆÁßüÊà∑Êù•Ëé∑ÂèñÁºìÂ≠ò‰∏≠ÁßüÊà∑ÂØπÂ∫îÁöÑdatasourceÂØπË±°&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;   /**
     * Ëé∑ÂèñÂ∑≤ÁºìÂ≠òÁöÑÊï∞ÊçÆÊ∫ê
     */
    private Optional&amp;lt;DataSource&amp;gt; getDataSourceIfCache(SelectRdsConfigDto rdsConfigDto) {
        String key = getUniqueMysqlKey(rdsConfigDto.getHost(), rdsConfigDto.getPort());
        if (Objects.nonNull(dataSourceCachePool.get(key))) {
            DataSourceCache dataSourceCache = dataSourceCachePool.get(key);
            //cache‰∏≠Â∑≤ÁªèÁºìÂ≠ò‰∫ÜÁßüÊà∑ÁöÑËøûÊé•Âπ∂‰∏îÊ≤°Êúâ‰øÆÊîπrds config‰ø°ÊÅØ
            if (dataSourceCache.verifyRdsConfig(rdsConfigDto)) {
                return Optional.ofNullable(dataSourceCachePool.get(key).getDataSource());
            }
            //cache‰∏≠Â∑≤ÁªèÁºìÂ≠ò‰∫ÜÁßüÊà∑ÁöÑËøûÊé•Ôºå‰ΩÜÊòØÊ†°È™å‰∏çÈÄöËøá
            else {
                dataSourceCachePool.remove(key);
                return Optional.empty();
            }
        }
        return Optional.empty();
    }

   // Ê†°È™å
   private boolean verifyRdsConfig(SelectRdsConfigDto rdsConfigDto) {
        return rdsConfigDto.getAccount().equals(this.account) &amp;amp;&amp;amp;
                rdsConfigDto.getHost().equals(this.host) &amp;amp;&amp;amp;
                rdsConfigDto.getPort().equals(this.port) &amp;amp;&amp;amp;    rdsConfigDto.getPwd().equals(this.pwd) &amp;amp;&amp;amp;Ôºõ

    //  dataSourceCachePoolÁöÑkeyÁªÑÊàêÔºå‰∏Ä‰∏™MySQLËøûÊé•ÂØπÂ∫îÁöÑkey
    private String getUniqueMysqlKey(String host, Integer port){
        return host + &amp;quot;:&amp;quot; + port;
    }

 }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ËøôÈáåÈÄªËæëÊúâ‰∏ÄÊÆµÊòØÊ†°È™å‰∏çÈÄöËøáÔºå‰ºöremoveÂØπÂ∫îÁöÑdatasourceÂØπË±°ÔºåÈóÆÈ¢òÂ∞±Âá∫Áé∞Âú®ËøôÈáåÔºåËøôÈáåÊ≤°ÊúâÂèäÊó∂close„ÄÇÊ†°È™å‰∏çÈÄöËøáÁöÑÂéüÂõ†Â∞±ÊòØÔºå‰∏Ä‰∏™host port‰Ωú‰∏∫‰∏Ä‰∏™dataSourceCachePoolÁöÑkeyÔºåÂõ†‰∏∫Á∫ø‰∏äÊúâ‰∏Ä‰∏™MySQLÂÆû‰æãÂ§ö‰∏™Ë¥¶Âè∑ÔºåÂØºËá¥Ê†°È™åÊÄªÊòØ‰∏çÈÄöËøáËØØ‰ª•‰∏∫ÊàêÊòØ‰øÆÊîπ‰∫ÜÁî®Êà∑ÂêçÊàñËÄÖÂØÜÁ†ÅÔºåÈöèÂêéÂ∞±ÊòØ‰∏ÄÁõ¥new datasourceÂØπË±°„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;‰∫î-Ê†πÊú¨ÂéüÂõ†&#34;&gt;‰∫î„ÄÅÊ†πÊú¨ÂéüÂõ†&lt;/h3&gt;
&lt;p&gt;ÊâÄ‰ª•Áªº‰∏äÔºåÊúÄÁªàÂæóÂá∫ÁªìËÆ∫ÊòØÔºåÂõ†‰∏∫Á®ãÂ∫èÈóÆÈ¢òÂØºËá¥HikariDataSourceÂØπË±°Â¢ûÂ§öÔºåËÄå‰∏îÂõ†‰∏∫HikariDataSourceÂØπË±°ÂÜÖÈÉ®Êúâ‰∏Ä‰∏™Á∫øÁ®ãÊ±†ÔºåÂ¶ÇÊûúÂ§ñÈÉ®‰∏¢Â§±‰∫ÜÂØπËøô‰∏™HikariDataSourceÂØπË±°ÁöÑÂºïÁî®Ôºå‰πü‰∏ç‰ºöË¢´ÂûÉÂúæÂõûÊî∂ÔºåÂØºËá¥HikariDataSourceÂØπË±°‰∏çÈáäÊîæÔºåÁÑ∂ÂêéÁªìÊûúÂ∞±ÊòØÊï∞ÊçÆÂ∫ìËøûÊé•Êú™ÈáäÊîæ„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;ÂÖ≠-ÊúÄÁªàÂ§ÑÁêÜÊñπÂºè&#34;&gt;ÂÖ≠„ÄÅÊúÄÁªàÂ§ÑÁêÜÊñπÂºèÔºö&lt;/h3&gt;
&lt;p&gt;1„ÄÅ‰øÆÊîπ‰ª£Á†ÅÔºö&lt;br&gt;
1Ôºâ dataSourceCachePoolÁöÑkeyÁªÑÊàêÁî±host port ÊîπÊàê host port account pwd Âõõ‰∏™Áª¥Â∫¶‰Ωú‰∏∫‰∏Ä‰∏™key„ÄÇ&lt;/p&gt;
&lt;p&gt;QÔºö‰∏∫‰ªÄ‰πàË¶ÅËøôÂõõ‰∏™Áª¥Â∫¶‰Ωú‰∏∫‰∏Ä‰∏™key Ôºü&lt;br&gt;
AÔºöÂõ†‰∏∫ÈÅøÂÖç‰∏Ä‰∏™rdsÊúâÂ§ö‰∏™Ë¥¶Êà∑ÂØÜÁ†ÅÔºåÂØºËá¥dataSourceCachePoolÊó†ÈôêputÁõ∏Âêåhost portÔºåÈÅøÂÖç‰∏ÄÁõ¥new datasource Âíåclose datasourceÔºåÊµ™Ë¥πËµÑÊ∫ê„ÄÇ&lt;/p&gt;
&lt;p&gt;2ÔºâÂÖ≥Èó≠datasourceÂØπË±°ÔºåremoveÈÇ£ÊÆµ‰ª£Á†ÅÁöÑÈÄªËæë‰øÆÊîπÊàê‰∏ãÈù¢Ëøô‰∏™Ê†∑Â≠ê&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;//cache‰∏≠Â∑≤ÁªèÁºìÂ≠ò‰∫ÜÁßüÊà∑ÁöÑËøûÊé•,‰ΩÜÊòØ‰øÆÊîπ‰∫Ürds config‰ø°ÊÅØ
        DataSource dataSource = dataSourceCachePool.remove(key).getDataSource();
        log.info(&amp;quot;remove datasource:{}, {}&amp;quot;, key, rdsConfigDto.toString());
        new Thread(() -&amp;gt; {
            while (true) {
                try {
                    TimeUnit.SECONDS.sleep(10);
                } catch (InterruptedException e) {
                    log.error(&amp;quot;e:&amp;quot;, e);
                }
                if (dataSource instanceof HikariDataSource) {
                    if (((HikariDataSource) dataSource).getHikariPoolMXBean().getActiveConnections() &amp;gt; 0){
                        log.info(&amp;quot;ActiveConnections &amp;gt; 0, continue&amp;quot;);
                        continue;
                    }
                    log.info(&amp;quot;HikariDataSource close...&amp;quot;);
                    ((HikariDataSource) dataSource).close();
                } else if (dataSource instanceof DruidDataSource) {
                    if (((DruidDataSource) dataSource).getActiveCount() &amp;gt; 0) {
                        log.info(&amp;quot;ActiveConnections &amp;gt; 0, continue&amp;quot;);
                        continue;
                    }
                    log.info(&amp;quot;DruidDataSource close...&amp;quot;);
                    ((DruidDataSource) dataSource).close();
                } else {
                    log.error(&amp;quot;close datasource|datasource is wrong&amp;quot;);
                    throw new RuntimeException(&amp;quot;close datasource|datasource is wrong&amp;quot;);
                }
                break;
            }
        }).start();
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;QÔºö‰∏∫‰ªÄ‰πàË¶ÅÂà§Êñ≠Ê¥ªË∑ÉÁöÑËøûÊé• ActiveCount &amp;gt; 0 Ôºü&lt;br&gt;
AÔºöÂõ†‰∏∫closeÁöÑÊó∂ÂÄôË¶ÅÂà§Êñ≠ÊòØÂê¶ÊúâÊ≠£Âú®‰ΩøÁî®ÁöÑconnectionÂØπË±°ÔºåÂ¶ÇÊûúÂº∫Âà∂ÂÖ≥Èó≠ÔºåÈÇ£‰πà‰ºöÂá∫Áé∞‰∏Ä‰∏™Á∫øÁ®ãÊü•ËØ¢ÁöÑÊó∂ÂÄôÔºåconnetionÁ™ÅÁÑ∂‰∏çÂèØÁî®ÔºåÂØºËá¥ÈîôËØØ„ÄÇ&lt;/p&gt;
&lt;p&gt;QÔºö‰∏∫‰ªÄ‰πà‰∏çÁî®Á∫øÁ®ãÊ±†ÔºåËÄåÊòØÁõ¥Êé•new Thread Ôºü&lt;br&gt;
AÔºöËøô‰∏™Âú∫ÊôØÁ¨îËÄÖ‰πüÊúâËÄÉËôëÔºå‰ΩÜÊòØËøôÁßçÂú∫ÊôØÂæàÂ∞ëÔºå‰∏ÄËà¨‰∏ç‰ºöÊúâÔºåÈô§ÈùûÊâãÂä®‰øÆÊîπÊï∞ÊçÆÂ∫ìÈÖçÁΩÆ„ÄÇÂæàÂ∞ë‰ΩøÁî®ÁöÑÂú∫ÊôØÔºåÂ¶ÇÊûúÂºÄ‰∏™Á∫øÁ®ãÊ±†‰∏ÄÁõ¥ÊîæÁùÄÔºå‰πüËÄóÁ≥ªÁªüËµÑÊ∫ê„ÄÇ&lt;/p&gt;
&lt;p&gt;2„ÄÅÊîπÈÖçÁΩÆÔºåÊîπÊàêÂíåÂÆòÊñπÈªòËÆ§ÁöÑÈÖçÁΩÆ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1612426469625.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;ÊúÄÂêéÔºåÈáçÊñ∞‰∏äÁ∫øÂêéÔºåËßÇÊµãÂØπË±°ÂÜÖÂ≠òÊï∞ÊçÆÔºåÊ≠£Â∏∏„ÄÇËßÇÂØü3306Á´ØÂè£ËøûÊé•Êï∞ÔºåÊ≠£Â∏∏„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1613802463906.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;‰∏É-ÊÄªÁªì&#34;&gt;‰∏É„ÄÅÊÄªÁªì&lt;/h3&gt;
&lt;p&gt;Â∫ïÂ±ÇÁöÑÊï∞ÊçÆÂ∫ìÁªÑ‰ª∂ÁöÑ‰ª£Á†ÅÁºñÂÜôÔºåË¶ÅÊ≥®ÊÑè‰ΩøÁî®Êï∞ÊçÆÂ∫ìËøûÊé•ËµÑÊ∫êÁöÑÊó∂ÂÄôÔºå‰∏ÄÂÆöË¶ÅÊ£ÄÊü•‰ª£Á†Å‰∏≠ÊòØÂê¶ÈáäÊîæÔºå‰∏çÁÑ∂‰ºöÈÄ†Êàê‰∏•ÈáçÁöÑ‰∫ãÊïÖ„ÄÇËÄå‰∏îÂπ≥Â∏∏ËøòË¶ÅÁÜüÊÇâÂÆòÊñπÈÖçÁΩÆÔºåÂπ∂‰∏îÂ§öÁ†îÁ©∂Ê∫êÁ†Å„ÄÇ‰ª•ÂÖçÂá∫Áé∞ËøôÁßçÊÉÖÂÜµÊó∂ÊùüÊâãÊó†Á≠ñ„ÄÇ&lt;br&gt;
ÂèØ‰ª•ÁöÑËØùËøòÂèØ‰ª•Âè´Ë∫´ËæπÁöÑËµÑÊ∑±Â§ßÁâõÁªôreview‰ª£Á†ÅÔºåÂÅöÂà∞ÂèåÈáç‰øùÈöú„ÄÇ&lt;/p&gt;
&lt;p&gt;ÊúÄÂêéÈùûÂ∏∏ÊÑüË∞¢ÁªÑÂÜÖÂ∞è‰ºô‰º¥ÁöÑÊäÄÊúØÊîØÊåÅÔºåÊâçËÉΩ‰∏ÄÊ≠•‰∏ÄÊ≠•ÁöÑÊéíÈô§Âá∫ÈóÆÈ¢òÔºåÊâæÂá∫ÈóÆÈ¢òÊâÄÂú®&lt;/p&gt;
">ËÆ∞‰∏ÄÊ¨°Â§öÊï∞ÊçÆÊ∫êË∑ØÁî±ÈÄ†ÊàêÁöÑÊï∞ÊçÆÂ∫ìËøûÊé•Ê≥ÑÈú≤ÊéíÊü•ËøáÁ®ã</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/2020-nian-zong-jie/"" data-c="
          &lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1609517863900.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;ÂºÄÂ§¥&#34;&gt;ÂºÄÂ§¥&lt;/h3&gt;
&lt;p&gt;‰ªäÂ§©ÊòØ1Êúà1Âè∑ÔºåÊñ∞Âπ¥Á¨¨‰∏ÄÂ§©ÔºåÊäì‰Ωè2020Âπ¥ÁöÑÂ∞èÂ∞æÂ∑¥ÔºåÈöè‰æøÁµÆÁµÆÂè®Âè®‰∏Ä‰∏ãÔºåÂÅö‰∏™Â∞èÊÄªÁªì„ÄÇÂõûÊÉ≥‰∏Ä‰∏ã‰ªäÂπ¥‰∏ÄÊï¥Âπ¥ÔºåÂºÄÂøÉÔºåÂõ∞ÈöæÔºåÂøÉÈÖ∏ÔºåÂ§ßÈÉ®ÂàÜÈÉΩÁªèÂéÜËøáÔºåÊ≤°Êúâ‰ªÄ‰πàÂÄºÂæóËØ¥ÁöÑÁªèÂéÜÔºåÂÄíÊòØÂ∞è‰∫ãÊå∫Â§ö„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂÄºÂæóÊèêÁöÑ‰∫ãÊÉÖÂ∞±ÊòØÁñ´ÊÉÖ‰∫ÜÔºå‰ªäÂπ¥Áñ´ÊÉÖÂú®ÂÆ∂ÂëÜ‰∫Ü2‰∏™ÊúàÔºåÈÇ£Êó∂ÂÄôÂõ†‰∏∫Âπ¥ÂâçË¢´Ë£ÅÔºåÂ∑≤ÁªèÊòØÂ§±‰∏öÁöÑÁä∂ÊÄÅÔºåÊ≤°ÊúâÊî∂ÂÖ•Êù•Ê∫êÔºåÂºÄÂßãÂùêÁ´ã‰∏çÂÆâÔºåÁÉ¶Ë∫Å „ÄÇÂêéÈù¢ÊÑèËØÜÂà∞‰∫ÜÂú®ÂÆ∂‰πüÊúâÂú®ÂÆ∂ÂÄºÂæóÂÅöÁöÑ‰∫ãÊÉÖÔºå‰∏çÂøÖÂõ†‰∏∫Áñ´ÊÉÖÊâì‰π±Ëá™Â∑±ÁöÑÂÜÖÂøÉÔºåÂÖÖÂÆûÈô™ÂÆ∂‰∫∫ËøáÊØè‰∏ÄÂ§©„ÄÇ&lt;/p&gt;
&lt;p&gt;‰Ωú‰∏∫ÊàêÂπ¥‰∫∫ÔºåÁé∞Âú®ËÆ§‰∏∫Êó∂Â∏∏ÂºÄÂøÉÂø´‰πêÂÄíÊòØ‰∏Ä‰ª∂ÂæàÈöæÁöÑ‰∫ãÊÉÖÔºåÊÉ≥Ëµ∑‰∏ÄÂè•ËØùÔºåÂ∞èÊó∂ÂÄôÂø´‰πêÊòØ‰∏Ä‰ª∂ÁÆÄÂçïÁöÑ‰∫ãÊÉÖÔºåÈïøÂ§ßÂêéÔºåÁÆÄÂçïÊòØ‰∏Ä‰ª∂Âø´‰πêÁöÑ‰∫ãÊÉÖ„ÄÇ‰∏çËøáÂêéÈù¢ËøòÊòØË¶ÅÊó∂Â∏∏ÂºÄÂøÉ‰∏∫‰∏ªÔºåÁÑ∂ÂêéÂ∞±ÊòØ‰ªäÂπ¥‰ª•ÂêéË¶ÅÊ≤âÈùô‰∏ãÊù•ÔºåÁêÜÊÄßÊÄùËÄÉÔºå‰∏çÁÆ°ÂØπ‰∫∫ËøòÊòØÂØπ‰∫ã„ÄÇËøòË¶ÅÂ§öÁúã‰∫õÂÖ≥‰∫éÁîüÊ¥ª‰∏äÁöÑ‰π¶Ôºå‰∏çÂè™ÊòØÁõØÁùÄÊäÄÊúØ‰π¶Ê≠ªÂïÉÔºåÊèêÈÜí‰∏Ä‰∏ãËá™Â∑±Ë¶ÅÂÅú‰∏ãÊù•Â§öÊÄùËÄÉÔºå‰ΩéÂ§¥ÂÅö‰∫ãÔºåÊä¨Â§¥ÁúãË∑Ø„ÄÇ&lt;/p&gt;
&lt;p&gt;‰ªäÂπ¥ÊÄªÁªìÊñπÈù¢Êúâ‰∫õÂ∞ëÔºåÂõ†‰∏∫ÊàëËá™Â∑±ËÆ§‰∏∫Ëøô‰∫õÊñπÈù¢ÂÄºÂæóÂéªÊÄªÁªìÔºåËá≥‰∫éÂÖ∂‰ªñÁöÑÔºåÂèØËÉΩÊàëÊ≤°ÊúâÊÑèËØÜÂà∞ÊàñËÄÖÊòØ‰ªäÂπ¥ÁªèÂéÜ‰∫ãÊÉÖÁöÑÂ§™Â∞ë„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;Â≠¶‰π†&#34;&gt;Â≠¶‰π†&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1609517630829.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÂÖ≥‰∫éÂ≠¶‰π†Ëøô‰ª∂‰∫ãÔºåËøòÊòØË¶ÅÊîæÂú®Á¨¨‰∏ÄÊù•ËØ¥„ÄÇÂ≠¶Êó†Ê≠¢Â¢ÉÔºåÊ¥ªÂà∞ËÄÅÂ≠¶Âà∞ËÄÅ„ÄÇ‰∫∫‰∏çËÉΩÊÄªÊòØÂÅúÁïôÂú®ÂéüÂú∞ÔºåËøòÊòØË¶ÅÂ§öÁúã‰π¶Â§öÂ≠¶‰π†ÔºåÂ¢ûÈïøÁü•ËØÜ„ÄÇ‰∏≠ÂõΩ‰∫∫Â§ßÈÉ®ÂàÜÂä≥Âä®‰∫∫Ê∞ë‰ª•ÂâçÔºà80Âπ¥‰ª£ÔºâÊòØÂü∫Êú¨Èù†Âä™ÂäõÔºåÈù†Âã§Â•ãÔºåËé∑ÂæóÂ±û‰∫éËá™Â∑±ÁöÑÂä≥Âä®ÊûúÂÆûÔºåÁé∞Âú®‰ø°ÊÅØÊó∂‰ª£ÔºåÈô§‰∫ÜÈù†Âä™ÂäõÂã§Â•ã‰ª•Â§ñÔºåËøòË¶ÅÊúâÊïàÂà©Áî®‰∏ì‰∏öÁü•ËØÜÂéªËß£ÂÜ≥ÁîüÊ¥ªÂ∑•‰Ωú‰∏≠ÁöÑÈóÆÈ¢òÔºå‰∫´ÂèóÁé∞Âú®‰ø°ÊÅØÊó∂‰ª£Áªô‰∏éÁöÑÊàêÊûú„ÄÇ&lt;br&gt;
Â∞±ÂÉèÊñáËá£Ê≠¶Â∞ÜÔºåË∞ãÂ£´ÂΩìÂá∫Ë∞ãÂàíÁ≠ñÔºåÊ≠¶Â£´ÂΩìÊàòÂú∫ÂéÆÊùÄ„ÄÇÊØè‰∏™‰∫∫ÂΩìÂéªÂèëÊå•Ëá™Â∑±ÁöÑ‰∏ì‰∏öÊú¨È¢Ü„ÄÇ‰∏çÁÆ°ÊúÄÁªàÁõÆÁöÑÊòØÂï•ÔºåÁ≤æÂø†Êä•ÂõΩËøòÊòØÂÖªÂÆ∂Á≥äÂè£ÔºåÂ∞èÊúâÂ∞è‰πâÔºåÂ§ßÊúâÂ§ß‰πâ„ÄÇ&lt;/p&gt;
&lt;p&gt;ÊâØËøú‰∫ÜÔºå‰ªäÂπ¥ÂáÜÂ§áËøòÊòØ‰ª•ÊäÄÊúØÂ≠¶‰π†‰∏∫‰∏ªÔºåÁÑ∂Âêé‰ª•ÂÖ¨‰ºóÂè∑ÂíåGitHub‰∏∫ËæÖÂä©ËøõË°åÂ≠¶‰π†„ÄÇ&lt;br&gt;
‰ªäÂπ¥ÂáÜÂ§áÁúãÂÆåËøô‰∫õÂ≠¶‰π†ËµÑÊñôÔºåÂÖ∂‰∏≠Êúâ‰π¶Á±ç‰ª•ÂèäÁΩëÁªúËØæÁ®ã&lt;br&gt;
1„ÄÅMySQLÊòØÂ¶Ç‰ΩïËøêË°åÁöÑ&lt;br&gt;
2„ÄÅredisËÆæËÆ°ÂíåÂÆûÁé∞&lt;br&gt;
3„ÄÅÊû∂ÊûÑÂ∏àËßÜÈ¢ëËØæ&lt;br&gt;
4„ÄÅÊûÅÂÆ¢Êó∂Èó¥MySQL&lt;br&gt;
5„ÄÅNettyÁΩëÁªúÁºñÁ®ãÂ≠¶‰π†+ÊäÄÊúØ‰π¶Á±ç+NettyÂÆûÊàò&lt;/p&gt;
&lt;p&gt;‰∏çÂ§öÔºåÂàóÂ§ö‰∫ÜÂ∞±Áúã‰∏çÂÆå‰∫Ü[dog]„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂÖ∂‰ªñÂàôÊåâÊó∂ÂèäÊó∂ÊÄªÁªìÂ∑•‰Ωú‰∏äÈÅáÂà∞ÁöÑÈóÆÈ¢òÔºåÊèêÂçáËá™Â∑±ÁöÑÊäÄÊúØÊ∑±Â∫¶„ÄÇÊØïÁ´üÂ∑•‰Ωú‰∏≠ÈÅáÂà∞ÁöÑÊúÄÂÆπÊòìÂä†Ê∑±ÁêÜËß£ÁöÑÂíåÊèêÂçáËÉΩÂäõÁöÑ„ÄÇ&lt;br&gt;
È°∫‰æøÁúã‰∏Ä‰∫õ‰ºòÁßÄÁöÑÂçöÂÆ¢ÂèäÊó∂ÊÄªÁªìÔºåËæìÂá∫Ëá™Â∑±ÁöÑÁêÜËß£„ÄÇÁÑ∂ÂêéÁª¥Êä§Âà∞Ëá™Â∑±ÁöÑ‰∏™‰∫∫ÁΩëÁ´ô‰∏äÈù¢Âéª„ÄÇ&lt;/p&gt;
&lt;p&gt;ÁÑ∂ÂêéÂÖ∂‰ªñÊó∂Èó¥ÔºåÂáÜÂ§áÁúã‰∏Ä‰∫õÂÖ∂‰ªñÁ±ªÂûãÁöÑ‰π¶Á±çÔºåÊØîÂ¶Ç‰∫∫ÊñáÂéÜÂè≤Ôºå‰ª•ÂèäÂÖ∂‰ªñ‰ºòÁßÄÁöÑÂõΩÂÜÖÂ§ñËëó‰ΩúÔºåÁé∞Âú®Â∑≤ÁªèÊÉ≥Â•ΩÁúã‰∫õ‰ªÄ‰πàÔºåÂ∞±‰∏ç‰∏Ä‰∏ÄÂàó‰∏æ‰∫ÜÔºå‰ªäÂπ¥‰ªäÂêé‰ºöÊäΩÁ©∫‰ΩôÊó∂Èó¥ÂéªÁúãËøô‰∫õÔºåÊèêÂçáËá™Â∑±ÂØπ‰∫∫ÂíåÁîüÊ¥ªÁöÑ‰∏Ä‰∫õÊÄùËÄÉ„ÄÇ&lt;/p&gt;
&lt;p&gt;ÊúÄÂêéÁöÑËØùË¶ÅÊèêÈÜíËá™Â∑±Â∞ëÁúãÂä®Êº´‰∫åÊ¨°ÂÖÉÂ§öÂ≠¶‰π†ÔºåÊó©Áù°Êó©Ëµ∑~~&lt;/p&gt;
&lt;h3 id=&#34;ËøêÂä®&#34;&gt;ËøêÂä®&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1609517659211.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ËøêÂä®Ëøô‰ª∂‰∫ãÊÉÖÔºåÁÆóÊòØÊàë‰∏™‰∫∫ÊØèÂπ¥Á´ãÁöÑflag‰∏≠ÔºåËá™Â∑±ÊúÄÊª°ÊÑèÁöÑ‰∫Ü„ÄÇ‰∏ÄÂë®ÊúÄÂ∞ë‰∏ÄÊ¨°Ë∑ëÊ≠•+ÁØÆÁêÉ„ÄÇÂü∫Êú¨‰∏ä‰πü‰∏çÁÆóÂÖ®ÈÉ®ÔºåÊØèÂë®ÈÉΩÂÅö‰∫Ü„ÄÇ&lt;br&gt;
ÊàëË∫´ËæπÁöÑÊúãÂèãÊàñËÄÖ‰∫≤‰∫∫ÔºåÊàë‰ºöÁªèÂ∏∏ÊèêÈÜí‰ªñ‰ª¨ÔºåË¶ÅÈÄÇÂΩìÁöÑÈîªÁÇº„ÄÇËôΩÁÑ∂ÊÄªÊòØË¢´ÂΩì‰ΩúËÄ≥ËæπÈ£éÔºå‰ΩÜÊòØÊØèÊ¨°ËøáÂπ¥Á•ùÂà´‰∫∫Ë∫´‰ΩìÂÅ•Â∫∑Âè™ÊòØÂô±Â§¥ÔºåÂè™ÊúâÁúüÊ≠£ÂÖ≥ÂøÉ‰Ω†ÁöÑ‰∫∫‰ºöÂú®‰πé‰Ω†ÁöÑÂÅ•Â∫∑„ÄÇÊàë‰∏™‰∫∫‰∏çÁÆ°ÊòØÁîüÊó•ËøòÊòØÊñ∞Âπ¥ÊÑøÊúõÔºåÂ§ßÈÉ®ÂàÜÈÉΩÊòØÂ∏åÊúõË∫´ËæπÁöÑ‰∫∫ËøáÁöÑÂπ≥Âπ≥ÂÆâÂÆâÂºÄÂºÄÂøÉÂøÉÂ∞±Ë°å‰∫ÜÔºåÂÖ∂‰ªñÈÉΩÊòØÊâØÊ∑°„ÄÇ&lt;br&gt;
ËÄåÊàëËá™Â∑±ËøêÂä®ÁöÑÂä®ÂäõÊù•Ê∫êÊòØÔºåÂ¶ÇÊûúÊàëËá™Â∑±Ë∫´‰Ωì‰∏çË°åÔºåÈÇ£Â∞±Ê≤°ÊúâËÉΩÂäõÁÖßÊä§Ë∫´Ëæπ‰∫∫„ÄÇÊàëËá™Â∑±ËÉΩÂ§üÊàêÈïø‰∏∫Â§ßÊ†ëÔºåËÆ©Âà´‰∫∫ÂÆâÂøÉÂÄöÈù†„ÄÇ&lt;/p&gt;
&lt;p&gt;Áé∞Âú®ËôΩÁÑ∂ÊØï‰∏ö‰∫Ü3Âπ¥Ôºå6ÂùóËÖπËÇåÂ∑≤ÁªèÂèòÊàê‰∫Ü4Âø´ÔºåË∫´‰ΩìÊ≤°ÊúâÊØï‰∏öÈÇ£‰ºöÂ•ΩÔºå‰ΩÜÊòØÊàëËá™Â∑±ËøòÊòØ‰ºöÂùöÊåÅÁöÑÔºåÊúùÁùÄÊõ¥manÁöÑÁõÆÊ†áÂ•ãÊñó„ÄÇÊÉ≥ÂΩìÂπ¥ÊàëÂèØÊòØÊã•Êúâ8ÂùóËÖπËÇåÁöÑÁî∑‰∫∫„ÄÇ„ÄÇ„ÄÇ„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;Áà±ÊÉÖ&#34;&gt;Áà±ÊÉÖ&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1609517842818.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
‰ªäÂπ¥ÊúÄÂºÄÂøÉÁöÑÂ∞±ÊòØÂíåÂ•≥ÊúãÂèãÂ∫¶ËøáÁ¨¨‰∏ÄÂπ¥ÁöÑÊÅãÁà±ÊúüÔºà‰∏çË¶ÅËÑ∏ÁöÑÊàëÔºåËá™ËÆ§‰∏∫ÁΩëÊÅã‰∫Ü‰∏ÄÂπ¥ÁöÑÁÉ≠ÊÅãÊúüÔºâÔºåËøô‰∏ÄÂπ¥ÊúâÂºÄÂøÉÂíåÈöæËøáÔºå‰∏çËøáÈöæËøáÊó∂ÂàªÂæàÂ∞ëÔºåÂ§ßÈÉ®ÂàÜÈÉΩÊòØÂºÄÂøÉÊó∂ÂàªÔºåÊàëËßâÂæóÂ∑≤ÁªèÂèØ‰ª•‰∫ÜÔºåËÉΩÂ§üÂíåÂØπÊñπÊØèÂ§©ÈÉΩÂæàÂºÄÂøÉÔºåÂ∑≤ÁªèÂæà‰∏çÈîô‰∫Ü„ÄÇÊØïÁ´üÂíåÂñúÊ¨¢ÁöÑ‰∫∫Âú®‰∏ÄËµ∑‰∏çÂ∞±ÊòØÂºÄÂøÉÊííÔºåËøô‰∏™ÊòØÊúÄÈöæËÉΩÂèØË¥µÁöÑ„ÄÇ„ÄÇ&lt;/p&gt;
&lt;p&gt;ÊàëËá™ËÆ§‰∏∫ÊàëÊòØ‰∏™‰∏çÂ•ΩiÁõ∏Â§ÑÁöÑ‰∫∫Ôºå‰∏™‰∫∫ÁöÑÂ∞èËÑæÊ∞îÂæàÂ§öÔºåËÄå‰∏îÊúâÊó∂ÂÄô‰ºöÂ∏∏Êúâ‰∏çËá™‰ø°„ÄÇË∞¢Ë∞¢ÊàëÂ•≥ÊúãÂèãÁöÑÁêÜËß£ÂíåÈºìÂä±„ÄÇ‰ªäÂπ¥ÂæÄÂêéÔºåËøòÂ∏åÊúõ‰∏ÄËµ∑ÂºÄÂøÉÂ∫¶ËøáÊØè‰∏ÄÂ§©ÔºåÂìàÂìàÂìàÂìà„ÄÇ&lt;/p&gt;
&lt;p&gt;Êñ∞ÁöÑ‰∏ÄÂπ¥ÔºåÂ∏åÊúõÂí±‰ø©ÈÉΩË∫´‰ΩìÂÅ•Â∫∑ÔºåÂºÄÂºÄÂøÉÂøÉ~&lt;/p&gt;
&lt;h3 id=&#34;2021flag&#34;&gt;2021flag&lt;/h3&gt;
&lt;p&gt;ÂõΩÈôÖÊÉØ‰æãÔºåÊúÄÂêéËØ¥‰∏Ä‰∫õÊâìËÑ∏ÁöÑflag&lt;br&gt;
1„ÄÅÂÆåÊàê‰∏äÈù¢ÁöÑËµÑÊñôÁöÑÂ≠¶‰π†&lt;br&gt;
2„ÄÅÊØè‰∏™Êúà‰∏ÄÊ¨°ÊñáÁ´†ÊÄªÁªìÔºåÂ∑•‰ΩúÊÄªÁªìÔºå4Ê¨°‰∏™‰∫∫ÁΩëÁ´ôÊñáÁ´†ÁöÑÂèëË°®ÂíåÁª¥Êä§&lt;br&gt;
3„ÄÅ‰∏ÄÂë®‰∏ÄÊ¨°ËøêÂä®+ÁØÆÁêÉ&lt;br&gt;
4„ÄÅË∫´‰Ωì‰ΩìÈáç‰∏çË∂Ö130&lt;br&gt;
5„ÄÅÁªèËê•Â•Ω‰∏™‰∫∫ÂçöÂÆ¢&lt;br&gt;
6„ÄÅ Êó©Áù°Êó©Ëµ∑Ôºå11ÁÇπÂçä‰πãÂâçÁù°&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2021Âπ¥ÔºåÂπ≤Â∞±ÂÆå‰∫ã&lt;/strong&gt;„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1609517948326.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
">2020Âπ¥ÊÄªÁªì</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/ying-yong-ceng-wang-guan-she-ji-yu-shi-xian/"" data-c="
          &lt;h3 id=&#34;ÂâçË®Ä&#34;&gt;ÂâçË®Ä&lt;/h3&gt;
&lt;h3 id=&#34;apiÁΩëÂÖ≥Ë∞ÉÁ†î&#34;&gt;APIÁΩëÂÖ≥Ë∞ÉÁ†î&lt;/h3&gt;
&lt;h4 id=&#34;kong&#34;&gt;kong&lt;/h4&gt;
&lt;h4 id=&#34;zuul&#34;&gt;zuul&lt;/h4&gt;
&lt;h4 id=&#34;spring-cloud-gateway&#34;&gt;spring cloud gateway&lt;/h4&gt;
&lt;p&gt;Ëá™Á†îÂéüÂõ†Ôºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ÊúçÂä°Ëá™Âä®Ê≥®ÂÜåÂèëÁé∞Ôºå‰∏çÁî®‰∫∫Â∑•Êõ¥ÊîπÈÖçÁΩÆÊé•Âè£ÊúçÂä°&lt;/li&gt;
&lt;li&gt;Áõ∏ÊØîÁî®nginx+luaÔºå‰∏çÁî®Â§öÁª¥Êä§‰∏ÄÂ•óÊ≥®ÂÜå‰∏≠ÂøÉ&lt;/li&gt;
&lt;li&gt;JavaÁîüÊÄÅÊé•ÂÖ•Â•ΩÔºåÂáèÂ∞ëÂ≠¶‰π†ÊàêÊú¨&lt;/li&gt;
&lt;li&gt;ÁΩëÂÖ≥Ëá™Âä®‰∏∫APIÊé•Âè£ÁîüÊàêOpenApiÊñáÊ°£&lt;/li&gt;
&lt;li&gt;Âü∫‰∫éÁâàÊú¨ÁöÑÁÅ∞Â∫¶ÂèëÂ∏ÉËÆæËÆ°ÂÆûÁé∞&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;ÂéüÁêÜ&#34;&gt;ÂéüÁêÜ&lt;/h3&gt;
&lt;h3 id=&#34;ËÆæËÆ°&#34;&gt;ËÆæËÆ°&lt;/h3&gt;
&lt;h3 id=&#34;ÂÖ≥ÈîÆÂÆûÁé∞&#34;&gt;ÂÖ≥ÈîÆÂÆûÁé∞&lt;/h3&gt;
&lt;h3 id=&#34;ÊÄªÁªì&#34;&gt;ÊÄªÁªì&lt;/h3&gt;
&lt;h3 id=&#34;ÂèÇËÄÉ&#34;&gt;ÂèÇËÄÉ&lt;/h3&gt;
">Â∫îÁî®Â±ÇÁΩëÂÖ≥ËÆæËÆ°‰∏éÂÆûÁé∞</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/shou-lu-yi-ge-hong-bao-suan-fa/"" data-c="
          &lt;h3 id=&#34;1-Ë¶ÅÊ±Ç&#34;&gt;1„ÄÅË¶ÅÊ±Ç&lt;/h3&gt;
&lt;p&gt;Á∫¢ÂåÖÁÆóÊ≥ï functionÔºöÊãºÊâãÊ∞îÁ∫¢ÂåÖ&lt;br&gt;
1„ÄÅÊØè‰∏™Á∫¢ÂåÖËé∑ÂæóÁöÑÊï∞Â≠¶Ê¶ÇÁéáË¶Å‰∏ÄÊ†∑&lt;br&gt;
2„ÄÅÁ∫¢ÂåÖÊúÄÂ∞èÂÄºÔºö1ÂàÜÈí±&lt;/p&gt;
&lt;h3 id=&#34;2-ÊÄùË∑Ø&#34;&gt;2„ÄÅÊÄùË∑ØÔºö&lt;/h3&gt;
&lt;p&gt;Âà©Áî®ÂàáÁâáÁöÑÊÄùÊÉ≥ÔºåÊØîÂ¶ÇÊúâ5‰∏™Á∫¢ÂåÖÔºå20ÂàÜÔºåÂ∞±‰ªé0-20ÁöÑËåÉÂõ¥ÂÜÖËé∑ÂèñÂõõ‰∏™ÈöèÊú∫Êï∞ÔºåÂ∞±Ë¢´ÂàÜÊàê5‰ªΩÔºåÁÑ∂ÂêéÈ°∫Â∫èÊäΩÂèñ„ÄÇËøôÊ†∑‰øùËØÅÊØè‰∏™Á∫¢ÂåÖÁöÑÁöÑÊ¶ÇÁéá‰∏ÄÊ†∑&lt;br&gt;
ËøôÁßçÊñπÊ°àÈúÄË¶ÅËÄÉËôëÂà∞Âá†‰∏™Ê≥®ÊÑèÁÇπÔºö&lt;br&gt;
1ÔºâÈáçÂ§çÁöÑÈöèÊú∫ÂàáÁâáÂ¶Ç‰ΩïÂ§ÑÁêÜÔºõ&lt;br&gt;
2ÔºâÈúÄË¶ÅËÄÉËôë1ÂàÜÈí±Â¶Ç‰ΩïÂ§ÑÁêÜÔºõ&lt;/p&gt;
&lt;h3 id=&#34;3-ÂÆûÁé∞&#34;&gt;3„ÄÅÂÆûÁé∞Ôºö&lt;/h3&gt;
&lt;p&gt;ÈÅáÂà∞ÈöèÊú∫ÂàáÁâáÈáçÂ§ç:ÈáçÊñ∞ÁîüÊàêÂàáÁâáÁõ¥Ëá≥‰∏çÈáçÂ§ç&lt;br&gt;
1ÂàÜÈí±Â§ÑÁêÜÔºöÂà§Êñ≠Áõ∏ÈÇªÈó¥ÈöîÁöÑÂ§ßÂ∞è&lt;/p&gt;
&lt;p&gt;###4„ÄÅ ‰ª£Á†ÅÂÆûÁé∞Ôºö&lt;br&gt;
Âà©Áî®treeMapÁöÑÈ°∫Â∫èÊúâÂ∫èÊÄß&lt;/p&gt;
&lt;p&gt;Áõ¥Êé•‰∏ä‰ª£Á†ÅÔºàÁ¨îËÄÖÂ∑≤ÁªèË∞ÉËØïËøáÊ≤°ÊúâÈóÆÈ¢òÔºåÂèØ‰ª•ËøêË°åÔºâ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public class RedPackage {
   /**
    * Á∫¢ÂåÖÊúÄÂ∞èÈáëÈ¢ù
    */
   private long minAmount = 1L;

   /**
    * ÊúÄÂ§ßÁöÑÁ∫¢ÂåÖÊòØÂπ≥ÂùáÂÄºÁöÑNÂÄç
    */
   private static final long N = 2;

   /**
    * Á∫¢ÂåÖÊúÄÂ§ßÈáëÈ¢ù
    */
   private long maxAmount;

   /**
    * Á∫¢ÂåÖÈáëÈ¢ù ÂàÜ
    */
   private long packageAmount;

   /**
    * Á∫¢ÂåÖ‰∏™Êï∞
    */
   private long packageSize;

   /**
    * ÊòØÂê¶Êä¢ÂÆå
    */
   private boolean finish;

   /**
    * Â≠òÂÇ®Á∫¢ÂåÖÁöÑÈáëÈ¢ùÈ°∫Â∫è
    */
   private final TreeMap&amp;lt;Long, Long&amp;gt; treeMap = Maps.newTreeMap((o1, o2) -&amp;gt; o1 &amp;gt; o2 ? 1 : o1.equals(o2) ? 0 : -1);

   /**
    * ÊûÑÈÄ†ÂáΩÊï∞‰∏çÂÜô‰∏öÂä°ÈÄªËæë
    */
   public RedPackage(long packageAmount, int packageSize){
       this.packageAmount = packageAmount;
       this.packageSize = packageSize;
       maxAmount = (packageAmount * N)/ packageSize;
   }

   public RedPackage(long packageAmount, int packageSize, long minAmount){
       this.packageAmount = packageAmount;
       this.packageSize = packageSize;
       this.minAmount = minAmount;
   }

   /**
    * Ëé∑ÂèñÈáëÈ¢ù
    */
   public synchronized long nextAmount(){
       // ÂâçÁΩÆÊ†°È™åÔºåÂàùÂßãÂåñ
       if(!finish &amp;amp;&amp;amp; treeMap.size() == 0){
           treeMap.put(packageAmount, 0L);
           for (int i = 0; i &amp;lt; packageSize - 1; i++) {
               // ÈöèÊú∫ÊäΩÂèñÂàáÁâá
               long splitNum = RandomUtils.nextLong(minAmount, packageAmount);
               Long higher = treeMap.higherKey(splitNum);
               higher = higher == null ? packageAmount : higher;
               Long lower = treeMap.lowerKey(splitNum);
               lower = lower == null ? 0 : lower;
               // Áõ∏ÂêåÂàáÁâáÈáçÊñ∞ÁîüÊàê,Âíå‰∏ä‰∏Ä‰∏™ÊàñËÄÖ‰∏ã‰∏Ä‰∏™ÂàáÁâáÈó¥ÈöîÂ∞è‰∫éminAmountÁöÑÈáçÊñ∞ÁîüÊàê
               while (higher - splitNum &amp;lt;= minAmount
                       || splitNum - lower &amp;lt;= minAmount
                       || treeMap.containsKey(splitNum)){
                   splitNum = RandomUtils.nextLong(minAmount, packageAmount);
               }
               // valueÊîæÂÖ•‰∏ä‰∏Ä‰∏™entryÁöÑkey,ÁªÑÊàêÈìæÊù°ÔºåÈò≤Ê≠¢ÂÜçÊ¨°Âæ™ÁéØ
               treeMap.put(splitNum, lower);
               treeMap.put(higher, splitNum);
           }
           System.out.println(&amp;quot;init finish&amp;quot;);
       }
       Map.Entry&amp;lt;Long, Long&amp;gt; entry = treeMap.pollFirstEntry();
       if(treeMap.size() == 0){
           // Áî®ÂÆåÁ∫¢ÂåÖ
           this.finish = true;
           if(entry == null){
               return 0L;
           }
       }
       return entry.getKey() - entry.getValue();
   }

   public static void main(String[] args) {
       RedPackage redPackage = new RedPackage(1500L, 10, 10L);
       long result = 0;
       for (int i = 0; i &amp;lt; 15; i++) {
           long amount = redPackage.nextAmount()Ôºõ
           System.out.println(amount);
           result = result + amount;
       }
       System.out.println(result);
   }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;5-todo-ËÆæÁΩÆÂçï‰∏™Á∫¢ÂåÖÊúÄÂ§ßÈôêÈ¢ùÂÄº&#34;&gt;5„ÄÅTODO ËÆæÁΩÆÂçï‰∏™Á∫¢ÂåÖÊúÄÂ§ßÈôêÈ¢ùÂÄº&lt;/h3&gt;
&lt;p&gt;ÁõÆÂâçËøòÊ≤°ÊúâÂÆûÁé∞ÊÄùË∑Ø&lt;/p&gt;
">Ê¶ÇÁéáÁõ∏Á≠âÁöÑÊãºÊâãÊ∞îÁ∫¢ÂåÖÁÆóÊ≥ïÂÆûÁé∞</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/di-pin-lu-da-shu-ju-liang-qiang-yi-zhi-xing-chang-jing-xia-jie-jue-si-lu/"" data-c="
          &lt;h1 id=&#34;&#34;&gt;&lt;/h1&gt;
">‰ΩéÈ¢ëÁéáÂ§ßÊï∞ÊçÆÈáèÂº∫‰∏ÄËá¥ÊÄßÂú∫ÊôØ‰∏ãËß£ÂÜ≥ÊÄùË∑Ø</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/hua-dong-chuang-kou-shi-xian-xian-liu-suan-fa-huan-xing-dui-lie-shi-xian/"" data-c="
          &lt;h3 id=&#34;&#34;&gt;&lt;/h3&gt;
">ÊªëÂä®Á™óÂè£ÈôêÊµÅÁÆóÊ≥ï‚Äî‚ÄîÁéØÂΩ¢ÈòüÂàóÂÆûÁé∞</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/xue-xi-bi-ji-mysql/"" data-c="
          &lt;h2 id=&#34;ÂπªËØªÂéüÁêÜ&#34;&gt;ÂπªËØªÂéüÁêÜ&lt;/h2&gt;
&lt;h3 id=&#34;1-ÂÆö‰πâ&#34;&gt;1„ÄÅÂÆö‰πâÔºö&lt;/h3&gt;
&lt;p&gt;ÂπªËØªÊåáÁöÑÊòØ‰∏Ä‰∏™‰∫ãÂä°Âú®ÂâçÂêé‰∏§Ê¨°Êü•ËØ¢Âêå‰∏Ä‰∏™ËåÉÂõ¥ÁöÑÊó∂ÂÄôÔºåÂêé‰∏ÄÊ¨°Êü•ËØ¢ÁúãÂà∞‰∫ÜÂâç‰∏ÄÊ¨°Êü•ËØ¢Ê≤°ÊúâÁúãÂà∞ÁöÑË°å&lt;br&gt;
ÂπªËØªÔºöÊèê‰∫§ÈöîÁ¶ªÁ∫ßÂà´‰∏ãÁúãÂà∞ÁöÑÔºå‰∏•Ê†ºÊù•ËØ¥‰∏çÁÆó„ÄÇÂõ†‰∏∫Ëøô‰∏™Â∞±ÊòØËØªÊèê‰∫§ÈöîÁ¶ªÁ∫ßÂà´‰∏ã‚ÄúËÆæËÆ°ÂÜÖ‚ÄùÁöÑÈóÆÈ¢ò&lt;br&gt;
ÂØπ‰∫éËØªÊèê‰∫§ÈöîÁ¶ªÁ∫ßÂà´ÔºåËøô‰∏™ÁÆó‚Äúfeature‚Äù,ÂØπ‰∫éÂèØÈáçÂ§çËØªÔºåËøô‰∏™ÊòØ‚Äùbug‚Äù, ÊâÄ‰ª•Ë¶ÅËß£ÂÜ≥ÔºåÁß∞ÂëºËøô‰∏™bug‰∏∫ÂπªËØª&lt;/p&gt;
&lt;h3 id=&#34;2-Ê≥®ÊÑè&#34;&gt;2„ÄÅÊ≥®ÊÑèÔºö&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Âú®ÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºåÊôÆÈÄöÁöÑÊü•ËØ¢ÊòØÂø´ÁÖßËØªÔºåÊòØ‰∏ç‰ºöÁúãÂà∞Âà´ÁöÑ‰∫ãÂä°ÊèíÂÖ•ÁöÑÊï∞ÊçÆÁöÑ„ÄÇÂõ†Ê≠§ÔºåÂπªËØªÂú®‚ÄúÂΩìÂâçËØª‚Äù‰∏ãÊâç‰ºöÂá∫Áé∞„ÄÇ&lt;/li&gt;
&lt;li&gt;ÂπªËØªÂè™ÈíàÂØπÊñ∞Â¢ûÁöÑË°åÔºåÂç≥‰ΩøÊääÊâÄÊúâÁöÑËÆ∞ÂΩïÈÉΩÂä†‰∏äÈîÅÔºåËøòÊòØÈòªÊ≠¢‰∏ç‰∫ÜÊñ∞ÊèíÂÖ•ÁöÑËÆ∞ÂΩï&lt;/li&gt;
&lt;li&gt;Èó¥ÈöôÈîÅÊòØÂú®ÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÊâç‰ºöÁîüÊïàÁöÑ„ÄÇÂ¶ÇÊûúÊääÈöîÁ¶ªÁ∫ßÂà´ËÆæÁΩÆ‰∏∫ËØªÊèê‰∫§ÁöÑËØùÔºåÂ∞±Ê≤°ÊúâÈó¥ÈöôÈîÅ‰∫Ü„ÄÇ&lt;/li&gt;
&lt;li&gt;ÈöîÁ¶ªÁ∫ßÂà´‰∏∫ËØªÊèê‰∫§ÁöÑËØùÔºåÂ∞±‰ºöÂá∫Áé∞ÂπªËØª„Äê‰∏•Ê†ºÊù•ËØ¥RCÁ∫ßÂà´‰∏ã‰∏çÊòØÂπªËØª„ÄëÊÉÖÂÜµ„ÄÇÂπ∂‰∏îÈúÄË¶ÅÂ∞ÜbinlogÁöÑÊ®°ÂºèËÆæÁΩÆ‰∏∫rowÊ®°ÂºèÔºàbinlog‰∏âÁßçÊ®°Âºèhttps://www.cnblogs.com/xingyunfashi/p/8431780.htmlÔºâÔºå‰∏çËÉΩ‰ΩøÁî®statementÊ†ºÂºèÔºåstatement‰ºöÂØºËá¥Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢òÔºàÊ≤°ÊúâÈó¥ÈöôÈîÅÔºâ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;‰∏∫‰ªÄ‰πàË¶ÅËÆæÁΩÆ‰∏∫rowÔºü&lt;br&gt;
Èó¥ÈöôÈîÅÊòØÂú®ÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÊâç‰ºöÁîüÊïàÁöÑ„ÄÇÊâÄ‰ª•Ôºå‰Ω†Â¶ÇÊûúÊääÈöîÁ¶ªÁ∫ßÂà´ËÆæÁΩÆ‰∏∫ËØªÊèê‰∫§ÁöÑËØùÔºåÂ∞±Ê≤°ÊúâÈó¥ÈöôÈîÅ‰∫Ü„ÄÇ‰ΩÜÂêåÊó∂Ôºå‰Ω†Ë¶ÅËß£ÂÜ≥ÂèØËÉΩÂá∫Áé∞ÁöÑÊï∞ÊçÆÂíåÊó•Âøó‰∏ç‰∏ÄËá¥ÈóÆÈ¢òÔºåÈúÄË¶ÅÊää binlog Ê†ºÂºèËÆæÁΩÆ‰∏∫ row„ÄÇ&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;‰∏ªÈîÆ‰πãÈó¥‰πü‰ºö‰πüÊúâÈó¥ÈöôÈîÅÔºåÂ¶Ç‰∏ãÂõæÔºåÊâßË°åselect * from t where id=N for update; Â¶ÇÊûúÊ≤°ÊúâËøôË°å‰ºöÈîÅ‰ΩèÈó¥Èöô(5,10)(Êúâ‰∏ÄÊù°5Âíå‰∏ÄÊù°10ÁöÑËÆ∞ÂΩï)„ÄÇÂ¶Ç‰∏ãÂõæÔºåÂ§öÁ∫øÁ®ãÊâßË°åËØ≠Âè•‰ºöÂØºËá¥Ê≠ªÈîÅ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1614246510870.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;3-Ëß£ÂÜ≥&#34;&gt;3„ÄÅËß£ÂÜ≥Ôºö&lt;/h3&gt;
&lt;p&gt;Èó¥ÈöôÈîÅÂíåË°åÈîÅÔºåÂêàÊàê‰∏∫next-key lockÔºånext-key lockÊòØÂâçÂºÄÂêéÈó≠Âå∫Èó¥ÔºåÂçïÁã¨Èó¥ÈöôÈîÅÊòØÂâçÂºÄÂêéÂºÄÂå∫Èó¥&lt;/p&gt;
&lt;h3 id=&#34;4-ÂêéÊûú&#34;&gt;4„ÄÅÂêéÊûúÔºö&lt;/h3&gt;
&lt;p&gt;Èó¥ÈöôÈîÅÁöÑÂºïÂÖ•ÔºåÂèØËÉΩ‰ºöÂØºËá¥ÂêåÊ†∑ÁöÑËØ≠Âè•ÈîÅ‰ΩèÊõ¥Â§ßÁöÑËåÉÂõ¥ÔºåÂΩ±ÂìçÂπ∂ÂèëÂ∫¶&lt;/p&gt;
&lt;h3 id=&#34;5-Ê°à‰æã&#34;&gt;5„ÄÅÊ°à‰æã&lt;/h3&gt;
&lt;p&gt;Ê°à‰æã1„ÄÅselect * from t where d=5 for updateÔºådÊ≤°ÊúâÁ¥¢Âºï&lt;br&gt;
Ëøô‰∏™Êó∂ÂÄô‰ºöÊâ´ÊèèÂÖ®Ë°®Ôºå‰ºöÁªôË°®ËÆ∞ÂΩïÊâÄÊúâÁöÑË°åÂä†‰∏äË°åÈîÅÔºåËøò‰ºöÂä†‰∏äÈó¥ÈöôÈîÅ„ÄÇÊØîÂ¶ÇË°®tÊúâ6Êù°ËÆ∞ÂΩïÔºå‰ºö‰∏ä6Êù°Ë°åÈîÅÔºå‰ª•Âèä7‰∏™Èó¥ÈöôÈîÅ„ÄÇ&lt;br&gt;
ÁªìËÆ∫ÔºöÂØπ‰∫éÈùûÁ¥¢ÂºïÂ≠óÊÆµËøõË°åupdateÊàñselect .. for updateÊìç‰ΩúÔºå‰ª£‰ª∑ÊûÅÈ´ò„ÄÇÊâÄÊúâËÆ∞ÂΩï‰∏äÈîÅÔºå‰ª•ÂèäÊâÄÊúâÈó¥ÈöîÁöÑÈîÅ„ÄÇÂØπ‰∫éÁ¥¢ÂºïÂ≠óÊÆµËøõË°å‰∏äËø∞Êìç‰ΩúÔºå‰ª£‰ª∑‰∏ÄËà¨„ÄÇÂè™ÊúâÁ¥¢ÂºïÂ≠óÊÆµÊú¨Ë∫´ÂíåÈôÑËøëÁöÑÈó¥Èöî‰ºöË¢´Âä†ÈîÅ„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;online-ddl-ÂéüÁêÜ&#34;&gt;online DDL ÂéüÁêÜ&lt;/h2&gt;
&lt;h3 id=&#34;1-mdlÈîÅË°®ÂÖÉÊï∞ÊçÆÈîÅÂú®online-ddlÁöÑ‰ΩìÁé∞&#34;&gt;1„ÄÅMDLÈîÅÔºàË°®ÂÖÉÊï∞ÊçÆÈîÅÔºâÂú®online DDLÁöÑ‰ΩìÁé∞Ôºü&lt;/h3&gt;
&lt;p&gt;‰ΩúÁî®ÔºöÁª¥Êä§Ë°®ÂÖÉÊï∞ÊçÆÁöÑÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÔºå‰øùËØÅDDLÊìç‰Ωú‰∏éDMLÊìç‰Ωú‰πãÈó¥ÁöÑ‰∏ÄËá¥ÊÄß„ÄÇÂ¶ÇÊûúÂú®SQLÊü•ËØ¢ÊúüÈó¥‰øÆÊîπ‰∫ÜË°®ÁªìÊûÑÂ∞±‰ºöÊúâÈóÆÈ¢ò„ÄÇ&lt;br&gt;
ÊÄªÁªìÔºöMDL‰ΩúÁî®ÊòØÈò≤Ê≠¢DDLÂíåDMLÂπ∂ÂèëÁöÑÂÜ≤Á™Å&lt;/p&gt;
&lt;h3 id=&#34;2-ËøáÁ®ã&#34;&gt;2„ÄÅËøáÁ®ã&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ÂΩìÂØπ‰∏Ä‰∏™Ë°®ÂÅöÂ¢ûÂà†ÊîπÊü•Êìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂä† MDL ËØªÈîÅÔºõÂΩìË¶ÅÂØπË°®ÂÅöÁªìÊûÑÂèòÊõ¥Êìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂä† MDL ÂÜôÈîÅ„ÄÇ&lt;br&gt;
ÁªìËÆ∫ÔºöÂä†ËØªÈîÅÂàôÊâÄÊúâÁ∫øÁ®ãÂèØÊ≠£Â∏∏ËØªÂÖÉÊï∞ÊçÆÔºå‰∏çÂΩ±ÂìçÂ¢ûÂà†ÊîπÊü•Êìç‰ΩúÔºåÂè™ÊòØ‰∏çËÉΩ‰øÆÊîπË°®ÁªìÊûÑÔºõÂä†ÂÜôÈîÅÂàôÂè™ÊúâÊã•ÊúâÈîÅÁöÑÁ∫øÁ®ãÂèØ‰ª•ËØªÂÜôÂÖÉÊï∞ÊçÆÔºå‰πüÂ∞±ÊòØ‰øÆÊîπË°®ÁªìÊûÑÔºåÂÖ∂ÂÆÉÁ∫øÁ®ã‰∏çËÉΩÊâßË°å‰ªª‰ΩïÊìç‰ΩúÔºåÂåÖÊã¨‰øÆÊîπË°®ÁªìÊûÑ‰∏éÂ¢ûÂà†ÊîπÊü•„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;‰∫ãÂä°‰∏≠ÁöÑ MDL ÈîÅÔºåÂú®ËØ≠Âè•ÊâßË°åÂºÄÂßãÊó∂Áî≥ËØ∑Ôºå‰ΩÜÊòØËØ≠Âè•ÁªìÊùüÂêéÂπ∂‰∏ç‰ºöÈ©¨‰∏äÈáäÊîæÔºåËÄå‰ºöÁ≠âÂà∞Êï¥‰∏™‰∫ãÂä°Êèê‰∫§ÂêéÂÜçÈáäÊîæ„ÄÇ&lt;br&gt;
Ê≥®Ôºö‰∏ÄËà¨Â¢ûÂà†ÊîπÊü•ËØ≠Âè•ÈªòËÆ§Âä†‰∏äMDLËØªÈîÅ&lt;br&gt;
ÁªìËÆ∫ÔºöÂΩìÊúâÊú™Êèê‰∫§ÁöÑ‰∫ãÂä°Êó∂ÂÄôÔºåÊàñËÄÖÊòØÈïø‰∫ãÂä°Êó∂ÂÄôÔºåÂ¶ÇÊûúËøô‰∏™Êó∂ÂÄôËøõË°åÂ¢ûÂà†ÊîπÊü•ÔºåÊòØ‰∏Ä‰∏™Âç±Èô©ÁöÑÊìç‰ΩúÔºåÂèØËÉΩÈòªÂ°ûÂÖ∂ÂÆÉÂ¢ûÂà†ÊîπÊü•ËØ∑Ê±ÇÔºåÊàñÂØºËá¥Á∫øÁ®ãÁàÜÊª°„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;3-online-ddlÂ∑•‰ΩúÂéüÁêÜ&#34;&gt;3„ÄÅonline DDLÂ∑•‰ΩúÂéüÁêÜ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;ÊãøMDLÂÜôÈîÅ&lt;/li&gt;
&lt;li&gt;DDLÊâßË°åÂáÜÂ§á&lt;/li&gt;
&lt;li&gt;ÈôçÁ∫ßÊàêMDLËØªÈîÅ&lt;/li&gt;
&lt;li&gt;DDLÊ†∏ÂøÉÊâßË°åÔºàËÄóÊó∂ÊúÄÂ§öÁöÑÔºâ&lt;/li&gt;
&lt;li&gt;ÂçáÁ∫ßÊàêMDLÂÜôÈîÅ&lt;/li&gt;
&lt;li&gt;DDLÊúÄÁªàÊèê‰∫§&lt;/li&gt;
&lt;li&gt;ÈáäÊîæMDLÈîÅ&lt;br&gt;
Ê≥®ÔºöÈô§‰∫ÜÁ¨¨ÂõõÊ≠•ÔºåÂÖ∂‰ªñÈÉΩÊòØËé∑ÂèñÈîÅÔºåÂ¶ÇÊûúÊ≤°ÊúâÂÜ≤Á™ÅÔºåËé∑ÂèñÈîÅÁöÑÊó∂Èó¥ËæÉÂ∞è„ÄÇÂÖ∂‰∏≠Á¨¨ÂõõÊ≠•ÊòØËØªÈîÅÔºåÊâÄ‰ª•ÊòØÂèØ‰ª•Ê≠£Â∏∏ËØªÂÜôÊï∞ÊçÆÊâÄ‰ª•Ë¢´Áß∞‰∏∫Online DDL„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;oderby-Â∑•‰ΩúÂéüÁêÜ&#34;&gt;oderby Â∑•‰ΩúÂéüÁêÜ&lt;/h2&gt;
&lt;h3 id=&#34;1-ÂºïÂá∫&#34;&gt;1„ÄÅÂºïÂá∫&lt;/h3&gt;
&lt;p&gt;explain ÁöÑextra‰ø°ÊÅØÈáåÈù¢Âá∫Áé∞‰∫ÜfilesortÔºåMySQL ‰ºöÁªôÊØè‰∏™Á∫øÁ®ãÂàÜÈÖç‰∏ÄÂùóÂÜÖÂ≠òÁî®‰∫éÊéíÂ∫èÔºåÁß∞‰∏∫ sort_buffer„ÄÇ&lt;/p&gt;
&lt;p&gt;sort_buffer_sizeÔºåÂ∞±ÊòØ MySQL ‰∏∫ÊéíÂ∫èÂºÄËæüÁöÑÂÜÖÂ≠òÔºàsort_bufferÔºâÁöÑÂ§ßÂ∞è„ÄÇÂ¶ÇÊûúË¶ÅÊéíÂ∫èÁöÑÊï∞ÊçÆÈáèÂ∞è‰∫é sort_buffer_sizeÔºåÊéíÂ∫èÂ∞±Âú®ÂÜÖÂ≠ò‰∏≠ÂÆåÊàê„ÄÇ‰ΩÜÂ¶ÇÊûúÊéíÂ∫èÊï∞ÊçÆÈáèÂ§™Â§ßÔºåÂÜÖÂ≠òÊîæ‰∏ç‰∏ãÔºåÂàô‰∏çÂæó‰∏çÂà©Áî®Á£ÅÁõò‰∏¥Êó∂Êñá‰ª∂ËæÖÂä©ÊéíÂ∫è„ÄÇ&lt;br&gt;
Â§ñÈÉ®ÊéíÂ∫è‰∏ÄËà¨‰ΩøÁî®ÂΩíÂπ∂ÊéíÂ∫èÁÆóÊ≥ï„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;2-ÊéíÂ∫èÁ±ªÂûã&#34;&gt;2„ÄÅÊéíÂ∫èÁ±ªÂûã&lt;/h3&gt;
&lt;p&gt;ÂÖ®Â≠óÊÆµÊéíÂ∫èÂíårowIDÊéíÂ∫è&lt;br&gt;
ÂÖ®Â≠óÊÆµÊéíÂ∫èÔºö‰ºöÊâæÂá∫‰∏ªÈîÆÁ¥¢ÂºïÁöÑÊâÄÊúâÂ≠óÊÆµÊï∞ÊçÆÊîæÂÖ•sort_buffer‰∏≠ÊéíÂ∫è&lt;br&gt;
Áº∫ÁÇπÔºöËøîÂõûÁöÑÂ≠óÊÆµÂæàÂ§öÁöÑËØùÔºåÈÇ£‰πà sort_buffer ÈáåÈù¢Ë¶ÅÊîæÁöÑÂ≠óÊÆµÊï∞Â§™Â§öÔºåËøôÊ†∑ÂÜÖÂ≠òÈáåËÉΩÂ§üÂêåÊó∂Êîæ‰∏ãÁöÑË°åÊï∞ÂæàÂ∞ëÔºåË¶ÅÂàÜÊàêÂæàÂ§ö‰∏™‰∏¥Êó∂Êñá‰ª∂ÔºåÊéíÂ∫èÁöÑÊÄßËÉΩ‰ºöÂæàÂ∑Æ&lt;/p&gt;
&lt;p&gt;rowIDÊéíÂ∫èÔºöË¶ÅÊéíÂ∫èÁöÑÂàóÂè™ÊúâÊéíÂ∫èÂ≠óÊÆµÂíåID&lt;br&gt;
Áº∫ÁÇπ:rowid ÊéíÂ∫èÂ§öËÆøÈóÆ‰∫Ü‰∏ÄÊ¨°Ë°® t ÁöÑ‰∏ªÈîÆÁ¥¢ÂºïÔºåÂ§ö‰∫ÜÁ£ÅÁõòËØª&lt;/p&gt;
&lt;p&gt;MySQLËÆæËÆ°ÊÄùÊÉ≥ÔºöÂ¶ÇÊûúÂÜÖÂ≠òÂ§üÔºåÂ∞±Ë¶ÅÂ§öÂà©Áî®ÂÜÖÂ≠òÔºåÂ∞ΩÈáèÂáèÂ∞ëÁ£ÅÁõòËÆøÈóÆ„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;3-Â¢ûÂä†Ë¶ÜÁõñÁ¥¢ÂºïÂíåËÅîÂêàÁ¥¢Âºï‰ºòÂåñÊéíÂ∫è&#34;&gt;3„ÄÅÂ¢ûÂä†Ë¶ÜÁõñÁ¥¢ÂºïÂíåËÅîÂêàÁ¥¢Âºï‰ºòÂåñÊéíÂ∫è&lt;/h3&gt;
&lt;p&gt;Á¥¢ÂºïÈªòËÆ§Êï∞ÊçÆÊòØÊúâÂ∫èÁöÑÔºåËøôÊ†∑ÂèØ‰ª•ÈÅøÂÖç‰ΩøÁî®sort_bufferÔºàÂÖ®Â≠óÊÆµÊéíÂ∫èÂíårowIDÊéíÂ∫èÔºâÊù•ËøõË°åÊéíÂ∫è&lt;/p&gt;
&lt;h3 id=&#34;4-È¢ùÂ§ñÊ°à‰æã&#34;&gt;4„ÄÅÈ¢ùÂ§ñÊ°à‰æã&lt;/h3&gt;
&lt;p&gt;1ÔºâÊó†Êù°‰ª∂Êü•ËØ¢Â¶ÇÊûúÂè™Êúâorder by create_timeÔºàcreate_timeÊòØÁ¥¢ÂºïÔºâÔºåÈÇ£‰πà‰∏ç‰ºöËµ∞Á¥¢Âºï&lt;br&gt;
ÂéüÂõ†Ôºö‰ºòÂåñÂô®ËÆ§‰∏∫Ëµ∞‰∫åÁ∫ßÁ¥¢ÂºïÂÜçÂéªÂõûË°®ÊàêÊú¨ÊØîÂÖ®Ë°®Êâ´ÊèèÊéíÂ∫èÊõ¥È´òÔºåÊâÄ‰ª•ÈÄâÊã©Ëµ∞ÂÖ®Ë°®Êâ´ÊèèÔºåÁÑ∂ÂêéÂà©Áî®ÂÖ®Â≠óÊÆµÊéíÂ∫èÂíårowIDÊéíÂ∫èÂÖ∂‰∏≠‰∏ÄÁßçÊéíÂ∫è„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;select-countÂ∑•‰ΩúÂéüÁêÜ&#34;&gt;select countÂ∑•‰ΩúÂéüÁêÜ&lt;/h2&gt;
&lt;h3 id=&#34;1-count-ÂÆûÁé∞ÊñπÂºè&#34;&gt;1„ÄÅcount(*) ÂÆûÁé∞ÊñπÂºè&lt;/h3&gt;
&lt;p&gt;Âú®‰∏çÂêåÁöÑ MySQL ÂºïÊìé‰∏≠Ôºåcount(&lt;em&gt;) Êúâ‰∏çÂêåÁöÑÂÆûÁé∞ÊñπÂºè„ÄÇ&lt;br&gt;
MyISAM ÂºïÊìéÊää‰∏Ä‰∏™Ë°®ÁöÑÊÄªË°åÊï∞Â≠òÂú®‰∫ÜÁ£ÅÁõò‰∏äÔºåÂõ†Ê≠§ÊâßË°å count(&lt;/em&gt;) ÁöÑÊó∂ÂÄô‰ºöÁõ¥Êé•ËøîÂõûËøô‰∏™Êï∞ÔºåÊïàÁéáÂæàÈ´òÔºõ&lt;br&gt;
ËÄå InnoDB ÂºïÊìéÂ∞±È∫ªÁÉ¶‰∫ÜÔºåÂÆÉÊâßË°å count(*) ÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÊääÊï∞ÊçÆ‰∏ÄË°å‰∏ÄË°åÂú∞‰ªéÂºïÊìéÈáåÈù¢ËØªÂá∫Êù•ÔºåÁÑ∂ÂêéÁ¥ØÁßØËÆ°Êï∞„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;2-‰∏∫‰ªÄ‰πàinnodb-‰∏çË∑ü-myisam-‰∏ÄÊ†∑‰πüÊääÊï∞Â≠óÂ≠òËµ∑Êù•Âë¢&#34;&gt;2„ÄÅ‰∏∫‰ªÄ‰πàInnoDB ‰∏çË∑ü MyISAM ‰∏ÄÊ†∑Ôºå‰πüÊääÊï∞Â≠óÂ≠òËµ∑Êù•Âë¢&lt;/h3&gt;
&lt;p&gt;Âõ†‰∏∫InnoDB ÊúâMVCCÔºå‰∏çÂêåÊó∂Âàª‰∏çÂêå‰∫ãÂä°‰πãÈó¥ÊúâÂèØËÉΩÁöÑÁªìÊûú‰∏ç‰∏ÄÊ†∑&lt;/p&gt;
&lt;h3 id=&#34;3-Â∞èÁªì‰∏Ä‰∏ã&#34;&gt;3„ÄÅÂ∞èÁªì‰∏Ä‰∏ã&lt;/h3&gt;
&lt;p&gt;MyISAM Ë°®ËôΩÁÑ∂ count(&lt;em&gt;) ÂæàÂø´Ôºå‰ΩÜÊòØ‰∏çÊîØÊåÅ‰∫ãÂä°ÔºõÔºåÂä†‰∫ÜwhereÊù°‰ª∂‰πüÂæàÊÖ¢&lt;br&gt;
show table status ÂëΩ‰ª§ËôΩÁÑ∂ËøîÂõûÂæàÂø´Ôºå‰ΩÜÊòØ‰∏çÂáÜÁ°ÆÔºõ&lt;br&gt;
InnoDB Ë°®Áõ¥Êé• count(&lt;/em&gt;) ‰ºöÈÅçÂéÜÂÖ®Ë°®ÔºåËôΩÁÑ∂ÁªìÊûúÂáÜÁ°ÆÔºå‰ΩÜ‰ºöÂØºËá¥ÊÄßËÉΩÈóÆÈ¢ò&lt;/p&gt;
&lt;h3 id=&#34;4-count-count‰∏ªÈîÆ-id-countÂ≠óÊÆµ-Âíå-count1-Á≠â‰∏çÂêåÁî®Ê≥ïÁöÑÊÄßËÉΩÊúâÂì™‰∫õÂ∑ÆÂà´&#34;&gt;4„ÄÅcount(*)„ÄÅcount(‰∏ªÈîÆ id)„ÄÅcount(Â≠óÊÆµ) Âíå count(1) Á≠â‰∏çÂêåÁî®Ê≥ïÁöÑÊÄßËÉΩÔºåÊúâÂì™‰∫õÂ∑ÆÂà´Ôºü&lt;/h3&gt;
&lt;p&gt;countËØ≠‰πâÔºöcount() ÊòØ‰∏Ä‰∏™ËÅöÂêàÂáΩÊï∞ÔºåÂØπ‰∫éËøîÂõûÁöÑÁªìÊûúÈõÜÔºå‰∏ÄË°åË°åÂú∞Âà§Êñ≠ÔºåÂ¶ÇÊûú count ÂáΩÊï∞ÁöÑÂèÇÊï∞‰∏çÊòØ NULLÔºåÁ¥ØËÆ°ÂÄºÂ∞±Âä† 1ÔºåÂê¶Âàô‰∏çÂä†„ÄÇÊúÄÂêéËøîÂõûÁ¥ØËÆ°ÂÄº&lt;br&gt;
ÂæóÂá∫ÁªìËÆ∫Ôºöcount(*)„ÄÅcount(‰∏ªÈîÆ id) Âíå count(1) ÈÉΩË°®Á§∫ËøîÂõûÊª°Ë∂≥Êù°‰ª∂ÁöÑÁªìÊûúÈõÜÁöÑÊÄªË°åÊï∞ÔºõËÄå count(Â≠óÊÆµÔºâÔºåÂàôË°®Á§∫ËøîÂõûÊª°Ë∂≥Êù°‰ª∂ÁöÑÊï∞ÊçÆË°åÈáåÈù¢ÔºåÂèÇÊï∞‚ÄúÂ≠óÊÆµ‚Äù‰∏ç‰∏∫ NULL ÁöÑÊÄª‰∏™Êï∞&lt;/p&gt;
&lt;h3 id=&#34;5-ÊÄßËÉΩÂØπÊØî&#34;&gt;5„ÄÅÊÄßËÉΩÂØπÊØîÔºö&lt;/h3&gt;
&lt;p&gt;count(‰∏ªÈîÆID)ÔºöInnoDB ÂºïÊìéÈÅçÂéÜÊï¥Âº†Ë°®Ôºå‰ΩÜ‰∏çÂèñÂÄº„ÄÇserver Â±ÇÊãøÂà∞ id ÂêéÔºåÂà§Êñ≠ÊòØ‰∏çÂèØËÉΩ‰∏∫Á©∫ÁöÑÔºåÂ∞±ÊåâË°åÁ¥ØÂä†&lt;br&gt;
count(1)ÔºöInnoDB ÂºïÊìéÈÅçÂéÜÊï¥Âº†Ë°®ÔºåÊääÊØè‰∏ÄË°åÁöÑIDÂèñÂá∫Êù•„ÄÇserver Â±ÇÂØπ‰∫éËøîÂõûÁöÑÊØè‰∏ÄË°åÔºåÊîæ‰∏Ä‰∏™Êï∞Â≠ó‚Äú1‚ÄùËøõÂéªÔºåÂà§Êñ≠ÊòØ‰∏çÂèØËÉΩ‰∏∫Á©∫ÁöÑÔºåÊåâË°åÁ¥ØÂä†&lt;br&gt;
count(Â≠óÊÆµ)Ôºö‰∏ÄË°åË°åÂú∞‰ªéËÆ∞ÂΩïÈáåÈù¢ËØªÂá∫Ëøô‰∏™Â≠óÊÆµÔºåÂà§Êñ≠‰∏çËÉΩ‰∏∫ nullÔºåÊåâË°åÁ¥ØÂä†&lt;br&gt;
count(&lt;em&gt;)Ôºöcount(&lt;/em&gt;)ÊòØ‰∏™‰æãÂ§ñÔºåÁõÆÂâçMySQLÂè™ÈíàÂØπ‰∫ÜËøô‰∏™ÂÅö‰∫Ü‰ºòÂåñÔºåÂπ∂‰∏ç‰ºöÊääÂÖ®ÈÉ®Â≠óÊÆµÂèñÂá∫Êù•ÔºåËÄåÊòØ‰∏ìÈó®ÂÅö‰∫Ü‰ºòÂåñÔºå‰∏çÂèñÂÄº„ÄÇcount(*) ËÇØÂÆö‰∏çÊòØ nullÔºåÊåâË°åÁ¥ØÂä†„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;6-ÁªìËÆ∫&#34;&gt;6„ÄÅÁªìËÆ∫&lt;/h3&gt;
&lt;p&gt;count(Â≠óÊÆµ) &amp;lt; count(‰∏ªÈîÆID)&amp;lt; count(1)=count(&lt;em&gt;)&lt;br&gt;
1„ÄÅÂõ†‰∏∫count(&lt;/em&gt;) Âíå count(1) ‰∏çÂèñÂ≠óÊÆµÂÄºÔºåÂºïÊìéÂ±ÇÂáèÂ∞ëÂæÄ serverÂ±ÇÁöÑÊï∞ÊçÆËøîÂõûÔºåÊâÄ‰ª•ÊØîÂÖ∂‰ªñcount(Â≠óÊÆµ)Ë¶ÅËøîÂõûÂÄºÁöÑ„ÄêÊÄßËÉΩ„ÄëËæÉÂ•ΩÔºõ&lt;br&gt;
2„ÄÅ‰∏∫‰ªÄ‰πàcount(Â≠óÊÆµ)&amp;lt; count(‰∏ªÈîÆID)ÔºåÂõ†‰∏∫Â¶ÇÊûúÈÄâÊã©count(ID)ÔºåÈÇ£‰πàMySQL‰ºöËá™Âä®ÈÄâÊã©ÊúÄÂ∞èÁöÑÁ¥¢ÂºïÊ†ëÊù•ÈÅçÂéÜÔºåÂ¶ÇÊûúÊòØcount(Â≠óÊÆµ)ÔºåËÄå‰∏îÂ≠óÊÆµÊ≤°ÊúâÁ¥¢ÂºïÔºåÈÇ£‰πà‰ºö‰ΩøÁî®‰∏ªÈîÆÁ¥¢Âºï„ÄÇ‰∏ªÈîÆÁ¥¢ÂºïÂæàÂ§ß„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;ÊôÆÈÄöÁ¥¢ÂºïÂíåÂîØ‰∏ÄÁ¥¢ÂºïÈÄâÊã©&#34;&gt;ÊôÆÈÄöÁ¥¢ÂºïÂíåÂîØ‰∏ÄÁ¥¢ÂºïÈÄâÊã©&lt;/h2&gt;
&lt;h3 id=&#34;1-ÊôÆÈÄöÁ¥¢ÂºïÂíåÂîØ‰∏ÄÁ¥¢ÂºïÈÄâÊã©&#34;&gt;1„ÄÅÊôÆÈÄöÁ¥¢ÂºïÂíåÂîØ‰∏ÄÁ¥¢ÂºïÈÄâÊã©&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Êü•ËØ¢ÊÄßËÉΩÈÉΩ‰∏ÄÊ†∑&lt;/li&gt;
&lt;li&gt;Êõ¥Êñ∞ÂàÜ‰∏§ÁßçÊÉÖÂÜµ&lt;/li&gt;
&lt;/ol&gt;
&lt;ol&gt;
&lt;li&gt;Ëøô‰∏™ËÆ∞ÂΩïË¶ÅÊõ¥Êñ∞ÁöÑÁõÆÊ†áÈ°µÂú®ÂÜÖÂ≠ò‰∏≠Ôºö&lt;br&gt;
ÂØπ‰∫éÂîØ‰∏ÄÁ¥¢ÂºïÊù•ËØ¥ÔºåÊâæÂà∞ 3 Âíå 5 ‰πãÈó¥ÁöÑ‰ΩçÁΩÆÔºåÂà§Êñ≠Âà∞Ê≤°ÊúâÂÜ≤Á™ÅÔºåÊèíÂÖ•Ëøô‰∏™ÂÄºÔºåËØ≠Âè•ÊâßË°åÁªìÊùüÔºõ&lt;br&gt;
ÂØπ‰∫éÊôÆÈÄöÁ¥¢ÂºïÊù•ËØ¥ÔºåÊâæÂà∞ 3 Âíå 5 ‰πãÈó¥ÁöÑ‰ΩçÁΩÆÔºåÊèíÂÖ•Ëøô‰∏™ÂÄºÔºåËØ≠Âè•ÊâßË°åÁªìÊùü„ÄÇ&lt;br&gt;
ÊÄªÁªìÔºöÁõÆÊ†áËÆ∞ÂΩïÂú®ÂÜÖÂ≠òbuffer pool‰∏≠ÁöÑËØùÔºåÊôÆÈÄöÁ¥¢ÂºïÂíåÂîØ‰∏ÄÁ¥¢ÂºïÊõ¥Êñ∞ÊÄßËÉΩÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;2)Ëøô‰∏™ËÆ∞ÂΩïË¶ÅÊõ¥Êñ∞ÁöÑÁõÆÊ†áÈ°µ‰∏çÂú®ÂÜÖÂ≠ò‰∏≠Ôºö&lt;br&gt;
ÂØπ‰∫éÂîØ‰∏ÄÁ¥¢ÂºïÊù•ËØ¥ÔºåÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÈ°µËØªÂÖ•ÂÜÖÂ≠òÔºåÂà§Êñ≠Âà∞Ê≤°ÊúâÂÜ≤Á™ÅÔºåÊèíÂÖ•Ëøô‰∏™ÂÄºÔºåËØ≠Âè•ÊâßË°åÁªìÊùüÔºõ&lt;br&gt;
ÂØπ‰∫éÊôÆÈÄöÁ¥¢ÂºïÊù•ËØ¥ÔºåÂàôÊòØÂ∞ÜÊõ¥Êñ∞ËÆ∞ÂΩïÂú® change bufferÔºåËØ≠Âè•ÊâßË°åÂ∞±ÁªìÊùü‰∫Ü„ÄÇ&lt;br&gt;
ÊÄªÁªìÔºöÂîØ‰∏ÄÁ¥¢ÂºïÂ∞ÜÊï∞ÊçÆÈ°µËØªÂÖ•ÂÜÖÂ≠òÊ∂âÂèäÈöèÊú∫ËÆøÈóÆIOÔºåÊìç‰ΩúÊàêÊú¨ÊûÅÈ´ò„ÄÇchange bufferÈÅøÂÖçÊõ¥Êñ∞Á£ÅÁõòÔºåÂáèÂ∞ë‰∫ÜÈöèÊú∫Á£ÅÁõòËÆøÈóÆÔºåÊèê‰æõÊÄßËÉΩ„ÄÇ&lt;/p&gt;
&lt;p&gt;Ê°à‰æãÔºöÊüê‰∏™‰∏öÂä°ÁöÑÂ∫ìÂÜÖÂ≠òÂëΩ‰∏≠ÁéáÁ™ÅÁÑ∂‰ªé 99% Èôç‰ΩéÂà∞‰∫Ü 75%ÔºåÊï¥‰∏™Á≥ªÁªüÂ§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÔºåÊõ¥Êñ∞ËØ≠Âè•ÂÖ®ÈÉ®Â†µ‰Ωè&lt;br&gt;
ÂéüÂõ†Ôºö‰∏öÂä°ÊúâÂ§ßÈáèÊèíÂÖ•Êï∞ÊçÆÁöÑÊìç‰ΩúÔºåÂºÄÂèë‰∫∫ÂëòÊääÂÖ∂‰∏≠ÁöÑÊüê‰∏™ÊôÆÈÄöÁ¥¢ÂºïÊîπÊàê‰∫ÜÂîØ‰∏ÄÁ¥¢Âºï„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;2-changebufferÁöÑ‰ΩøÁî®Âú∫ÊôØ&#34;&gt;2„ÄÅchangebufferÁöÑ‰ΩøÁî®Âú∫ÊôØ&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;ÂîØ‰∏ÄÁ¥¢ÂºïÁöÑÊõ¥Êñ∞Â∞±‰∏çËÉΩ‰ΩøÁî® change bufferÔºåÂÆûÈôÖ‰∏ä‰πüÂè™ÊúâÊôÆÈÄöÁ¥¢ÂºïÂèØ‰ª•‰ΩøÁî®„ÄÇ&lt;/li&gt;
&lt;li&gt;ÂØπ‰∫éÂÜôÂ§öËØªÂ∞ëÁöÑ‰∏öÂä°Êù•ËØ¥ÔºåÈ°µÈù¢Âú®ÂÜôÂÆå‰ª•ÂêéÈ©¨‰∏äË¢´ËÆøÈóÆÂà∞ÁöÑÊ¶ÇÁéáÊØîËæÉÂ∞èÔºåÊ≠§Êó∂ change buffer ÁöÑ‰ΩøÁî®ÊïàÊûúÊúÄÂ•Ω„ÄÇËøôÁßç‰∏öÂä°Ê®°ÂûãÂ∏∏ËßÅÁöÑÂ∞±ÊòØË¥¶ÂçïÁ±ª„ÄÅÊó•ÂøóÁ±ªÁöÑÁ≥ªÁªü„ÄÇ&lt;/li&gt;
&lt;li&gt;Â¶ÇÊûúÊòØÂÜôÂÆåÁ´ãÈ©¨ËØªÁöÑÂú∫ÊôØÔºåÂª∫ËÆÆÂÖ≥Èó≠change buffer ÔºåÂõ†‰∏∫Á´ãÈ©¨Êü•ËØ¢‰ºöËÆøÈóÆÊï∞ÊçÆÈ°µÔºå‰ºöËøõË°åmergeÊìç‰Ωú&lt;br&gt;
mergeÔºöÂ∞Ü change buffer ‰∏≠ÁöÑÊìç‰ΩúÂ∫îÁî®Âà∞ÂéüÊï∞ÊçÆÈ°µÔºåÂæóÂà∞ÊúÄÊñ∞ÁªìÊûúÁöÑËøáÁ®ãÁß∞‰∏∫ merge„ÄÇÈô§‰∫ÜËÆøÈóÆËøô‰∏™Êï∞ÊçÆÈ°µ‰ºöËß¶Âèë merge Â§ñÔºåÁ≥ªÁªüÊúâÂêéÂè∞Á∫øÁ®ã‰ºöÂÆöÊúü merge„ÄÇÂú®Êï∞ÊçÆÂ∫ìÊ≠£Â∏∏ÂÖ≥Èó≠ÔºàshutdownÔºâÁöÑËøáÁ®ã‰∏≠Ôºå‰πü‰ºöÊâßË°å merge Êìç‰Ωú„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;3-change-buffer-Âíå-redo-log‰∏§‰∏™ÂàÜÂà´ÊòØÂ¶Ç‰ΩïÊèêÈ´òÊÄßËÉΩÁöÑ&#34;&gt;3„ÄÅchange buffer Âíå redo log‰∏§‰∏™ÂàÜÂà´ÊòØÂ¶Ç‰ΩïÊèêÈ´òÊÄßËÉΩÁöÑ&lt;/h3&gt;
&lt;p&gt;redo log ‰∏ªË¶ÅËäÇÁúÅÁöÑÊòØÈöèÊú∫ÂÜôÁ£ÅÁõòÁöÑ IO Ê∂àËÄóÔºàËΩ¨ÊàêÈ°∫Â∫èÂÜôÔºâÔºå&lt;br&gt;
ÂØπ‰∫éÊôÆÈÄöÁ¥¢ÂºïÁöÑ‰øÆÊîπÔºåÂàô‰ºöËÆ∞ÂΩïÂà∞change bufferÔºåËÄå change buffer ‰∏ªË¶ÅËäÇÁúÅÁöÑÂàôÊòØÈöèÊú∫ËØªÁ£ÅÁõòÁöÑ IO Ê∂àËÄó„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;4-‰∏æ‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÊù•ËØ¥Êòé-mergechangebufferredologÁöÑÂÖ≥Á≥ª&#34;&gt;4„ÄÅ‰∏æ‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÊù•ËØ¥Êòé mergeÔºåchangebufferÔºåredologÁöÑÂÖ≥Á≥ª&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ÊèíÂÖ•(id1,k1) (id2,k2)‰∏§Êù°ËÆ∞ÂΩïÔºåk1 ÊâÄÂú®ÁöÑÊï∞ÊçÆÈ°µÂú®ÂÜÖÂ≠ò (InnoDB buffer pool) ‰∏≠Ôºåk2 ÊâÄÂú®ÁöÑÊï∞ÊçÆÈ°µ‰∏çÂú®ÂÜÖÂ≠ò‰∏≠&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1614246819842.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
‰ª•‰∏äÊìç‰ΩúÊòØÔºö&lt;br&gt;
1ÔºâPage 1 Âú®ÂÜÖÂ≠ò‰∏≠ÔºåÁõ¥Êé•Êõ¥Êñ∞ÂÜÖÂ≠òÔºõ&lt;br&gt;
2ÔºâPage 2 Ê≤°ÊúâÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂ∞±Âú®ÂÜÖÂ≠òÁöÑ change buffer Âå∫ÂüüÔºåËÆ∞ÂΩï‰∏ã‚ÄúÊàëË¶ÅÂæÄ Page 2 ÊèíÂÖ•‰∏ÄË°å‚ÄùËøô‰∏™‰ø°3ÔºâÂ∞Ü‰∏äËø∞‰∏§‰∏™Âä®‰ΩúËÆ∞ÂÖ• redo log ‰∏≠ÔºàÂõæ‰∏≠ 3 Âíå 4Ôºâ„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ÊâßË°åÊü•ËØ¢Êìç‰Ωúselect * from t where k in (k1, k2)&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1614246855416.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
‰ª•‰∏äÊìç‰ΩúÊòØÔºö&lt;br&gt;
1ÔºâÂ¶ÇÊûúk1ÂØπÂ∫îÁöÑÊï∞ÊçÆÈ°µÂú®buffer poolÂÜÖÂ≠ò‰∏≠ÔºåÈÇ£‰πàÁõ¥Êé•‰ªéÂÜÖÂ≠ò‰∏≠Êü•Âá∫Âπ∂‰∏îËøîÂõû„ÄÇËøôÈáå‰∏çÁî®Áõ¥Êé•‰ªéredolog‰∏≠ËØªÁõò&lt;br&gt;
2ÔºâÂ¶ÇÊûúk2ÂØπÂ∫îÁöÑÊï∞ÊçÆÈ°µ‰∏çÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÈÇ£‰πà‰ºöËØªÁõòÔºåËØªÊï∞ÊçÆÂà∞Êï∞ÊçÆÈ°µpage2‰∏≠ÔºåÁÑ∂ÂêéÂ∫îÁî® change buffer ÈáåÈù¢ÁöÑÊìç‰ΩúÊó•ÂøóÔºåÂÅömergeÊìç‰ΩúÔºåÂπ∂‰∏îËøîÂõûÊ≠£Á°ÆÁöÑÊï∞ÊçÆ&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ê≥®Ôºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Ê≠§Êó∂Êï∞ÊçÆÈ°µÊòØËÑèÈ°µÔºåÈúÄË¶ÅÂà∑Áõòflush&lt;/li&gt;
&lt;li&gt;change bufferËôΩÁÑ∂ÊòØÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÔºåÂ¶Ç‰ΩïÈÅøÂÖçÂÅúÁîµÂØºËá¥ÁöÑ‰∏¢Â§±Âë¢Ôºü&lt;br&gt;
1Ôºâ.change bufferÊúâ‰∏ÄÈÉ®ÂàÜÂú®ÂÜÖÂ≠òÊúâ‰∏ÄÈÉ®ÂàÜÂú®ibdata.ÂÅöpurgeÊìç‰Ωú,Â∫îËØ•Â∞±‰ºöÊäächange bufferÈáåÁõ∏Â∫îÁöÑÊï∞ÊçÆÊåÅ‰πÖÂåñÂà∞ibdata&lt;br&gt;
2.Ôºâredo logÈáåËÆ∞ÂΩï‰∫ÜÊï∞ÊçÆÈ°µÁöÑ‰øÆÊîπ‰ª•Âèächange bufferÊñ∞ÂÜôÂÖ•ÁöÑ‰ø°ÊÅØ&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;mysqlÊäñÂä®ÂèØËÉΩÂéüÂõ†&#34;&gt;MySQLÊäñÂä®ÂèØËÉΩÂéüÂõ†&lt;/h2&gt;
&lt;h3 id=&#34;1-Ê¶ÇÂøµ&#34;&gt;1„ÄÅÊ¶ÇÂøµ&lt;/h3&gt;
&lt;p&gt;ÂΩìÂÜÖÂ≠òÊï∞ÊçÆÈ°µË∑üÁ£ÅÁõòÊï∞ÊçÆÈ°µÂÜÖÂÆπ‰∏ç‰∏ÄËá¥ÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨Áß∞Ëøô‰∏™ÂÜÖÂ≠òÈ°µ‰∏∫‚ÄúËÑèÈ°µ‚Äù„ÄÇÂÜÖÂ≠òÊï∞ÊçÆÂÜôÂÖ•Âà∞Á£ÅÁõòÂêéÔºåÂÜÖÂ≠òÂíåÁ£ÅÁõò‰∏äÁöÑÊï∞ÊçÆÈ°µÁöÑÂÜÖÂÆπÂ∞±‰∏ÄËá¥‰∫ÜÔºåÁß∞‰∏∫‚ÄúÂπ≤ÂáÄÈ°µ‚Äù„ÄÇÂÜÖÂ≠òÈáåÁöÑÊï∞ÊçÆÂÜôÂÖ•Á£ÅÁõòÁöÑËøáÁ®ãÔºåÊúØËØ≠Â∞±ÊòØ flush&lt;/p&gt;
&lt;p&gt;Êõ¥Êñ∞Êìç‰ΩúÔºöÂÖ∂ÂÆûÂ∞±ÊòØÂú®ÂÜôÂÜÖÂ≠òÂíåÊó•Âøó&lt;br&gt;
MySQL ÂÅ∂Â∞î‚ÄúÊäñ‚Äù‰∏Ä‰∏ãÁöÑÈÇ£‰∏™Áû¨Èó¥ÔºöÂèØËÉΩÂ∞±ÊòØÂú®Âà∑ËÑèÈ°µ&lt;/p&gt;
&lt;h3 id=&#34;2-Ëß¶ÂèëÂà∑flushÊó∂Êú∫&#34;&gt;2„ÄÅËß¶ÂèëÂà∑flushÊó∂Êú∫&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;redo logÂÜôÊª°&lt;br&gt;
redo logÊòØ‰∏Ä‰∏™ÁéØÂΩ¢ÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂΩìÊï∞ÁªÑredo logÂÜôÊª°‰∫ÜÔºå‰ºöÂÅúÊ≠¢ÊâÄÊúâÁöÑÊõ¥Êñ∞Êìç‰Ωú„ÄÇcheckpoint ÂæÄÂâçÊé®ËøõÔºåredo log ÁïôÂá∫Á©∫Èó¥ÂèØ‰ª•ÁªßÁª≠ÂÜô„ÄÇ&lt;br&gt;
checkpoint Â¶ÇÊûúË¶ÅÂæÄÂâçÁßªÂä®ÔºåÂ∞±ÈúÄË¶ÅÂ∞Ü‰∏§‰∏™ÁÇπ‰πãÈó¥ÁöÑÊó•ÂøóÔºàÊµÖÁªøËâ≤ÈÉ®ÂàÜÔºâÔºåÂØπÂ∫îÁöÑÊâÄÊúâËÑèÈ°µÈÉΩ flush Âà∞Á£ÅÁõò‰∏ä„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ËøôÁßçÂØπÊï∞ÊçÆÂ∫ìÂΩ±ÂìçÊòØÂæà‰∏•ÈáçÁöÑÔºå‰ºöÂÅúÊ≠¢ÊâÄÊúâÁöÑÊõ¥Êñ∞Êìç‰Ωú&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1614246959529.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;BufferPoolÂÜÖÂ≠òÊ±†Êó†ÂèØÁî®ÂÜÖÂ≠òÔºåÈúÄË¶ÅÊ∑òÊ±∞ËÑèÈ°µÔºåÊ∑òÊ±∞ËÑèÈ°µÈúÄË¶Åflush&lt;br&gt;
ÂΩìÈúÄË¶ÅÊñ∞ÁöÑÂÜÖÂ≠òÈ°µÔºåËÄåÂÜÖÂ≠ò‰∏çÂ§üÁî®ÁöÑÊó∂ÂÄôÔºåÂ∞±Ë¶ÅÊ∑òÊ±∞‰∏Ä‰∫õÊï∞ÊçÆÈ°µÔºåÁ©∫Âá∫ÂÜÖÂ≠òÁªôÂà´ÁöÑÊï∞ÊçÆÈ°µ‰ΩøÁî®„ÄÇËøôÊó∂ÂÄôÂè™ËÉΩÊääÊúÄ‰πÖ‰∏ç‰ΩøÁî®ÁöÑÊï∞ÊçÆÈ°µ‰ªéÂÜÖÂ≠ò‰∏≠Ê∑òÊ±∞ÊéâÔºö„ÄÇÂ¶ÇÊûúÊ∑òÊ±∞ÁöÑÊòØ‚ÄúËÑèÈ°µ‚ÄùÔºåÂ∞±Ë¶ÅÂÖàÂ∞ÜËÑèÈ°µÂÜôÂà∞Á£ÅÁõò„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MySQLÁ©∫Èó≤‰ºö‰∏ªÂä®flush&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MySQL Ê≠£Â∏∏ÂÖ≥Èó≠ÁöÑÊÉÖÂÜµ„ÄÇ&lt;br&gt;
ËøôÊó∂ÂÄôÔºåMySQL ‰ºöÊääÂÜÖÂ≠òÁöÑËÑèÈ°µÈÉΩ flush Âà∞Á£ÅÁõò‰∏äÔºå‰∏ãÊ¨° MySQL ÂêØÂä®ÁöÑÊó∂ÂÄôÔºåÂ∞±ÂèØ‰ª•Áõ¥Êé•‰ªéÁ£ÅÁõò‰∏äËØªÊï∞ÊçÆÔºåÂêØÂä®ÈÄüÂ∫¶‰ºöÂæàÂø´„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;3-innodbÂà∑ËÑèÈ°µÁöÑÁ≠ñÁï•&#34;&gt;3„ÄÅInnodbÂà∑ËÑèÈ°µÁöÑÁ≠ñÁï•&lt;/h3&gt;
&lt;p&gt;Ê≠£Á°ÆÂú∞ÂëäËØâ InnoDB ÊâÄÂú®‰∏ªÊú∫ÁöÑ IO ËÉΩÂäõÔºåÈÄöËøáinnodb_io_capacityÂèÇÊï∞ËÆ©InnoDBÁü•ÈÅìÁ£ÅÁõòIOËÉΩÂäõÔºå‰ª•‰æøÂÖ∂Ê≠£Á°ÆÂú∞Âà∑ËÑèÈ°µ„ÄÇ&lt;br&gt;
Âª∫ËÆÆÔºöinnodb_io_capacityËÆæÁΩÆ‰∏∫Á£ÅÁõòÁöÑ IOPS„ÄÇ Á£ÅÁõòÁöÑ IOPSÔºå‰πüÂ∞±ÊòØÂú®‰∏ÄÁßíÂÜÖÔºåÁ£ÅÁõòËøõË°åÂ§öÂ∞ëÊ¨° I/O ËØªÂÜôÔºåÊòØË°°ÈáèÁ£ÅÁõòÊÄßËÉΩÁöÑ‰∏ªË¶ÅÊåáÊ†á„ÄÇ&lt;/p&gt;
&lt;p&gt;Âà∑ËÑèÈ°µÊÖ¢ÂèØËÉΩÂØºËá¥ÁöÑÊÉÖÂÜµÔºöÂÜÖÂ≠òËÑèÈ°µÂ§™Â§öÔºåÂÖ∂Ê¨°ÊòØ redo log ÂÜôÊª°„ÄÇ&lt;br&gt;
ÊÄªÁªì: Êó†ËÆ∫ÊòØ‰Ω†ÁöÑÊü•ËØ¢ËØ≠Âè•Âú®ÈúÄË¶ÅÂÜÖÂ≠òÁöÑÊó∂ÂÄôÂèØËÉΩË¶ÅÊ±ÇÊ∑òÊ±∞‰∏Ä‰∏™ËÑèÈ°µÔºåËøòÊòØÁî±‰∫éÂà∑ËÑèÈ°µÁöÑÈÄªËæë‰ºöÂç†Áî® IO ËµÑÊ∫êÂπ∂ÂèØËÉΩÂΩ±ÂìçÂà∞‰∫Ü‰Ω†ÁöÑÊõ¥Êñ∞ËØ≠Âè•ÔºåÈÉΩÂèØËÉΩÊòØÈÄ†Êàê‰Ω†‰ªé‰∏öÂä°Á´ØÊÑüÁü•Âà∞ MySQL‚ÄúÊäñ‚Äù‰∫Ü‰∏Ä‰∏ãÁöÑÂéüÂõ†„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;4-ÂÖ∑‰Ωì‰∏öÂä°Âú∫ÊôØ&#34;&gt;4„ÄÅÂÖ∑‰Ωì‰∏öÂä°Âú∫ÊôØ&lt;/h3&gt;
&lt;p&gt;Âá∫Áé∞ËøôÊ†∑ÁöÑÂú∫ÊôØÔºöMySQLÁöÑTPS‰ºöÂæà‰ΩéÔºå‰ΩÜÊòØ‰∏ªÊú∫ÁöÑIOÂéãÂäõ‰∏çÂ§ß&lt;br&gt;
Â¶ÇÊûúÊòØÂõ∫ÊÄÅÁ°¨ÁõòÔºåÈÇ£‰πàÂÆÉÁöÑIOËØªÂÜôËÉΩÂäõ‰ºöÂæàÂ§ß„ÄÇËøô‰∏™Êó∂ÂÄôÂ¶ÇÊûúinnodb_io_capacityËÆæÁΩÆÂ§™‰ΩéÔºåMySQLËÆ§‰∏∫Á£ÅÁõòioËÉΩÂäõÂ§™Â∑ÆÔºåÂØºËá¥ÂÖ®ÂäõÂà∑ËÑèÈ°µÂèòÊÖ¢„ÄÅËÑèÈ°µÁ¥ØÁßØ‰∏ãÊù•ÔºåÂêéÁª≠Âè™Ë¶ÅÂà∑ËÑèÈ°µÔºå‰∏çÁÆ°ÊòØÂÜÖÂ≠ò‰∏çÂ§üËøòÊòØÊó•ÂøóÊª°‰∫ÜÂØºËá¥ÁöÑÂà∑ËÑèÈ°µÔºåÈÉΩ‰ºöÂØºËá¥ÂèòÊÖ¢„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;5-qa&#34;&gt;5 Q&amp;amp;A&lt;/h3&gt;
&lt;p&gt;1„ÄÅ‚ÄúÂÜÖÂ≠ò‰∏çÂ§üÁî®‰∫ÜÔºåË¶ÅÂÖàÂ∞ÜËÑèÈ°µÂÜôÂà∞Á£ÅÁõò‚Äúredo logÂØπÂ∫îÁöÑÁ©∫Èó¥‰ºöÈáäÊîæÂòõÔºü‚Äúredo log ÂÜôÊª°‰∫ÜÔºåË¶Å flush ËÑèÈ°µ‚ÄùÂØπÂ∫îÁöÑÂÜÖÂ≠òÈ°µ‰ºöÈáäÊîæÂòõÔºü&lt;br&gt;
redolog ÁöÑÁ©∫Èó¥ÊòØÂæ™ÁéØ‰ΩøÁî®ÁöÑÔºåÊó†ÊâÄË∞ìÈáäÊîæ„ÄÇ ÂØπÂ∫îÁöÑÂÜÖÂ≠òÈ°µ‰ºöÂèòÊàêÂπ≤ÂáÄÈ°µ„ÄÇ‰ΩÜÊòØÁ≠âÊ∑òÊ±∞ÁöÑÊó∂ÂÄôÊâç‰ºöÈÄêÂá∫ÂÜÖÂ≠ò&lt;/p&gt;
&lt;p&gt;2„ÄÅredo logÊòØÊÄé‰πàËÆ∞ÂΩïÂØπÂ∫îËÑèÈ°µÊòØÂê¶Â∑≤Áªèflush‰∫ÜÔºüÂ¶ÇÊûúÊñ≠Áîµ‰∫ÜÈáçÂêØÂØºËá¥ÂÜÖÂ≠ò‰∏¢Â§±ÔºåÂâçÈù¢Âá†Á´†ËØ¥ÈÄöËøáredo logËøõË°åÊï∞ÊçÆÊÅ¢Â§çÈÇ£redo logÂèàÊÄé‰πàÂéªÈáäÊîæÁ©∫Èó¥Ôºü&lt;br&gt;
‰∏çÁî®ËÆ∞ÔºåÈáçÂêØ‰∫ÜÂ∞±‰ªécheckpoint ÁöÑ‰ΩçÁΩÆÂæÄÂêéÊâ´„ÄÇ Â¶ÇÊûúÂ∑≤Áªè‰πãÂâçÂà∑ËøáÁõòÁöÑ, ‰∏ç‰ºöÈáçÂ§çÂ∫îÁî®redo log&lt;/p&gt;
&lt;p&gt;3„ÄÅredologÊòØËÆ∞ÂΩïÁöÑ‰ªÄ‰πàÔºü&lt;br&gt;
redolog ËÆ∞ÂΩïÁöÑÊòØÂä®‰ΩúÔºå‰∏çÊòØÁªìÊûú„ÄÇRedo logËÆ∞ÂΩïÁöÑÊòØÈ°µÁöÑÂÅèÁßªÈáè„ÄÇÊØîÂ¶ÇupdateËØ≠Âè•Êõ¥Êñ∞+9ÔºåRedo logÈáåÊòØËÆ∞ÁöÑ+9&lt;/p&gt;
&lt;p&gt;4ÔºöÊÄé‰πàËÆ©MySQL‰∏çÊäñÔºü&lt;br&gt;
ËÆæÁΩÆÂêàÁêÜÂèÇÊï∞ÈÖçÈÖçÁΩÆÔºåÂ∞§ÂÖ∂ÊòØËÆæÁΩÆ Â•Ωinnodb_io_capacity ÁöÑÂÄºÔºåÂπ∂‰∏îÂπ≥Êó∂Ë¶ÅÂ§öÂÖ≥Ê≥®ËÑèÈ°µÊØî‰æãÔºå‰∏çË¶ÅËÆ©ÂÆÉÁªèÂ∏∏Êé•Ëøë 75%&lt;/p&gt;
&lt;p&gt;5ÔºöWALÊÄé‰πàÊääÈöèÊú∫ÂÜôËΩ¨Âåñ‰∏∫È°∫Â∫èÂÜôÁöÑÔºü&lt;br&gt;
ÂÜôredologÊòØÈ°∫Â∫èÂÜôÁöÑÔºåÂÖàÂÜôredologÁ≠âÂêàÈÄÇÁöÑÊó∂ÂÄôÂÜçÂÜôÁ£ÅÁõòÔºåÈó¥Êé•ÁöÑÂ∞ÜÈöèÊú∫ÂÜôÂèòÊàê‰∫ÜÈ°∫Â∫èÂÜôÔºåÊÄßËÉΩÁ°ÆÂÆû‰ºöÊèêÈ´ò‰∏çÂ∞ë&lt;/p&gt;
">Â≠¶‰π†Á¨îËÆ∞ÔºöMySQL</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/ji-yi-ci-cai-yong-fen-bu-shi-id-jie-jue-fen-ku-fen-biao-cai-de-keng/"" data-c="
          &lt;h3 id=&#34;‰∏Ä-ËÉåÊôØ&#34;&gt;‰∏Ä„ÄÅËÉåÊôØ&lt;/h3&gt;
&lt;p&gt;ÈöèÁùÄ‰∏öÂä°Ê®°ÂºèÁöÑÊâ©Â§ßÔºåÂ§ö‰∏™Âπ≥Âè∞‰∏ãÁî®Êà∑Êï∞Èáè‰∏çÊñ≠Êâ©Â§ß„ÄÇÂπ∂‰∏îÂõ†‰∏∫‰∏öÂä°ÈúÄË¶ÅÔºåÈúÄË¶ÅÂêàÂπ∂‰∏§‰∏™‰∏öÂä°Á≥ªÁªüÁöÑÁî®Êà∑‰∏≠ÂøÉÔºåÂõ†‰∏∫ÈúÄË¶ÅÂØπÊé•‰∏âÊñπÁ≥ªÁªüÔºåÊâÄ‰ª•Ë¶ÅÊ±ÇÁî®Êà∑ÁöÑIDÊ†áËØÜ‰∏çËÉΩ‰ΩìÁé∞Âá∫Á≥ªÁªüÁöÑÁî®Êà∑Èáè„ÄÇ&lt;br&gt;
ÊäÄÊúØÂõ¢ÈòüËÄÉËôëÂà∞ËøôÁßçÂú∫ÊôØ‰ª•ÂèäÂêéÁª≠Áî®Êà∑ÁöÑÊâ©Â§ßÔºåÈúÄË¶Å‰∏Ä‰∏™ÊñπÊ°àÂéªËß£ÂÜ≥Âú®&lt;strong&gt;ÂàÜÂ∏ÉÂºèÁéØÂ¢É&lt;/strong&gt;‰∏ãIDÈÄíÂ¢ûÁöÑÈóÆÈ¢òÔºåÁ≥ªÁªüËá™Â∑±ÁöÑIDÈÄíÂ¢ûÁÆóÊ≥ï‰πüÈúÄË¶ÅÂÅöÊîπÂèò„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;‰∫å-‰∏öÁïåÊØîËæÉÊµÅË°åÁöÑÂàÜÂ∏ÉÂºèidËß£ÂÜ≥ÊñπÊ°à&#34;&gt;‰∫å„ÄÅ‰∏öÁïåÊØîËæÉÊµÅË°åÁöÑÂàÜÂ∏ÉÂºèIDËß£ÂÜ≥ÊñπÊ°à&lt;/h3&gt;
&lt;p&gt;ÊäÄÊúØÂõ¢ÈòüÈ¶ñÂÖàËÄÉÂØü‰∏öÁïåÊØîËæÉÊµÅË°åÁöÑÂÅöÊ≥ïÔºåÊÄªÁªì‰∏çÂêåÊñπÊ°à‰ºòÁº∫ÁÇπÔºåÁÑ∂ÂêéÊ†πÊçÆËá™Â∑±ÁöÑ‰∏öÂä°Êù•ÈÄâÊã©Êõ¥ÂêàÈÄÇÁöÑÊñπÊ°à„ÄÇ&lt;/p&gt;
&lt;h4 id=&#34;21-Êï∞ÊçÆÂ∫ìÂàÜÊâπidÂàÜÂèë&#34;&gt;2.1 Êï∞ÊçÆÂ∫ìÂàÜÊâπIDÂàÜÂèë&lt;/h4&gt;
&lt;p&gt;Êï∞ÊçÆÂ∫ìÂàÜÊâπIDÂéüÁêÜ‰∏ªË¶ÅÊòØÂà©Áî®ÂàÜÊâπÊÄùÊÉ≥‰ª•Âèä‰πêËßÇÈîÅÊù•Ëß£ÂÜ≥ÔºåÁõÆÂâçÊ∑òÂÆù‰∏≠Èó¥‰ª∂TDDLÂÖ∂‰∏≠ÁöÑ‰∏ªÈîÆÂàÜÈÖçÂ∞±ÊòØÁî®‰∫ÜËøô‰∏™ÊñπÊ°à„ÄÇËØ•ÊñπÊ°àÂÖ∑‰ΩìÊòØËøôÊ†∑ÂÅöÁöÑÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Êï∞ÊçÆÂ∫ìË°®Áª¥Êä§‰∏ÄÊù°Êï∞ÊçÆÔºåËÆ∞ÂΩïÂΩìÂâçÂàÜÈÖçIDÂè∑‰ª•ÂèäÂÅèÁßªÊï∞ÈáèÁ≠âÊï∞ÊçÆ&lt;/li&gt;
&lt;li&gt;ÁºñÂÜôÊúçÂä°ÔºåÂà©Áî®‰πêËßÇÈîÅÂéªCASÊõ¥Êñ∞Êï∞ÊçÆÔºåÊõ¥Êñ∞ÊàêÂäüÂ∞±ËØ¥ÊòéÊãøÂà∞‰∫Ü‰∏ÄÊâπIDÂè∑ÔºåÂ§±Ë¥•ÁöÑËØùËøõË°åÈáçËØïÔºåËÆæÁΩÆ‰∏ÄÂÆöÁöÑÈáçËØïÊ¨°Êï∞&lt;/li&gt;
&lt;li&gt;ÊîæÂÖ•Êú¨Âú∞ÁºìÂ≠òÊàñËÄÖredisÂÅöÊâ£ÂáèÔºåÂ¶ÇÊûúÁî®ÂÆåÂ∞±ÈáçÂ§çÊ≠•È™§2&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ÂÖ∑‰ΩìÁöÑÁöÑË°®ÂèØ‰ª•ÊòØÁ±ª‰ººËøôÊ†∑ÁöÑÔºö&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Â≠óÊÆµ&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;ÊèèËø∞&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;id&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Ëá™Â¢ûIDÔºåÊ≤°Êúâ‰∏öÂä°ÊÑè‰πâ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;current_num&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ÂΩìÂâçÂ∑≤ÁªèÂàÜÈÖçÁöÑIDÊúÄÂ§ßÂÄº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;limit&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;‰∏ÄÊ¨°ÂàÜÈÖçÂ§öÂ∞ë‰∏™ID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;version&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ÁâàÊú¨Âè∑ÔºåCASÊõ¥Êñ∞Áî®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;create_time&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ËÆ∞ÂΩïÂàõÂª∫Êó∂Èó¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;update_time&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ËÆ∞ÂΩïÊõ¥Êñ∞Êó∂Èó¥&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ÊØîÂ¶ÇÔºålimit=1000Ôºå‰∏ÄÊ¨°ÂàÜÈÖç1000‰∏™IDÔºåÊ≤°ÂàÜÈÖç‰πãÂâçcurrent_num = 0ÔºåÁ¨¨‰∏ÄÊ¨°current_num = 1000ÔºåÁ¨¨‰∫åÊ¨°‰æùÊ¨°Á±ªÊé®„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂΩìÁÑ∂Ôºå‰∏äËø∞ÁöÑÊñπÊ°à‰πüÊúâÁº∫ÁÇπÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;‰∏ÄÊù°Êï∞ÊçÆÔºåÂ¶ÇÊûúÊúâÂ§ßÈáèÊµÅÁ®ãÂéªÊõ¥Êñ∞ÔºåË¶ÅÁ´û‰∫âËé∑ÂèñË°åÈîÅÔºå‰ºöÊúâÊÄßËÉΩÈóÆÈ¢òÔºåÔºàÂèØ‰ª•ÂèÇËÄÉË°åÈîÅÁöÑÂà©ÂºäÔºå‰∏ÅÂ•á‚Äî‚ÄîÁßíÊùÄÂú∫ÊôØ‰∏ãMySQLÁöÑ‰ΩéÊïàÔºâ&lt;/li&gt;
&lt;li&gt;Âº∫‰æùËµñDBÔºåÂ¶ÇÊûúÂΩìÂâçÊï∞ÊçÆÂ∫ìÂÆïÊú∫ÔºåÂØºËá¥ÂàÜÂ∏ÉÂºèIDÂàÜÂèëÊúçÂä°Â∞±‰ºöÂá∫Áé∞ÈóÆÈ¢ò&lt;/li&gt;
&lt;li&gt;Â¶ÇÊûúÂú®‰∏ª‰ªéÊï∞ÊçÆÂ∫ìÂú∫ÊôØ‰∏ãÔºåÈúÄË¶ÅËÄÉËôëÂà∞‰∏ª‰ªéÁöÑÂª∂ËøüÊÄßÂØºËá¥ÂàÜÈÖçIDÁöÑ‰∏ç‰∏ÄËá¥ÊÄß&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ÊâÄ‰ª•‰∏∫‰∫ÜËß£ÂÜ≥‰∏äÈù¢ÁöÑÈóÆÈ¢òÔºåÁ¨îËÄÖÂèÇËÄÉconcurrentHashMapÂàÜÊÆµÈîÅÁöÑÊÄùÊÉ≥ÔºåÂ∞Ü‰∏ÄÊù°ËÆ∞ÂΩïÂàÜÊÆµ‰∏∫Â§ö‰∏™ÔºåÂêåÊó∂‰∏∫‰∫ÜÈÅøÂÖçDBÂçïÁÇπÂèØÁî®ÊÄßÔºåÂèØ‰ª•Â∞Ü‰∏çÂêåÁöÑËÆ∞ÂΩïÂàÜÂ∏ÉÂú®‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ì‰∏äÈù¢„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂÖ∑‰ΩìÁöÑË°®ÂèØ‰ª•ÊòØÁ±ª‰ººËøôÊ†∑ÁöÑÔºö&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Â≠óÊÆµ&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;ÊèèËø∞&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;id&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Ëá™Â¢ûIDÔºåÊ≤°Êúâ‰∏öÂä°ÊÑè‰πâ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;current_num&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ÂΩìÂâçÂ∑≤ÁªèÂàÜÈÖçÁöÑIDÊúÄÂ§ßÂÄº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;limit&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;‰∏ÄÊ¨°ÂàÜÈÖçÂ§öÂ∞ë‰∏™ID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;offset&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ÂâçÂêéÂàÜÈÖçÁöÑIDÈó¥ÈöîÊï∞&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;initial_id&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ÂàùÂßãËá™Â¢ûÁöÑID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;version&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ÁâàÊú¨Âè∑ÔºåCASÊõ¥Êñ∞Áî®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;create_time&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ËÆ∞ÂΩïÂàõÂª∫Êó∂Èó¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;update_time&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ËÆ∞ÂΩïÊõ¥Êñ∞Êó∂Èó¥&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;‚ÄÉÊñ∞Â¢ûoffsetÂÅèÁßªÂíåinitial_idÂ≠óÊÆµÔºåoffset‰ª£Ë°®Êï∞ÊçÆÂ∫ìË°®ËÆ∞ÂΩïÂâçÂêéÂàÜÈÖçÈó¥ÈöîÊï∞ÈáèÔºåinitial_id‰ª£Ë°®ÂºÄÂßãÂàùÂßãÁöÑÂÄº„ÄÇ&lt;br&gt;
‚ÄÉ‰∏æ‰∏™‰æãÂ≠êÔºåÁé∞Âú®Â∞ÜËÆ∞ÂΩïÂàÜ‰∏∫10Êù°ÔºåÂàÜÂ∏ÉÂú®‰∏çÂêåÊï∞ÊçÆÂ∫ì‰∏äÔºåÈÇ£‰πàoffsetÂ∞±ÊòØ10000ÔºålimitÂ∞±ÊòØ1000ÔºåÁ¨¨‰∏ÄÊù°ËÆ∞ÂΩïÁ¨¨‰∏ÄÊ¨°ÂºÄÂßãÈÖçÂêàËé∑Âèñ0-1000ÔºåÁ¨¨‰∫åÊ¨°ÂàÜÈÖçËé∑Âèñ10000-11000Ôºå‰æùÊ¨°Á±ªÊé®„ÄÇ&lt;/p&gt;
&lt;p&gt;‚ÄÉËøôÈáåÈúÄË¶ÅËÄÉËôë‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∞±ÊòØÂ¶ÇÊûúËØ∑Ê±ÇIDÂàÜÂèëÁöÑÊúçÂä°ÁöÑÊµÅÈáè&lt;strong&gt;ÊÄé‰πàË∑ØÁî±&lt;/strong&gt;Âà∞ÂÖ∑‰ΩìÁöÑËÆ∞ÂΩïÂë¢ÔºüÂ¶ÇÊûúÊµÅÈáèÂÖ®ÈÉ®ÈÉΩËØ∑Ê±ÇÂà∞Á¨¨‰∏ÄÊù°ËÆ∞ÂΩï‰∏ä‰∫ÜÔºåÂ∞±‰ºöÂØºËá¥ËØ∑Ê±Ç‰∏çÂùá„ÄÇ&lt;br&gt;
‚ÄÉËøô‰∏™ÈóÆÈ¢òÂæàÁÆÄÂçïÔºåÊúâ‰∏ÄÂÆöÂºÄÂèëÁªèÈ™åÁöÑËØªËÄÖËá™ÁÑ∂ÂèØ‰ª•ËÅîÊÉ≥Âà∞Áî®‰∏ÄËá¥ÊÄßhashÂéªË∑ØÁî±ÔºåÂÖ∑‰ΩìË∑ØÁî±ÁöÑkeyÂèØ‰ª•Ê†πÊçÆ‰∏öÂä°ÂéªÂÆöÔºåÊØîÂ¶ÇÁî®Êà∑ÊâãÊú∫Âè∑„ÄÇÔºàÂÖ∑‰Ωì‰∏ÄËá¥ÊÄßhashË∑ØÁî±Â¶Ç‰ΩïÂÆûÁé∞ÔºåÂèØ‰ª•ÂèÇËÄÉÂà©Áî®treeMapÂÆûÁé∞Ôºâ&lt;/p&gt;
&lt;p&gt;‚ÄÉ‰ª•‰∏äÊñπÊ°àÁÆóÊòØËß£ÂÜ≥ÊÄßËÉΩÈóÆÈ¢òÔºå‰ΩÜÊòØËøòÊúâÊØîËæÉËá¥ÂëΩÁöÑÈóÆÈ¢òÔºåÂ∞±ÊòØÊó†Ê≥ïÊ®™ÂêëÊâ©Â±ï„ÄÇÂ∞±ÊØîÂ¶ÇËØ¥Áé∞Âú®Êúâ10Âè∞Êú∫Âô®‰∏çÂêåÊï∞ÊçÆÂ∫ìÔºåÊØè‰∏Ä‰∏™Êï∞ÊçÆÂ∫ì‰∏ÄÊù°ËÆ∞ÂΩï„ÄÇÂÅáÂ¶ÇÁé∞Âú®ÊúâÊñ∞ÁöÑÊú∫Âô®10Âè∞Êú∫Âô®ÊÉ≥Ë¶ÅÂä†ÂÖ•ÂàÜÈÖçÁöÑËØùÔºåÈÇ£‰πàÂ∞±Ë¶Å‰øÆÊîπoffsetÂíåinitial_idÔºåÊâÄ‰ª•Âú®‰∏çÂÅúÊú∫ÂÆûÁé∞ÁöÑËØùÔºåÂèØËÉΩÊó†Ê≥ïÂÆûÁé∞ÔºàÁõÆÂâçÁ¨îËÄÖÊ≤°ÊúâÊÉ≥Âà∞ÊñπÊ≥ïËß£ÂÜ≥ÔºåÂ¶ÇÊûúËØªËÄÖÊúâideaÂèØ‰ª•Ê¨¢ËøéÂíåÊàëËÆ®ËÆ∫Ôºâ„ÄÇËøôÈáåÁ¨îËÄÖÊèê‰æõ‰∏ÄÁßçÊñπÊ≥ïÂéªËß£ÂÜ≥Ôºö&lt;br&gt;
‚ÄÉÊèêÂâçÈ¢ÑÂÖàÂàÜÈÖç100Êù°ËÆ∞ÂΩïÔºåÊØè‰∏ÄÊù°ËÆ∞ÂΩï‰∏ÄÊâπÊ¨°Ëé∑Âèñ100‰∏™IDÔºåoffsetËÆæÁΩÆ‰∏∫10000ÔºåÂΩìÂâç10Âè∞Êú∫Âô®ÊØè‰∏ÄÂè∞Êúâ10Êù°ËÆ∞ÂΩïÔºåÂêéÁª≠ÊúâÊñ∞Êú∫Âô®ÁöÑËØùÁõ¥Êé•Â∞ÜËÆ∞ÂΩï‰∏çÂÅúÊú∫ËΩ¨ÁßªÂà∞Êñ∞Êú∫Âô®Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ&lt;/p&gt;
&lt;h4 id=&#34;22-redisÂ∫èÂàóÂåñÂàÜÂèë&#34;&gt;2.2 RedisÂ∫èÂàóÂåñÂàÜÂèë&lt;/h4&gt;
&lt;p&gt;RedisÊù•ÁîüÊàêIDÔºåËøô‰∏ªË¶Å‰æùËµñ‰∫éRedisÊòØÂçïÁ∫øÁ®ãÁöÑÔºåÊâÄ‰ª•‰πüÂèØ‰ª•Áî®ÁîüÊàêÂÖ®Â±ÄÂîØ‰∏ÄÁöÑID„ÄÇÂèØ‰ª•Áî®RedisÁöÑÂéüÂ≠êÊìç‰Ωú INCRÂíåINCRBYÊù•ÂÆûÁé∞„ÄÇÁõÆÂâçÂçïÂè∞redisÁöÑqpsËÉΩÂ§üËææÂà∞5WÔºåÊâÄ‰ª•‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äËÉΩÂ§üËß£ÂÜ≥ÊÄßËÉΩÈóÆÈ¢ò„ÄÇÂÖ∑‰ΩìÂÆûÁé∞Á¨îËÄÖËøôÈáåÂ∞±‰∏çÈòêËø∞‰∫Ü„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂΩìÁÑ∂Áî®Ëøô‰∏™ÊñπÊ°à‰πüÊúâÁº∫ÁÇπÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;‰æùËµñredisÔºåÂ¶ÇÊûú‰∏öÂä°‰∏≠Ê≤°ÊúâÂ∞±Ë¶Å‰æùËµñËøô‰∏™‰∏≠Èó¥‰ª∂&lt;/li&gt;
&lt;li&gt;ÁîüÊàêÁöÑIDÊòØÂçïË∞ÉÈÄíÂ¢ûÁöÑÔºåÂÆπÊòìÊö¥Èú≤Á≥ªÁªüÁöÑÁî®Êà∑Êï∞&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;23-snowflakeÈõ™Ëä±ÁÆóÊ≥ï&#34;&gt;2.3 SnowFlakeÈõ™Ëä±ÁÆóÊ≥ï&lt;/h4&gt;
&lt;p&gt;‰ª•‰∏ä2.1 2.2ÊñπÊ°àÈÉΩËÉΩËß£ÂÜ≥ÊÄßËÉΩÈóÆÈ¢òÔºå‰ΩÜÊòØ‰∫ßÁîüÁöÑIDÔºåÊòØËøûÁª≠ÁöÑÔºåÂÆπÊòìÊö¥Èú≤Ëá™Â∑±Á≥ªÁªü‰∏≠Áî®Êà∑ÁöÑÊï∞Èáè„ÄÇÊâÄ‰ª•Êúâ‰∫õÁ≥ªÁªü‰ºöË¶ÅÊ±ÇË¶ÅË∂ãÂäøÈÄíÂ¢ûÔºåËÄå‰∏îË¶Å‰øùÊåÅ‰ø°ÊÅØÂÆâÂÖ®„ÄÇÁõÆÂâçÈõ™Ëä±ÁÆóÊ≥ïÂ∞±ËÉΩËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂÖ∂‰∏≠ÂéüÁêÜÂ∞±ÊòØÔºöÁªô‰∏Ä‰∏™64‰ΩçÁöÑ‰∫åËøõÂà∂Êï∞Â≠óÔºåÂÖ∂‰∏≠&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Á¨¨1‰ΩçÁΩÆ‰∏∫0„ÄÇ&lt;/li&gt;
&lt;li&gt;Á¨¨2-42‰ΩçÊòØÁõ∏ÂØπÊó∂Èó¥Êà≥ÔºåÈÄöËøáÂΩìÂâçÊó∂Èó¥Êà≥ÂáèÂéª‰∏Ä‰∏™Âõ∫ÂÆöÁöÑÂéÜÂè≤Êó∂Èó¥Êà≥ÁîüÊàê„ÄÇ&lt;/li&gt;
&lt;li&gt;Á¨¨43-52‰ΩçÊòØÊú∫Âô®Âè∑workerIDÔºåÊØè‰∏™ServerÁöÑÊú∫Âô®ID‰∏çÂêå„ÄÇ&lt;/li&gt;
&lt;li&gt;Á¨¨53-64‰ΩçÊòØËá™Â¢ûID„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1604663039402.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ëøô‰∏™ÊñπÊ°à‰πüÊúâÁº∫ÁÇπÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ÂÆûÁé∞ÊØîËæÉÂ§çÊùÇÔºåËÄÉÈ™åÂºÄÂèë‰∫∫Âëò&lt;/li&gt;
&lt;li&gt;ÈúÄË¶ÅÁã¨Á´ãÈÉ®ÁΩ≤ÂÆûÁé∞&lt;/li&gt;
&lt;li&gt;Âº∫‰æùËµñÊó∂ÈíüÔºåÊó∂ÈíüÂõûÊã®‰ºöÊúâÈáçÂ§çÁöÑID&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;‰∏â-ÂΩìÂâçÊñπÊ°àÊòØÂ¶Ç‰ΩïÂÅöÁöÑ&#34;&gt;‰∏â„ÄÅÂΩìÂâçÊñπÊ°àÊòØÂ¶Ç‰ΩïÂÅöÁöÑ&lt;/h3&gt;
&lt;p&gt;‚ÄÉÂèÇËÄÉ‰∏äËø∞ÊñπÊ°àÂêéÔºåÊäÄÊúØÂõ¢ÈòüËÄÉËôëÂà∞Êú™Êù•‰∏öÂä°ÁöÑÂ¢ûÂä†ÔºåÊµÅÈáèÁöÑÂ¢ûÈïø‰ª•ÂèäÂêéÁª≠ÁöÑÊâ©Â±ïÔºåÂáÜÂ§áÂà©Áî®ÊñπÊ°à‰∏âÂéªÂÆûÁé∞„ÄÇÂÖ∂‰∏≠ÂÖ∑‰ΩìÂÆûÁé∞ÂèØ‰ª•ÂèÇËÄÉÁ¨îËÄÖGitHubÁöÑÂÆûÁé∞Ôºö&lt;a href=&#34;https://github.com/zhangyaoo/fastim/blob/master/fastim-leaf/src/main/java/com/zyblue/fastim/leaf/manager/SnowFlakeManager.java&#34;&gt;ÂàÜÂ∏ÉÂºèID SnowFlakeÂÆûÁé∞&lt;/a&gt;&lt;br&gt;
‚ÄÉÂΩìÁÑ∂‰ΩøÁî®ÊñπÊ°à‰∏â‰πü‰ºöÊúâÁº∫Èô∑ÔºåÊØîÂ¶Ç‰ºöÂèëÁîüÊó∂ÈíüÂõûÊã®ÈóÆÈ¢òÔºå‰ª•ÂèäÂàÜÂ∏ÉÂºèIDÂàÜÂèëÊúçÂä°Âº∫‰æùËµñzookeeper„ÄÇ&lt;/p&gt;
&lt;h4 id=&#34;31-Êó∂ÈíüÂõûÊã®&#34;&gt;3.1 Êó∂ÈíüÂõûÊã®&lt;/h4&gt;
&lt;p&gt;‚ÄÉÂèëÁîüÊó∂ÈíüÂõûÊã®ÁöÑÂéüÂõ†ÊòØÔºåÂ¶ÇÊûúÂàÜÂèëÊúçÂä°Ê≠£Âú®ÁîüÊàêIDÁöÑËøáÁ®ã‰∏≠ÔºåÁ≥ªÁªüÊó∂Èó¥Âõ†‰∏∫‰∏çÂèØÊäóÊãíÁöÑÂõ†Á¥†ÊàñËÄÖ‰∫∫‰∏∫Âõ†Á¥†ÂØºËá¥Êó∂Èó¥ÂÄíÊµÅ‰∫ÜÔºå‰ºöÂØºËá¥ÂèØËÉΩ‰ºöÊúâÈáçÂ§çÁöÑIDÁîüÊàêÔºå‰Ωú‰∏∫ÂàÜÂ∏ÉÂºèIDÂàÜÂèëËøô‰∏™ÊòØ‰∏çÂáÜÂèëÁîüÁöÑ„ÄÇÊâÄ‰ª•Â¶ÇÊûúÂèëÁîüÊó∂ÈíüÂõûÊã®ÈÇ£‰πàÂ∞±ÊäõÂá∫ÂºÇÂ∏∏ÔºåÂÆûÁé∞Â¶Ç‰∏ã&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;long timestamp = System.currentTimeMillis();
// Â¶ÇÊûúÂΩìÂâçÊó∂Èó¥Êà≥Â∞è‰∫é‰∏äÊ¨°ÂàÜÂèëÁöÑÊó∂Èó¥Êà≥
if (timestamp &amp;lt; lastTimestamp) {
    long offset = lastTimestamp - timestamp;
    if (offset &amp;lt;= 5) {
        // Â¶ÇÊûúÊó∂Èó¥Êà≥Èó¥ÈöîÂ∞è‰∫é5ÔºåÈÇ£‰πàËøõË°åÁ≠âÂæÖÔºåÁ≠âÂæÖÁ™óÂè£Êó∂Èó¥ÔºåÁÑ∂ÂêéÂÜçËøõË°åÈáçËØï
        try {
            wait(offset &amp;lt;&amp;lt; 1);
            timestamp = System.currentTimeMillis();
            if (timestamp &amp;lt; lastTimestamp) {
                throw new RuntimeException(String.format(&amp;quot;lastTimestamp %s is after reference time %s&amp;quot;, lastTimestamp, timestamp));
            }
        } catch (InterruptedException e) {
            logger.error(&amp;quot;wait interrupted&amp;quot;);
            throw new RuntimeException(String.format(&amp;quot;lastTimestamp %s is after reference time %s&amp;quot;, lastTimestamp, timestamp));
        }
    } else {
        // Â¶ÇÊûúÁõ∏Â∑ÆËøáÂ§ßÔºåÁõ¥Êé•ÊäõÂá∫ÂºÇÂ∏∏
        throw new RuntimeException(String.format(&amp;quot;lastTimestamp %s is after reference time %s&amp;quot;, lastTimestamp, timestamp));
    }
}
// Â¶ÇÊûúÁ≠â‰∫éÔºåË°®ÊòéÂêå‰∏ÄÊó∂Âàª
if (lastTimestamp == timestamp) {
    // Â¶ÇÊûúÂ∞è‰∫éËÆ°Êï∞Âô®ÊúÄÂ§ßÂÄºÂ∞±ÔºåÂ¢ûÂä†
    if (this.counter &amp;lt; MAX_SEQUENCE) {
        this.counter++;
    } else {
        // Ë°®ÊòéÂêå‰∏ÄÊó∂ÂàªÔºåÂêå‰∏ÄÊú∫Âô®‰∏ãÔºåÁöÑÊâÄÊúâËÆ°Êï∞Âô®ÈÉΩÁî®ÂÆå‰∫Ü
        throw new RuntimeException(&amp;quot;Sequence exhausted at &amp;quot; + this.counter);
    }
} else {
    //Â¶ÇÊûúÊòØÊñ∞ÁöÑmsÂºÄÂßã
    counter = 0L;
}
// ËÆ∞ÂΩïËøô‰∏ÄÊ¨°Êó∂Èó¥Êà≥ÔºåÁî®‰Ωú‰∏ã‰∏ÄÊ¨°ÊØîËæÉ
lastTimestamp = timestamp;
// ÂêéÁª≠ÁöÑÁîüÊàêIDÈÄªËæë
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;32-Âº∫‰æùËµñzookeeper&#34;&gt;3.2 Âº∫‰æùËµñzookeeper&lt;/h4&gt;
&lt;p&gt;‰ª•‰∏äËÉΩËß£ÂÜ≥Êó∂ÈíüÂõûÊã®ÁöÑÈóÆÈ¢òÔºå‰ΩÜÊòØÂº∫‰æùËµñzookeeperÊù•ÁîüÊàêÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏ãÁöÑÂΩìÂâçÊú∫Âô®ÁöÑID„ÄÇÁ¨îËÄÖÂèÇËÄÉdubboÁöÑËÆæËÆ°ÊÄùÊÉ≥ÔºåÂΩìIDÂàÜÂèëÊúçÂä°ÈÄöËøáID+Á´ØÂè£Ê≥®ÂÜåÂà∞zookeeperÁöÑÈÄíÂ¢ûÊåÅ‰πÖËäÇÁÇπÂêéÔºåËøîÂõûÁöÑËäÇÁÇπÁõ¥Êé•Â≠òÂÇ®ÂÜçÊú¨Âú∞Êñá‰ª∂‰∏≠ÔºåÂÆûÁé∞È´òÂèØÁî®ÔºåÂ¶Ç‰∏ã&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * È´òÂèØÁî®ÔºåÈò≤Ê≠¢zookeeperÊåÇ‰∫ÜÔºåÊú¨Âú∞Êú¨Êú∫ÁîüÊïà
 * ÂÜôÂÖ•Êú¨Âú∞Êñá‰ª∂ÁöÑÊó∂Êú∫ÔºöÂΩìÂâçÊú∫Âô®Ëé∑ÂèñzookeeperÁöÑÊåÅ‰πÖËäÇÁÇπÂêé
 */
private void writeWorkerId2Local(int workerId){
    String path = WORKERID_PATH + File.separator + applicationName + File.separator + &amp;quot;workerId.properties&amp;quot;;
    File file = new File(path);
    if(file.exists() &amp;amp;&amp;amp; file.isFile()){
        try {
            FileUtils.writeStringToFile(file, &amp;quot;workerId=&amp;quot; + workerId, false);
        }catch (Exception e){
            logger.error(&amp;quot;e:&amp;quot;, e);
        }
    }else {
        boolean mkdirs = file.getParentFile().mkdirs();
        if(mkdirs){
            try {
                if (file.createNewFile()) {
                    FileUtils.writeStringToFile(file, &amp;quot;workerId=&amp;quot; + workerId, false);
                    logger.info(&amp;quot;local file cache workerID is {}&amp;quot;, workerId);
                }
            }catch (Exception e){
                logger.error(&amp;quot;e:&amp;quot;, e);
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;Âõõ-ÈááÁî®ÂàÜÂ∏ÉÂºèid‰∏äÁ∫øÂêé‰∫ßÁîüÁöÑbug&#34;&gt;Âõõ„ÄÅÈááÁî®ÂàÜÂ∏ÉÂºèID‰∏äÁ∫øÂêé‰∫ßÁîüÁöÑBUG&lt;/h3&gt;
&lt;h4 id=&#34;40-ÈóÆÈ¢òÂàÜÊûê&#34;&gt;4.0 ÈóÆÈ¢òÂàÜÊûê&lt;/h4&gt;
&lt;p&gt;ÂΩì‰∏äÁ∫øÂàÜÂ∏ÉÂºèIDÂàÜÂèëÊúçÂä°ÂêéÔºåËßÇÂØüÊó•ÂøóÔºåÂá∫Áé∞Â§ßÈáèÁöÑÊä•ÈîôÔºåÂ¶Ç‰∏ãÔºö&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;io.lettuce.core.RedisCommandExecutionException: ERR bit offset is not an integer or out of range
at io.lettuce.core.ExceptionFactory.createExecutionException(ExceptionFactory.java:135) ~[lettuce-core-5.2.1.RELEASE.jar:5.2.1.RELEASE]
at io.lettuce.core.ExceptionFactory.createExecutionException(ExceptionFactory.java:108) ~[lettuce-core-5.2.1.RELEASE.jar:5.2.1.RELEASE]
at io.lettuce.core.protocol.AsyncCommand.completeResult(AsyncCommand.java:120) ~[lettuce-core-5.2.1.RELEASE.jar:5.2.1.RELEASE]
at io.lettuce.core.protocol.AsyncCommand.complete(AsyncCommand.java:111) ~[lettuce-core-5.2.1.RELEASE.jar:5.2.1.RELEASE]
at io.lettuce.core.protocol.CommandHandler.complete(CommandHandler.java:654) ~[lettuce-core-5.2.1.RELEASE.jar:5.2.1.RELEASE]
at io.lettuce.core.protocol.CommandHandler.decode(CommandHandler.java:614) ~[lettuce-core-5.2.1.RELEASE.jar:5.2.1.RELEASE]
‚Ä¶‚Ä¶‚Ä¶‚Ä¶
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;‰πçÁúãÊòØredisÁöÑÊäõÂá∫Êù•ÁöÑÈîôËØØÔºåÂíåËøôÊ¨°ÂàÜÂ∏ÉÂºèIDÊîπÈÄ†Ê≤°Êúâ‰ªÄ‰πàÂÖ≥Á≥ªÔºå‰ΩÜÊòØ‰ªîÁªÜÈùô‰∏ãÊù•ÊÉ≥‰∏ÄÊÉ≥ÔºåËøôÊ¨°IDÊîπÈÄ†ÊòØ‰ªéÂéüÊù•ÁöÑÊï∞ÊçÆÂ∫ìËá™Â¢ûÊîπÈÄ†ÁöÑÔºåÊï∞ÊçÆÂ∫ìËá™Â¢ûÊï∞ÊçÆ‰∏ªÈîÆÂæàÂ∞èÊòØintÁ±ªÂûãÔºåÁÑ∂ÂêéÁî®‰∫Ü64‰Ωç‰∫åËøõÂà∂Êï∞ÊçÆÂΩì‰ΩúIDÂêéÔºåÂØºËá¥redis‰∏≠Áî®Êà∑ÁöÑÊï∞ÊçÆÂ≠ò‰∏ç‰∏ãÂéªÔºåÁÑ∂ÂêéÁ¨îËÄÖÂ∞±ÊåâÁÖßËøô‰∏™ÊÄùË∑ØÂéªÂèëÊéòÈóÆÈ¢ò„ÄÇ&lt;/p&gt;
&lt;p&gt;Á¨îËÄÖ‰ªé‰∏öÂä°ÊäõÂá∫ÁöÑÂ†ÜÊ†à‰∏≠ÂèëÁé∞ÔºåËøô‰∏™ÈîôËØØÊòØÂú®Âà§Êñ≠Áî®Êà∑ÊòØÂê¶ÊòØÊñ∞Áî®Êà∑ÊúçÂä°ÊñπÊ≥ï‰∏≠ÊäõÂá∫ÁöÑÔºåËÄåÂà§Êñ≠ÊòØÊñ∞Áî®Êà∑ÁöÑÈÄªËæëÂ∞±ÊòØÔºåÂà©Áî®redisÁöÑbitmapÊù•Ëß£ÂÜ≥ÁöÑÔºögetbit new_user_key userIdÔºåÂÖ∂‰∏≠ userId‰∏∫Áî®Êà∑IDÔºåÂ¶ÇÊûúÁî®Êà∑ÂèëÁîü‰∫Ü‰∫§Êòì‰ø°ÊÅØÔºåÂ∞±‰ºöÊâßË°åÔºösetbit new_user_key userId 1 Ëøô‰∏™ÂëΩ‰ª§„ÄÇ ‰∏∫‰ªÄ‰πàË¶ÅÁî®bitmapËß£ÂÜ≥Âë¢Ôºå‰∏ªË¶ÅÊòØÂõ†‰∏∫Â¶ÇÊûú‰ªé‰∫§ÊòìËÆ∞ÂΩïË°®Êü•ËØ¢Êüê‰∏™Áî®Êà∑ÊòØÂê¶‰∫§Êòì‰ø°ÊÅØÊù•Âà§Êñ≠ÊòØÊñ∞Áî®Êà∑ÁöÑËØùÂ∞±‰ºöÈùûÂ∏∏ËÄóÊó∂ÔºåÊâÄ‰ª•Âè™Ë¶ÅÊòØÂèëÁîü‰∫Ü‰∫§Êòì‰ø°ÊÅØÂ∞±ËÆæÁΩÆbitmapÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ&lt;/p&gt;
&lt;p&gt;ÈÇ£‰∏∫‰ªÄ‰πà‰ºöÊäõÂá∫out of rangeËøô‰∏™ÈîôËØØÂë¢ÔºåÊàë‰ª¨Áü•ÈÅìbitmapÂ∫ïÂ±ÇÂÖ∂ÂÆûÂ∞±ÊòØStringÁ±ªÂûãÔºåËÄåStringÁ±ªÂûãÁöÑÊúÄÂ§ßÈïøÂ∫¶‰∏∫512MÔºåÂÆòÁΩëÊà™ÂõæÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1605157810715.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÊâÄ‰ª•Â¶ÇÊûúoffsetË∂ÖËøá512MËøô‰∏™ËåÉÂõ¥ÈÇ£‰πàÂ∞±‰ºöÊäõÂá∫ÂºÇÂ∏∏Ôºå512M = 2^9 * 2^12 * 2^12 * 2^3 = 2^32 bitÔºå‰πüÂ∞±ÊòØÊîØÊåÅIntegerÁ±ªÂûãÁöÑÊúÄÂ§ßÂÄºÔºåËÄåÊàë‰ª¨ËøôÊ¨°ÂàÜÂ∏ÉÂºèIDÊúçÂä°IDÊòØ64‰ΩçÁöÑÔºåÊîØÊåÅ2^64 bitÔºåÊâÄ‰ª•Â¶ÇÊûúoffset‰πüÂ∞±ÊòØuserIdÂ§ß‰∫é2^32ÁöÑËØùÂ∞±‰ºöÊäõÂá∫out of rangeÂºÇÂ∏∏‰∫Ü„ÄÇ&lt;/p&gt;
&lt;h4 id=&#34;41-ÈóÆÈ¢òËß£ÂÜ≥&#34;&gt;4.1 ÈóÆÈ¢òËß£ÂÜ≥&lt;/h4&gt;
&lt;p&gt;ÊâæÂà∞‰∫ÜÈóÆÈ¢òÔºå‰πüÂ∞±Â•ΩÂéªÂÅö‰ºòÂåñ‰∫ÜÔºåËøôÈáåÁ¨îËÄÖÊèê‰æõÂá†‰∏™ÊñπÊ≥ï‰Ωú‰∏∫ÂèÇËÄÉ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Âú®Êï∞ÊçÆÂ∫ìÁî®Êà∑Ë°®ÊàñËÄÖÁî®Êà∑Êâ©Â±ïË°®‰∏≠Â¢ûÂä†‰∏Ä‰∏™Â≠óÊÆµÔºåÂ¶ÇÊûúÂèëÁîü‰∫Ü‰∫§ÊòìÔºåÈÇ£‰πàÂ∞ÜÂ≠óÊÆµÊ†áËÆ∞‰∏∫ËÄÅÁî®Êà∑&lt;/li&gt;
&lt;li&gt;ÊääÁî®Êà∑IDÊîæÂÖ•redisÈõÜÂêàset‰∏≠ÔºåÂà©Áî®SMISMEMBERÂëΩ‰ª§Âà§Êñ≠ÂΩìÂâçÁî®Êà∑ÊòØÂê¶Âú®ÈõÜÂêàÂÜÖÔºåÂΩìÁÑ∂Ëøô‰∏™‰ºöÊúâÊÄßËÉΩÈóÆÈ¢òÔºåÂÖ∂ÊñπÊ≥ïÊó∂Èó¥Â§çÊùÇÂ∫¶‰ΩçO(N)ÔºåÂÆòÊñπÊà™Âõæ:&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1605162870590.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;‰∫î-ÊÄªÁªì&#34;&gt;‰∫î„ÄÅÊÄªÁªì&lt;/h3&gt;
&lt;p&gt;‚ÄÉÁ¨îËÄÖ‰ªéÂàÜÂ∏ÉÂºèIDÈÄâÂûãÂá∫ÂèëÔºå‰ªãÁªç‰∫ÜÂá†Áßç‰∏öÁïåÂá†ÁßçÊØîËæÉÂ∏∏Áî®ÁöÑÁîüÊàêÊñπÊ≥ïÔºåÂπ∂‰∏î‰ªãÁªç‰∫ÜÂÖ∂‰ºòÁº∫ÁÇπÔºåÁÑ∂ÂêéÁªìÂêàÂÆûÈôÖ‰∏öÂä°Âá∫ÂèëÔºåÈÄâÊã©ÂêàÈÄÇÁöÑÊñπÊ°à„ÄÇÁÑ∂Âêé‰ªãÁªç‰∫Ü‰ΩøÁî®SnowFlakeÁÆóÊ≥ïÂØºËá¥ÁöÑ‰∏öÂä°ÈóÆÈ¢òÔºå‰ª•ÂèäÂàÜÊûêÊúÄÂêéÊèê‰æõËß£ÊñπÊ≥ï„ÄÇ‰ªéËøôÊ¨°Ë∏©ÂùëÁöÑÁªèÂéÜÊù•ËØ¥ÔºåÊàë‰ª¨Ë¶ÅÊáÇÊäÄÊúØ‰ΩìÁ≥ªÔºåÂπ∂‰∏îËøòË¶ÅÈùûÂ∏∏ÁÜüÊÇâ‰∏öÂä°ÔºåÊúÄÂ§ßÁ®ãÂ∫¶ÈÅøÂÖçÂäüËÉΩ‰πãÈó¥ÁöÑÁõ∏‰∫íÁöÑÂΩ±ÂìçÂØºËá¥ÁöÑbug„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;ÂÖ≠-ÂèÇËÄÉ&#34;&gt;ÂÖ≠„ÄÅÂèÇËÄÉ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ÁæéÂõ¢ÂàÜÂ∏ÉÂºèÁÆóÊ≥ïIDÂá†ÁßçÂÆûÁé∞ÊñπÂºè‚Äî‚Äîhttps://tech.meituan.com/2017/04/21/mt-leaf.html&lt;/li&gt;
&lt;li&gt;SnowFlakeÁÆóÊ≥ï‚Äî‚Äîhttps://github.com/twitter-archive/snowflake&lt;/li&gt;
&lt;/ul&gt;
">ËÆ∞‰∏ÄÊ¨°Áî®Êà∑‰∏≠ÂøÉÈááÁî®ÂàÜÂ∏ÉÂºèIDË∏©ÁöÑÂùë</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/saas-xi-tong-duo-shu-ju-yuan-lu-you-you-ya-jie-jue-fang-an/"" data-c="
          &lt;h2 id=&#34;ËÉåÊôØ&#34;&gt;ËÉåÊôØ&lt;/h2&gt;
&lt;p&gt;Âú®ÁõÆÂâçÁöÑSaaSÁ≥ªÁªü‰∏≠Ôºå‰∏öÂä°ÂºÄÂèëËÄÖÈúÄË¶ÅÈáçÁÇπÂÖ≥Ê≥®ÁöÑ‰∏Ä‰∏™ÈóÆÈ¢òÂ∞±ÊòØÊï∞ÊçÆÈöîÁ¶ªÈóÆÈ¢òÔºåËøô‰∏™ÊòØÂÅöSaaSÁ≥ªÁªüÂøÖÈ°ªË¶ÅËÄÉËôëÁöÑÁÇπÔºåÂ§öÁßüÊà∑Êï∞ÊçÆÈöîÁ¶ªÊòØÊØè‰∏™SaaSÁ≥ªÁªüÈÉΩË¶ÅÈÅáÂà∞Âπ∂‰∏îË¶ÅËß£ÂÜ≥ÁöÑÈóÆÈ¢òÔºåÁ¨îËÄÖÂ∞±ÂàÜ‰∫´‰∏ãËß£ÂÜ≥ËøôÁßçÈóÆÈ¢òÁöÑÊÄùË∑Ø„ÄÅÂÖ∑‰ΩìÁöÑËß£ÂÜ≥ÊñπÊ°à‰ª•Âèä‰ºòÈõÖÁöÑËß£ÂÜ≥ÊÄùË∑Ø„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;‰∏Ä-Ëß£ÂÜ≥ÊñπÊ°à‰ªãÁªç&#34;&gt;‰∏Ä„ÄÅËß£ÂÜ≥ÊñπÊ°à‰ªãÁªç&lt;/h2&gt;
&lt;h3 id=&#34;ÁõÆÂâç‰∏öÁïåÊï∞ÊçÆÈöîÁ¶ªÊñπÊ°à&#34;&gt;ÁõÆÂâç‰∏öÁïåÊï∞ÊçÆÈöîÁ¶ªÊñπÊ°à&lt;/h3&gt;
&lt;p&gt;1„ÄÅÁã¨Á´ãÊï∞ÊçÆÂ∫ìÔºåÈÄöËøáÂä®ÊÄÅÂàáÊç¢Êï∞ÊçÆÊ∫êÊù•ÂÆûÁé∞Â§öÁßüÊà∑&lt;br&gt;
2„ÄÅÂÖ±‰∫´Êï∞ÊçÆÂ∫ìÔºåÈöîÁ¶ªÊï∞ÊçÆÊû∂ÊûÑ&lt;br&gt;
3„ÄÅÂÖ±‰∫´Êï∞ÊçÆÂ∫ìÔºåÂÖ±‰∫´Êï∞ÊçÆË°®Ôºå‰ΩøÁî®Â≠óÊÆµÊù•Âå∫ÂàÜ‰∏çÂêåÁßüÊà∑ÔºåÊ≠§ÊñπÊ°àÊàêÊú¨ÊúÄ‰Ωé&lt;/p&gt;
&lt;p&gt;‰ª•‰∏äÊñπÊ°à‰ªé‰∏äÂà∞‰∏ãÔºåÂÆâÂÖ®ÊÄßÈÄêÊ∏êÈôç‰Ωé„ÄÇÁî±‰∫éËÄÉËôëÂà∞ÂÆâÂÖ®ÈóÆÈ¢òÔºåÊïÖÈááÁî®Á¨¨‰∏ÄÁßçÊñπÊ°àËß£ÂÜ≥Êï∞ÊçÆÈöîÁ¶ª&lt;br&gt;
‰ºòÁÇπÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ÈùûÂ∏∏ÂÆâÂÖ®&lt;/li&gt;
&lt;li&gt;Êï∞ÊçÆ‰∫í‰∏çÂΩ±ÂìçÔºåÊÄßËÉΩ‰∫í‰∏çÂΩ±Âìç&lt;/li&gt;
&lt;li&gt;Êï∞ÊçÆËøÅÁßªÔºåÊï∞ÊçÆÊâ©Â±ïÊñπ‰æø&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Áº∫ÁÇπÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ÈúÄË¶ÅÁª¥Êä§Â§ßÈáèÁöÑÊï∞ÊçÆÂ∫ì&lt;/li&gt;
&lt;li&gt;ÈúÄË¶ÅËá™Ë°åÂàáÊç¢Êï∞ÊçÆÂ∫ìÔºåÂºÄÂèëÈáèÂ§ö‰∏îÂÆûÁé∞Â§çÊùÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;ÂÖ∑‰ΩìÊäÄÊúØÂÆûÁé∞&#34;&gt;ÂÖ∑‰ΩìÊäÄÊúØÂÆûÁé∞&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ÁÆÄÂçïÁöÑÊû∂ÊûÑÂõæ&lt;/strong&gt;&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1603179800053.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
Â¶ÇÂõæÊâÄÁ§∫ÔºåSaaSÈ°πÁõÆÂ§ßÊ¶ÇÊû∂ÊûÑÂõæÔºåÂÖ≥ÈîÆÁÇπÊòØÂ∫îÁî®Â±Ç‰º†ÂèÇÔºå‰ª•ÂèäË∑ØÁî±Â±ÇÁöÑÂÆûÁé∞„ÄÇ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ÂÆûÁé∞&lt;/strong&gt;&lt;br&gt;
1„ÄÅÂ∫îÁî®Â±ÇÔºöÈ°πÁõÆ‰∏≠Â∫îÁî®serviceÂ±ÇÊòØdubboÊúçÂä°ÔºåËÄå‰∏îÈ°πÁõÆÂàÜÂ§öÂ±ÇÔºåËøôÈáåÈúÄË¶ÅËÄÉËôëÂà∞Â§öÂ±ÇÊúçÂä°Âú∫ÊôØ‰∏ãÔºåÂ¶Ç‰Ωï‰ºòÈõÖ‰º†ÂèÇÈóÆÈ¢òÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1603181882775.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
Êàë‰ª¨ËÄÉËôëÂà∞ÁßüÊà∑IDÊòØÂîØ‰∏ÄÊ†áËØÜÔºåÂíå‰∏öÂä°ÂèÇÊï∞ÁªëÂÆöÂú®‰∏ÄËµ∑‰∏ç‰ºòÈõÖÔºåÊâÄ‰ª•‰∏§ÁßçÂèÇÊï∞ÂàÜÂºÄÂ§ÑÁêÜÔºå‰∏öÂä°ÂèÇÊï∞Áõ¥Êé•ÂèÇÊï∞ÈÄè‰º†ÔºåÁßüÊà∑IDÂîØ‰∏ÄÊ†áËØÜÈÄöËøáÈöêÂºè‰º†ÂèÇÊù•Â§ÑÁêÜÔºàÂèÇËÄÉdubbo http://dubbo.apache.org/zh-cn/docs/user/demos/attachment.htmlÔºâÔºåÂπ∂‰∏îÂèÇÊï∞ËÆ∞ÂΩïÂà∞ÊúçÂä°Êú¨Âú∞ÁöÑthreadlocal‰∏≠Ôºå‰ª•‰æøÂêéÁª≠ÂÖ∂‰ªñ‰∏öÂä°ÈúÄË¶Å„ÄÇÂÖ∑‰ΩìÂÆûÁé∞Â¶Ç‰∏ãÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1603183675071.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;2„ÄÅË∑ØÁî±Â±ÇÔºöË∑ØÁî±Â±ÇÂÆûÁé∞‰∏ªË¶ÅÊòØËá™Ë°åÂÆûÁé∞springÊ°ÜÊû∂‰∏≠DataSourceÊé•Âè£ÔºåËá™ÂÆö‰πâdynamicDataSourceÁ±ªÔºåÁÑ∂Âêéimplement DataSourceÊé•Âè£ÔºåÂÆûÁé∞getConnectionÊñπÊ≥ï„ÄÇÁÑ∂ÂêéÈáçÊñ∞ÂÆö‰πâSqlSessionFactoryÁöÑbeanÔºåÂ∞ÜËá™ÂÆö‰πâDataSourceÁ±ªÂ±ûÊÄßÊ≥®ÂÖ•„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1603183148592.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1603183156251.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÁÑ∂ÂêéÊàë‰ª¨Âè™ÈúÄË¶ÅÂÖ≥Ê≥®getConnectionÊñπÊ≥ïÊ†πÊçÆÁßüÊà∑IDÔºåÈÄâÊã©Áõ∏ÂØπÂ∫îÁöÑÁßüÊà∑ËøûÊé•Ê±†Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ&lt;br&gt;
Â¶ÇÂõæ‰∏≠ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÂÆûÁé∞Ëøô‰∏™selectTenantCodeDataSource()Ëøô‰∏™ÊñπÊ≥ïÂ∞±ÂèØ‰ª•‰∫ÜÔºåËøô‰∏™ÊñπÊ≥ïÂÆûÁé∞ÂæàÁÆÄÂçïÔºåËøôÈáåÂ∞±‰∏çË¥¥Âõæ‰∫Ü„ÄÇselectTenantCodeDataSource()ÊñπÊ≥ï‰∏ªË¶ÅÂ∞±ÊòØ‰ªéthreadlocal‰∏≠ÊãøÁßüÊà∑IDÔºåÁÑ∂ÂêéÂéªÁºìÂ≠òÊ±†map‰∏≠ÊãøÂá∫ËøûÊé•Ê±†‰ø°ÊÅØ„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1603183509071.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÂÖ∂‰∏≠ÔºådataSourceCachePoolÊòØÂú®ÂàùÂßãÂåñÈÖçÁΩÆÊó∂ÂÄôÔºåÂ∞ÜÊâÄÊúâÁöÑÁßüÊà∑ËøûÊé•Ê±†Áõ¥Êé•ÂàõÂª∫ÔºåÁÑ∂ÂêéÊâîÂà∞dataSourceCachePool„ÄÇkeyÊòØÁßüÊà∑ÁöÑIDÔºåvalueÊòØËøûÊé•Ê±†‰ø°ÊÅØ„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂÖ∑‰ΩìÁöÑÂàùÂßãÂåñÈÖçÁΩÆÔºö&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
 * ÂàùÂßãÂåñÊï∞ÊçÆÊ∫ê
 */
@Configuration
public class DataSourceInit {
    
    @PostConstruct
    public void InitDataSource()  {
        log.info(&amp;quot;=====ÂàùÂßãÂåñÊï∞ÊçÆÊ∫ê=====&amp;quot;);
        TenantRoutingDataSource tenantRoutingDataSource = (TenantRoutingDataSource)ApplicationContextProvider.getBean(&amp;quot;tenantRoutingDataSource&amp;quot;);
        Map&amp;lt;String, DataSourceCache&amp;gt; dataSourceCachePool = new HashMap&amp;lt;&amp;gt;();

        List&amp;lt;TenantInfo&amp;gt; tenantList = tenantInfoService.InitTenantInfo();
        for (TenantInfo tenantInfo : tenantList) {
            log.info(tenantInfo.toString());
            HikariDataSource dataSource = new HikariDataSource();
            dataSource.setDriverClassName(tenantInfo.getDatasourceDriver());
            dataSource.setJdbcUrl(tenantInfo.getDatasourceUrl());
            dataSource.setUsername(tenantInfo.getDatasourceUsername());
            dataSource.setPassword(tenantInfo.getDatasourcePassword());
            dataSource.setDataSourceProperties(master.getDataSourceProperties());
            dataSourceCachePool.put(tenantInfo.getTenantId(), dataSource);
        }
        //ËÆæÁΩÆÊï∞ÊçÆÊ∫ê
        tenantRoutingDataSource.setDataSources(dataSourceCachePool);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;‰∫å-ÊñπÊ°àÁöÑÈöêËóèÁº∫ÁÇπ‰ª•ÂèäËß£ÂÜ≥&#34;&gt;‰∫å„ÄÅÊñπÊ°àÁöÑÈöêËóèÁº∫ÁÇπ‰ª•ÂèäËß£ÂÜ≥&lt;/h2&gt;
&lt;h3 id=&#34;ÈöêËóèÁöÑÁº∫Èô∑&#34;&gt;ÈöêËóèÁöÑÁº∫Èô∑&lt;/h3&gt;
&lt;p&gt;Áõ∏‰ø°Êúâ‰∏ÄÂÆöÂºÄÂèëÁªèÈ™åÁöÑËØªËÄÖÂ∫îËØ•ËÉΩÊÉ≥Âà∞Ôºå‰∏äËø∞ÊñπÊ°àÊúÄÂ§ßÁöÑÁº∫ÁÇπÂ∞±ÊòØÊÄßËÉΩÈóÆÈ¢òÔºåÂØπMySQLÊúâÈùûÂ∏∏Â§ßÁöÑÂΩ±Âìç„ÄÇÂõ†‰∏∫‰∏ÄÂºÄÂßãÂàùÂßãÂåñÈùûÂ∏∏Â§öÁöÑËøûÊé•Ê±†ÔºåÂ∞±‰ºöÂç†Áî®ËøûÊé•ËµÑÊ∫êÔºåÊØîÂ¶ÇÁßüÊà∑‰ªé100‰∏™Êâ©Â±ïÂà∞‰∫Ü1000‰∏™‰ª•ÂèäÊõ¥Â§öÔºåÈÇ£‰πàËøûÊé•Ê±†Êï∞ÈáèÂ∞±Á∫øÊÄßÂ¢ûÈïøÔºåÂ¶ÇÊûú‰∏Ä‰∏™ËøûÊé•Ê±†‰øùÊåÅ15‰∏™Ê¥ªË∑ÉËøûÊé•ÁöÑËØùÔºåÈÇ£‰πàËøûÊé•Êï∞Â∞±ÊòØ15*1000ÔºåÊ≠§Êó∂Â¶ÇÊûúMySQLÁöÑmaxconntionÁöÑÊï∞ÈáèÈùûÂ∏∏Â∞èÔºåÈÇ£‰πàMySQL‰æßÂ∞±‰ºöÊäõÂá∫‚Äùtoo many connctions‚ÄúÈîôËØØÔºåÂú®Â∫îÁî®Â±ÇÊñπÈù¢Â∞±ÊòØMySQL‰∏çÂèØÁî®‰∫Ü„ÄÇ&lt;br&gt;
Ê≤°‰ºòÂåñ‰πãÂâçÁöÑÊû∂ÊûÑÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1603190851131.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;Ëß£ÂÜ≥&#34;&gt;Ëß£ÂÜ≥&lt;/h3&gt;
&lt;p&gt;ÊÉ≥‰øùÊåÅÊï∞ÊçÆÂ∫ìÂàÜÁ¶ªÔºåÂèàË¶ÅËÄÉËôëÂà∞MySQLÊÄßËÉΩÈóÆÈ¢òÔºåÂè™ËÉΩÂêëËøûÊé•Ê±†‰ºòÂåñÁöÑÊñπÂêëÂéªËÄÉËôëÔºåÂÖ∂ÂÆûÂèØ‰ª•ÂáèÂ∞ëÊï∞ÈáèÂ∞±ÂèØ‰ª•‰∫ÜÔºåËøôÈáåÂÆûÁé∞ÊñπÊ°àÂ∞±ÊòØ‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÂÆû‰æã‰∏Ä‰∏™ËøûÊé•Ê±†ÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1603190889253.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÂÖ∑‰ΩìÂÆûÁé∞Â∞±ÊòØÂ∞Ü‰∏äËø∞ÊñπÊ°à‰∏≠ÁöÑdataSourceCachePoolÁöÑkeyÊîπ‰∏∫ ‚ÄúIP+Á´ØÂè£‚ÄùÔºå‰Ωú‰∏∫key„ÄÇÁÑ∂ÂêéÂÜçÊï∞ÊçÆÊ∫êË∑ØÁî±Â±ÇÔºåÂ§ö‰∏ÄÂ±ÇÊò†Â∞ÑÔºàÁßüÊà∑ID‚Äî‚Äî&amp;gt;Êï∞ÊçÆÂ∫ìÂÆû‰æãÔºâÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;‰∏â-Êõ¥‰ºòÈõÖÊñπÊ°àËß£ÂÜ≥‰ºÅ‰∏öÂÜÖÈÉ®ÂºÄÂèëÁóõÁÇπ&#34;&gt;‰∏â„ÄÅÊõ¥‰ºòÈõÖÊñπÊ°àËß£ÂÜ≥‰ºÅ‰∏öÂÜÖÈÉ®ÂºÄÂèëÁóõÁÇπ&lt;/h2&gt;
&lt;h3 id=&#34;Áé∞Áä∂&#34;&gt;Áé∞Áä∂&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Áé∞Áä∂&lt;/strong&gt;Ôºö‰ºÅ‰∏öÂÜÖÈÉ®È°πÁõÆÁªÑÂºÄÂèëÊï∞ÊçÆÊ∫êË∑ØÁî±ÔºåÂêÑ‰∏™‰∫∫ÂëòÂºÄÂèëÊ∞¥Âπ≥‰∏ç‰∏ÄÔºåÂêÑÁßçË∑ØÁî±ÊñπÊ°àÂÆûÁé∞‰∏çÂêåÔºåËá™Â∑±ÁªÑÂÜÖÁöÑÂºÄÂèëÁöÑÊñπÊ°àÂè™ËÉΩËá™Â∑±ÁªÑÂÜÖ‰ΩøÁî®ÔºåÂπ∂‰∏îÂÆûÁé∞Â§çÊùÇÔºåËÄó‰∫∫ÂäõÁâ©Âäõ„ÄÇ&lt;br&gt;
&lt;strong&gt;ÁõÆÊ†á&lt;/strong&gt;ÔºöÈ°πÁõÆÁªÑ‰ΩøÁî®Áõ¥Êé•ÂºïÂÖ•mavenÂåÖÔºå‰ªª‰ΩïÈÖçÁΩÆÈÉΩ‰∏çË¶ÅÈÖçÁΩÆÔºàËá™ÂÆö‰πâÁöÑËØùÈúÄË¶ÅËá™Ë°åÂú®Ëá™Â∑±È°πÁõÆ‰∏≠ÈÖçÁΩÆÂ±ûÊÄßÔºâÔºåÂºÄÁÆ±Âç≥Áî®„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;ÂÖ∑‰ΩìÂÆûÁé∞&#34;&gt;ÂÖ∑‰ΩìÂÆûÁé∞&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ÂéüÁêÜ&lt;/strong&gt;ÔºöÁõ¥Êé•ÈááÁî®springboot starterÂºÄÂèëÔºåÂ∞Ü‰∏äËø∞ÊñπÊ°àÊâÄÊúâÁöÑÈÄªËæëÂíåÊäÄÊúØÂÆûÁé∞ÂçïÁã¨ÊîæÂÖ•springboot starterÂ∑•Á®ã‰∏≠ÔºåÈááÁî®Â§ñÈÉ®ÈÖçÁΩÆÁöÑÊñπÂºèÂÆûÁé∞Ëá™ÂÆö‰πâÈÖçÁΩÆ„ÄÇ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ÂºÄÂèëËÄÖÂÆûÁé∞&lt;/strong&gt;ÔºöÁΩë‰∏äÊúâËÆ∏Â§öspringboot starterÂºÄÂèëÁöÑÊµÅÁ®ãÂíåÂºÄÂèëÊ°à‰æãÔºåÁ¨îËÄÖËøôÈáåÂ∞±Âè™Ë¥¥Âá∫ÂÖ≥ÈîÆÁöÑ‰ª£Á†Å&lt;br&gt;
1„ÄÅËá™Âä®Ë£ÖÈÖçÁ±ªÔºöspring.factories‰∏≠ÂÜôÂÖ•Ëøô‰∏™Á±ªDataSourceAutoConfigureÔºåÂÆûÁé∞beanÁöÑËá™Âä®Ë£ÖÂÖ•ÔºåÁ±ªÈáåÈù¢‰∏ªË¶ÅÊòØÂÆûÁé∞SqlSessionFactoryÂíåPlatformTransactionManagerÔºåÁÑ∂ÂêéÂú®TenantRoutingDataSourceÁöÑgetconnectionÊñπÊ≥ï‰∏≠Ëá™ÂÆö‰πâÂÆûÁé∞Ë∑ØÁî±ÈÄªËæë„ÄÇ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Configuration
public class DataSourceAutoConfigure {

    @Resource
    private TenantRoutingDataSource tenantRoutingDataSource;

    @Bean
    @ConditionalOnMissingBean(SqlSessionFactory.class)
    @ConditionalOnBean(TenantRoutingDataSource.class)
    public SqlSessionFactory sqlSessionFactory() throws Exception{
        SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean();
        sqlSessionFactoryBean.setDataSource(tenantRoutingDataSource);
        Objects.requireNonNull(sqlSessionFactoryBean.getObject()).getConfiguration().setMapUnderscoreToCamelCase(true);
        return sqlSessionFactoryBean.getObject();
    }

    @Bean
    @ConditionalOnMissingBean(PlatformTransactionManager.class)
    @ConditionalOnBean(TenantRoutingDataSource.class)
    public PlatformTransactionManager platformTransactionManager() {
        return new DataSourceTransactionManager(tenantRoutingDataSource);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2„ÄÅJava SPIÊú∫Âà∂ÔºöÂà©Áî®Javaspi Êù•Ëé∑ÂèñÁî®Êà∑Ëá™ÂÆö‰πâÁöÑmybatis plugin„ÄÇËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØÔºå‰∏çÁî®ÊØèÊ¨°Â¢ûÂä†‰∏Ä‰∏™pluginÔºåÂ∞±ÊîπÂä®Êï∞ÊçÆË∑ØÁî±ÁªÑ‰ª∂ÁöÑ‰ª£Á†Å„ÄÇ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;public SqlSessionFactory sqlSessionFactory(@Qualifier(&amp;quot;tenantRoutingDataSource&amp;quot;) TenantRoutingDataSource tenantRoutingDataSource) throws Exception{
        SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean();
        sqlSessionFactoryBean.setDataSource(tenantRoutingDataSource);
        Interceptor[] plugins = loadMybatisPlugin();
        if(plugins.length &amp;gt; 0){
            sqlSessionFactoryBean.setPlugins(plugins);
        }
        Objects.requireNonNull(sqlSessionFactoryBean.getObject()).getConfiguration().setMapUnderscoreToCamelCase(true);
        return sqlSessionFactoryBean.getObject();
    }

    // SPIÊú∫Âà∂Ëé∑ÂèñÊèí‰ª∂
    private Interceptor[] loadMybatisPlugin(){
        List&amp;lt;Interceptor&amp;gt; interceptors = new ArrayList&amp;lt;&amp;gt;();
        ServiceLoader&amp;lt;Interceptor&amp;gt; load = ServiceLoader.load(Interceptor.class);
        load.forEach(interceptors::add);
        return interceptors.toArray(new Interceptor[0]);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3„ÄÅdubbo filterÊâ©Â±ïÊé•Âè£ÔºöËé∑ÂèñÁßüÊà∑IDÔºåÂπ∂‰∏îÈúÄË¶ÅÂä†@ActivateÊ≥®Ëß£ÔºåËøôÊ†∑dubboÂú®ÂàùÂßãÂåñfilterÈìæÁöÑÊó∂ÂÄôÔºåËá™Âä®Â∞ÜËøô‰∏™filterÊ≥®ÂÜåÂà∞filterÈìæ‰∏≠ÔºåËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØÔºåÁî®Êà∑Âú®Ëá™Â∑±Â∑•Á®ã‰∏≠‰∏çÈúÄË¶ÅÈÖçÁΩÆfilterËøô‰∏™ÂèÇÊï∞ÔºåÊó†ÈúÄÂ¢ûÂä†‰ªª‰ΩïÁöÑÈÖçÁΩÆ„ÄÇ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Activate(group = {&amp;quot;provider&amp;quot;})
public class TenantCodeContextFilter implements Filter {
    @Override
    public Result invoke(Invoker&amp;lt;?&amp;gt; invoker, Invocation invocation) throws RpcException {
        String tenantCode = RpcContext.getContext().getAttachment(&amp;quot;tenantCode&amp;quot;);
        TenantCodeContextHolder.setTenantCode(tenantCode);
        return invoker.invoke(invocation);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4„ÄÅÊ£ÄÊü•Áî®Êà∑‰æßËá™ÂÆö‰πâÈÖçÁΩÆÊòØÂê¶Ê≠£Á°ÆÔºöÊ£ÄÊü•Áî®Êà∑ÁöÑÈÖçÁΩÆÊòØÂê¶ÂêàÁêÜÔºå‰∏çÂêàÁêÜÁöÑËØùÂÜçÂÆπÂô®Â∞±Áª™Èò∂ÊÆµÂ∞±‰ºöÊäõÂá∫ÂºÇÂ∏∏&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;@Component
public class CheckConfigListener implements ApplicationListener&amp;lt;ApplicationReadyEvent&amp;gt; {

    @Override
    public void onApplicationEvent(ApplicationReadyEvent applicationReadyEvent) {
        ConfigurableApplicationContext applicationContext = applicationReadyEvent.getApplicationContext();
        ConfigurableEnvironment environment = applicationContext.getEnvironment();
        // Ê£ÄÊü•Áî®Êà∑Ëá™ÂÆö‰πâÈÖçÁΩÆÊòØÂê¶Ê≠£Á°ÆÔºåËá™Ë°åÂÆûÁé∞
        checkDatasourceConfig(environment);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;5„ÄÅÂà©Áî®ÁºìÂ≠òÊ±†‰øùÂ≠òÂ§ö‰∏™dataSourceÂØπË±°Ôºå‰∏Ä‰∏™MySQLÂÆû‰æãÂØπÂ∫î‰∏Ä‰∏™dataSourceÂØπË±°Ôºå‰∏Ä‰∏™dataSourceÂØπÂ∫îÂ§ö‰∏™ÁßüÊà∑ÔºåËÄå‰∏çÊòØ‰∏Ä‰∏™dataSourceÂØπÂ∫î‰∏Ä‰∏™ÁßüÊà∑ÔºåËøôÊ†∑ÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØÔºåÂ¶ÇÊûú‰∏Ä‰∏™MySQLÂÆû‰æãÈáåÈù¢ÁöÑÁßüÊà∑Êï∞ÊçÆÂ∫ìËøáÂ§öÔºå‰∏ç‰ºöÂØºËá¥‰∏Ä‰∏™MySQLÂÆû‰æãËøûÊé•Êï∞ËÜ®ËÉÄÈóÆÈ¢ò„ÄÇ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;    /**
     * Êï∞ÊçÆÊ∫êÁºìÂ≠òÊ±†
     * Key ‰∏Ä‰∏™MySQLÊï∞ÊçÆÂ∫ìËøûÊé•‰ø°ÊÅØkey
     * Value ÁºìÂ≠òÊó∂RDSËøûÊé•‰ø°ÊÅØ‰∏éDataSource
     */
    private final Map&amp;lt;String, DataSourceCache&amp;gt; dataSourceCachePool = new ConcurrentHashMap&amp;lt;&amp;gt;();
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Áî®Êà∑‰ΩøÁî®&lt;/strong&gt;ÔºöÁõ¥Êé•ÂºïÂÖ•Áõ∏Â∫îÁöÑmavenÔºåÊñπ‰æøÂø´Êç∑&lt;/p&gt;
&lt;h2 id=&#34;Âõõ-todoÂêéÁª≠‰ºòÂåñ&#34;&gt;Âõõ„ÄÅTODOÂêéÁª≠‰ºòÂåñ&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;ÁõÆÂâçÂ§öÁßüÊà∑Êï∞ÊçÆÊ∫êÈÄöÁî®Â∑•Á®ãÂè™ÊîØÊåÅDubboÁöÑË∞ÉÁî®ÔºåÊú™Êù•ÂèØÊâ©Â±ïÊîØÊåÅÂ§öÁßçÂçèËÆÆÂ¶ÇHTTP„ÄÅgRPC&lt;/li&gt;
&lt;li&gt;ÁõÆÂâçÂè™ÊîØÊåÅHikariÊï∞ÊçÆÊ∫êÔºåÂêéÁª≠ÊîØÊåÅÂ§öÁßçÊï∞ÊçÆÊ∫êÁ±ªÂûãÔºåÊØîÂ¶ÇDurid&lt;/li&gt;
&lt;li&gt;Â¶ÇÊûúÁßüÊà∑Êï∞ÊçÆÈùûÂ∏∏Â§ßÔºåÂèØ‰ª•ËÄÉËôëÁ©∫Èó¥Êç¢Êó∂Èó¥ÊÄùÊÉ≥Ôºå‰ΩøÁî®ÁºìÂ≠òÂ≠òÊîæÁßüÊà∑ÁöÑÊï∞ÊçÆÊ∫êÈÖçÁΩÆÔºåÊèêÂçáÊü•ËØ¢ÊïàÁéá„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ÂèÇËÄÉ&#34;&gt;ÂèÇËÄÉ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;SaaSÁ≥ªÁªüÊï∞ÊçÆÈöîÁ¶ªÊñπÊ°à‚Äî‚Äîhttps://blog.arkency.com/comparison-of-approaches-to-multitenancy-in-rails-apps/&lt;/li&gt;
&lt;/ul&gt;
">SaaSÁ≥ªÁªüÂ§öÊï∞ÊçÆÊ∫êË∑ØÁî±‰ºòÈõÖËß£ÂÜ≥ÊñπÊ°à</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/mysql-lian-he-suo-yin-zai-bshu-de-cun-chu-he-cha-zhao/"" data-c="
          &lt;h2 id=&#34;ÂâçË®Ä&#34;&gt;ÂâçË®Ä&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Âú®ÂØπMySQLÂºÄÂèë‰∏≠ÔºåËÅîÂêàÁ¥¢ÂºïÊòØÂæàÂ∏∏ËßÅÁöÑ‰∏ÄÁßçMySQL‰ºòÂåñÊñπÂºèÔºåÊú¨ÊñáËß£Èáä‰∫ÜËÅîÂêàÁ¥¢ÂºïÁöÑÂ≠òÂÇ®‰ª•ÂèäÊü•ÊâæËøáÁ®ãÔºåÂèØ‰ª•‰∫ÜËß£‰∏Ä‰∏ãÂ∫ïÂ±ÇÁöÑÂéüÁêÜ‰ª•ÂèäÂä†Ê∑±ÂØπMySQLËÅîÂêàÁ¥¢ÂºïÁöÑÁêÜËß£„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;innodb-bÊ†ë&#34;&gt;Innodb B+Ê†ë&lt;/h2&gt;
&lt;p&gt;ÂÖàÁúã‰∏Ä‰∏ãInnodb B+Ê†ëÁöÑ‰∏ªÈîÆÁ¥¢ÂºïÂíåËæÖÂä©Á¥¢Âºï„ÄÇËøôÈáåÁõ¥Êé•ÊãøÂº†Ê¥ãÂ§ßÁ•ûÁöÑÂõæÔºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ËÅöÁ∞áÁ¥¢Âºï:&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593425796639.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/li&gt;
&lt;li&gt;ËæÖÂä©ÈùûËÅöÁ∞áÁ¥¢Âºï:&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593425801180.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;strong&gt;ÁªìÊûÑ&lt;/strong&gt;ÔºöÂΩì‰∏Ä‰∏™Ë°®TÔºàid,name,age,sex,highÔºâÂª∫‰∏Ä‰∏™ÊôÆÈÄöÁ¥¢Âºï  KEY(name)ÔºånameÁöÑÁ¥¢ÂºïÁªìÊûúÂ∞±Âíå‰∏äÈù¢ËæÖÂä©ÈùûËÅöÁ∞áÁ¥¢ÂºïÁªìÊûÑ‰∏ÄÊ†∑„ÄÇ&lt;br&gt;
&lt;strong&gt;Êü•ËØ¢&lt;/strong&gt;ÔºöÂΩìÊúâ‰∏Ä‰∏™select id,name,age from T where name = &amp;quot;&amp;quot; ËæÖÂä©Á¥¢Âºï‰ºöÊ†πÊçÆnameÂú®B+Ê†ë‰∏äËøõË°å‰∫åÂèâÊ†ëÊü•ÊâæÔºåÊâæÂá∫Âè∂Â≠êËäÇÁÇπÊï∞ÊçÆÂêéÂèëÁé∞Ê≤°ÊúâageËøô‰∏™Êï∞ÊçÆÔºåÂ∞±‰ºöËøõË°å&lt;strong&gt;ÂõûË°®&lt;/strong&gt;Êìç‰ΩúÂà∞‰∏ªÈîÆËÅöÁ∞áÁ¥¢ÂºïÂéªÊü•ÊâæÔºåÊãøÂà∞ËÅöÁ∞áÁ¥¢ÂºïÂè∂Â≠êËäÇÁÇπÁöÑageÊï∞ÊçÆ„ÄÇ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ËÅîÂêàÁ¥¢ÂºïÂ≠òÂÇ®‰ª•ÂèäÂØªÂùÄ&#34;&gt;ËÅîÂêàÁ¥¢ÂºïÂ≠òÂÇ®‰ª•ÂèäÂØªÂùÄ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Á¥¢ÂºïÁªìÊûÑ&lt;/strong&gt;ÔºöÊàë‰ª¨Áü•ÈÅì‰∏äËø∞ÂõûË°®ËøáÁ®ã‰πü‰ºöÊ∂àËÄóÊÄßËÉΩÔºåÁõ∏ÂΩì‰∫éÂ§öÊü•‰∏ÄÊ¨°ÔºåÊâÄ‰ª•Á≥ªÁªüÂèØ‰ª•Ê†πÊçÆ‰∏öÂä°ÊÉÖÂÜµÂä†‰∏ä‰∏Ä‰∏™ÁªÑÂêàÁ¥¢ÂºïÔºåÂΩìÁÑ∂Âπ∂‰∏çÊòØ‰∏ÄÁõ¥Âä†ÁªÑÂêàÁ¥¢ÂºïÂ∞±ÂèØ‰ª•‰∫ÜÔºåÂõ†‰∏∫Ë¶ÅËÄÉËôëÂà∞Á¥¢ÂºïÂ≠òÂÇ®Á©∫Èó¥ÁöÑÈóÆÈ¢ò„ÄÇ‰æãÂ¶ÇÁªô‰∏äËø∞Âä†‰∏ä‰∏Ä‰∏™ÁªÑÂêàÁ¥¢Âºï  KEYÔºàname,age,sexÔºâ„Äê KEYÔºàcol1,col2,col3Ôºâ„Äë„ÄÇÈÇ£‰πàËøô‰∏™ÁªÑÂêàÁ¥¢ÂºïÁöÑB+Ê†ëÈùûÂè∂Â≠êËäÇÁÇπÊï∞ÊçÆÁªìÊûÑÂíå‰∏äËø∞ËæÖÂä©ÈùûËÅöÁ∞áÁ¥¢ÂºïÂõæ‰∏ÄÊ†∑Ôºå‰ΩÜÊòØÂè∂Â≠êËäÇÁÇπÊòØËøôÊ†∑ÁöÑÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593425790647.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
Âè∂Â≠êËäÇÁÇπÂ≠òÂÇ®col1,col2,col3Ëøô‰∏âÂàóÊï∞ÊçÆ‰ª•ÂèäÂä†‰∏äIDËøô‰∏ÄÂàóÊï∞ÊçÆ„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ÂØªÂùÄËøáÁ®ãÔºö&lt;/strong&gt;&lt;br&gt;
‰æãÂ¶ÇËØ≠Âè•Ôºöselect * from T where name = &amp;quot;Âº†‰∏â&amp;quot; and age=25ÔºåÂÖàÊ†πÊçÆnameÂ≠óÊÆµ‰ªéËæÖÂä©ËÅöÁ∞áÁ¥¢ÂºïÂÆö‰ΩçÂà∞Âì™‰∏Ä‰∏™Âè∂Â≠êËäÇÁÇπÊï∞ÊçÆ‰∏≠ÔºåÁÑ∂ÂêéÊ†πÊçÆageËäÇÁÇπÂú®‰∏äËø∞Ë°®Ê†ºÁöÑÂâç6Ë°å‰∏≠ÔºåÂØªÊâæage= 25ÁöÑÊï∞ÊçÆÔºåÁÑ∂ÂêéÊâæÂá∫ÊâÄÊúâÁ¨¶ÂêàÁöÑÊï∞ÊçÆ‰ª•ÂèäÂÖ∂ÂØπÂ∫îÁöÑIDÔºåÁÑ∂ÂêéÊ†πÊçÆIDÊù•ËøõË°åÂõûË°®Êìç‰ΩúÊü•ËØ¢„ÄÇËøôÈáåËøîÂõû‰∫Ü‰∏âÊù°Êï∞ÊçÆÔºåÂ∞±Âõû‰∫Ü‰∏âÊ¨°Ë°®„ÄÇ&lt;br&gt;
‰∏äËø∞ÂõûË°®ËøáÁ®ã‰∏≠ÔºåÁ¨îËÄÖÂºïÂÖ•‰∏Ä‰∏™&lt;strong&gt;Á¥¢Âºï‰∏ãÊé®&lt;/strong&gt;ÁöÑ‰∏Ä‰∏™ÂäüËÉΩÔºåÁ¥¢Âºï‰∏ãÊé®ÊòØMySQLÂú®5.6ÁâàÊú¨ÂêéÂºïÂÖ•ÁöÑ‰∏Ä‰∏™Êü•ËØ¢‰ºòÂåñ„ÄÇÂ∞±Êãø‰∏äËø∞ÁöÑ‰æãÂ≠êÔºåÂú®Ê≤°Êúâ‰ºòÂåñ‰πãÂâçÔºåÊçÆnameÂ≠óÊÆµÊü•ËØ¢‚ÄúÂº†‰∏â‚ÄùÂêéÔºå‰ºöÊãøÂà∞6Êù°ÁªìÊûúÔºåÂõûË°®6Ê¨°ÔºåÁÑ∂Âêé‰ªé‰∏ªÈîÆÁ¥¢ÂºïÊãøÂà∞6Êù°Êï∞ÊçÆÂêéÔºåÊ†πÊçÆageÂ≠óÊÆµÁ≠õÈÄâÊï∞ÊçÆÔºõ‰ºòÂåñ‰πãÂêéÔºåÂÖàÂÜçËæÖÂä©Á¥¢Âºï‰∏äÈù¢Ê†πÊçÆnameÂ≠óÊÆµÂíåageÂ≠óÊÆµÁ≠õÈÄâÁ¨¶ÂêàÊï∞ÊçÆÔºå‰πüÂ∞±ÊòØIDÔºåÁÑ∂ÂêéÂÜçÂõûË°®ÔºåËøôÈáåÂõûË°®‰∫Ü‰∏âÊ¨°„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ÁªÑÂêàÁ¥¢ÂºïÊ≥®ÊÑè‰∫ãÈ°π&lt;/strong&gt;&lt;br&gt;
ÂΩìÁÑ∂ÔºåËÅîÂêàÁ¥¢ÂºïÁöÑÊúÄÈáçË¶ÅÁöÑÊòØÊ≥®ÊÑèËÅîÂêàÁ¥¢ÂºïÁöÑ‰ΩøÁî®ÈóÆÈ¢òÔºåË¶ÅÈÅµÂæ™ÊúÄÂ∑¶ÂåπÈÖçÂéüÂàôÔºåÊâçÂèØ‰ª•‰ºòÂåñÂà∞Êï¥‰∏™SQL‰∫Ü„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ÊÄªÁªì&#34;&gt;ÊÄªÁªì&lt;/h3&gt;
&lt;p&gt;‰ª•‰∏äÔºåÊÄªÁªì‰∫ÜMySQLÁöÑÁ¥¢ÂºïÁöÑÂü∫Êú¨ÂéüÁêÜÔºå‰ª•ÂèäËÅîÂêàÁ¥¢ÂºïÁöÑÂ≠òÂÇ®ÂíåÂØªÂùÄËøáÁ®ãÔºåÂπ∂‰∏îÂºïÂÖ•Á¥¢Âºï‰∏ãÊé®Ê¶ÇÂøµÔºåËøòÊúâ‰ΩøÁî®ËÅîÂêàÁ¥¢ÂºïÁöÑÊ≥®ÊÑè‰∫ãÈ°π„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;ÂèÇËÄÉ&#34;&gt;ÂèÇËÄÉ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;MySQLÁ¥¢ÂºïËÉåÂêéÁöÑÊï∞ÊçÆÁªìÊûÑÂèäÁÆóÊ≥ïÂéüÁêÜ‚Äî‚Äîhttp://blog.codinglabs.org/articles/theory-of-mysql-index.html„ÄÇ&lt;/li&gt;
&lt;/ul&gt;
">MySQLËÅîÂêàÁ¥¢ÂºïÂú®B+Ê†ëÁöÑÂ≠òÂÇ®ÂíåÊü•Êâæ</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/guan-yu-zookeeper-qi-shu-jie-dian-yi-ji-nao-lie-wen-ti/"" data-c="
          &lt;h3 id=&#34;ÂâçË®Ä&#34;&gt;ÂâçË®Ä&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Zookeeper‰Ωú‰∏∫ÂæÆÊúçÂä°ÂàÜÂ∏ÉÂºèÂçèË∞É‰∏≠Èó¥‰ª∂Ôºå‰∫ÜËß£ÂÆÉÁöÑÂéüÁêÜ‰ª•ÂèäÊó•Â∏∏ÂºÄÂèë‰∏≠ÁöÑÊ≥®ÊÑè‰∫ãÈ°πÂíåÂèØËÉΩ‰ºöÂá∫Áé∞ÁöÑÈóÆÈ¢òÊòØÊúâÂøÖË¶ÅÁöÑ„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;ÂâçÁΩÆÁü•ËØÜzabÂçèËÆÆ&#34;&gt;ÂâçÁΩÆÁü•ËØÜÔºöZABÂçèËÆÆ&lt;/h3&gt;
&lt;p&gt;ZABÔºöZookeeper Atomic BroadcastÔºàZABÔºâÂ¥©ÂùèÊÅ¢Â§çÂíåÂéüÂ≠êÂπøÊí≠ÂçèËÆÆ&lt;br&gt;
1ÔºâÂ¥©ÂùèÊÅ¢Â§çÔºöÂú®masterËäÇÁÇπÂÆïÊú∫ÊÉÖÂÜµ‰∏ãÔºåÂÖ∂‰ªñÈõÜÁæ§ËäÇÁÇπ‰ºöÈáçÊñ∞ÈÄâ‰∏æmasterËäÇÁÇπÔºåÂø´ÈÄüÈ¢ÜÂØºËÄÖÈÄâ‰∏æÊú∫Âà∂ÔºöÈÄâ‰∏æËßÑÂàô‰ºöÂèÇÁÖßÊúÄÂ§ßÁöÑÂàÜ‰ª£Âπ¥ÈæÑepoch&amp;gt;ÊúÄÂ§ßÁöÑ‰∫ãÂä°zxid&amp;gt;server idÊù•ËøõË°åÈÄâ‰∏æÔºåÈÄâ‰∏æËøáÁ®ãÂ∞±ÊòØÂ∞ÜËá™Â∑±ËäÇÁÇπÊäïÁ•®‰ø°ÊÅØÂèëÁªôÂÖ∂‰ªñÈõÜÁæ§ËäÇÁÇπÔºåÊäïÁ•®‰ø°ÊÅØÈôÑÂ∏¶zxidÂíåserveridÔºå&lt;strong&gt;Âà§Êñ≠ÊòØÂê¶Ë∂ÖËøá‰∏ÄÂçäÁöÑÊäïÁ•®ÈÄâÂêå‰∏Ä‰∏™ËäÇÁÇπ&lt;/strong&gt;ÔºåÈÇ£‰πàËøô‰∏™ËäÇÁÇπÂ∞±‰ºöÈÄâ‰∏æ‰∏∫master„ÄÇ&lt;br&gt;
2ÔºâÈÄâ‰∏æÂÆåÂêéÔºåÂ∞±‰ºöËøõË°åÊï∞ÊçÆÂêåÊ≠•ÔºåÂ∞ÜmasterËäÇÁÇπÊï∞ÊçÆÂêåÊ≠•Âà∞slave‰∏≠ÔºåÊ≠§Êó∂ÂØπÂ§ñÊúçÂä°‰∏çÂèØÁî®„ÄÇ&lt;br&gt;
3ÔºâÂéüÂ≠êÂπøÊí≠ÔºöZABÂçèËÆÆ‰øùËØÅÊ∂àÊÅØÁöÑ‰∏ÄËá¥ÊÄßÂíåÊúâÂ∫èÊÄß&lt;br&gt;
‚ÄÉ‰∏ÄËá¥ÊÄßÔºöleaderÂèëÈÄÅpropasal‰∫ãÂä°ËØ∑Ê±ÇÔºàÂåÖÂê´zxidÔºâÔºåmasterÂà§Êñ≠ËøáÂçäÊú∫Âà∂ackÔºåÂ∞±ËÆ§‰∏∫‰∫ãÂä°ÂèØ‰ª•Êèê‰∫§‰∫ÜÔºåmaster‰ºöÊèê‰∫§‰∫ãÂä°ÔºåÁÑ∂ÂêéÂπøÊí≠Êèê‰∫§‰∫ãÂä°Ê∂àÊÅØÔºå‰ªéËäÇÁÇπÂºÄÂßãÊèê‰∫§Êú¨‰∫ãÂä°„ÄÇ‰∏ÄÂçäackÊú∫Âà∂ÔºåÂèØ‰ª•ÁúãzookeeperÊòØCPÔºå‰ΩÜÊòØ‰∏çÊòØÂº∫‰∏ÄËá¥ÊÄßÔºõ‰ªéËäÇÁÇπÊé•Êî∂propasalÂêéÔºå‰ºöÂ∞Ü‰∫ãÂä°ÂÜôÂÖ•Á£ÅÁõò„ÄÇ&lt;br&gt;
‚ÄÉÊúâÂ∫èÊÄßÔºözxid‰∫ãÂä°id‰øùËØÅÂÖ®Â±ÄÊúâÂ∫èÊÄßÔºåÊØè‰∏Ä‰∏™slaveÊúçÂä°Âô®Áª¥ÊåÅ‰∏Ä‰∏™FIFOÈòüÂàóÔºåÁª¥ÊåÅÂ±ÄÈÉ®ÊúâÂ∫èÊÄß„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;zookeeperËÑëË£Ç&#34;&gt;ZookeeperËÑëË£Ç&lt;/h3&gt;
&lt;p&gt;‚ÄÉZookeeperËÑëË£ÇÈÉΩÊòØÂá∫Áé∞Âú®ÈõÜÁæ§ÁéØÂ¢É‰∏≠ÁöÑ„ÄÇÊåáÁöÑÊòØ‰∏Ä‰∏™ÈõÜÁæ§ÁéØÂ¢É‰∏≠Âá∫Áé∞‰∫ÜÂ§ö‰∏™masterËäÇÁÇπÔºåÂØºËá¥‰∏•ÈáçÊï∞ÊçÆÂêåÊ≠•ÂíåÂÜôÂÖ•ÈóÆÈ¢òÔºåÊï∞ÊçÆ‰∏ç‰∏ÄËá¥Á≠âÁ≠âÔºåÂ¶ÇÊûúËøôÁßçÊÉÖÂÜµÂá∫Áé∞Âú®Á∫ø‰∏äÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏ãÔºå‰ºöÂØºËá¥ÊúçÂä°‰∏çÂèØÁî®„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;Âá∫Áé∞ÂéüÂõ†&#34;&gt;Âá∫Áé∞ÂéüÂõ†&lt;/h3&gt;
&lt;p&gt;‚ÄÉÂèØËÉΩÂ∞±ÊòØÁΩëÁªúÁéØÂ¢ÉÊúâÈóÆÈ¢òÂØºËá¥ËäÇÁÇπ‰πãÈó¥Êñ≠ÂºÄÔºåÊàñËÄÖËäÇÁÇπÂÅáÊ≠ªÁ≠âÁ≠âÔºåÂØºËá¥‰∏ÄÈÉ®ÂàÜslaveËäÇÁÇπ‰ºöÈáçÊñ∞ËøõÂÖ•Â¥©ÂùèÊÅ¢Â§çÊ®°ÂºèÔºåÈáçÊñ∞ÈÄâ‰∏æÊñ∞ÁöÑmasterËäÇÁÇπÔºåÁÑ∂ÂêéÂØπÂ§ñÊèê‰æõ‰∫ãÂä°ÊúçÂä°„ÄÇÁî±‰∫éÂøÉË∑≥Ë∂ÖÊó∂ÔºàÁΩëÁªúÂéüÂõ†ÂØºËá¥ÁöÑÔºâËÆ§‰∏∫ÊóßÁöÑmasterÊ≠ª‰∫ÜÔºå‰ΩÜÂÖ∂ÂÆûÊóßÁöÑmasterËøòÂ≠òÊ¥ªÁùÄ„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;Â¶Ç‰ΩïËß£ÂÜ≥ËÑëË£Ç&#34;&gt;Â¶Ç‰ΩïËß£ÂÜ≥ËÑëË£Ç&lt;/h3&gt;
&lt;p&gt;ËøáÂçäÊú∫Âà∂ÔºåÂ¶ÇÊûúÈõÜÁæ§‰∏≠Êüê‰∏™ËäÇÁÇπÁöÑÊäïÁ•®Êï∞ÈáèÂ§ß‰∫éÈõÜÁæ§ÊúâÊïàËäÇÁÇπÁöÑ‰∏ÄÂçäÔºåÂ∞±‰ºöÈÄâÂá∫master„ÄÇËøôÈáåÊãøÂá∫ÂÖ≥ÈîÆ‰ª£Á†ÅÔºö&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;// È™åËØÅÊòØÂê¶Á¨¶ÂêàËøáÂçäÊú∫Âà∂ÔºåÂ¶ÇÊûúÁ¨¶ÂêàÂ∞±‰ºöÈÄâ‰∏æÊñ∞ÁöÑmasterËäÇÁÇπ
public boolean containsQuorum(Set&amp;lt;Long&amp;gt; set){
    // halfÊòØÂú®ÊûÑÈÄ†ÊñπÊ≥ïÈáåËµãÂÄºÁöÑ
    // nË°®Á§∫ÈõÜÁæ§‰∏≠zkServerÁöÑ‰∏™Êï∞ÔºàÂáÜÁ°ÆÁöÑËØ¥ÊòØÂèÇ‰∏éËÄÖÁöÑ‰∏™Êï∞ÔºåÂèÇ‰∏éËÄÖ‰∏çÂåÖÊã¨ËßÇÂØüËÄÖËäÇÁÇπÔºâ
    half = n/2;
    // set.size()Ë°®Á§∫ÊüêÂè∞zkServerËé∑ÂæóÁöÑÁ•®Êï∞
    return (set.size() &amp;gt; half);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Á¨îËÄÖ‰ªãÁªçÂá†ÁßçÊÉÖÂÜµÔºåÊù•ËØ¥Êòé‰∏Ä‰∏ãÂá†ÁßçËÑëË£ÇÁöÑÂú∫ÊôØ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ÊØîÂ¶ÇÈõÜÁæ§‰∏≠Êúâ6‰∏™ËäÇÁÇπÔºå‰∏Ä‰∏™masterÂíå5‰∏™slaveÔºåÂàÜ‰∏§‰∏™Êú∫ÊàøÔºåÊØè‰∏™Êú∫ÊàøÂàÜÂà´‰∏âÂè∞ÔºåÂèëÁîü‰∫ÜÊú∫Êàø‰∏çÂèØÈÄö‰ø°ÁöÑÊÉÖÂÜµÔºåÂ¶Ç‰∏ãÂõæÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593419532309.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÁÑ∂ÂêéÊú∫ÊàøBÂ∞±‰ºö‰∫ßÁîüÊñ∞ÁöÑmasterÔºåÂ¶ÇÂõæ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593419550068.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
Ëøô‰∏™Êó∂ÂÄôZookeeper‰∏∫‰∫ÜÈò≤Ê≠¢ËøôÊ†∑ÁöÑÊÉÖÂÜµÂèëÁîüÔºåÂà©Áî®‰∫Ü&lt;strong&gt;ËøáÂçäÊú∫Âà∂&lt;/strong&gt;ÁöÑËøô‰∏™ÁâπÊÄß„ÄÇ&lt;br&gt;
‰∏äÂõæ‰∏≠ÔºåÊú∫ÊàøBËäÇÁÇπ‰∏∫3 Â∞è‰∫éÈõÜÁæ§Êï∞ÈáèÁöÑ‰∏ÄÂçäÔºåÊâÄ‰ª•ÔºåÊúÄÁªà‰∏äÈù¢Âõæ‰∏≠Êú∫ÊàøBÊòØ‰∏ç‰ºöÈÄâ‰∏æÂá∫Êñ∞ÁöÑmasterËäÇÁÇπÁöÑ„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Êàë‰ª¨ÂÜçÊù•Áúã‰∏ÄÁßçÊÉÖÂÜµÔºöÊØîÂ¶ÇÈõÜÁæ§‰∏≠Êúâ5‰∏™ËäÇÁÇπÔºå‰∏Ä‰∏™masterÂíå4‰∏™slaveÔºåÂàÜ‰∏§‰∏™Êú∫ÊàøÔºåÂ¶Ç‰∏ãÂõæÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593419973725.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
Â¶ÇÊûúÂèëÁîü‰∫ÜÊú∫Êàø‰∏çËÉΩÈÄö‰ø°ÁöÑÊÉÖÂÜµÔºåÈÇ£‰πàÊú∫ÊàøBÂõ†‰∏∫ËäÇÁÇπÊòØ2‰∏™ÔºåÊ≤°ÊúâË∂ÖËøá‰∏ÄÂçäÔºåÂ∞±‰∏ç‰ºö‰∫ßÁîüÂá∫Êñ∞ÁöÑmasterËäÇÁÇπ‰∫Ü„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ÂÜçÊù•ÁúãÊúÄÂêé‰∏ÄÁßçÊÉÖÂÜµÔºåÊØîÂ¶ÇÈõÜÁæ§‰∏≠Êúâ5‰∏™ËäÇÁÇπÔºå‰∏Ä‰∏™masterÂíå4‰∏™slaveÔºåÂàÜ‰∏§‰∏™Êú∫ÊàøÔºå‰∏çÂêåÁöÑÊòØmasterËäÇÁÇπÂú®Êú∫ÊàøBÔºåÂ¶Ç‰∏ãÂõæÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593420189914.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
Â¶ÇÊûúÂèëÁîü‰∫ÜÊú∫Êàø‰∏çËÉΩÈÄö‰ø°ÁöÑÊÉÖÂÜµÔºåÈÇ£‰πàÊú∫ÊàøAËäÇÁÇπÊòØ3‰∏™ÔºåË∂ÖËøá‰∫Ü‰∏ÄÂçäÔºåÂ∞±‰ºöËøõÂÖ•Â¥©ÂùèÊÅ¢Â§çÊ®°Âºè‰∫ßÁîüÊñ∞ÁöÑmasterËäÇÁÇπÔºåÈÇ£‰πàÊ≠§Êó∂ÈõÜÁæ§‰∏≠Â∞±‰ºöÂá∫Áé∞‰∏§‰∏™masterËäÇÁÇπ‰∫Ü„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593420219104.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÈÇ£‰πàÈÅáÂà∞ËøôÁßçÊÉÖÂÜµZookeeperÊòØÂ¶Ç‰ΩïÂ§ÑÁêÜÁöÑÔºüÁ≠îÔºöÊóßÁöÑleaderÊâÄÊúâÁöÑÂÜôËØ∑Ê±ÇÂêåÊ≠•Âà∞ÂÖ∂‰ªñfollowersËäÇÁÇπÊòØ‰ºöË¢´ÊãíÁªùÁöÑ„ÄÇÂõ†‰∏∫ÊØèÂΩìÊñ∞leader‰∫ßÁîüÊó∂Ôºå‰ºöÁîüÊàê‰∏Ä‰∏™epochÔºåËøô‰∏™epochÊòØÈÄíÂ¢ûÁöÑÔºåfollowersÂ¶ÇÊûúÁ°ÆËÆ§‰∫ÜÊñ∞ÁöÑleaderÂ≠òÂú®ÔºåÁü•ÈÅìÂÖ∂epochÔºåÂ∞±‰ºöÊãíÁªùepochÂ∞è‰∫éÁé∞‰ªªleader epochÁöÑÊâÄÊúâËØ∑Ê±Ç„ÄÇËøô‰∏™Êó∂ÂÄôÊóßÁöÑmasterËøõÂÖ•ÊÅ¢Â§çÊ®°ÂºèËøõË°åÊï∞ÊçÆÂêåÊ≠•„ÄÇ&lt;br&gt;
ÊâÄ‰ª•ÊåâÁÖß‰∏äÈù¢ÁöÑÊÉÖÂÜµÔºåÊú∫ÊàøAÁöÑÊâÄÊúâfollowersËäÇÁÇπÊ≠£Â∏∏ÈÄö‰ø°ÔºåÊú∫ÊàøBÁöÑÊâÄÊúâËäÇÁÇπÈáçÊñ∞ËøõÂÖ•ÊÅ¢Â§çÊ®°ÂºèËøõË°åÊï∞ÊçÆÂêåÊ≠•„ÄÇ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ÊÄªÁªìÔºöÈÄöËøáQuorumsÊú∫Âà∂Êù•Èò≤Ê≠¢ËÑëË£ÇÔºåÂΩìleaderÊåÇÊéâ‰πãÂêéÔºåÂèØ‰ª•ÈáçÊñ∞ÈÄâ‰∏æÂá∫Êñ∞ÁöÑleaderËäÇÁÇπ‰ΩøÊï¥‰∏™ÈõÜÁæ§ËææÊàê‰∏ÄËá¥ÔºõÂΩìÂá∫Áé∞ÂÅáÊ≠ªÁé∞Ë±°Êó∂ÔºåÈÄöËøáepochÂ§ßÂ∞èÊù•ÊãíÁªùÊóßÁöÑleaderÂèëËµ∑ÁöÑËØ∑Ê±ÇÔºåÂΩìÂá∫Áé∞ËøôÁßçÊÉÖÂÜµÔºåÊóßÁöÑleader ËøõÂÖ•ÊÅ¢Â§çÊ®°ÂºèËøõË°åÊï∞ÊçÆÂêåÊ≠•„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;ÂºïÂá∫Â•áÊï∞ËäÇÁÇπ&#34;&gt;ÂºïÂá∫Â•áÊï∞ËäÇÁÇπ&lt;/h3&gt;
&lt;p&gt;‚ÄÉÁü•Êôì‰ª•‰∏äÂú∫ÊôØÂêéÔºåÊàë‰ª¨Áü•ÈÅìÔºå2Âè∞Êú∫Âô®‰πüËÉΩÈÄâ‰∏æÂá∫masterÔºåÂè™‰∏çËøáÂè™Ë¶ÅÊúâ1‰∏™Ê≠ª‰∫ÜzookeeperÂ∞±‰∏çËÉΩÁî®‰∫ÜÔºåÂõ†‰∏∫1Ê≤°ÊúâËøáÂçä„ÄÇÊâÄ‰ª•2‰∏™zookeeperÁöÑÊ≠ª‰∫°ÂÆπÂøçÂ∫¶‰∏∫0„ÄÇÂêåÁêÜÔºåË¶ÅÊòØÊúâ3‰∏™zookeeperÔºå‰∏Ä‰∏™Ê≠ª‰∫ÜÔºåËøòÂâ©‰∏ã2‰∏™Ê≠£Â∏∏ÁöÑÔºåËøáÂçä‰∫ÜÔºåÊâÄ‰ª•3‰∏™zookeeperÁöÑÂÆπÂøçÂ∫¶‰∏∫1„ÄÇÂ¶ÇÊûúÊåâÁÖßËøôÊ†∑ÁöÑÊú∫Âà∂Êé®ÁêÜÔºåÈÇ£‰πàÂæóÂá∫2-&amp;gt;0;3-&amp;gt;1;4-&amp;gt;1;5-&amp;gt;2;6-&amp;gt;2  Â∑¶ËæπÊòØÊï∞ÈáèÔºåÂè≥ËæπÊòØÂÆπÂøçÂ∫¶ÔºåÊâÄ‰ª•2nÂíå2n-1ÁöÑÂÆπÂøçÂ∫¶ÊòØ‰∏ÄÊ†∑ÁöÑÔºåÊâÄ‰ª•ÂèØ‰ª•ÂæóÂá∫ÔºåÈõÜÁæ§ÊòØ&lt;strong&gt;Â•áÊï∞‰∏™ËÉΩÂ§üËäÇÁúÅËµÑÊ∫ê&lt;/strong&gt;„ÄÇ&lt;/p&gt;
&lt;!--‰∏ãÈù¢ÁöÑÂ•áÊï∞ËäÇÁÇπÁöÑ‰ΩúÁî®ÈúÄË¶ÅÁ°ÆËÆ§ TODO--&gt;
&lt;h3 id=&#34;ÊÄªÁªì&#34;&gt;ÊÄªÁªì&lt;/h3&gt;
&lt;p&gt;‰ª•‰∏äÔºåÁ¨îËÄÖÊÄªÁªì‰∫ÜZABÂçèËÆÆÔºåÂà∞ZookeeperÈò≤Ê≠¢ËÑëË£ÇÁöÑÂú∫ÊôØ‰ª•ÂèäÂ¶Ç‰ΩïÂ§ÑÁêÜÔºå‰ª•ÂèäÁªìÂêà‰æãÂ≠êÔºåZookeeperÈõÜÁæ§Âú®Â•áÊï∞ËäÇÁÇπ‰∏ãÁöÑ‰ΩúÁî®„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;ÂèÇËÄÉ&#34;&gt;ÂèÇËÄÉ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ZooKeeperÈõÜÁæ§ÁöÑËÑëË£ÇÈóÆÈ¢ò‚Äî‚Äîhttps://www.cnblogs.com/shoufeng/p/10591526.html&lt;/li&gt;
&lt;/ul&gt;
">ÂÖ≥‰∫éZookeeperÂ•áÊï∞ËäÇÁÇπ‰ª•ÂèäËÑëË£ÇÈóÆÈ¢ò</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/jin-rong-ji-ye-wu-xia-fen-bu-shi-shi-wu-bao-zheng-shu-ju-yi-zhi-xing/"" data-c="
          &lt;h2 id=&#34;ÂâçË®Ä&#34;&gt;ÂâçË®Ä&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ÈöèÁùÄÂàÜÂ∏ÉÂºèÊúçÂä°Êû∂ÊûÑÁöÑÊµÅË°å‰∏éÊôÆÂèäÔºåÂéüÊù•Âú®Âçï‰ΩìÂ∫îÁî®‰∏≠ÊâßË°åÁöÑÂ§ö‰∏™ÈÄªËæëÊìç‰ΩúÔºåÁé∞Âú®Ë¢´ÊãÜÂàÜÊàê‰∫ÜÂ§ö‰∏™ÊúçÂä°‰πãÈó¥ÁöÑËøúÁ®ãË∞ÉÁî®„ÄÇÂæÆÊúçÂä°ÂåñÂêéÔºåÈöèÁùÄÂ∏¶Êù•ÁöÑÊúçÂä°‰πãÈó¥ÁöÑÂàÜÂ∏ÉÂºè‰∫ãÂä°ÈóÆÈ¢òÔºåÂ∞§ÂÖ∂ÊòØÂú®ÈáëËûç‰∏öÂä°‰∏ãÔºåÂàÜÂ∏ÉÂºè‰∫ãÂä°ÊòØ‰øùËØÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÁöÑÈáçË¶Å‰øùËØÅ„ÄÇÊú¨ÊñáÁùÄÈáç‰ºöËÆ≤ÂàÜÂ∏ÉÂºè‰∫ãÂä°Âú∫ÊôØÂíå‰∏öÁïå‰∏ªÊµÅÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;‰∏Ä-ÂºïÂÖ•&#34;&gt;‰∏Ä„ÄÅÂºïÂÖ•&lt;/h2&gt;
&lt;p&gt;‚ÄÉËµÑÈáëËΩ¨Ë¥¶Âú®ÈáëËûç‰∏öÂä°‰∏ãÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÈáçË¶ÅËÄå‰∏îÂ∏∏ËßÅÁöÑÂú∫ÊôØÔºåÂ¶ÇÊûúÂõ†‰∏∫ÊäÄÊúØÈóÆÈ¢òÂØºËá¥ËµÑÈáëËΩ¨Ë¥¶ÈîôËØØÔºåÂØºËá¥Êï∞ÊçÆ‰∏ç‰∏ÄËá¥ÈóÆÈ¢òÔºåÈÇ£‰πàÂ∞±‰ºöÈÄ†ÊàêÊó†Ê≥ïÈ¢ÑÊµãÁöÑÂêéÊûú„ÄÇ&lt;br&gt;
‚ÄÉÁ¨îËÄÖËøôÈáåÊãøÈì∂Ë°åËΩ¨Ë¥¶ÁöÑ‰æãÂ≠êÊù•ËØ¥ÔºàËøôÈáåÁöÑËΩ¨Ë¥¶ÊúâÂæàÂ§öÂú∫ÊôØÊØîÂ¶ÇÈì∂Ë°åÂç°‰πãÈó¥ÂÖÖÂÄºÊèêÁé∞„ÄÅÈì∂Ë°åË¥¶Êà∑‰πãÈó¥ÁöÑËΩ¨Ë¥¶Á≠âÁ≠âÔºâÔºåÊØîÂ¶ÇÁî≤Èì∂Ë°åË¥¶Êà∑AÂêë‰πôÈì∂Ë°åË¥¶Êà∑BËΩ¨Ë¥¶1WÔºö&lt;/p&gt;
&lt;p&gt;ÂêåÊ≠•Ë∞ÉÁî®Ôºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;AÈì∂Ë°åÂØπËΩ¨Âá∫Ë¥¶Êà∑ÊâßË°åÊ£ÄÊü•Ê†°È™åÔºåËøõË°åË¥¶Êà∑ÈáëÈ¢ùÊâ£Âáè„ÄÇ&lt;/li&gt;
&lt;li&gt;AÈì∂Ë°åÂêåÊ≠•Ë∞ÉÁî®BÈì∂Ë°åËΩ¨Ë¥¶Êé•Âè£„ÄÇ&lt;/li&gt;
&lt;li&gt;BÈì∂Ë°åÂØπËΩ¨ÂÖ•Ë¥¶Êà∑ËøõË°åÊ£ÄÊü•Ê†°È™åÔºåËøõË°åË¥¶Êà∑ÈáëÈ¢ùÂ¢ûÂä†„ÄÇ&lt;/li&gt;
&lt;li&gt;BÈì∂Ë°åËøîÂõûÂ§ÑÁêÜÁªìÊûúÁªôAÈì∂Ë°å„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593745125729.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÂêåÊ≠•Ë∞ÉÁî®ÈóÆÈ¢òÔºö&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Â¶ÇÊûúBÈì∂Ë°åÂõ†‰∏∫ÁΩëÁªúÂéüÂõ†ÂØºËá¥Êé•Âè£‰∏çÈÄöÔºåÈÇ£‰πàAË∞ÉÁî®Á∫øÁ®ã‰ºöÈïøÊó∂Èó¥ÈòªÂ°û„ÄÇ&lt;/li&gt;
&lt;li&gt;Â¶ÇÊûúAÊâ£ÂáèÂêéÔºåÂèëÈÄÅËØ∑Ê±ÇÂêéÔºåÂú®ÁΩëÁªú‰∏≠‰∏¢Â§±‰∫ÜÔºåBÈì∂Ë°åÊ≤°ÊúâÊî∂Âà∞ËØ∑Ê±ÇÔºåÂØºËá¥Ë¥¶Êà∑AÊâ£Âáè‰∫ÜÔºåË¥¶Êà∑BÊ≤°ÊúâÂä†&lt;/li&gt;
&lt;li&gt;Â¶ÇÊûúË¥¶Êà∑BÊâ£ÂáèÊàêÂäü‰∫ÜÔºåÁî±‰∫éÊüêÁßçÂéüÂõ†ÊØîÂ¶ÇÁΩëÁªúÂºÇÂ∏∏Ê≤°ÊúâÂèäÊó∂ÂõûË∞ÉÁªôÁî≤Èì∂Ë°åÔºåÈÇ£‰πàË¥¶Êà∑AÂ∞±ËÆ§‰∏∫ÊòØÂºÇÂ∏∏ËØ∑Ê±ÇÔºåÂàô‰ºöÂõûÊªö‰∫ãÂä°ÔºåÂØºËá¥Êï∞ÊçÆ‰∏ç‰∏ÄËá¥„ÄÇ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ÂÜçÊù•Áúã‰∏Ä‰∏ãÂºÇÊ≠•Ë∞ÉÁî®Ôºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;AÈì∂Ë°åÂØπËΩ¨Âá∫Ë¥¶Êà∑ÊâßË°åÊ£ÄÊü•Ê†°È™åÔºåËøõË°åË¥¶Êà∑ÈáëÈ¢ùÊâ£Âáè„ÄÇ&lt;/li&gt;
&lt;li&gt;‰∏ªÁ∫øÁ®ãÂ∞ÜËØ∑Ê±ÇÊï∞ÊçÆÂºÇÊ≠•ÂÜôÂÖ•ÈòüÂàóMQ&lt;/li&gt;
&lt;li&gt;ÁúüÊ≠£Ê∂àË¥πËÄÖÁ®ãÂ∫èÂØπBÈì∂Ë°åËøõË°åËøúÁ®ãË∞ÉÁî®&lt;/li&gt;
&lt;li&gt;BÈì∂Ë°åÂØπËΩ¨ÂÖ•Ë¥¶Êà∑ËøõË°åÊ£ÄÊü•Ê†°È™åÔºåËøõË°åË¥¶Êà∑ÈáëÈ¢ùÂ¢ûÂä†„ÄÇ&lt;/li&gt;
&lt;li&gt;BÈì∂Ë°åËøîÂõûÂ§ÑÁêÜÁªìÊûúÁªôAÈì∂Ë°å„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593743096206.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÂºÇÊ≠•Ë∞ÉÁî®ÈóÆÈ¢òÔºö&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Â¶ÇÊûúË¥¶Êà∑AÊâ£ÂáèÊú¨Âú∞‰∫ãÂä°ÊàêÂäü‰∫ÜÔºå‰ΩÜÊòØÊ∂àÊÅØÂèëÂá∫ÂêéÔºåÂõ†‰∏∫ÁΩëÁªúÂéüÂõ†ÊàñËÄÖÂÖ∂‰ªñÂÆïÊú∫ÂéüÂõ†ÔºåÂØºËá¥Ê∂àÊÅØÊú™ÂèëÈÄÅÊàêÂäüÔºåÊ≤°ÊúâËøõË°åBË¥¶Êà∑ËøúÁ®ãË∞ÉÁî®ÔºåÂØºËá¥Êú¨Âú∞‰∫ãÂä°ÂíåÊ∂àÊÅØ‰∏ç‰∏ÄËá¥ÊÄß„ÄÇ&lt;/li&gt;
&lt;li&gt;MQÊ∂àË¥πÁ´ØÁ®ãÂ∫èÂ¶ÇÊûúÊ∂àË¥πÊ∂àÊÅØÊàêÂäüÔºåËØ∑Ê±ÇÈì∂Ë°åÊàêÂäü‰∫ÜÔºå‰ΩÜÊòØÂõû‰º†ACKÁªôMQÂ§±Ë¥•‰∫ÜÔºåÈÇ£‰πàÂõûÂØºËá¥Ê∂àË¥πÁ´ØÁ®ãÂ∫èÈáçÂ§çÊ∂àË¥πÈóÆÈ¢òÔºåÈÇ£‰πàÂ∞±‰ºöÂá∫Áé∞ÈáçÂ§çËΩ¨Ë¥¶ÁöÑÈóÆÈ¢ò„ÄÇ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ÂºÇÊ≠•Ë∞ÉÁî®Ëß£ÂÜ≥‰∫ÜÂêåÊ≠•Ë∞ÉÁî®ÁöÑ‰∏ªÁ∫øÁ®ãÈòªÂ°ûÈóÆÈ¢òÔºå‰ΩÜËøòÊòØÊ≤°ÊúâËß£ÂÜ≥Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò„ÄÇËÄå‰∏îÂºïÂÖ•MQ‰∏≠Èó¥ÂêéÔºåËøòË¶ÅËÄÉËôëÂà∞Êú¨Âú∞‰∫ãÂä°ÂíåMQÊ∂àÊÅØ‰∏ÄËá¥ÊÄßÈóÆÈ¢òÔºåËøòÊúâÂÖ∂‰ªñÁöÑÂºïÂÖ•ÂêéÁöÑÁª¥Êä§Â∑•‰ΩúÔºåÊØîÂ¶ÇÊ∂àÊÅØ‰∏¢Â§±ÔºåÊ∂àÊÅØÈáçÂèëÁ≠âÁ≠âÈóÆÈ¢ò„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;‰∫å-ÂàÜÂ∏ÉÂºè‰∫ãÂä°Ëß£ÂÜ≥ÊñπÊ°à&#34;&gt;‰∫å„ÄÅÂàÜÂ∏ÉÂºè‰∫ãÂä°Ëß£ÂÜ≥ÊñπÊ°à&lt;/h2&gt;
&lt;p&gt;‚ÄÉËÆ≤Âà∞‰∫ÜÂàÜÂ∏ÉÂºè‰∫ãÂä°ÔºåËá™ÁÑ∂Á¶ª‰∏çÂºÄÂàÜÂ∏ÉÂºèÁ≥ªÁªüÁöÑ‰∏Ä‰∫õÂü∫Êú¨ÂéüÂàôÂíåÂÆöÁêÜÔºöCAPÂéüÂàôÂíåBASEÁêÜËÆ∫ÔºåÁõ∏‰ø°ËØªËÄÖÂ∫îËØ•ÈÉΩÁü•ÈÅìÔºåËøôÈáå‰∏çÂÅöËøáÂ§öÈòêËø∞„ÄÇ‰∏öÁïåÊ†πÊçÆËøô‰∫õËßÑÂàôÂíåÁêÜËÆ∫ÔºåË°çÁîüÂá∫‰∫ÜÂêÑÁßçÂàÜÂ∏ÉÂºè‰∫ãÂä°Ëß£ÂÜ≥ÊñπÊ°àÔºöXAËßÑËåÉÔºå2PCÔºå3PCÔºåÊú¨Âú∞Ê∂àÊÅØË°®ÊñπÊ°àÔºåÂü∫‰∫éÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÁöÑÊúÄÁªà‰∏ÄËá¥ÊÄßÊñπÊ°àÔºåTCCÊñπÊ°àÔºåÈòøÈáåÁöÑSEATAÔºåSAGAÊñπÊ°àÂíåÊúÄÂ§ßÂä™ÂäõÈÄöÁü•Á≠âÁ≠â„ÄÇ&lt;br&gt;
‚ÄÉ‰ª•‰∏äÊØè‰∏™ÊñπÊ°àÈÉΩÊúâËá™Â∑±ÁöÑÂ∫îÁî®Âú∫ÊôØÔºåÂ∞±Êãø2PCÊù•ËØ¥ÔºåMySQLÁöÑ‰∫ãÂä°ÂûãÊó•Âøóredolog‰∫åÊÆµÊèê‰∫§Ôºàredolog(prepare)--„Äãbinlog--„Äãredolog(commit)Ôºâ‰øùËØÅbinlogÂíåredologÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÔºåZookeeperÁöÑproposal‰∫ãÂä°‰∫åÊÆµÊèê‰∫§ÔºàÂçäÊï∞‰ª•‰∏äackËøîÂõûÊàêÂäüË°®Á§∫ÂÜôÂÖ•Êï∞ÊçÆÊàêÂäüÔºâ‰øùËØÅleaderÂíåfollerÁöÑÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÔºåËøô‰∫õÈÉΩÊòØ2PCÁöÑÂ∫îÁî®„ÄÇ&lt;br&gt;
‚ÄÉÈáëËûçÂú∫ÊôØ‰∏ãÁ±ª‰ººËµÑÈáë‰∏öÂä°ÈúÄË¶Å‰øùËØÅÊúÄÁªà‰∏ÄËá¥ÊÄßËß£ÂÜ≥ÂàÜÂ∏ÉÂºè‰∫ãÂä°Ôºå‰∏çÈúÄË¶Å‰øùËØÅËΩ¨Ë¥¶ÂÆûÊó∂ÊÄß„ÄÇÊâÄ‰ª•Êú¨Âú∞Ê∂àÊÅØË°®„ÄÅÂü∫‰∫éMQ‰∏≠Èó¥‰ª∂ÁöÑÊúÄÁªà‰∏ÄËá¥ÊÄßÁ≠âÊüîÊÄßÊñπÊ°àÊòØÈ¶ñÈÄâÁöÑÊñπÊ°à„ÄÇËøô‰∫õÂü∫‰∫éÊ∂àÊÅØÁöÑÂàÜÂ∏ÉÂºè‰∫ãÂä°ÔºåÊú¨Ë¥®‰∏äÂ∞±ÊòØÔºåÊú¨Âú∞‰∫ãÂä°+‰ªé‰∫ãÂä°Ôºå‰ªé‰∫ãÂä°‰ªéÊ∂àÊÅØ‰∏≠Ëé∑Âèñ‰ø°ÊÅØËøõË°åÊú¨Âú∞Êèê‰∫§ÔºåËøôÈáå‰øùÊåÅ&lt;strong&gt;ÂºÇÊ≠•‰∫ãÂä°Êú∫Âà∂„ÄÅÂè™ËÉΩ‰øùËØÅÊúÄÁªà‰∏ÄËá¥ÊÄß&lt;/strong&gt;„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;21-Âà©Áî®Êú¨Âú∞Ê∂àÊÅØË°®ÊÄùÊÉ≥Ëß£ÂÜ≥‰∏ÄËá¥ÊÄßÈóÆÈ¢ò&#34;&gt;2.1 Âà©Áî®Êú¨Âú∞Ê∂àÊÅØË°®ÊÄùÊÉ≥Ëß£ÂÜ≥‰∏ÄËá¥ÊÄßÈóÆÈ¢ò&lt;/h3&gt;
&lt;p&gt;‚ÄÉ‰∏ÄËà¨Êù•ËØ¥ÔºåË∑®Ë°åËΩ¨Ë¥¶ÁöÑÂéüÁêÜÔºå‰ºöÂ≠òÂú®‰∏Ä‰∏™‰∏≠ÂõΩ‰∫∫Ê∞ëÈì∂Ë°åÁöÑ‰∏≠Èó¥‰∫∫ËßíËâ≤Êù•Êìç‰ΩúËΩ¨Ë¥¶Ôºå‰ΩÜ‰∏çÂú®Êú¨Ê¨°ËÆ®ËÆ∫ÁöÑËåÉÂõ¥ÂÜÖ„ÄÇ&lt;br&gt;
‚ÄÉ‰∏öÁïåÈì∂Ë°åËΩ¨Ë¥¶Â§ßÈÉ®ÂàÜÈÉΩÊòØÂêåÊ≠•ËΩ¨Ë¥¶ÔºåÂºÇÊ≠•Ëé∑ÂèñËΩ¨Ë¥¶ÁªìÊûúÔºåÂåÖÊã¨Á¨¨‰∏âÊñπÊîØ‰ªòÂπ≥Âè∞ÂØπÊé•Èì∂Ë°åÈÉΩÊòØËøôÊ†∑Áé©ÁöÑ„ÄÇËøôÈáåÁ¨îËÄÖÂ∞±Âà©Áî®Êú¨Âú∞Ê∂àÊÅØË°®ÊÄùÊÉ≥Êù•ÂÖ∑‰ΩìÂèôËø∞Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÊòØÂ¶Ç‰Ωï‰øùËØÅÁöÑÔºåËÄÅËßÑÁü©ÂÖàÊîæÂõæÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1603274563955.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÂÖ∂‰∏≠‰∫§ÊòìËÆ∞ÂΩïË°®Â§ßÊ¶ÇÈïøËøô‰∏™Ê†∑Â≠êÔºö&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Â≠óÊÆµ&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;ÊèèËø∞&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;id&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Ëá™Â¢ûIDÔºåÊ≤°Êúâ‰∏öÂä°ÊÑè‰πâ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;trade_order_num&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;‰∫§ÊòìËÆ¢ÂçïÂè∑Ôºå‰Ωú‰∏∫ËΩ¨Ë¥¶ËÆ∞ÂΩïÂîØ‰∏ÄÊ†áËØÜ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;source_account_num&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;‰∫§ÊòìËΩ¨Âá∫ÊñπË¥¶Êà∑ID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;target_account_num&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;‰∫§ÊòìÊî∂Ê¨æÊñπË¥¶Êà∑ID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;status&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Áä∂ÊÄÅÊú∫Ôºå0=È¢ÑÂàõÂª∫Ôºå1=ËΩ¨Ë¥¶‰∏≠Ôºå2=ËΩ¨Ë¥¶ÊàêÂäüÔºå3=ËΩ¨Ë¥¶Â§±Ë¥•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;pay_success_time&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ËÆ∞ÂΩïËΩ¨Ë¥¶ÊàêÂäüÊó∂Èó¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;create_time&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ËÆ∞ÂΩïÂàõÂª∫Êó∂Èó¥ÔºåÂèØ‰Ωú‰∏∫Á™óÂè£Êó∂Èó¥ÂÜÖÂà§Êñ≠Ê†áÂáÜ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;update_time&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ËÆ∞ÂΩï Êõ¥Êñ∞Êó∂Èó¥&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Ë¥¶Êà∑Ë°®Â§ßÊ¶ÇÈïøËøô‰∏™Ê†∑Â≠êÔºö&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Â≠óÊÆµ&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;ÊèèËø∞&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;id&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Ëá™Â¢ûIDÔºåÊ≤°Êúâ‰∏öÂä°ÊÑè‰πâ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;account_num&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Ë¥¶Êà∑ID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;current_amt&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ÂΩìÂâçË¥¶Êà∑‰ΩôÈ¢ù&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;lock_amt&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ÂÜªÁªìÈáëÈ¢ùÔºåÁî®Êù•ËÆ∞ÂΩï‰∏¥Êó∂Áä∂ÊÄÅÁöÑÊ†∏ÂøÉËΩ¨Ë¥¶Êï∞ÊçÆ „ÄÇÁúüÂÆû‰ΩôÈ¢ù=current_amt-lock_amt&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Âõæ‰∏≠ÁöÑÊ≠•È™§Â§ßËá¥ÂàÜ‰∏∫8Ê≠•ÔºåËøôÈáåÁªÜËá¥ËÆ≤‰∏Ä‰∏ãÊØè‰∏ÄÊ≠•ÁöÑËØ¶ÁªÜÊ≠•È™§ÔºåÂàÜÂà´ÊòØÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ÊèíÂÖ•ÂàùÂßãÁä∂ÊÄÅÁöÑ‰∫§ÊòìÊï∞ÊçÆ„ÄÇ Ëøô‰∏ÄÊ≠•È™§ÁöÑÁõÆÁöÑÊòØ‰øùËØÅÂèëËµ∑ÂêåÊ≠•ËΩ¨Ë¥¶ËØ∑Ê±ÇÂíåÊú¨Âú∞ÂàùÂßã‰∫ãÂä°‰∏ÄËá¥ÊÄßÔºåËøòÊúâ‰∏Ä‰∏™ÁõÆÁöÑÂ∞±ÊòØÁîüÊàêËΩ¨Ë¥¶ËÆ∞ÂΩïÂîØ‰∏ÄÊ†áËØÜÔºåÁî®Êù•Ê†áËØÜÊú¨Ê¨°ËΩ¨Ë¥¶&lt;/li&gt;
&lt;li&gt;ÂêåÊ≠•ÂèëËµ∑ËΩ¨Ë¥¶ËØ∑Ê±ÇÔºåÂ∏¶‰∏äÂîØ‰∏ÄÊ†áËØÜ‰ª•ÂèäÂÖ∂‰ªñÁöÑ‰∏öÂä°ÂèÇÊï∞&lt;/li&gt;
&lt;li&gt;Èì∂Ë°å‰πô‰ºöÊ†°È™åÂèÇÊï∞‰ø°ÊÅØÔºåÂπ∂‰∏îÂêåÊ≠•ËøîÂõûËΩ¨Ë¥¶ÈÄöÁü•ÔºåÁ±ª‰ºº‚ÄúÊàëÊé•Êî∂Âà∞‰∫Ü‰Ω†ÁöÑËØ∑Ê±Ç‰∫ÜÔºåÊàëËøòÊúâÂÖ∂‰ªñ‰∫ãÊÉÖÔºåÊàëÁ≠â‰ºöËøîÂõûÁªìÊûúÁªô‰Ω†‚Äù&lt;/li&gt;
&lt;li&gt;‰ºöÊ†πÊçÆÂêåÊ≠•ÁöÑËΩ¨Ë¥¶ÈÄöÁü•Êù•Âà§Êñ≠ËøôÊ¨°‰∫§ÊòìÊòØÂê¶ÂêàÊ≥ïÔºåÁÑ∂Âêé‰ºöËÆ∞ÂΩïÁªìÊûúÂà∞‰∫§ÊòìË°®‰∏≠„ÄÇËøôÈáåÂπ∂‰∏îÈúÄË¶ÅÂÜªÁªìË¥¶Êà∑ÁöÑ‰∏ÄÈÉ®ÂàÜÈáëÈ¢ùÔºå‰Ωú‰∏∫‰∏¥Êó∂‰∏≠Èó¥ÊÄÅÊï∞ÊçÆ„ÄÇÂπ∂‰∏îÈúÄË¶ÅÊõ¥Êñ∞Êú¨Âú∞‰∫§ÊòìË°®Áä∂ÊÄÅ‰∏∫ËΩ¨Ë¥¶‰∏≠&lt;/li&gt;
&lt;li&gt;Èì∂Ë°å‰πôÈúÄË¶ÅËÆ∞ÂΩïÊú¨Ê¨°‰∫§ÊòìËÆ∞ÂΩïÔºåÊèíÂÖ•‰∏ÄÊù°‰∫§Êòì‰∏≠ÁöÑÊï∞ÊçÆÔºåÁõ¥Ëá≥ÂõûË∞ÉËΩ¨Ë¥¶ÁªìÊûúÁªôÈì∂Ë°åÁî≤ÔºåÂ∞ÜËøôÊù°ËÆ∞ÂΩïÁΩÆ‰∏∫ËΩ¨Ë¥¶ÊàêÂäü„ÄÇÂπ∂‰∏îÈì∂Ë°å‰πôËá™Â∑±ÁîüÊàêÁöÑÊî∂Ê¨æ‰∫§ÊòìÊµÅÂè∑ÔºåÁÑ∂ÂêéÊîæÂÖ•Âà∞ÂõûË∞ÉÁªìÊûú‰∏≠Ôºå‰º†ÁªôÈì∂Ë°åÁî≤&lt;/li&gt;
&lt;li&gt;ÂºÇÊ≠•ÂõûË∞ÉÁªìÊûúÁªôÈì∂Ë°åÁî≤ÔºåÂÖ∂‰∏≠ÂõûË∞ÉÂèÇÊï∞ÈáçË¶ÅÁöÑÊúâÈì∂Ë°åÁî≤ÁöÑÂîØ‰∏ÄÁöÑËΩ¨Ë¥¶Ê†áËØÜÔºåËøòÊúâÈì∂Ë°å‰πôËá™Â∑±ÁîüÊàêÁöÑÊî∂Ê¨æ‰∫§ÊòìÊµÅÂè∑&lt;/li&gt;
&lt;li&gt;Ê†πÊçÆÂºÇÊ≠•ÂõûË∞ÉÁöÑÁä∂ÊÄÅÔºåÊõ¥Êñ∞‰∫§ÊòìÁä∂ÊÄÅÊï∞ÊçÆÔºåÂ¶ÇÊûúÊàêÂäüÔºåÈÇ£‰πà‰ºöÊâ£ÂáèË¥¶‰ΩôÈ¢ùÔºåÂπ∂‰∏îÈáäÊîæÂÜªÁªìÈáëÈ¢ùÔºåÂ¶ÇÊûúÂ§±Ë¥•ÔºåÁõ¥Êé•ÈáäÊîæÂÜªÁªìÈáëÈ¢ù„ÄÇÊ≠§Êó∂ÁÆóÊòØÊ≠£Â∏∏ÁöÑ‰∏ÄÊù°&lt;strong&gt;ÊµÅÁ®ãÈó≠ÁéØ&lt;/strong&gt;Ëµ∞ÂÆå&lt;/li&gt;
&lt;li&gt;ÂΩìÁÑ∂‰∏çÊòØÊâÄÊúâÁöÑ‰∏öÂä°ËÉΩÂ§üÊ≠£Â∏∏Ëµ∞ÂÆåÊµÅÁ®ãÈó≠ÁéØÔºå‰πü‰ºöÂá∫Áé∞ÂêÑÁßçÂéüÂõ†ÂØºËá¥‰∏çËÉΩËµ∞ÂÆå„ÄÇ‰∏∫‰∫Ü‰øùËØÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÔºå‰ºöÂ¢ûÂä†‰∏Ä‰∏™Ë°•ÂÅøÁ®ãÂ∫èÔºåÂÆöÊó∂ÂéªÊãâÂèñÂºÇÂ∏∏Êï∞ÊçÆÔºåÂºÇÂ∏∏Êï∞ÊçÆÊåáÁöÑÊòØ‰∫§ÊòìÁä∂ÊÄÅ‰∏∫0Âíå1Âπ∂‰∏î&lt;strong&gt;‰∏çÂú®Ê≠£Â∏∏Á™óÂè£‰∏öÂä°&lt;/strong&gt;Êó∂Èó¥ÂÜÖÁöÑÊï∞ÊçÆÔºà0Âíå1Â±û‰∫é‰∏≠Èó¥ÊÄÅÔºåËÄå2ÊàñËÄÖ3Êï∞ÊçÆÁªàÊÄÅÔºâÔºåÁ™óÂè£Êó∂Èó¥ÊåáÁöÑÊòØÊ≠£Â∏∏‰∏öÂä°‰ªéÂºÄÂßãÂà∞ÁªìÊùüÁöÑÊó∂Èó¥„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Â¶ÇÊûúÂºÇÂ∏∏Êï∞ÊçÆÁä∂ÊÄÅÊòØ0ÔºåÈÇ£‰πàË°®Á§∫ÊúâÂèØËÉΩÊòØÊú¨Âú∞Êõ¥Êñ∞‰∫ãÂä°Â§±Ë¥•‰∫ÜÔºå‰πüÊúâÂèØËÉΩÊòØËØ∑Ê±ÇÊàñËÄÖËøîÂõûÂú®ÁΩëÁªú‰∏≠‰∏¢Â§±‰∫ÜÔºåË°•ÂÅøÁ®ãÂ∫èÈáåÈù¢‰ºöÊ†πÊçÆÊú¨Âú∞ÁöÑË°®Êï∞ÊçÆÂà§Êñ≠ÊòØÂì™‰∏™Ê≠•È™§Èô§ÈóÆÈ¢ò‰∫ÜÔºåÂ∞±ÊØîÂ¶ÇËØ¥Êú¨Âú∞Êï∞ÊçÆÊ≤°ÊúâÈì∂Ë°å‰πôÁöÑ‰∫§ÊòìÊµÅÊ∞¥Âè∑ÔºåÈÇ£‰πàÂ∞±ÊòØÁΩëÁªúÂá∫ÈóÆÈ¢ò‰∫ÜÔºåÂêéÈù¢Â∞±ÂèØ‰ª•ËøõË°åË°•ÂÅøÊìç‰Ωú&lt;/li&gt;
&lt;li&gt;Â¶ÇÊûúÂºÇÂ∏∏Êï∞ÊçÆÁä∂ÊÄÅÊòØ1ÔºåÈÇ£‰πàË°®Á§∫ÂèØËÉΩÊòØÈì∂Ë°å‰πôÊé•Âè£ÊúâÈóÆÈ¢òÊàñËÄÖÁΩëÁªúÊúâÈóÆÈ¢òÂéüÂõ†ÂØºËá¥Ê≤°ÊúâÂèäÊó∂ÂõûË∞ÉÔºåËøô‰∏™Êó∂ÂÄôË°•ÂÅøÁ®ãÂ∫èÂ∞±Áî®Èì∂Ë°å‰πôÁöÑ‰∫§ÊòìÊµÅÊ∞¥Âè∑ÊòØÂéªÊü•ËØ¢‰∫§ÊòìÊòØÂê¶ÂÆåÊàêÔºåÁÑ∂ÂêéÊõ¥Êñ∞Ëá™Â∑±Êú¨Âú∞ÁöÑÊï∞ÊçÆ„ÄÇ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;‰ª•‰∏äÊµÅÁ®ãÊòØ‰∏ÄÊ¨°Ê≠£Â∏∏ÁöÑ‰∫§ÊòìËøáÁ®ãÔºåÂΩìÁÑ∂‰∏çÊòØÊâÄÊúâÁöÑ‰∫§ÊòìÊµÅÁ®ãÈÉΩÊòØËøôÊ†∑Ëµ∞ÁöÑÔºå‰∏çËøáÂ§ßÈÉ®ÂàÜËΩ¨Ë¥¶ÊµÅÁ®ãÂíå‰∏äËø∞Ê≠•È™§Áõ∏Á±ª‰ººÔºåÂÖ∂‰∏≠ÁöÑÁªÜËá¥Ê≠•È™§Âú®ÊØè‰∏™‰∫§ÊòìÁ≥ªÁªü‰∏≠Áï•Êúâ‰∏çÂêå„ÄÇ&lt;/p&gt;
&lt;p&gt;ÊÄªÁªìËµ∑Êù•ÔºåÂà©Áî®Êú¨Âú∞Ê∂àÊÅØË°®ÊÄùÊÉ≥ËÉΩÂ§üËß£ÂÜ≥‰∏äÈù¢Á¨¨‰∏ÄÈÉ®ÂàÜÊñáÁ´†ÁöÑÂêåÊ≠•Ë∞ÉÁî®ÁöÑÁº∫ÁÇπÔºåËÉΩÂ§üËß£ÂÜ≥Á¨¨‰∫å‰∏™Á¨¨‰∏â ‰∏™ÈóÆÈ¢òÔºå‰ΩÜÊòØÁ¨¨‰∏Ä‰∏™ÈóÆÈ¢òÂ∞±Êó†Ê≥ïËß£ÂÜ≥‰∫ÜÔºåÂè™Ë¶ÅÊòØÂêåÊ≠•Ë∞ÉÁî®ÈÉΩ‰ºöÂá∫Áé∞Ëøô‰∏™ÈóÆÈ¢òÔºå‰∏çËøáÊúâÂÖ∂‰ªñÊñπÂºèÂéªËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ‰ª•Á¨îËÄÖËÆ§Áü•Êù•ËØ¥ÔºåÈì∂Ë°åËΩ¨Ë¥¶ÁöÑ‰∏öÂä°ÈÉΩÊòØÂêåÊ≠•Ë∞ÉÁî®ÁöÑ„ÄÇÂá∫Áé∞Êé•Âè£ÈòªÂ°ûËøô‰∏™ÈóÆÈ¢òÔºåÈúÄË¶ÅËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥ÔºåÂ¶ÇÊûúË∂ÖËøáË∂ÖÊó∂Êó∂Èó¥ÔºåÂ∞±ËÆ∞ÂΩï‰∏ãËøôÊù°‰∫§ÊòìÔºåÂºÇÊ≠•ÊîæÂÖ•&lt;strong&gt;ÈáçËØïÈòüÂàó&lt;/strong&gt;Ôºå‰∏ÄÊÆµÊó∂Èó¥ÂêéËøõË°å&lt;strong&gt;ÈáçËØï&lt;/strong&gt;„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;22-‰∫ãÂä°Ê∂àÊÅØËß£ÂÜ≥Êú¨Âú∞‰∫ãÂä°ÂíåmqÊ∂àÊÅØ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò&#34;&gt;2.2 ‰∫ãÂä°Ê∂àÊÅØËß£ÂÜ≥Êú¨Âú∞‰∫ãÂä°ÂíåMQÊ∂àÊÅØ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò&lt;/h3&gt;
&lt;p&gt;‚ÄÉËΩ¨Ë¥¶‰∏öÂä°ÔºåÂ¶ÇÊûúÁî®ÂºÇÊ≠•ÁöÑËØùÔºåÂΩìÂá∫Áé∞MQÈóÆÈ¢òÊàñËÄÖÊ∂àË¥π‰πüËÄÖÁ®ãÂ∫èÂá∫Áé∞Ê∂àÊÅØÊå§ÂéãÊàñËÄÖÊ∂àË¥πËÄÖÁ´ØÂá∫Áé∞ÈóÆÈ¢ò ÁöÑËØùÔºåÈÇ£‰πàÊï¥‰∏™‰∏öÂä°Êó∂Èó¥Á∫ø‰ºöÊãâÁöÑÈùûÂ∏∏Èïø„ÄÇÊâÄ‰ª•Á¨îËÄÖËÆ§‰∏∫ÂºÇÊ≠•‰∏çÈÄÇÂêàËøôÁßç‰∏öÂä°ÔºåÂºÇÊ≠•&lt;strong&gt;Êú¨Ë¥®‰∏ä&lt;/strong&gt;ÊòØÂØπ‰∏ãÊ∏∏ÊúçÂä°ÁöÑ‰∏Ä‰∏™ÁºìÂÜ≤ÔºåÈÄÇÂêàÂú®Ëá™Â∑±Á≥ªÁªü‰∏≠‰ΩøÁî®Ôºå‰∏çÈÄÇÂêàË∑®Á≥ªÁªüÊàñËÄÖ‰∏âÊñπË∞ÉÁî®„ÄÇÂΩìÁÑ∂‰∏çÊòØÊâÄÊúâÁöÑÂú∫ÊôØÈÉΩ‰∏çÂêàÈÄÇÔºåÂ¶ÇÊûúÊµÅÈáèÈùûÂ∏∏Â§ßËØùÔºåÂØπÊñπÁ≥ªÁªüÊúâÈôêÊµÅÊú∫Âà∂Ôºå‰ΩøÁî®MQ‰πüÁÆóÊòØ‰∏ÄÁßçËß£ÂÜ≥ÊñπÊ°àÔºåËøôËøòÊòØÁúãÂÖ∑‰Ωì‰∏öÂä°„ÄÇ&lt;/p&gt;
&lt;p&gt;‚ÄÉ‰ªÄ‰πàÊ†∑ÁöÑÂú∫ÊôØÈÄÇÂêà‰ΩøÁî®MQÔºü‰∏ÄËà¨Êù•ËØ¥Âú®ÈúÄË¶ÅÈôêÊµÅÂâäÂ≥∞„ÄÅÂºÇÊ≠•Ëß£ËÄ¶Á≠âÂú∫ÊôØ‰ΩøÁî®ÔºåÊâÄ‰ª•ËøòÊòØÊãø‰∏äÈù¢ÁöÑÂõæÔºåÂõæ‰∏≠Ê†áÊ°ÜÁöÑÈÉ®ÂàÜ‰∏öÂä°ÈÄÇÂêàÁî®MQÊù•Ëß£ÂÜ≥&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1603790962781.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;‚ÄÉÂ¶ÇÊûúÁî®MQÊù•ÂÅöÁöÑËØùÔºåÈÇ£‰πà‰ºöÊúâÂ¶Ç‰∏ãÂõæÊ≠•È™§Ôºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1603792233049.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
Âõæ‰∏≠ÁöÑÊ≠•È™§Â§ßËá¥ÂàÜ‰∏∫6Ê≠•ÔºåËøôÈáåÁªÜËá¥ËÆ≤‰∏Ä‰∏ãÊØè‰∏ÄÊ≠•ÁöÑËØ¶ÁªÜÊ≠•È™§ÔºåÂàÜÂà´ÊòØÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Ê∂àÊÅØÁîüÊàêËÄÖÂèëÈÄÅÊ∂àÊÅØÔºåbrokerÊé•ÂèóÊ∂àÊÅØ&lt;/li&gt;
&lt;li&gt;MQ brokerÊî∂Âà∞Ê∂àÊÅØÔºåÈöèÂç≥Â∞ÜÊ∂àÊÅØËøõË°åÊåÅ‰πÖÂåñÔºåÂπ∂‰∏îÂ≠òÂÖ•Â∫ì„ÄÇËøô‰∏ÄÊ≠•ÊòØÈò≤Ê≠¢MQÂõ†‰∏∫Áâ©ÁêÜÂéüÂõ†ÂÆïÊú∫ÂØºËá¥ÁöÑÊ∂àÊÅØ‰∏¢Â§±ÔºåÂπ∂‰∏îÂÖ•Â∫ìÁöÑÊó∂ÂÄôË¶ÅÂà§Êñ≠ÂπÇÁ≠âÔºåÈò≤Ê≠¢Ê≤°ÊúâÂèäÊó∂ËøîÂõûackÔºåÂØºËá¥Áîü‰∫ßËÄÖÈáçÂèëÊ∂àÊÅØ„ÄÇ&lt;/li&gt;
&lt;li&gt;ËøîÂõûACKÁªôÁîü‰∫ßËÄÖ„ÄÇÂ¶ÇÊûú‰∏çÂèäÊó∂ËøîÂõûÊàñËÄÖÈïøÊó∂Èó¥Ê≤°ÊúâËøîÂõûÔºåÁîü‰∫ßËÄÖ‰ºöËÆ§‰∏∫ËøôÊù°Ê∂àÊÅØÂèëÈÄÅÂ§±Ë¥•Ôºå‰ºöÈáçÊñ∞ÂèëÈÄÅ„ÄÇ&lt;/li&gt;
&lt;li&gt;MQ pushÊ∂àÊÅØÁªôÂØπÂ∫îÁöÑÊ∂àË¥πËÄÖÊàñËÄÖÊ∂àË¥πËÄÖ‰∏ªÂä®Êù•pullÊ∂àÊÅØÔºåÁÑ∂ÂêéÁ≠âÂæÖÊ∂àË¥πËÄÖËøîÂõûACK&lt;/li&gt;
&lt;li&gt;Â¶ÇÊûúÊ∂àÊÅØÊ∂àË¥πËÄÖÂú®ÊåáÂÆöÊó∂Èó¥ÂÜÖÊàêÂäüËøîÂõûackÔºåÈÇ£‰πàMQËÆ§‰∏∫Ê∂àÊÅØÊ∂àË¥πÊàêÂäüÔºåÂú®Â≠òÂÇ®‰∏≠Âà†Èô§Ê∂àÊÅØÔºåÂç≥ÊâßË°åÁ¨¨6Ê≠•ÔºõÂ¶ÇÊûúMQÂú®ÊåáÂÆöÊó∂Èó¥ÂÜÖÊ≤°ÊúâÊî∂Âà∞ACKÔºåÂàôËÆ§‰∏∫Ê∂àÊÅØÊ∂àË¥πÂ§±Ë¥•Ôºå‰ºöÂ∞ùËØïÈáçÊñ∞pushÊàñËÄÖpullÊ∂àÊÅØ,ÈáçÂ§çÊâßË°å4„ÄÅ5„ÄÅ6Ê≠•È™§&lt;/li&gt;
&lt;li&gt;MQÂà†Èô§Ê∂àÊÅØ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;‚ÄÉ‰ª•‰∏ä‰∏∫‰∏ÄÊù°Ê≠£Â∏∏ÁöÑÊ∂àÊÅØ‰ªéÁîü‰∫ßÂà∞Ê∂àË¥πÁöÑËøáÁ®ãÔºåÊØè‰∏ÄÊ≠•ÈÉΩÊòØ‰∏çÂèØÊàñÁº∫ÁöÑ„ÄÇËÄå‰∏îÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåÂΩìÂºïÂÖ•‰∏≠Èó¥‰ª∂MQÂêéÔºåÊ∂àË¥πÁ´Ø‰∏öÂä°ÈúÄË¶Å‰øùÊåÅÂπÇÁ≠â„ÄÇ&lt;/p&gt;
&lt;p&gt;‚ÄÉÂõûÂà∞‰∏äÈù¢ÊñáÁ´†ÊúÄÂºÄÂßãÁöÑÈÉ®ÂàÜÔºåÂπ∂Ê≤°ÊúâËß£ÂÜ≥ÂºÇÊ≠•Ë∞ÉÁî®ÈóÆÈ¢ò‰∏Ä„ÄÇÊ≤°ÊúâÂΩªÂ∫ïËß£ÂÜ≥Êú¨Âú∞‰∫ãÂä°ÂíåÊ∂àÊÅØ‰∏ç‰∏ÄËá¥ÊÄß„ÄÇÊâÄ‰ª•Ëøô‰∏™Êó∂ÂÄôÔºåÂ∞±ÈúÄË¶Å‰∫ãÂä°Ê∂àÊÅØËß£ÂÜ≥Êú¨Âú∞‰∫ãÂä°ÂíåMQÊ∂àÊÅØ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò‰∫ÜÔºåÁ¨îËÄÖÈáçÊñ∞Áîª‰∫Ü‰∏ÄÂº†ÂõæÊù•ËØ¥Êòé‰∏Ä‰∏ã‰∫ãÂä°Ê∂àÊÅØÊòØÂ¶Ç‰ΩïÂÅöÁöÑÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1603873494446.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
Âõæ‰∏≠ÁöÑÊ≠•È™§Â§ßËá¥ÂàÜ‰∏∫Âá†Ê≠•ÔºåÂàÜÂà´ÊòØÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Áîü‰∫ßËÄÖÂèëÈÄÅ‰∏ÄÊù°prepareÊ∂àÊÅØ&lt;/li&gt;
&lt;li&gt;MQÊé•ÂèóÂà∞Ê∂àÊÅØÂêéÔºåÂÖàËøõË°åÊåÅ‰πÖÂåñ,Áä∂ÊÄÅ‰∏∫ÂæÖÁ°ÆËÆ§ÁöÑÊ∂àÊÅØ&lt;/li&gt;
&lt;li&gt;ËøîÂõûACKÁªôÊ∂àÊÅØÁîü‰∫ßËÄÖ&lt;/li&gt;
&lt;li&gt;ÊâßË°åÊú¨Âú∞‰∫ãÂä°ÔºöÊâ£ÂáèË¥¶Êà∑‰ΩôÈ¢ùÔºåÊèíÂÖ•‰∫§ÊòìÊµÅÊ∞¥„ÄÇÂ¶ÇÊûúËøô‰∏™‰∫ãÂä°ÊâßË°åÂ§±Ë¥•ÔºåÈÇ£‰πàÁõ∏ÂΩì‰∫é‰∏öÂä°ÊâßË°åÂ§±Ë¥•ÔºåÊäõÁªôÁî®Êà∑‰∫§ÊòìÂ§±Ë¥•&lt;/li&gt;
&lt;li&gt;ÊâßË°åÂÆåÊàêÂêéÔºåÂ∞ÜÁªìÊûúÂèëÈÄÅÊâßË°åÁªìÊûúÁªôMQ&lt;/li&gt;
&lt;li&gt;Ê†πÊçÆÁªìÊûúÂ∞ÜÊ∂àÊÅØcommitÊàñËÄÖrollback  commitÔºöÂ∞ÜÊ∂àÊÅØÁä∂ÊÄÅÁΩÆ‰∏∫Â∑≤Á°ÆËÆ§  rollbackÔºöÂ∞ÜÊ∂àÊÅØÂà†Èô§&lt;/li&gt;
&lt;li&gt;ÈááÁî®pullÊàñËÄÖpushÊ∂àË¥πÂ∑≤Á°ÆËÆ§ÁöÑÊ∂àÊÅØ ÔºåÂêéÈù¢ÊµÅÁ®ãÂ§ßËá¥ÂíåÊôÆÈÄöÁöÑÊµÅÁ®ãÈÉΩ‰∏ÄÊ†∑&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;‚ÄÉËøôÈáåËøòÊ≤°Êúâ‰ΩìÁé∞Âè¶Â§ñ‰∏Ä‰∏™ÊµÅÁ®ãÔºåÂ∞±ÊòØÂ¶ÇÊûúÊ∂àÊÅØÂæÖÁ°ÆËÆ§Áä∂ÊÄÅÂú®‰∏ÄÂÆöÊó∂Èó¥ÂÜÖÊ≤°ÊúâËΩ¨Êç¢‰∏∫Â∑≤Á°ÆËÆ§ÔºåÈÇ£‰πàMQ‰ºöÂõûÊü•Êú¨Âú∞‰∫ãÂä°ÊâßË°åÁä∂ÊÄÅÊòØÂê¶ÊàêÂäü„ÄÇËøô‰∏™ÊòØ‰∏∫‰∫Ü‰øùËØÅÂú®Á¨¨‰∫îÊ≠•ÂèëÈÄÅÁöÑÊ∂àÊÅØÂú®ÁΩëÁªú‰∏≠‰∏¢Â§±ÊàñËÄÖÊ∂àË¥πËÄÖÂÆïÊú∫Á≠âÊÉÖÂÜµ‰∏ãÔºåËÉΩÂ§üÂõûÊªö„ÄÇ&lt;br&gt;
‚ÄÉ‰ª•‰∏äÊòØ‰∫ãÂä°Ê∂àÊÅØÂ§ßËá¥ÁöÑÊµÅÁ®ãÔºåËÉΩÂ§üËß£ÂÜ≥Êú¨Âú∞‰∫ãÂä°ÂíåMQÊ∂àÊÅØ‰∏ÄËá¥ÊÄßÈóÆÈ¢òÔºåËøôÈáåÂº∫Ë∞ÉÁöÑÊòØÔºå‰∏çÁÆ°ÊòØÊòØ‰∫ãÂä°Ê∂àÊÅØËøòÊòØÊôÆÈÄöÁöÑÊ∂àÊÅØÔºåÊ∂àË¥πÁ´ØÈÉΩÈúÄË¶ÅÂÅöÂπÇÁ≠âÂ§ÑÁêÜ„ÄÇ&lt;br&gt;
‚ÄÉÊÄªÁªìÊù•ËØ¥Ôºå&lt;strong&gt;ack+Ë°•ÂÅø+ÈáçËØï+ÂπÇÁ≠â&lt;/strong&gt;ÊòØ‰øùËØÅ‰∏ÄËá¥ÊÄßÁöÑÂÖ≥ÈîÆ„ÄÇ&lt;/p&gt;
&lt;h4 id=&#34;221-‰∫ãÂä°Ê∂àÊÅØÂ∏∏ËßÅÈóÆÈ¢ò&#34;&gt;2.2.1 ‰∫ãÂä°Ê∂àÊÅØÂ∏∏ËßÅÈóÆÈ¢ò&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;Â¶ÇÊûúconsumerÊ∂àË¥πÂ§±Ë¥•ÔºåÊòØÂê¶ÈúÄË¶ÅproducerÂÅöÂõûÊªöÂë¢Ôºü&lt;br&gt;
‰∏çÈúÄË¶ÅÔºåMQ‰ΩúÁî®Ë¶Å‰øùËØÅÁöÑÂ∞±ÊòØ&lt;strong&gt;ÊúÄÁªà‰∏ÄËá¥ÊÄß&lt;/strong&gt;ÔºåÂ¶ÇÊûúconsumerÊ∂àË¥πÂ§±Ë¥•ÔºåÂ∞±ËÆ©ÂÆÉËøõË°åÈáçËØïÁõ¥Ëá≥ÊàêÂäü„ÄÇÂ¶ÇÊûúÈáçËØïË∂ÖËøá‰∏ÄÂÆöÊ¨°Êï∞ÁöÑËØùÔºåÈÇ£‰πàÂ∞±‰∫∫Â∑•‰ªãÂÖ•„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;‰∏â-ÂÖ∂‰ªñÊñπÂºè‰øùËØÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄß&#34;&gt;‰∏â„ÄÅ ÂÖ∂‰ªñÊñπÂºè‰øùËØÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄß&lt;/h2&gt;
&lt;p&gt;‚ÄÉÂΩìÁÑ∂Ôºå‰øùÊåÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄß‰∏çÂÖâÊòØÂàÜÂ∏ÉÂºè‰∫ãÂä°Êù•‰øùËØÅÔºå‰∏öÂä°‰∏äËøòË¶ÅÈÖçÂêàÂÖ∂‰ªñÁöÑËæÖÂä©Êù•‰øùËØÅÔºåËøôÈáåÁ¨îËÄÖÂ∞±Âàó‰∏æÂá†Áßç&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ÂÖ®ÈìæË∑ØÂπÇÁ≠â&lt;br&gt;
ÂÖ®ÈìæË∑ØÂπÇÁ≠â‰øùËØÅ‰∏ç‰∫ßÁîüËÑèÊï∞ÊçÆÔºå‰øùÊä§Ê†∏ÂøÉÊµÅÁ®ãÊ≠£Â∏∏ÊâßË°å„ÄÇ&lt;/li&gt;
&lt;li&gt;ÈáçËØïÊú∫Âà∂&lt;br&gt;
ÂØπÂºÇÂ∏∏‰∏öÂä°ËøõË°åÈáçËØïÔºåË∂ÖËøáÊåáÂÆöÈáçËØïÊ¨°Êï∞‰ªçÂ§±Ë¥•ÁöÑËøõË°å‰∫∫Â∑•‰ªãÂÖ•„ÄÇ&lt;/li&gt;
&lt;li&gt;‰∏öÂä°ÂØπË¥¶&lt;br&gt;
‰∏öÂä°ÂÜÖÈÉ®ÂáÜÂÆûÊó∂ÂØπË¥¶ÔºåÊØîÂ¶Ç‰∏öÂä°ÂèëÁîüÂêéÂÖÖÂÄºÊèêÁé∞ÔºåÂØπÊØîÁî®Êà∑‰ΩôÈ¢ùÊòØÂê¶Ê≠£Á°ÆÔºåÁî®Êà∑‰∏öÂä°ÊµÅÊ∞¥ÊòØÂê¶Ê≠£Á°Æ„ÄÇ&lt;br&gt;
T+1Êó•ÂØπË¥¶ÔºåÁ®ãÂ∫èÊàñËÄÖ‰∫∫Â∑•ÂÆöÊó∂Êâ´ÊèèÊ†∏ÂøÉ‰∏öÂä°Êï∞ÊçÆÔºå‰øùËØÅÂΩìÊó•Êï∞ÊçÆÂáÜÁ°Æ„ÄÇÂØπË¥¶ÂêéËá™Âä®Ê£ÄÊµãÂπ∂‰∏î‰øÆÂ§çÈáçËØï‰∏öÂä°&lt;/li&gt;
&lt;li&gt;‰∏öÂä°ÊåáÊ†áÁõëÊéß&lt;br&gt;
ÁõëÊéßÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑËÆ¢ÂçïÈ¢ÑÂç†ËµÑÈáëÊ≤°ÊúâÈáäÊîæÔºåÁä∂ÊÄÅÊú∫ÊòØ‰∏çÊòØÊúÄÁªàÊÄÅÁõëÊéßÔºåÂçï‰ΩçÁ™óÂè£Êó∂Èó¥ÂÜÖ‰∏öÂä°Áä∂ÊÄÅÊòØÂê¶ÂºÇÂ∏∏ÔºåË¥¶Êà∑‰∏≠ÁöÑÈ¢ÑÊâ£ÂáèÈáëÈ¢ùÊòØÂê¶ÈáäÊîæÔºå‰∏öÂä°ÈáçËØïÊ¨°Êï∞ÊòØÂê¶Ë∂ÖËøáÈòàÂÄºÁ≠âÁ≠â‰∏öÂä°ÁõëÊéß„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;Âõõ-ÊÄªÁªì&#34;&gt;Âõõ„ÄÅÊÄªÁªì&lt;/h2&gt;
&lt;p&gt;‚ÄÉÂàÜÂ∏ÉÂºèÂú∫ÊôØÔºåË¶ÅÁî®ÂàÜÂ∏ÉÂºèÁöÑÊÄùÁª¥ÂéªÊÄùËÄÉÈóÆÈ¢ò„ÄÇË¶ÅËÄÉËôë‰ªª‰ΩïÁöÑË∂ÖÊó∂ÔºåÊñ≠ÁîµÔºåÁª¥Êä§‰∏çÂêåÁâ©ÁêÜÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÁöÑÂèØËÉΩÂ≠òÂú®ÁöÑÁä∂ÊÄÅ‰∏ç‰∏ÄËá¥ÁöÑÂú∫ÊôØÔºåËØ¥ÁôΩ‰∫ÜË¶ÅÈù¢ÂêëÂ§±Ë¥•ÁºñÁ®ã„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;‰∫î-ÂèÇËÄÉ&#34;&gt;‰∫î„ÄÅÂèÇËÄÉ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ÊúâËµûÂá∫ÈáëÁ≥ªÁªü‚Äî‚Äîhttps://tech.youzan.com/build-a-withdraw-sys/&lt;/li&gt;
&lt;li&gt;ÂàÜÂ∏ÉÂºè‰∫ãÂä°ÁöÑÊÄùËÄÉ‚Äî‚Äîhttps://www.cnblogs.com/sujing/p/11006424.html&lt;/li&gt;
&lt;li&gt;ÈòøÈáå‰∫ëRocketMQÊñáÊ°£‚Äî‚Äîhttps://help.aliyun.com/document_detail/43348.html&lt;/li&gt;
&lt;/ul&gt;
">ÈáëËûçÁ∫ß‰∏öÂä°‰∏ãÂàÜÂ∏ÉÂºè‰∫ãÂä°‰øùËØÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄß</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/er-jin-zhi-fan-zhuan/"" data-c="
          &lt;h4 id=&#34;È¢òÁõÆÊèèËø∞&#34;&gt;È¢òÁõÆÊèèËø∞&lt;/h4&gt;
&lt;p&gt;ÁªôÂÆö‰∏Ä‰∏™32‰ΩçÊï¥Êï∞ . ËæìÂá∫‰∫åËøõÂà∂Ë°®Á§∫ÂèçËΩ¨ÂêéÁöÑÂÄº.&lt;br&gt;
‰æãÂ¶Ç input 43261596Ôºà‰∫åËøõÂà∂ 00000010100101000001111010011100Ôºâ&lt;br&gt;
ËøîÂõû output 964176192Ôºà‰∫åËøõÂà∂ 00111001011110000010100101000000Ôºâ&lt;/p&gt;
&lt;p&gt;ÁõÆÂâçÁ¨îËÄÖÂ∞±ÊÉ≥Âà∞‰∫ÜÊó∂Èó¥Â§çÊùÇÂ∫¶Âú®O(N)ÁöÑËß£ÂÜ≥ÊÄùË∑ØÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Âæ™ÁéØÂà§Êñ≠ËæìÂÖ•Êï∞ÊçÆÁöÑ‰Ωé‰ΩçÊòØ0ËøòÊòØ1ÔºåÂÖ∑‰ΩìÂà§Êñ≠ÊñπÊ≥ïÊòØÂíå1ËøõË°å‰∏éÊìç‰Ωú&lt;/li&gt;
&lt;li&gt;Â¶ÇÊûúÂà§Êñ≠ÊòØÔºåËøîÂõûÁöÑÁªìÊûú+1Ôºå‰∏çÊòØ1ÈÇ£‰πà‰∏çÂÅö‰ªª‰ΩïÂ§ÑÁêÜ&lt;/li&gt;
&lt;li&gt;ÊØèÊ¨°Âæ™ÁéØÔºåinputÁöÑÊï∞ÊçÆÂêëÂ∑¶Áßª‰∏Ä‰ΩçÔºåoutputÊï∞ÊçÆÂêëÂè≥ÁßªÂä®‰∏Ä‰Ωç&lt;/li&gt;
&lt;li&gt;Âæ™ÁéØ32Ê¨°ÔºåËøîÂõûÁªìÊûú&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;/**
    *  ‰∫åËøõÂà∂Êï∞ÊçÆÂèçËΩ¨
    */
public class BitReverse {

    public static int reverse(int n) {
        int result = 0;
        for (int i = 0; i &amp;lt; 32; i++) {
            result = result &amp;lt;&amp;lt; 1;
            if ((n &amp;amp; 1) == 1) {
                result++;
            }
            n = n &amp;gt;&amp;gt; 1;
        }
        return result;
    }

    public static void main(String[] args){
        System.out.println(reverse(1&amp;lt;&amp;lt;30));
        System.out.println(1&amp;lt;&amp;lt;30);
    }
}
&lt;/code&gt;&lt;/pre&gt;
">O(N)Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏ãÔºå‰∫åËøõÂà∂ÂèçËΩ¨</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/guan-yu-xi-tong-xing-neng-ping-jing-yu-ce-he-xi-tong-xing-neng-you-hua/"" data-c="
          &lt;h3 id=&#34;ÂâçË®Ä&#34;&gt;ÂâçË®Ä&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ÂØπ‰∫é‰ªª‰ΩïÁ≥ªÁªüÔºåÈÉΩ‰ºöÂ≠òÂú®Á≥ªÁªüÊÄßËÉΩÁì∂È¢àÔºåËøôÈáåÁ¨îËÄÖ‰Ωú‰∏∫‰∏ÄÂêçJavaÂ∑•Á®ãÂ∏àÂàóÂá∫‰∫ÜËá™Â∑±Âú®Â∑•‰Ωú‰∏≠ÁöÑ‰ºòÂåñÊÄùË∑ØÔºå‰ªÖ‰æõÂèÇËÄÉ„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;‰∏Ä-Á≥ªÁªüÊÄßËÉΩÈ¢ÑÊµã&#34;&gt;‰∏Ä„ÄÅÁ≥ªÁªüÊÄßËÉΩÈ¢ÑÊµã&lt;/h2&gt;
&lt;p&gt;‚ÄÉ‰ªª‰Ωï‰∏Ä‰∏™Á≥ªÁªüÈÉΩÊòØ‰ªé0Âà∞1ÊÖ¢ÊÖ¢ÂèëÂ±ïÁöÑÔºåÂΩìÁ≥ªÁªü‰∏öÂä°ÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÔºå‰∏öÂä°ÈáèÂíåÊµÅÈáèÈöè‰πãÂ¢ûÂ§ßÔºåÁ≥ªÁªüÊÄßËÉΩÂ∞±ÈöèÁùÄÂá∏ÊòæÂá∫Êù•„ÄÇËøô‰∏™Êó∂ÂÄôÔºåÂºÄÂèë‰∫∫ÂëòÂíåÊû∂ÊûÑÂ∏àË¶Å‰ªéÊû∂ÊûÑÂ±ÇÈù¢„ÄÅ‰ª£Á†ÅÂ±ÇÈù¢„ÄÅ‰∫ßÂìÅ‰∏öÂä°Â±ÇÈù¢Á≠â‰∏Ä‰∏ÄÂéªÊºîËøõ‰∏öÂä°Á≥ªÁªüÊù•Áª¥ÊåÅÈ´òÊµÅÈáè‰∏ãÁ≥ªÁªüÁ®≥ÂÆöÊÄß„ÄÇ&lt;/p&gt;
&lt;p&gt;‚ÄÉÁé∞Âú®ÊúçÂä°ÈÉΩÊòØÂæÆÊúçÂä°ÈÉ®ÁΩ≤ÂºÄÂèëÔºåÂ¶ÇÊûúË¶ÅÊ®°ÊãüÊúçÂä°ÂéãÊµãÁöÑËØùË¶ÅÂú®Êú¨Âú∞ÂºÄÂêØÁõ∏ÂêåÁöÑÊúçÂä°ÔºåÂâçÊèêÊòØÊú∫Âô®ÈÖçÁΩÆÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇËÄå‰∏îÈúÄË¶ÅÂ∞ÜÁ∫ø‰∏äÁöÑÊåÅ‰πÖÂåñÊï∞ÊçÆÂêåÊ†∑copyÂà∞Êú¨Âú∞Êï∞ÊçÆÂ∫ì‰∏≠ÔºåËøôÊ†∑ÊâçËÉΩÁúüÊ≠£Ê®°ÊãüÁ∫ø‰∏äÁöÑÁéØÂ¢É„ÄÇÊãøÂçïÂè∞Êú∫Âô®ËøõË°åÂéãÊµãÔºåÂéãÊµãÁöÑÂØπË±°ÂèØ‰ª•ÊòØÊüê‰∏™Ê†∏ÂøÉÁöÑÊé•Âè£ÊàñËÄÖ‰∏öÂä°Ê®°ÂùóÔºàËøô‰∏™Êé•Âè£ÂèØ‰ª•ÊòØÊó•ÂøóÊúçÂä°‰∏≠ÁªüËÆ°ÁöÑËÆøÈóÆÈáèÊØîËæÉÈ´òÁöÑÂÖ∑‰ΩìÁöÑÊé•Âè£APIÔºâÔºåÂéãÊµãÁöÑÊåáÊ†áÂèØ‰ª•ÊòØÂêûÂêêÈáèÔºåÂπ≥ÂùáÂìçÂ∫îÊó∂Èó¥ÔºåÊúÄÂ§ßÂìçÂ∫îÊó∂Èó¥ÔºåTPSÔºåQPSÁ≠âÁ≠â„ÄÇ&lt;/p&gt;
&lt;p&gt;‚ÄÉÈÄöËøáÊÄßËÉΩÊåáÊ†áÂèØ‰ª•Â∫¶ÈáèÁõÆÂâçÂ≠òÂú®ÁöÑÊÄßËÉΩÈóÆÈ¢òÔºåÂêåÊó∂‰Ωú‰∏∫ÊÄßËÉΩ‰ºòÂåñÁöÑËØÑ‰º∞‰æùÊçÆ„ÄÇÂÖ∑‰ΩìÁöÑÊåáÊ†á‰∏ªË¶ÅÊòØË¶ÅÂàÜÊûêÁ≥ªÁªüÁöÑQPS„ÄÅTPS„ÄÅÂπ≥ÂùáÂìçÂ∫îÊó∂Èó¥‰ª•ÂèäÊúÄÂ§ßÂìçÂ∫îÊó∂Èó¥ÔºåÊàë‰ª¨È¢ÑÊµã‰∏Ä‰∏™Âçï‰ΩìÁöÑÂ∫îÁî®ËÉΩÂ§üÊâøÂèóÂ§öÂ∞ëÁöÑÂπ∂ÂèëÈáèÔºåÁúãËøôËøô‰∫õÊåáÊ†áÊòØÂê¶ËÉΩÂ§üËææÂà∞Êàë‰ª¨È¢ÑÊúüÁöÑÂÄºÔºåÊØîÂ¶Ç‰Ωú‰∏∫‰∏Ä‰∏™ÂÅ•Â∫∑ÁöÑÁ≥ªÁªüÔºåÊúÄÂ§ßÂìçÂ∫îÊó∂Èó¥‰∏çË∂ÖËøá1s„ÄÇÂêéÈù¢ËøõË°åÂéãÊµãÊó∂ÂÄôÔºåËßÇÂØüÊµÅÈáèÂ∑ÖÂ≥∞Êó∂ÂàªËßÇÂØüÁ≥ªÁªüÁöÑËøêË°åÊÉÖÂÜµ„ÄÇ‰ª•‰∏ãÂ∞±ÊÄßËÉΩÂàÜÊûê‰ºòÂåñÂ±ïÂºÄÊÄªÁªì„ÄÇ&lt;br&gt;
&lt;br&gt;&lt;/p&gt;
&lt;h2 id=&#34;‰∫å-Á≥ªÁªüÊÄßËÉΩÂàÜÊûê‰ºòÂåñ&#34;&gt;‰∫å„ÄÅÁ≥ªÁªüÊÄßËÉΩÂàÜÊûê‰ºòÂåñ&lt;/h2&gt;
&lt;h3 id=&#34;1-Á°¨‰ª∂ÊñπÈù¢&#34;&gt;1„ÄÅÁ°¨‰ª∂ÊñπÈù¢Ôºö&lt;/h3&gt;
&lt;h5 id=&#34;cpu&#34;&gt;CPUÔºö&lt;/h5&gt;
&lt;p&gt;‚ÄÉÂú®ÂéãÊµãÁöÑÊó∂ÂÄôËßÇÂØüCPUÁöÑÂç†Áî®ÊÉÖÂÜµÔºåÊòØÂê¶ÈïøÊúüÂ§Ñ‰∫é100%Áä∂ÊÄÅÔºåÊ≠£Â∏∏Êù•ËØ¥80%‰ª•‰∏ãÊòØÊ≠£Â∏∏ÁöÑ„ÄÇÂ¶ÇÊûúÈùûÂ∏∏‰ΩéÔºåÈÇ£‰πàËØ¥ÊòéÁ≥ªÁªü‰∏çÊòØÂú®ÂÅöIOÂØÜÈõÜÂûãËøêÁÆóÂä®‰ΩúÔºåÊÄßËÉΩÁì∂È¢àÊòØÂú®ÂÖ∂‰ªñÊñπÈù¢Ôºå‰∏çÊòØÂú®CPU‰∏äÈù¢ÔºåÂÖ∑‰ΩìÁöÑÊìç‰ΩúÊñπÊ≥ïÂèØ‰ª•Áî®topÂëΩ‰ª§Êü•Áúã„ÄÇ&lt;br&gt;
‚ÄÉ‰ª•Á¨îËÄÖÁªèÈ™åÊù•ÁúãÔºå‰∏ÄËà¨CPUÈ£ôÈ´òÁöÑÂéüÂõ†Êó†Èùû‰∏âÁßçÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Á¨¨‰∏ÄÁßçÂ∞±ÊòØ‰ª£Á†Å‰∏≠Â≠òÂú®Ê≠ªÂæ™ÁéØÔºåÂπ∂‰∏îÂæ™ÁéØ‰∏≠ÊúâÂ§ßÈáèÁöÑCPUËÆ°ÁÆóÊìç‰ΩúÔºõ&lt;/li&gt;
&lt;li&gt;Á¨¨‰∫åÁßçÂ∞±ÊòØÂ§öÁ∫øÁ®ãÂπ∂Âèë‰∏ãÔºåÁ´û‰∫âÁõ∏ÂêåÁöÑËµÑÊ∫êÂØºËá¥Â§ßÈáèÁ∫øÁ®ãËé∑Âèñ‰∏çÂà∞ËµÑÊ∫êÔºåÂ¶ÇÊûúÊ≠§Êó∂Á∫øÁ®ãËøõË°åËá™ÊóãÊìç‰ΩúÔºå‰∏çÈáäÊîæCPUËµÑÊ∫êÔºåÈÇ£Â∞±ÂØºËá¥CPUÈ£ôÂçáÔºõ&lt;/li&gt;
&lt;li&gt;Á¨¨‰∏âÁßçÂ∞±ÊòØ‰ª£Á†Å‰∏≠ÊúâÂÜÖÂ≠òÊ≥ÑÊºèÔºåÂØºËá¥ÂÜÖÂ≠ò‰∏ÄÁõ¥Â§Ñ‰∫éÈòàÂÄºÁä∂ÊÄÅÔºåGCÁ∫øÁ®ã‰ºöÊåÅÁª≠GCÔºåÂØºËá¥CPUÈ£ôÈ´ò„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;‚ÄÉ‰∏äÈù¢‰∏âÁßçÊÉÖÂÜµ‰∏≠Á¨¨‰∫åÁßçÂíåÁ¨¨‰∏âÁßçÊÉÖÂÜµÂú®Êó•Â∏∏ÂºÄÂèëÂ∑•‰Ωú‰∏≠‰ºöÈÅáÂà∞ÔºåÂØπ‰∫éÁ¨¨‰∫åÁßçÊÉÖÂÜµÂØπ‰∫éËá™ÊóãÈîÅÊÉÖÂÜµÔºå‰∏ÄËà¨‰ºöÁî®CAS‰πêËßÇÈîÅÂéªÂÆûÁé∞ÔºåÂπ∂‰∏îËÆæÁΩÆ‰∏ÄÂÆöÁöÑË∂ÖÊó∂Êó∂Èó¥ÂíåÈáçËØïÊ¨°Êï∞ÔºåÁÑ∂ÂêéËøîÂõûÂ§±Ë¥•ÊàñËÄÖËøõÂÖ•ÈòªÂ°ûÈòüÂàóÈáäÊîæCPUÂàÜÁâáÔºåÈò≤Ê≠¢Á∫øÁ®ã‰∏ÄÁõ¥Âç†Áî®CPUËµÑÊ∫ê„ÄÇ&lt;br&gt;
‚ÄÉÂØπ‰∫éÁ¨¨‰∏âÁßçÊÉÖÂÜµÔºåÂ∞±ÊòØ‰ª£Á†ÅÁöÑBUGÔºåÂºÄÂèëËøáÁ®ã‰∏≠Ë¶ÅÊ≥®ÊÑèÊ≥ÑÊºèÁöÑÈóÆÈ¢òÔºåÂ∞±ÊØîÂ¶ÇÂ§öÁ∫øÁ®ãÊìç‰ΩúÈìæË°®ÔºåÂ¶ÇÊûúÊ≤°ÊúâÂÅöÂêåÊ≠•ÁöÑÈîÅÔºåÈÇ£‰πàÂæàÊúâÂèØËÉΩÂØºËá¥ÈìæË°®ÁöÑÂºïÁî®ÊåáÈíàÊ∑∑‰π±ÔºåÂºïËµ∑ÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ&lt;br&gt;
‚ÄÉ‰ª•‰∏äÔºåÂ¶ÇÊûúÊàë‰ª¨ÂºÄÂèëÂ∑•‰Ωú‰∏≠ÈÅøÂÖç‰∫Ü‰∏äËø∞Âá†ÁßçÊÉÖÂÜµÔºåCPUÂ∞±ËÉΩÂ§üÂèëÊå•ÂÆÉÂ∫îËØ•ÊúâÁöÑËÉΩÂäõÔºåÊèêÂçáÁ≥ªÁªüÊÄßËÉΩ„ÄÇÂêåÊó∂ÔºåÂºÄÂèë‰∫∫ÂëòÂÅöÂ•ΩÁ°¨‰ª∂CPUÁõëÊéßÊòØÈùûÂ∏∏ÊúâÂøÖË¶ÅÁöÑ„ÄÇ&lt;/p&gt;
&lt;h5 id=&#34;ÂÜÖÂ≠ò&#34;&gt;ÂÜÖÂ≠òÔºö&lt;/h5&gt;
&lt;p&gt;‚ÄÉ Âú®Java‰∏≠ÔºåÂÜÖÂ≠òJVMÊòØ‰∏Ä‰∏™ÂæàÈáçË¶ÅÁöÑÊåáÊ†áÔºåËøô‰∏™ÂÖ≥‰πéÂà∞Á≥ªÁªüÊòØÂê¶ÂèØ‰ª•Á®≥ÂÆöËøêË°å„ÄÇÊàë‰ª¨ÂèØ‰ª•ÂÄüÂä©‰∏âÊñπÂ∑•ÂÖ∑ÂèØ‰ª•Êü•ÁúãÁ≥ªÁªüÁöÑJVMÂÜÖÂ≠òÁöÑËøêË°åÊÉÖÂÜµÔºåÁ¨îËÄÖÊèê‰æõÂá†‰∏™ÈÄöÁî®ÁöÑÈ¢ÑÊµãÂÜÖÂ≠òÁöÑËøêË°åÊÉÖÂÜµÁöÑÊÄùË∑ØÔºö&lt;br&gt;
- ÊØèÁßíÂç†Áî®Â§öÂ∞ëÂÜÖÂ≠òÔºü&lt;br&gt;
- Â§öÈïøÊó∂Èó¥Ëß¶Âèë‰∏ÄÊ¨°Minor GCÔºü&lt;br&gt;
- Â§öÈïøÊó∂Èó¥Ëß¶Âèë‰∏ÄÊ¨°Major GCÔºü&lt;br&gt;
- Minor  GCËÄóÊó∂Â§ö‰πÖÔºüMajor  GCËÄóÊó∂Â§ö‰πÖÔºü&lt;br&gt;
- ‰ºö‰∏ç‰ºöÈ¢ëÁπÅÂõ†‰∏∫SurvivorÊîæ‰∏ç‰∏ãÂØºËá¥ÂØπË±°ËøõÂÖ•ËÄÅÂπ¥‰ª£Ôºü&lt;/p&gt;
&lt;p&gt;Âú®Êó•Â∏∏ÂºÄÂèë‰∏≠ÔºåÂºÄÂèë‰∫∫ÂëòÈúÄË¶ÅÂÖ≥Ê≥®ÁöÑÂ∞±ÊòØÔºåÂà§Êñ≠Á≥ªÁªüJVMÊòØÂê¶ÊúâÈ¢ëÁπÅFULL GCÂíåÈ¢ëÁπÅYOUNG GCÔºåÂ¶ÇÊûúÊúâÔºåÈÇ£‰πà‰ºö‰∏•ÈáçÂΩ±ÂìçÁ≥ªÁªüÊÄßËÉΩ„ÄÇÁ¨îËÄÖÂ∞±Ëøô‰∏§‰∏™ÊñπÈù¢ÂéªÂàÜÊûê‰∏Ä‰∏ã&lt;br&gt;
‚ÄÉ‚ÄÉ 1„ÄÅ&lt;strong&gt;È¢ëÁπÅFULL GC&lt;/strong&gt; ÔºöÈ¶ñÂÖàÊàë‰ª¨Â∫îËØ•Ë¶Å‰∫ÜËß£Âà∞È¢ëÁπÅFULL GCÂç±ÂÆ≥Ôºå‰∏ÄËà¨ÁöÑ‰∏≠Â§ßÂûãÁ≥ªÁªüÔºåÁ≥ªÁªüÁöÑJVM‰ºöËÆæÁΩÆÂæàÂ§ßÔºåÊØîÂ¶Ç‰ºöÁªôÂ†ÜÂÜÖÂ≠òÂàÜÈÖç4~8GÁöÑÁ©∫Èó¥ÔºåÂõ†‰∏∫ÈÅçÂéÜÂØπË±°ÂõæÁöÑËøáÁ®ã‰∏≠Â†ÜË∂äÂ§ßÔºåÈÅçÂéÜÊó∂Èó¥Â∞±‰ºöÈïøÔºåËÄå‰∏îÂ¶ÇÊûúÂûÉÂúæË∂äÂ§öÔºåÂûÉÂúæÂõûÊî∂‰πü‰ºöÊãâÈïøÊï¥‰∏™GCÁöÑÊó∂Èó¥ÔºåËøôÂ∞±ÂØºËá¥ÊØè‰∏ÄÊ¨°FULL GC‰ºöÊúâÈïøÊó∂Èó¥ÁöÑSTWÔºåÂΩ±ÂìçÁ≥ªÁªüÁ®≥ÂÆöÊÄß„ÄÇÁÑ∂ÂêéÊàë‰ª¨Ë¶ÅÊ∏ÖÊ•öÂØºËá¥Ëß¶ÂèëFull GCÁöÑÂú∫ÊôØÔºåËøôÈáåÂàóÂá∫‰∫ÜÂèØËÉΩ‰ºöÂØºËá¥ÁöÑÂá†‰∏™Âú∫ÊôØÔºö&lt;br&gt;
‚ÄÉ‚ÄÉ1ÔºâÂ§ßÂØπË±°&lt;br&gt;
‚ÄÉ‚ÄÉ2ÔºâÊñπÊ≥ïÂå∫meta spaceÁ©∫Èó¥Âç†Êª°&lt;br&gt;
‚ÄÉ‚ÄÉ3ÔºâÂπ¥ËΩª‰ª£ÁöÑÂ≠òÊ¥ªÁöÑÁîüÂëΩÂë®ÊúüÈïøÂØπË±°‰∏ÄÁõ¥Ê±áÂÖ•ËÄÅÂπ¥‰ª£ÔºåÂØºËá¥GC&lt;br&gt;
‚ÄÉ‚ÄÉ4ÔºâÂÜÖÂ≠òÊ≥ÑÊºèÂØºËá¥Á©∫Èó¥‰∏çË∂≥ËøõËÄåGC&lt;br&gt;
ËøôÈáåÁ¨îËÄÖÂ∞±ÊãøÂÜÖÂ≠òÊ≥ÑÊºèÔºàÂÜÖÂ≠òÊ≥ÑÊºèÊåáÁöÑÊòØÊúâÂºïÁî®Êó†Ê≥ïË¢´ÂõûÊî∂‰ΩÜÊòØÊ≤°ÊúâÁî®ÁöÑÂØπË±°ÊåÅÁª≠Â¢ûÈïøÔºâÊù•ËØ¥Ôºå‰∏ÄËà¨Â¶ÇÊûúÊúâÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇÂ§ßÊ¶ÇÁöÑÂÜÖÂ≠òÁõëÊéßÂõæÈïøËøô‰∏™Ê†∑Â≠ê&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1592463486063.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ËøôÊ†∑ÂØºËá¥ÁöÑÂêéÊûúÂ∞±ÊòØÔºåÈ¢ëÁπÅÁöÑFULL GCÔºåÊúÄÂêéÂÜÖÂ≠ò‰∏ÄÁõ¥ÊåÅÁª≠Â¢ûÈïøÂà∞ÁàÜÊª°ÔºåÁÑ∂ÂêéFULL GCÊâßË°åÈó¥ÈöîÁº©Áü≠ÔºåÊúÄÁªà‰ºöÂØºËá¥GCÁ∫øÁ®ãÊåÅÁª≠GCÔºåCPU‰ΩøÁî®Áéá‰ºöÁõ¥Á∫øÈ£ôÂçáÔºåÂØºËá¥Á≥ªÁªüÁò´Áó™„ÄÇ&lt;br&gt;
‚ÄÉ‚ÄÉ  2„ÄÅ &lt;strong&gt;È¢ëÁπÅ YOUNG GC&lt;/strong&gt;  ÔºöYOUNG GCÂ¶ÇÊûúËøá‰∫éÈ¢ëÁπÅÁöÑËØùÔºå‰∏ÄËà¨ÊòØÁü≠Âë®ÊúüÂ∞èÂØπË±°ËæÉÂ§öÔºåËøôÊó∂ÂÄôÂèØ‰ª•‰ªé Eden Âå∫/Êñ∞Áîü‰ª£ËÆæÁΩÆÁöÑÂ§™Â∞è‰∫ÜËøô‰∏™ÊñπÈù¢ËÄÉËôëÔºåÁúãËÉΩÂê¶ÈÄöËøáË∞ÉÊï¥-Xmn„ÄÅ-XX:SurvivorRatio Á≠âÂèÇÊï∞ËÆæÁΩÆÊù•Ëß£ÂÜ≥ÈóÆÈ¢ò&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ËøôÈáåÁ¨îËÄÖ‰ª•Ëá™Â∑±ÂºÄÂèëÁªèÈ™åÔºåÊèê‰æõ‰∏Ä‰∫õ‚ÄúÁÆÄÂçïÁöÑ‚ÄùJVM‰ºòÂåñÊãôËßÅ&lt;/strong&gt;Ôºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Â∞ΩÈáèÂ∞ÜÊñ∞Áîü‰ª£ÁöÑÂûÉÂúæÂõûÊî∂ÊéâÔºå‰∏çËÆ©Â≠òÊ¥ªÂØπË±°ËøõÂÖ•ËÄÅÂπ¥‰ª£ÔºåÂõ†‰∏∫ËÄÅÂπ¥‰ª£ÁöÑGC‰ª£‰ª∑ÊØîÂπ¥ËΩª‰ª£È´òÔºåËøôÈáåÂèØ‰ª•ËÆæÁΩÆÂàÜ‰ª£Âπ¥ÈæÑ-XX:MaxTenuringThreshold=XX&lt;br&gt;
‚ÄÉ ‰æãÂ≠ê1ÔºöÊØîÂ¶ÇËØ¥‰∏öÂä°‰∏ä‰∏ÄÂàÜÈíü‰∫ßÁîüÂá†ÁôæÂÖÜÁöÑÊï∞ÊçÆÔºåËÄå‰∏îÈúÄË¶ÅÂ≠òÊ¥ª‰∏ÄÂàÜÈíüÔºåÂ¶ÇÊûú‰∏ÄÂàÜÈíüYGCÁöÑÊ¨°Êï∞Â∞ë‰∫éÈªòËÆ§ÂàÜ‰ª£Âπ¥ÈæÑÔºåÈÇ£‰πàÂØπË±°‰ºöËøõÂéªËÄÅÂπ¥‰ª£ÂºïÂèëFGCÔºåFGC‰ºöÂºïËµ∑Êõ¥Â§ßÁöÑÂÅúÈ°øÊó∂Èó¥&lt;br&gt;
‚ÄÉ ‰æãÂ≠ê2ÔºöÂ¶ÇÊûúËØ¥ÂØπË±°ÈÉΩÊòØ‰∏Ä‰∫õÁü≠ÊúüÂØπË±°ÔºåÈÇ£‰πàÂèØ‰ª•ËÆæÁΩÆÂàÜ‰ª£Âπ¥ÈæÑÊõ¥Â∞èÔºåÂõ†‰∏∫ÈïøÊúüÂØπË±°ËÇØÂÆöÊòØÂ§ßÂØπË±°ÊàñËÄÖÂçï‰æãÂØπË±°Ê∞∏È©ªÂÜÖÂ≠òÁöÑÔºåËøôÊ†∑ÂèØ‰ª•ËÖæÂá∫Á©∫Èó¥ÁªôÊñ∞Áîü‰ª£GCÔºåÈÅøÂÖçÊñ∞Áîü‰ª£È¢ëÁπÅGC&lt;/li&gt;
&lt;li&gt;Â¢ûÂä†Êñ∞Áîü‰ª£ÂÜÖÂ≠òÁöÑÂ§ßÂ∞èÔºåÈò≤Ê≠¢ÂØºËá¥È¢ëÁπÅÁöÑminor GCÔºåËøôÊ†∑ËÄÅÂπ¥‰ª£ÁöÑMajor GCÈ¢ëÁéá‰πü‰ºöÈôç‰Ωé&lt;/li&gt;
&lt;li&gt;Â∞ΩÈáèÂ∞ÜÂ§ßÂÜÖÂ≠òÁöÑÊúçÂä°ÔºåÊãÜÂàÜÊàêÂá†‰∏™Áõ∏ÂêåÊúçÂä°Ôºå‰πüÂ∞±ÊòØÂ§öÂÆû‰æãÈÉ®ÁΩ≤ÔºåÂàÜÊï£Â†ÜÂÜÖÂ≠òËµÑÊ∫êÔºåÈÅøÂÖçÂ†ÜÂ§ßÂÜÖÂ≠òÂØºËá¥GCÊó∂Èó¥ËøáÈïøÔºàËøô‰∏™ÂíåG1ÂàÜÂå∫ÂõûÊî∂ÊÄùÊÉ≥Áõ∏‰ººÔºâ&lt;/li&gt;
&lt;li&gt;ÊØè‰∏™Á∫øÁ®ãÂç†Áî®ÁöÑÂÜÖÂ≠ò‰∏çÂ∫îËøáÂ§ßÊàñËÄÖËøáÂ∞èÔºå‰∏çÁÑ∂‰ºöÂØºËá¥OOM&lt;br&gt;
‚ÄÉ Â¶ÇÊûúÁ∫øÁ®ãÂÜÖÂ≠òËøáÂ∞èÔºå‰ºöÂØºËá¥Á∫øÁ®ãÈáåÈù¢ÁöÑÊ†àÂÜÖÂ≠òÂ∞èÔºå‰∏¥Êó∂ÂèòÈáèÂ¶ÇÊûúË∂ÖÂá∫Ëøô‰∏™ÈòàÂÄºÂ∞±‰ºöÊó†Ê≥ïÂàÜÈÖçÊ†àÔºåÂØºËá¥Ê†àÊ∫¢Âá∫ÔºåÂá∫Áé∞stackoverflow&lt;br&gt;
‚ÄÉ Â¶ÇÊûúÁ∫øÁ®ãÂÜÖÂ≠òËøáÂ§ßÔºåÂú®Â§öÁ∫øÁ®ãÂπ∂Âèë‰∏ãÔºåÂ¶ÇÊûúÁ∫øÁ®ãÊï∞ÈáèËøáÂ§öÔºå‰ºöÂç†Áî®ÈùûÂ∏∏Â§öJVMÂÜÖÂ≠òÔºåÊúâÂÜÖÂ≠òÊ∫¢Âá∫ÁöÑÈ£éÈô©&lt;/li&gt;
&lt;li&gt;ÂêàÁêÜËÆæÁΩÆÂûÉÂúæÂõûÊî∂Âô®ÔºåÂú®Â§ßÂÜÖÂ≠òÊàñËÄÖÂú®ÂÜÖÂ≠òÁ¢éÁâáÂåñÁéØÂ¢É‰∏ãÔºåG1ÂûÉÂúæÂõûÊî∂Âô®‰ºöÊúâÂæàÂ•ΩÁöÑÊïàÊûú&lt;br&gt;
‚ÄÉ G1ÂûÉÂúæÂõûÊî∂Âô®ÊòØJava9ÈªòËÆ§ÂõûÊî∂Âô®ÔºåG1ËÉΩÂ§üÂú®ÊåáÂÆöÁöÑÂÅúÈ°øÊó∂Èó¥ÂÜÖÔºåÊ†πÊçÆÊØè‰∏™regionÁöÑÂõûÊî∂‰ª∑ÂÄºÔºåÈÄâÊã©ÂèØ‰ª•ÂéªÂõûÊî∂ÁöÑregionÔºåÂπ∂‰∏îÂ≠òÊ¥ªÂØπË±°ÁßªÂä®Â§çÂà∂ÊòØÂ§öÁ∫øÁ®ãËøõË°åÁöÑ„ÄÇËøôÈáåË¶ÅÊ≥®ÊÑèÂ¶ÇÊûúËÆæÁΩÆÂÅúÈ°øÊó∂Èó¥ÁöÑËØùÔºå‰∏çËÉΩËÆæÁΩÆÂ§™Â∞èÔºåÂõ†‰∏∫Â§™Â∞è‰ºöÂØºËá¥ÊØèÊ¨°ËøõË°åÂõûÊî∂ÁöÑregionÂ§™Â∞ëÔºåÂØºËá¥ÂûÉÂúæÂõûÊî∂ÈÄüÂ∫¶Êõ¥‰∏ç‰∏äÂûÉÂúæÁîü‰∫ßÁöÑÈÄüÂ∫¶ÔºåËøôÊ†∑ÈöèÁùÄÊó∂Èó¥Êé®ÁßªÔºåÁ≥ªÁªüÂûÉÂúæÂØπË±°‰ºöË∂äÊù•Ë∂äÂ§öÔºåÂç†Êª°JVM&lt;/li&gt;
&lt;li&gt;ÂØπË±°ÁîüÂëΩÂë®ÊúüÁöÑÂàÜÂ∏ÉÊÉÖÂÜµÔºöÂ¶ÇÊûúÂ∫îÁî®Â≠òÂú®Â§ßÈáèÁöÑÁü≠ÊúüÂØπË±°ÔºåÂ∫îËØ•ÈÄÇÂΩìÂ¢ûÂ§ßÂπ¥ËΩª‰ª£ -XmnÔºõÂ¶ÇÊûúÂ≠òÂú®Áõ∏ÂØπËæÉÂ§öÁöÑÊåÅ‰πÖÂØπË±°ÔºåËÄÅÂπ¥‰ª£Â∫îËØ•ÈÄÇÂΩìÂ¢ûÂ§ß„ÄÇ-Xms -Xmx&lt;/li&gt;
&lt;li&gt;XmsÂíåXmx‰πüËÆæÁΩÆ‰∏∫Áõ∏ÂêåÔºåËøôÊ†∑ÂèØ‰ª•ÂáèÂ∞ëÂÜÖÂ≠òËá™Âä®Êâ©ÂÆπÂíåÊî∂Áº©Â∏¶Êù•ÁöÑÊÄßËÉΩÊçüÂ§±&lt;/li&gt;
&lt;li&gt;ËÆæÁΩÆÂ§ßÂØπË±°ÂØπË±°ÁöÑÂ§ßÂ∞èÔºå‰∏ÄËà¨Á≥ªÁªü‰∏≠Â§ßÂØπË±°Â§ßÈÉ®ÂàÜÈÉΩÊòØ‰∏Ä‰∫õÁ≥ªÁªüÁöÑÁºìÂ≠òÔºåÂÉèËøô‰∫õÂØπË±°Â∞ΩÊó©ËÆ©ÂÆÉ‰ª¨ÁöÑËøõÂÖ•ËÄÅÂπ¥‰ª£ÔºåÈÅøÂÖçÂç†Áî®Êñ∞Áîü‰ª£ÁöÑÁ©∫Èó¥„ÄÇ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;‰ª•‰∏äÔºåÂêàÁêÜÂàÜÈÖçJVMÂÜÖÂ≠òËµÑÊ∫ê‰ª•ÂèäÂÅöÂ•ΩÁ≥ªÁªüÂÜÖÂ≠òÁöÑÁõëÊéßÊú∫Âà∂ÊòØÊàë‰ª¨Á≥ªÁªüÁ®≥ÂÆöÊÄßËøêË°åÁöÑ‰øùÈöú„ÄÇ&lt;/p&gt;
&lt;h5 id=&#34;ÁΩëÁªúË¥üËΩΩÂíåio&#34;&gt;ÁΩëÁªúË¥üËΩΩÂíåIO&lt;/h5&gt;
&lt;p&gt;Êù•‰∏ÄÂº†IOÂèëÁîüÂú∫ÊôØÂõæÁâáÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593333928024.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
‚ÄÉÂØπ‰∫éÁ£ÅÁõòIOÔºåÊàë‰ª¨ÂèØ‰ª•Áî®Linux‰∏ãÁöÑiostatÂëΩ‰ª§ÂéªÊü•ÁúãÂΩìÂâçIOË¥üËΩΩÁöÑÊÉÖÂÜµÔºåÊØîÂ¶Çr_waitÂíåw_waitÊåáÊ†áÔºåËøô‰∫õÊåáÊ†áËæÉÂ§ßÂàôËØ¥ÊòéI/OË¥üËΩΩËæÉÂ§ßÔºåI/OÁ≠âÂæÖÊØîËæÉ‰∏•ÈáçÔºåÁ£ÅÁõòËØªÂÜôÈÅáÂà∞Áì∂È¢à„ÄÇËøô‰∏™Êó∂ÂÄôÊàë‰ª¨Ë¶ÅÁúãÂéãÊµãÁöÑÊé•Âè£ÊòØÂê¶ÊúâÊñá‰ª∂ËØªÂèñÂíåÂÜôÂÖ•ÁöÑÊìç‰ΩúÔºåÂ¶ÇÊûúÊúâËØ¥ÊòéÊé•Âè£ÊÄßËÉΩÁì∂È¢àÂú®‰∫éÊñá‰ª∂ËØªÂÜôÔºåËøô‰∏™Êó∂ÂÄôÂèØ‰ª•Âà©Áî®Êñá‰ª∂bufferÁºìÂ≠òAPIÁ≠âÂäüËÉΩËøõË°å‰ºòÂåñÔºåÊàñËÄÖÂèØ‰ª•Áî®ÂºÇÊ≠•ÁöÑÊñπÂºèËøõË°åÊñá‰ª∂ËØªÂÜô„ÄÇ&lt;br&gt;
‚ÄÉÁ¨îËÄÖÂú®ÂºÄÂèë‰∏≠Â∞±ÈÅáÂà∞Âõ†‰∏∫IOÈóÆÈ¢òÂ∏¶Êù•ÁöÑÁ∫øÁ®ãËµÑÊ∫êËÄóÂ∞ΩÁöÑÁ∫ø‰∏äÈóÆÈ¢òÔºöÊàë‰ª¨Á≥ªÁªü‰∏öÂä°Âú®ÂÄüË¥∑‰∏öÂä°ÊàêÂäüÂêéÔºåË¶ÅÁîüÊàêÂÄüÊ¨æÂçèËÆÆÔºåÂçèËÆÆÊòØ‰∏Ä‰∏™PDFÊñá‰ª∂ÔºåÂΩìÊó∂‰∏ª‰∏öÂä°ÈÄªËæëÂÆåÊàêÂêéÂêåÊ≠•Ë∞ÉÁî®ÁîüÊàêPDFÁöÑÈÄªËæëÔºåÂõ†‰∏∫ÂΩìÊó∂Â§ßÊµÅÈáèÂπ∂ÂèëÔºåÂØºËá¥Êï¥‰∏™ÂÄüË¥∑‰∏öÂä°ÊÄßËÉΩÁì∂È¢àÂ∞±Âú®Á£ÅÁõòIO‰∏äÔºåCPUÂ§Ñ‰∫éÁ©∫Èó≤Áä∂ÊÄÅÔºåÂÄüÁî®ÁΩë‰∏äÁöÑ‰∏Ä‰∏™ÂõæÔºåTOPÂëΩ‰ª§ÂèØ‰ª•ÁúãÂá∫IOËä±Ë¥πÁöÑÊó∂Èó¥Âú®76.6%ÔºåÂêéÈù¢‰ºòÂåñÂêéÂ∞±Â§öÁ∫øÁ®ãÂºÇÊ≠•Â§ÑÁêÜ„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593334249512.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;‚ÄÉÂØπ‰∫éÁΩëÁªúË¥üËΩΩÔºåÂõ†‰∏∫ÁΩëÁªúË¥üËΩΩÊàñËÄÖÁΩëÁªúÂ†µÂ°ûÊòØ‰∏çÂèóÊéßÂà∂ÁöÑÔºåËøô‰∏™Ê∂âÂèäÂà∞Â∫ïÂ±ÇÁöÑTCPÈÄö‰ø°ÁöÑ‰ºòÂåñÔºàÊØîÂ¶ÇÂà©Áî®ÊªëÂä®Á™óÂè£ÂíåÊã•Â°ûÊéßÂà∂ÔºâÔºåËøô‰∏™Â∞±‰∏çÂ±ïÂºÄËÆ®ËÆ∫„ÄÇÂ∑•Á®ãÂ∏àÂèØÊéßËåÉÂõ¥ÂèØ‰ª•ÊòØÈÄâÊã©IOËØªÂÜôÈ´òÊïàÁéáÁöÑ‰∏≠Èó¥‰ª∂ÔºåÊØîÂ¶Çredis„ÄÅtomcat„ÄÅactiveMq„ÄÅnginx„ÄÅdubbo„ÄÅnettyÁ≠âÔºåËøô‰∫õ‰∏≠Èó¥‰ª∂ÁöÑÂ∫ïÂ±ÇIOÊ®°ÂûãÁöÑÊòØÂ§öË∑ØÂ§çÁî®IOÔºåÂ§öË∑ØÂ§çÁî®IOÊåáÁöÑÊòØ‰∏Ä‰∏™IOÁ∫øÁ®ãËÉΩÂ§üÊúçÂä°‰∫éÂ§ö‰∏™socketËøûÊé•ÔºåÁ∫øÁ®ãÁõëÂê¨ÊØè‰∏™ËøûÊé•ÁöÑËµÑÊ∫êÊèèËø∞Á¨¶„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593334346151.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;‚ÄÉÂàÜÂ∏ÉÂºèÂæÆÊúçÂä°ÁéØÂ¢É‰∏ãÔºåÊúçÂä°‰πãÈó¥ÁöÑRPCÂêåÊ≠•Ë∞ÉÁî®‰ºöÈùûÂ∏∏È¢ëÁπÅÔºåÈöè‰πãÊúçÂä°‰πãÈó¥ÁöÑÁΩëÁªúË¥üËΩΩ‰ºöÂΩ±ÂìçÂà∞Êï¥‰∏™Á≥ªÁªüÁöÑÊúçÂä°ÊÄßËÉΩÔºåÂõ†Ê≠§ÔºåÊØè‰∏™ÊúçÂä°ÁöÑÊú∫Âô®ÊîæÁΩÆÂà∞Âêå‰∏Ä‰∏™Â±ÄÂüüÁΩë‰∏ãÊÄßËÉΩÊïàÊûú‰ºöÂæàÂ•Ω„ÄÇËÄå‰∏îÔºåÂØπ‰∫éÊúçÂä°‰πãÈó¥ÁöÑË∞ÉÁî®ÔºåÊúÄÂ•ΩÂà©Áî®Ëá™Á†îÊàñËÄÖÁ¨¨‰∏âÊñπ‰∏≠Èó¥‰ª∂ÂéªÁõëÊéßÊúçÂä°ÈìæË∑ØË∞ÉÁî®ÁöÑÊï¥‰ΩìÊÉÖÂÜµÔºàÊØîÂ¶ÇZipkinÊàñËÄÖSkyWalking Ôºâ,Âπ∂‰∏îË¶ÅÂêàÁêÜËÆæÁΩÆÊúçÂä°‰∏éÊúçÂä°‰πãÈó¥ÁöÑË∂ÖÊó∂Êó∂Èó¥ÔºåÈÅøÂÖçÂõ†‰∏∫ÁΩëÁªúÂéüÂõ†ÂØºËá¥ÊúçÂä°Á∫øÁ®ãÊ±†ËÄóÂ∞ΩÔºåÂØºËá¥OOM„ÄÇ&lt;/p&gt;
&lt;h3 id=&#34;2-‰∏≠Èó¥‰ª∂Â±Ç&#34;&gt;2„ÄÅ‰∏≠Èó¥‰ª∂Â±Ç&lt;/h3&gt;
&lt;p&gt;‚ÄÉ ËøôÈáå‰∏≠Èó¥‰ª∂ÔºåÊ≥õÊåáÊï∞ÊçÆÂ≠òÂÇ®Â±ÇÔºå‰ª•Á¨îËÄÖÁªèÈ™åÊù•ÁúãÔºåÂ§ßÂ§öÊï∞Á≥ªÁªüÊÄßËÉΩÈóÆÈ¢òÂíåÁì∂È¢àÈÉΩÊòØ‰∏éÊï∞ÊçÆÂ≠òÂÇ®Áõ∏ÂÖ≥ÔºåËøôÈáåÁ¨îËÄÖÂ∞±ÊãøËøôÊñπÈù¢Â±ïÂºÄËÆ®ËÆ∫ÊÄªÁªì„ÄÇ&lt;/p&gt;
&lt;h5 id=&#34;mysql&#34;&gt;MySQL&lt;/h5&gt;
&lt;p&gt;‰∏ÄËà¨Êù•ËØ¥MySQLÂú®ÂæàÂ§öÁ∫øÁ®ãÊõ¥Êñ∞Âêå‰∏ÄË°åÁöÑÂú∫ÊôØ‰∏ãÔºåTPSÊÄßËÉΩÊõ≤Á∫øÂ¶ÇÂõæÊâÄÁ§∫ÔºåÂèÇËÄÉ‰∏ÅÂ•áÁöÑ„ÄäÁßíÊùÄÂú∫ÊôØ‰∏ãMySQLÁöÑ‰ΩéÊïà„Äã&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1592893242022.png&#34; alt=&#34;ÁßíÊùÄÂú∫ÊôØ‰∏ãMySQLÁöÑ‰ΩéÊïà&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
Âõæ‰∏≠Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåÁ∫øÁ®ãÊï∞Âú®6ÁöÑÊó∂ÂÄôTPSËææÂà∞Â∑ÖÂ≥∞2WÔºåÈöèÁùÄÁ∫øÁ®ãÊï∞ÁöÑÂ¢ûÈïøÔºåTPS‰ºöÈöè‰πãÈôç‰Ωé„ÄÇÂú®È´òÂπ∂ÂèëÂú∫ÊôØ‰∏ãÔºåÂèØ‰ª•Ê†πÊçÆËøô‰∏™ÁªìËÆ∫Êù•ËøõË°å‰ºòÂåñÔºåÊØîÂ¶ÇÔºåÂΩìÊúâÁû¨Èó¥Â§ßÊµÅÈáèÂÜ≤ÂáªÊï∞ÊçÆÂ∫ìÊó∂ÂÄôÔºåÊàë‰ª¨ÂèØ‰ª•ËøõË°åÊï∞ÊçÆÁºìÂÜ≤ÔºåÊØîÂ¶ÇÁî®ÈòüÂàóÂâäÂ≥∞ÔºåÂºÄÂêØ6‰∏™Á∫øÁ®ãÊ∂àË¥πÔºåÁÑ∂ÂêéËÆøÈóÆÊï∞ÊçÆÂ∫ì„ÄÇ&lt;br&gt;
ÂΩìÁÑ∂Ëøô‰∏™Áúã‰∏öÂä°Âú∫ÊôØÔºåÂ¶ÇÊûúÊòØÂØπÂêå‰∏Ä‰∏™ËµÑÊ∫êËøõË°åÁ´û‰∫âÁöÑËØùÔºåËøô‰∏™ËØÅÂâäÂ≥∞ÊòØÂèØË°åÁöÑ„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÂú∫ÊôØÊòØÊØè‰∏Ä‰∏™Á∫øÁ®ãÂØπ‰∏çÂêåËµÑÊ∫êËøõË°åËÆøÈóÆ‰øÆÊîπÊó∂ÂÄôÔºå‰∏çÊ∂âÂèäËµÑÊ∫êÁ´û‰∫âÁöÑËØùÔºåÈÇ£‰πàÂ∞±‰∏çË¶ÅËøõË°åÂâäÂ≥∞Â§ÑÁêÜÔºåÁõ¥Êé•ËÆøÈóÆÊï∞ÊçÆÂ∫ìÂç≥ÂèØÔºåÂΩìÁÑ∂Ëøô‰∏™‰πüË¶ÅËÄÉËôëÂà∞MySQLÁöÑÊÄßËÉΩÈóÆÈ¢ò„ÄÇ&lt;br&gt;
‰∏æ‰∏™‰æãÂ≠êÔºåÂ∞±ÊãøÂÖâÊèíÂÖ•Êï∞ÊçÆÁöÑÊÄßËÉΩÊµãËØïÊù•ËØ¥ÔºàÊ≤°ÊúâÂª∫ÂîØ‰∏ÄÁ¥¢ÂºïÔºâÔºå4Ê†∏4GÁöÑ7200ËΩ¨ÁöÑÊú∫Ê¢∞Á°¨ÁõòÊú∫Âô®ÈÖçÁΩÆÔºåÊúÄÈ´òËÉΩÂ§üÊâøÂèó7500ÁöÑÂπ∂ÂèëÊèíÂÖ•Êï∞„ÄÇ[ÂèÇËÄÉMySQLÊÄßËÉΩÂéãÊµã]&lt;/p&gt;
&lt;p&gt;‰ª•‰∏äÁÆóÊòØ‰∏ÄÁßçÂú®ÁâπÂÆöÂú∫ÊôØ‰∏ãÁöÑ‰ºòÂåñÁöÑÊÄùË∑ØÔºå‰∏ãÈù¢Á¨îËÄÖËÆ®ËÆ∫‰∏Ä‰∏ãÊó•Â∏∏ÂºÄÂèë‰∏≠ÈÄöÁî®ÁöÑMySQL‰ºòÂåñÔºö&lt;br&gt;
1„ÄÅÈÅøÂÖçÈïøÊúüÁöÑ‰∫ãÂä°ÈîÅÂç†Áî®ÔºåÈÅøÂÖçÈîÅËåÉÂõ¥ËøáÂ§ßÔºåÈÅøÂÖçÂçï‰∏™ËµÑÊ∫êÁöÑÂπ∂ÂèëÁ´û‰∫â&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;È¶ñÂÖàÊàë‰ª¨Áü•ÈÅìÊï∞ÊçÆÂ∫ìInnodbÂ≠òÂÇ®ÂºïÊìéÁöÑRRÂíåRCÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºåÁ±ª‰ººupdateËØ≠Âè•ÔºåÈîÅÁöÑÈáäÊîæÊó∂Êú∫ÊòØÂú®‰∫ãÂä°Êèê‰∫§‰πãÂêéÔºåËøô‰∏™Âè´ÂÅö‰∏§Èò∂ÊÆµÈîÅÂçèËÆÆ„ÄÇÊâÄ‰ª•‰∏∫‰∫ÜÈÅøÂÖç‰∫ãÂä°‰πãÈó¥ÈîÅÂêå‰∏ÄË°åÊï∞ÊçÆÂá∫Áé∞ÈïøÊó∂Èó¥ÁöÑ‰∫íÁõ∏Á≠âÂæÖÁöÑÂú∫ÊôØÔºå&lt;strong&gt;Ë¶ÅÊääÊúÄÂèØËÉΩÈÄ†ÊàêÈîÅÂÜ≤Á™Å„ÄÅÊúÄÂèØËÉΩÂΩ±ÂìçÂπ∂ÂèëÂ∫¶ÁöÑÈîÅÂ∞ΩÈáèÂæÄÂêéÊîæ&lt;/strong&gt;„ÄÇ&lt;br&gt;
‰∏æ‰∏™‰æãÂ≠êÔºå‰∏™‰∫∫Ë¥¶Êà∑AËΩ¨Ë¥¶ÁªôÂÖ¨ÂÖ±Ë¥¶Êà∑BÔºåÊµÅÁ®ãÊòØÔºöÂºÄÂêØ‰∫ãÂä°‚Äî‚Äî„ÄãÁªô B ÁöÑË¥¶Êà∑‰ΩôÈ¢ùÂ¢ûÂä†Èí±Ôºõ‰ªéË¥¶Êà∑ A Ë¥¶Êà∑‰ΩôÈ¢ù‰∏≠Êâ£Èô§Èí±ÔºõËÆ∞ÂΩï‰∏ÄÊù°‰∫§ÊòìÊó•Âøó‚Äî‚Äî„ÄãÁªìÊùü‰∫ãÂä°„ÄÇÂõ†‰∏∫ÂÖ¨ÂÖ±Ë¥¶Êà∑BÂèØËÉΩË¢´Â§ö‰∏™Á∫øÁ®ã‰øÆÊîπÔºåÊâÄ‰ª•ÂèØ‰ª•‰ºòÂåñ‰∏∫Ôºö‰ªéË¥¶Êà∑ A Ë¥¶Êà∑‰ΩôÈ¢ù‰∏≠Êâ£Èô§Èí±ÔºõËÆ∞ÂΩï‰∏ÄÊù°‰∫§ÊòìÊó•ÂøóÔºõÁªô B ÁöÑË¥¶Êà∑‰ΩôÈ¢ùÂ¢ûÂä†Èí±„ÄÇ&lt;/li&gt;
&lt;li&gt;ÁÑ∂ÂêéÔºåË¶ÅÂ∞ΩÈáèÂ∞ÜÈîÅÁªÜÂåñÔºå‰∏Ä‰∏™Â§ßÈîÅÂèØ‰ª•ÂàÜÂâ≤‰∏∫Â§ö‰∏™ÈîÅÔºåÁ±ª‰ºº&lt;strong&gt;ÂàÜÊÆµÈîÅÊú∫Âà∂&lt;/strong&gt;„ÄÇÊãøÁ¨îËÄÖÂÖ¨Âè∏‰∏öÂä°Êù•ËØ¥ÔºåÊØîÂ¶ÇAPP‰∏äÊäïËµÑÊüê‰∏Ä‰∏™‰∫ßÂìÅÊ†áÔºàÂåÖÂê´‰∫ÜÊ†áÁöÑÂºÄÂßãÂãüÈõÜÊó∂Èó¥„ÄÅÁªìÊùüÊó∂Èó¥„ÄÅÂèØÊäïÈáëÈ¢ù„ÄÅÂπ¥Âà©ÁéáÁ≠âÁ≠âÔºâÔºåÂú®Âà∞ËææÂºÄÂßãÂãüÈõÜÊó∂Èó¥‰ºöÊúâ‰∏ÄÊÆµÊó∂Èó¥ÁöÑÈ´òÂπ∂ÂèëÊäïÊ†áÔºåËøô‰∏™Êó∂ÂÄô‰ºöÂØπÂÖ∑‰ΩìÊ†áÁöÑË°åÊï∞ÊçÆËøõË°åÈ¢ëÁπÅÁöÑÊõ¥Êñ∞Êìç‰ΩúÔºåÂ∞±ÊòØÊâ£ÂáèÂâ©‰ΩôÂèØÊäïÈáëÈ¢ùÔºåÂ¶ÇÊûúÂÖ∂‰ªñËÄóÊó∂Êìç‰Ωú‰∏≠ÊúâÂØπÂêå‰∏ÄËµÑÊ∫êËøõË°åÁ´û‰∫âÁöÑËØùÔºåÈÇ£‰πà‰∫ßÂìÅÈîÅÊåÅÊúâÊó∂Èó¥ËøáÈïøÔºåÂØºËá¥ÊÄßËÉΩ‰Ωé„ÄÇÂ¶ÇÊûúÊúâÈ´òÂπ∂ÂèëÁßíÊùÄ‰∏ãÂçïÁ≠âÂä®‰ΩúÔºå‰ºöÈÄ†ÊàêË°åÈîÅÊä¢Âç†ÈóÆÈ¢ò„ÄÇ&lt;br&gt;
Ëøô‰∏™Êó∂ÂÄôÔºå‰ºòÂåñÊÄùË∑ØÊòØÔºåÂ∞ÜËøô‰∏™‰∫ßÂìÅÊ†áÂú®Êï∞ÊçÆÂ∫ìÂàÜ‰∏∫10‰ªΩÔºåÊØè‰∏Ä‰ªΩÁöÑÂèØÊäïÈáëÈ¢ùÂáèÂ∞ë10ÂÄçÔºåÊØè‰∏Ä‰∏™ÊäïÊ†áËØ∑Ê±ÇËøõË°åÈöèÊú∫Ë∑ØÁî±ÂàÜÈÖçÂà∞Ëøô10‰∏™Â∞èÁöÑ‰∫ßÂìÅÊ†á‰∏≠„ÄÇËøôÊ†∑Â∞±ÂáèÂ∞ëÈîÅÁöÑÂπ∂ÂèëÁ´û‰∫âÈóÆÈ¢òÔºå‰ºòÂåñÊÄßËÉΩ„ÄÇ&lt;br&gt;
‰ΩÜÊòØÁ¨îËÄÖÂõ†‰∏∫ÈÅáÂà∞ËøôÁßçÂàÜÊÆµÈîÅÁöÑÈóÆÈ¢òÂØºËá¥ÁöÑ&lt;strong&gt;Ê≠ªÈîÅ&lt;/strong&gt;ÈóÆÈ¢òÔºåÂú∫ÊôØÊòØËøôÊ†∑ÁöÑÔºåÂΩì‰∏Ä‰ªΩÊäïÊ†áÁöÑÈáëÈ¢ùÂ§ß‰∫éÂÖ∂‰∏≠‰∏Ä‰ªΩ‰∫ßÂìÅÈáëÈ¢ùÁöÑËØùÔºå‰ºöÊåÅÊúâËøô‰ªΩ‰∫ßÂìÅÁöÑÈîÅÔºåÂπ∂‰∏îÂæ™ÁéØËé∑Âèñ‰∏ã‰∏Ä‰ªΩÂ∞è‰∫ßÂìÅÔºåËøô‰∏™Êó∂ÂÄôÂ¶ÇÊûúÊúâ‰∏§‰∏™Á∫øÁ®ãÈÉΩÂ§ß‰∫éÂ∞è‰∫ßÂìÅÈáëÈ¢ùÁöÑËØùÔºåÊúâÊ¶ÇÁéá‰ºö‰∫ßÁîüÊ≠ªÈîÅÈóÆÈ¢òÔºåÁ¨îËÄÖÊúÄÁªàÈÄöËøáÈ°∫Â∫èÂä†ÈîÅ‰ª•ÂèäÂä†‰∏äÈîÅÁöÑËøáÊúüÊó∂Èó¥Ëß£ÂÜ≥‰∫ÜËøô‰∏™ÈóÆÈ¢ò„ÄÇ&lt;/li&gt;
&lt;li&gt;ÊúÄÂêéÔºåÂØπÂêå‰∏Ä‰∏™ËµÑÊ∫êÁöÑÂπ∂ÂèëÁ´û‰∫âÔºå‰∏æ‰∏™‰æãÂ≠êÔºåÂÉè12306Êä¢Á•®„ÄÅÂïÜÂüéÊ¥ªÂä®ÁßíÊùÄÁ≠âÈÉΩÊòØÂØπÂêå‰∏Ä‰∏™ÊúâÈôêËµÑÊ∫êËøõË°åÁ´û‰∫âÁöÑÂú∫ÊôØÔºåÁ¨îËÄÖËÆ§‰∏∫ÔºåËøôÁßçÂú∫ÊôØÊòØÈùûÂ∏∏ÈöæÂ§ÑÁêÜÁöÑÔºåÈúÄË¶ÅËÄÉËôëÂà∞ÈîÅÂêåÊ≠•Êï∞ÊçÆÂÆâÂÖ®„ÄÅÂπ∂ÂèëÁ´û‰∫âÊÄßËÉΩÁì∂È¢à„ÄÅË∂ÖÂçñÁ≠âÈóÆÈ¢òÔºåÈÉΩÊòØ‰ºöÂΩ±ÂìçCÁ´ØÁî®Êà∑ÂÆûÈôÖÁöÑ‰ΩìÈ™åÁöÑ„ÄÇ&lt;br&gt;
ÂÉèËøôÁßçÂú∫ÊôØÔºå‰ºòÂåñÁöÑÊÄùË∑ØÂ∞±ÊòØ‚Äî‚Äî&amp;gt;&lt;strong&gt;ËÉΩÁî®ÂàÜÊÆµÈîÅÁöÑÂ∞±‰∏çË¶ÅÁî®ÊÇ≤ËßÇÈîÅÔºåËÉΩÁî®‰πêËßÇÈîÅÁöÑÂ∞±‰∏çË¶ÅÁî®ÊÇ≤ËßÇÈîÅÔºåËÉΩÁî®Êó†ÈîÅÁºñÁ®ãÁöÑÂ∞±‰∏çË¶ÅÁî®ÈîÅÔºåËÉΩÁî®ÂºÇÊ≠•ÁöÑÂú∫ÊôØÂ∞±‰∏çË¶ÅÁî®ÂêåÊ≠•ÁöÑÂú∫ÊôØÔºåËÉΩÂú®ÂÜÖÂ≠òÊìç‰ΩúÁöÑÂ∞±‰∏çË¶ÅÂÜçÊîæÂà∞Êï∞ÊçÆÂ∫ìÁ£ÅÁõòÂ±ÇÈù¢Êìç‰Ωú&lt;/strong&gt;„ÄÇÂΩìÁÑ∂ÔºåÊúâ‰∫õÂØπ‰∫éÊï∞ÊçÆÂÆâÂÖ®ÊÄßË¶ÅÊ±ÇÂæàÈ´òÁöÑÂú∫ÊôØÔºåÊØîÂ¶ÇÈáëËûçÔºåÂä†ÈîÅÊòØÂøÖË¶ÅÁöÑ„ÄÇËøô‰∏™Â∞±ÊòØ‰∏öÂä°‰∏ÄËá¥ÊÄßÂíåÂπ∂ÂèëÁöÑÊäò‰∏≠ËÄÉËôëÔºåËøô‰∏™ÈúÄË¶ÅËÄÉËôëÂÖ∑‰ΩìÁöÑ‰∏öÂä°Âú∫ÊôØ„ÄÇ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2„ÄÅÂÖ≥Èó≠Ê≠ªÈîÅÊ£ÄÊµã&lt;br&gt;
MySQLÈªòËÆ§ÂºÄÂêØÊ≠ªÈîÅÊ£ÄÊµãÔºåÊ¶ÇÂøµÔºöÊØèÂΩì‰∏Ä‰∏™‰∫ãÂä°Ë¢´ÈîÅÁöÑÊó∂ÂÄôÔºåÂ∞±Ë¶ÅÁúãÁúãÂÆÉÊâÄ‰æùËµñÁöÑÁ∫øÁ®ãÊúâÊ≤°ÊúâË¢´Âà´‰∫∫ÈîÅ‰ΩèÔºåÂ¶ÇÊ≠§Âæ™ÁéØÔºåÊúÄÂêéÂà§Êñ≠ÊòØÂê¶Âá∫Áé∞‰∫ÜÂæ™ÁéØÁ≠âÂæÖÔºå‰πüÂ∞±ÊòØÊ≠ªÈîÅ„ÄÇÊ≠ªÈîÅÊ£ÄÊµãÂØπÊï∞ÊçÆÂ∫ìÊúâÈùûÂ∏∏Â§ßÁöÑÊÄßËÉΩÂΩ±ÂìçÔºå‰ºöÊ∂àËÄóCPUËµÑÊ∫êÔºåÊúÄÂêé‰ºöÂéãÂûÆÊï∞ÊçÆÂ∫ì„ÄÇ&lt;br&gt;
Âú®ËøôÁßçÂπ∂ÂèëÂú∫ÊôØ‰∏ãÂèØ‰ª•ÂÖ≥Èó≠Ê≠ªÈîÅÊ£ÄÊµãÂäüËÉΩÔºå‰ºöÊúâÊòéÊòæÁöÑÊÄßËÉΩÊèêÂçá„ÄÇÂΩìÁÑ∂ÂÖ≥Èó≠Ê≠ªÈîÅÊ£ÄÊµã‰πü‰ºöÂ∏¶Êù•ÈóÆÈ¢òÔºåÊØîÂ¶ÇÂΩìÊ≠ªÈîÅÂèëÁîüÊó∂Ôºå‰ºö‰∏ÄÁõ¥ÊåÅÊúâÈîÅËµÑÊ∫êÔºåÁõ¥Ëá≥Âà∞Ë∂ÖÊó∂Êó∂Èó¥ÂêéÔºåÈáäÊîæÔºåËøôÊÆµÁ≠âÂæÖÁöÑÊó∂ÂÄôÂèØËÉΩ‰ºöÈÄ†ÊàêÁ∫øÁ®ãÊåÅÁª≠Á≠âÂæÖÈÄ†Êàê‰∏•ÈáçÂêéÊûú„ÄÇÊâÄ‰ª•‰∏∫‰∫ÜÈÅøÂÖçÊ≠ªÈîÅÁöÑÂèëÁîüÔºåÂØπË°åËµÑÊ∫êËøõË°åÂä†ÈîÅÁöÑÊó∂ÂÄôÂèØ‰ª•Ê†πÊçÆID‰∏ªÈîÆÁ≠âËøõË°å&lt;strong&gt;È°∫Â∫èÂä†ÈîÅ&lt;/strong&gt;„ÄÇ&lt;/p&gt;
&lt;p&gt;3„ÄÅSQL‰ºòÂåñ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SQLÈÅøÂÖçÂ§öË°®ËøûÊé•Êü•ËØ¢„ÄÅinÂíåexitsÂêàÁêÜÂ∫îÁî®„ÄÅËÄÉËôëÁ¥¢ÂºïÂ§±ÊïàÂú∫ÊôØ&lt;/li&gt;
&lt;li&gt;Âú®ÁªèÂ∏∏Êü•ËØ¢ÂíåÊéíÂ∫èÁöÑÂàó‰∏äÂä†Á¥¢ÂºïÔºåÂØπÁ¶ªÊï£Â∫¶‰∏çÈ´òÁöÑ‰∏çÂª∫ËÆÆÂä†ÈîÅÔºåÈÅµÂæ™Á¥¢ÂºïËßÑËåÉ&lt;/li&gt;
&lt;li&gt;Âú®ÂÜôÂú∫ÊôØÂ§ö‰ΩôËØªÂú∫ÊôØÁöÑÁ¥¢ÂºïÈÄâÊã©ÔºåÂîØ‰∏ÄÁ¥¢ÂºïÂíåÊôÆÈÄöÁ¥¢ÂºïÁöÑÈÄâÊã©&lt;/li&gt;
&lt;li&gt;Â∞ΩÈáèËøõË°åË¶ÜÁõñÁ¥¢ÂºïÔºåÈÅøÂÖçÂõûË°®Êü•ËØ¢&lt;/li&gt;
&lt;li&gt;Â∞ΩÈáèÂª∫Á´ãËÅîÂêàÁ¥¢ÂºïÔºåÊù•ËøõË°åÁ¥¢ÂºïÂ§çÁî®&lt;/li&gt;
&lt;li&gt;Â≠óÁ¨¶‰∏≤ÁöÑÂâçÁºÄÁ¥¢ÂºïÁöÑÂª∫Á´ã&lt;/li&gt;
&lt;li&gt;Áî®explainÂàÜÊûêÊï¥‰∏™SQLÁöÑÊâßË°åÊÉÖÂÜµÔºåÂåÖÊã¨ÊâßË°åËÆ°Âàí„ÄÅÁ¥¢ÂºïÂàÜÊûê&lt;/li&gt;
&lt;li&gt;‰øÆÊîπÊï∞ÊçÆÊØîËæÉÂ§öÁöÑÂ≠óÊÆµÂú∫ÊôØÂ∞ΩÈáèÂä†Á¥¢ÂºïÔºåÂ∞ΩÈáè‰ΩøÁî®Ë°åÈîÅÔºåÈÅøÂÖçË°®ÈîÅ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;4„ÄÅÂú®Â§ßÊï∞ÊçÆÈáèÁöÑÊÉÖÂÜµ‰∏ãÔºà‰∏ÄËà¨ÂçïË°®Ë∂Ö2000WÔºâÁöÑ‰ºòÂåñÊÄùË∑ØÔºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Âä†ÁºìÂ≠òÔºåÂØπ‰∫éÈ´òÂπ∂ÂèëËØªÂú∫ÊôØÁî®ÁºìÂ≠òÔºå‰∏ÄÁ∫ßÁºìÂ≠òRedisÊàñËÄÖ‰∫åÁ∫ßÁºìÂ≠òCache&lt;/li&gt;
&lt;li&gt;Êû∂ÊûÑÂ±ÇÈù¢MySQLÂ∞±ÂÅö‰∏ª‰ªéÂ§çÂà∂Êàñ‰∏ª‰∏ªÂ§çÂà∂ÔºåËØªÂÜôÂàÜÁ¶ªÔºåÂèØ‰ª•Âú®Â∫îÁî®Â±ÇÂÅöÔºåÊïàÁéáÈ´ò&lt;/li&gt;
&lt;li&gt;ÂûÇÁõ¥ÊãÜÂàÜÔºåÊ†πÊçÆ‰Ω†Ê®°ÂùóÁöÑËÄ¶ÂêàÂ∫¶ÔºåÂ∞Ü‰∏Ä‰∏™Â§ßÁöÑÁ≥ªÁªüÂàÜ‰∏∫Â§ö‰∏™Â∞èÁöÑÁ≥ªÁªüÔºå‰πüÂ∞±ÊòØÂàÜÂ∏ÉÂºèÁ≥ªÁªüÔºõ&lt;/li&gt;
&lt;li&gt;Ê∞¥Âπ≥ÂàáÂàÜÔºåÂõ†‰∏∫Ê∞¥Âπ≥ÂàáÂàÜ‰ºöÂ¢ûÂä†‰ª£Á†ÅÂºÄÂèëÂ§çÊùÇÂ∫¶ÔºåÊâÄ‰ª•ËÉΩÂ∞ΩÈáèÈÅøÂÖçÂ∞±‰∏çË¶ÅÂÅö„ÄÇÈíàÂØπÊï∞ÊçÆÈáèÂ§ßÁöÑË°®ÔºåÂØπ‰∫éÊó•ÂøóÊµÅÊ∞¥„ÄÅÈÖçÁΩÆÂûãÁ≠âÁ±ªÂûãÊï∞ÊçÆÔºåËøõË°åÂΩíÊ°£Êìç‰ΩúÔºõÂØπ‰∫éÁä∂ÊÄÅ‰∏öÂä°Êï∞ÊçÆËøõË°åÂàÜÂ∫ìÂàÜË°®ÔºåËøôÈáåÂ∞±‰∏çÂ±ïÂºÄËÆ®ËÆ∫„ÄÇÂÖ∂Ê¨°ÔºåË¶ÅÈÄâÊã©‰∏Ä‰∏™ÂêàÁêÜÁöÑsharding keyÔºå‰∏∫‰∫ÜÊúâÂ•ΩÁöÑÊü•ËØ¢ÊïàÁéáÔºåË°®ÁªìÊûÑ‰πüË¶ÅÊîπÂä®ÔºåÂÅö‰∏ÄÂÆöÁöÑÂÜó‰ΩôÔºõ&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;redis&#34;&gt;Redis&lt;/h5&gt;
&lt;p&gt;Redis‰Ωú‰∏∫ÂºÄÂèë‰∫∫ÂëòÊé•Ëß¶ÊúÄÈ¢ëÁπÅÁöÑ‰∏≠Èó¥‰ª∂ÔºåÈ¶ñÂÖàÔºåÁ¨îËÄÖÂÖàÊãøÂá∫ÂÆòÁΩëÁªôÂá∫ÁöÑRedisÊÄßËÉΩÊµãËØïÁªìÊûúÔºö‰ªé‰∏ãÂõæÂèØ‰ª•ÂæóÂá∫ÁªìËÆ∫ÔºöredisÂçïÊú∫ÊµãËØïÁªìÊûúÊòØTPSÊòØ7W,QPSÂè™ËÉΩÊØîËøô‰∏™Êï∞ÊçÆÊõ¥È´ò„ÄÇ&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1592983835284.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÂΩì‰ΩøÁî®‰∫ÜÁÆ°ÈÅìpiplineÂêéÊÄßËÉΩÂ§ßÁ∫¶ÊèêÂçá‰∫Ü6ÂÄçÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1592986207480.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;Ê†πÊçÆÂÆòÁΩëÁöÑÊñáÊ°£ÔºåÂΩ±ÂìçRedisÊÄßËÉΩÊúâ‰ª•‰∏ãÂõ†Á¥†ÔºåÁ¨îËÄÖËÆ§‰∏∫ÂºÄÂèë‰∫∫ÂëòÂÅö‰∏Ä‰∫õÂü∫ÂáÜÊµãËØïÂéãÊµã‰ª•ÂèäÊó•Â∏∏ÂºÄÂèë‰∏≠‰ΩøÁî®RedisÁöÑÊó∂ÂÄôÔºåÊ≥®ÊÑèËøô‰∫õ‰ºòÂåñÁÇπÔºåÂ∞±ËÉΩÈ´òÊïà‰ΩøÁî®RedisÔºö&lt;br&gt;
1„ÄÅÁΩëÁªúÂª∂ËøüÂíåÁΩëÁªúÂ∏¶ÂÆΩÔºå‰Ωú‰∏∫ËøêÁª¥‰∫∫ÂëòÔºåÊúÄÂ•ΩÂ∞ÜÊúçÂä°Âô®ÂíåRedisÊúçÂä°ÈÉ®ÁΩ≤Âà∞Âêå‰∏Ä‰∏™Â±ÄÂüüÁΩëÂÜÖÔºåÈôç‰ΩéÁΩëÁªúÂª∂Ëøü„ÄÇ‰Ωú‰∏∫ÂºÄÂèë‰∫∫ÂëòÔºåÂ∞ΩÈáè‰∏çË¶Å‰ΩøÁî®Â§ßkeyÂíåÂ§ßvalueÔºåÂõ†‰∏∫ÈöèÁùÄËøôÁßçÊï∞ÊçÆË∂äÊù•Ë∂äÂ§öÔºåÂú®ÁΩëÁªú‰º†ËæìÁöÑÊó∂ÂÄô‰ºöÂç†Áî®Â§ßÈÉ®ÂàÜÁΩëÁªúÂÆΩÂ∏¶Ôºå‰∏æ‰∏™‰æãÂ≠êÔºåÂ¶ÇÊûú‰∏Ä‰∏™redisÂØπË±°Â§ßÂ∞èË∂ÖËøá1KBÔºåÂΩì‰Ω†ÁöÑQPSËææÂà∞100‰∏áÔºå‰ºöÊää‰Ω†ÁöÑÂçÉÂÖÜË∑ØÁî±Âô®ÁöÑÂ∏¶ÂÆΩÊâìÊª°ÔºåÂõ†Ê≠§ÁΩëÁªúÂ∏¶ÂÆΩÂèØËÉΩÂ∞±‰ºöÊàê‰∏∫ÊÄßËÉΩÁì∂È¢à„ÄÇ&lt;br&gt;
2„ÄÅ‰ΩøÁî®piplineÔºåÂΩì‰ΩøÁî®‰ª•Â§™ÁΩëËÆøÈóÆRedisÊó∂Ôºå‰øùÊçÆÂ§ßÂ∞è‰øùÊåÅÂú®‰ª•Â§™ÁΩëÊï∞ÊçÆÂåÖÂ§ßÂ∞èÔºàÁ∫¶1500Â≠óËäÇÔºâ‰ª•‰∏ãÊó∂Ôºå‰ΩøÁî®ÊµÅÊ∞¥Á∫øËøõË°åËÅöÂêàÁöÑÂëΩ‰ª§ÁâπÂà´ÊúâÊïà„ÄÇ&lt;br&gt;
3„ÄÅÂª∂Êó∂Âà†Èô§ÔºåÂΩìÊüê‰∏Ä‰∏™redisObjectÂæàÂ§ßÁöÑÊó∂ÂÄôÔºåÂÅöÂà†Èô§Êìç‰Ωú‰ºöÈïøÊó∂Èó¥Âç†ÊúâÁ∫øÁ®ãÊåÅÊúâÊó∂Èó¥ÔºåÂΩ±ÂìçÊÄßËÉΩÔºåredisÊñ∞ÁâàÊú¨ÊúâÂª∂ËøüÂà†Èô§ÁöÑÂäüËÉΩ„ÄÇ&lt;br&gt;
4„ÄÅ‰ΩøÁî®scan‰ª£ÊõøkeysÔºåkeys‰ºöÈÄ†Êàê‰∏•ÈáçÁöÑÊÄßËÉΩÈóÆÈ¢ò&lt;br&gt;
5„ÄÅËÆæÁΩÆÂÜÖÂ≠òÁöÑÂ§ßÂ∞èÈòàÂÄºÂπ∂‰∏îËÆæÁΩÆÂ•ΩÂÜÖÂ≠òÁºìÂ≠òÊ∑òÊ±∞ÁöÑÁ≠ñÁï•ÔºåÁ∫ø‰∏äËÆæÁΩÆLRUÁ≠ñÁï•Êù•Ê∑òÊ±∞ÁºìÂ≠òËøôÊ†∑ÂÅöÊòØ‰∏∫‰∫ÜÈÅøÂÖçÁâ©ÁêÜÂÜÖÂ≠ò‰ΩøÁî®ÂÆåÂêéÔºåÈÄ†ÊàêÂç°È°øÁöÑÊÉÖÂÜµ„ÄÇÂπ∂‰∏îÁ∫ø‰∏äË¶ÅÈÅøÂÖçÂ§ßÈáèkeyÂêåÊó∂Â§±ÊïàÁöÑÂú∫ÊôØÔºåÂõ†‰∏∫redisÂà†Èô§Â§±ÊïàÁöÑkeyÊòØÂæ™ÁéØÂà†Èô§ÁöÑÔºåÂπ∂‰∏îÈ¢ëÁπÅÁöÑÂà†Èô§‰ºö‰øÉ‰ΩøÂÜÖÂ≠òÁÆ°ÁêÜÂô®ÂõûÊî∂ÂÜÖÂ≠òÈ°µÔºåËøôÊ†∑‰πü‰ºöÂØºËá¥Âç°È°øÁöÑÁé∞Ë±°„ÄÇ&lt;br&gt;
6„ÄÅconnectionÂÆ¢Êà∑Á´ØËøûÊé•Êï∞ÈáèÔºåRedis‰Ωú‰∏∫‰∏Ä‰∏™‰∫ã‰ª∂È©±Âä®Ê®°ÂûãÔºåÂõ†‰∏∫base epollËÉΩÂ§üÂÆûÁé∞O(1)Êó∂Èó¥Â§çÊùÇÂ∫¶ÁöÑÂìçÂ∫îÊìç‰ΩúÔºåÂõ†Ê≠§ËÉΩÂ§üÊèê‰æõÂæàÂ•ΩÊÄßËÉΩ„ÄÇRedisÂ∑≤Áªè‰ª•Ë∂ÖËøá60000‰∏™ËøûÊé•‰∏∫Âü∫ÂáÜÔºåÂπ∂‰∏îÂú®Ëøô‰∫õÊù°‰ª∂‰∏ã‰ªçËÉΩÂ§üÁª¥ÊåÅ50000 q / sÁöÑÂêûÂêêÈáèÔºåËÄå‰∏îÂÖ∑Êúâ30000‰∏™ËøûÊé•ÁöÑÂÆû‰æãÂè™ËÉΩÂ§ÑÁêÜ100‰∏™ËøûÊé•ÂèØËææÂà∞ÁöÑÂêûÂêêÈáèÁöÑ‰∏ÄÂçäÔºåÂèØÂèÇËÄÉ‰∏ãÂõæÔºàÊù•Ê∫êÂÆòÁΩëÔºâÔºö&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1592991673063.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h5 id=&#34;elasticsearch&#34;&gt;ElasticSearch&lt;/h5&gt;
&lt;p&gt;ElasticSearchÂèØ‰ª•Ëß£ÂÜ≥Â§ßÊï∞ÊçÆÈáè‰∏ãÁöÑÊêúÁ¥¢ÊÖ¢ÈóÆÈ¢òÔºåËøôÈáåÁ¨îËÄÖÂ∞±Êãø Ê≠ªÁ£ïElasticSearchÁ§æÂå∫‰ΩúËÄÖÁöÑ‰ºòÂåñÂª∫ËÆÆÔºåÁªôÂá∫Âá†ÁÇπÂú®Êó•Â∏∏ÂºÄÂèëElasticSearchÁöÑ‰ºòÂåñÊñπÊ°àÔºö&lt;br&gt;
1„ÄÅÂ∞ΩÈáèÂ∞ÜÊâÄÊúâÊï∞ÊçÆÁöÑ‰∏ÄÂçäÈÉΩÁºìÂ≠òÂú®ÂÜÖÂ≠òÂΩì‰∏≠file cache system ÂΩì‰∏≠&lt;br&gt;
2„ÄÅÂ∞ÜÂ∞ëÈáèÔºàÊü•ËØ¢Â≠óÊÆµÊØîËæÉÈ¢ëÁπÅÔºâÂ≠óÊÆµÊîæÂÖ•ESÔºåÂÖ∂‰ªñÂÖ®ÈáèÂ≠óÊÆµÊîæÂÖ•Hbase‰∏≠ÔºåÈááÁî®ES + HbaseÊñπÂºèÊèêÂçáÊü•ËØ¢ÊïàÁéáÔºåËäÇÁúÅESÂ≠òÂÇ®Á©∫Èó¥Ôºåfile cache systemÁöÑÊï∞ÊçÆÂ∞±‰ºöÂ≠òÁöÑÊõ¥Â§ö&lt;br&gt;
3„ÄÅÁºìÂ≠òÈ¢ÑÁÉ≠ÔºåÂèØ‰ª•ÂÅö‰∏Ä‰∏™ÁºìÂ≠òÈ¢ÑÁÉ≠Á≥ªÁªüÔºåÂÆöÊó∂Êü•ËØ¢ÁÉ≠ÁÇπÊï∞ÊçÆÂ∞ÜÂÖ∂ÁºìÂ≠òÂú®filesystem cache ‰∏≠&lt;br&gt;
4„ÄÅÂÜ∑ÁÉ≠ÂàÜÁ¶ªÔºåÂ∞ÜËÆøÈóÆÈáèÈ´òÁöÑÂíåÂÜ∑Êï∞ÊçÆÂàÜÂà´ÊîæÁΩÆÁ¥¢Âºï&lt;br&gt;
5„ÄÅES ducomentËÆæËÆ°ÔºåÂ∞ΩÈáèÈÅøÂÖçËøûÊé•„ÄÅÁà∂Â≠êÊñáÊ°£Á≠âËøûÊé•Êìç‰ΩúÔºåÂ∞ÜÊï∞ÊçÆÂáÜÂ§áÂ•ΩÂêéÂÜçÂ≠òÂÖ•ES&lt;br&gt;
6„ÄÅ‰∏çÂÖÅËÆ∏Ê∑±Â∫¶ÂàÜÈ°µÔºåÈ°µÊï∞Ë∂äÂ§ßÔºåÊ∑±Â∫¶Ë∂äÊ∑±Ôºå‰ªéÊØè‰∏Ä‰∏™shardËøîÂõûÁöÑÊï∞ÊçÆÂ∞±Ë∂äÂ§öÔºåËÄóÊó∂Ë∂ä‰πÖ„ÄÇÂèØ‰ª•ÈÄöËøáscroll apiÊ∏∏Ê†áËøõË°åÊü•ËØ¢„ÄÇ&lt;br&gt;
7„ÄÅÂøÖÈ°ªÈôêÂà∂Ê®°Á≥äÊêúÁ¥¢ÁöÑÈïøÂ∫¶Ôºå‰∏çÁÑ∂CPU‰ºöÈ£ôÈ´òÔºåÂèØÂèÇËÄÉ https://elasticsearch.cn/article/171&lt;/p&gt;
&lt;h3 id=&#34;3-‰∏öÂä°Â±ÇÊñπÈù¢&#34;&gt;3„ÄÅ‰∏öÂä°Â±ÇÊñπÈù¢&lt;/h3&gt;
&lt;p&gt;ÊØè‰∏™ÂÖ¨Âè∏‰∏öÂä°Â±ÇÈù¢‰ºòÂåñ‰∏çÁõ∏ÂêåÔºåË¶ÅÊ†πÊçÆÂÖ∑‰Ωì‰∏öÂä°Âú∫ÊôØÂéª‰ºòÂåñÔºåÂà´‰∫∫ÁöÑÊñπÊ°àÂè™ËÉΩ‰Ωú‰∏∫ÂèÇËÄÉ„ÄÇ&lt;br&gt;
ËøôÈáåÁ¨îËÄÖÂ∞±ÊãøÈáëËûçË°å‰∏öËÉåÊôØ‰∏ãÔºåÂàó‰∏æ‰∏â‰∏™‰ºòÂåñ‰æãÂ≠ê„ÄÇ&lt;br&gt;
1„ÄÅËÉåÊôØÔºö‰ºÅ‰∏öÂÄüË¥∑Ôºå‰ºö‰ªéÁî®Êà∑ÁöÑÊäïÁöÑÈì∂Ë°åÊüê‰∏™‰∫ßÂìÅÁöÑËµÑÈáëÊ±†‰∏≠ÂåπÈÖçÊü•ÊâæÂêàÈÄÇÁöÑËµÑÈáëÔºåÁÑ∂ÂêéËøõË°åËµÑÈáëÂç†ÊúâÔºåÈì∂Ë°åÁúüÂÆûËΩ¨Ë¥¶ÂêéÔºåÁîüÊàêÁªàÊÄÅÁöÑÂÄ∫ÊùÉÂÖ≥Á≥ª„ÄÇ&lt;br&gt;
‰ºòÂåñ‰πãÂâçÔºö‰ΩøÁî®ÂêåÊ≠•ÈîÅÔºåÂêå‰∏ÄÊó∂Èó¥Âè™ËÉΩÂèà‰∏Ä‰∏™Á∫øÁ®ãÂéªËµÑÈáëÊ±†‰∏≠ÂåπÈÖçËµÑÈáëÔºåËøôÁßçÊñπÊ°àÊúâ‰∏•ÈáçÁöÑÊÄßËÉΩÈóÆÈ¢òÔºåÂÖ∂‰ªñÁ∫øÁ®ãÊ≤°ÊúâÊãøÂà∞ÈîÅ‰πãÂâçÂè™ËÉΩËá™ÊóãÂ∞ùËØïËé∑ÂèñÈîÅÔºåÊçüËÄóCPUËµÑÊ∫ê„ÄÇ&lt;br&gt;
‰ºòÂåñ‰πãÂêéÔºöÂéªÊéâÂêåÊ≠•ÈîÅÔºåÊîπÊàê‰πêËßÇÈîÅÔºåÊîæÂà∞Êï∞ÊçÆÂ∫ìÂÅöÔºåËµÑÈáëË°®ÁöÑÂ≠óÊÆµÂ¢ûÂä†‰∏Ä‰∏™Ê†áËØÜË°®Á§∫ÊòØÂê¶Âç†Áî®ÔºåÁ∫øÁ®ãËøõÊù•Â∞ùËØïÂåπÈÖçËµÑÈáëÔºå‰πêËßÇÈîÅÂéªÈ¢ÑÂç†ËµÑÈáëË°®ÔºåÊàêÂäüË°®Á§∫ÂåπÈÖçÊàêÂäü„ÄÇËøôÈáåË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂ∞ΩÈáè‰∏Ä‰∏™ÂÄüË¥∑ÂåπÈÖç‰∏ÄÊØîËµÑÈáëÔºåËøôÊ†∑ËµÑÈáëÊ±†ÈáåÈù¢ÁöÑËµÑÈáëÈîÅË°åËåÉÂõ¥‰ºöÂáèÂ∞ëÔºàÂõ†‰∏∫ÊúâÂ§öÁ∫øÁ®ãÊä¢Âç†ËµÑÈáëËµÑÊ∫êÔºâÔºåËµÑÈáëÂåπÈÖçÁöÑÈÄüÂ∫¶‰ºöÂä†Âø´ÔºåÂπ∂‰∏îËøôÊ†∑‰ºòÂåñËøôÊ†∑Èì∂Ë°åËΩ¨Ë¥¶ÁöÑÊ¨°Êï∞‰ºöÂáèÂ∞ëÔºàÂ¶ÇÊûúÂåπÈÖç‰∏ÄÊâπËµÑÈáëÂ∞±Ë¶ÅËøõË°åÁõ∏ÂêåÊï∞ÈáèËΩ¨Ë¥¶Ê¨°Êï∞ÔºâÔºåÈò≤Ê≠¢Â§ö‰∏™ÊäïËµÑ‰∫∫Ë¥¶Êà∑ËøõË°åÈì∂Ë°åËΩ¨Ë¥¶ÔºåÂáèÂ∞ëÊï¥‰∏™ÂÄüÊ¨æ‰∏öÂä°Á∫øÁöÑËÄóÊó∂ÔºåÈÅøÂÖçÂÖ∂‰∏≠‰∏Ä‰∏™ËΩ¨Ë¥¶Âá∫ÈîôÂØºËá¥ÂÖ®ÈÉ®Ë¶ÅÂõûÊªöËøôÊ†∑ÁöÑÊÉÖÂÜµ„ÄÇ&lt;br&gt;
ËøôÈáåÂÖ∂ÂÆûËøòÂèØ‰ª•ËøõË°å‰ºòÂåñÔºåÊØîÂ¶Ç‰∏ÄÁ¨î‰∏ÄÁ¨îÁöÑÂç†ÊúâËµÑÈáëÔºåÂç†ÊúâÂ§±Ë¥•ÁöÑcontinueÁªßÁª≠‰∏ã‰∏ÄÁ¨îËµÑÈáëÂê´ÊúâÔºå‰∏çÁî®‰∏ÄÊ¨°Âú®‰∏Ä‰∏™‰∫ãÂä°ÈáåÈù¢Âç†ÊúâÂ§ßÈáèËµÑÈáëÔºåÈò≤Ê≠¢Â§ß‰∫ãÂä°ÊâßË°åÂ§±Ë¥•‰ª•ÂèäÂá∫Áé∞ÂÖ∂‰ªñ‰ºöÊúâÊ≠ªÈîÅÁöÑÂèØËÉΩÊÄß„ÄÇËøôÈáå‰ºòÂåñÁöÑÊÄùÊÉ≥Â∞±ÊòØÂ§ß‰∫ãÂä°ÊãÜÊàêÂ∞è‰∫ãÂä°ÔºåÈò≤Ê≠¢‰∫ãÂä°ÊâßË°åÂ§±Ë¥•ÁöÑÊ¶ÇÁéá„ÄÇ&lt;/p&gt;
&lt;p&gt;2„ÄÅËÉåÊôØÔºö‰ºÅ‰∏öÂÄüË¥∑ÔºåÂêåÊ≠•ËØ∑Ê±ÇËΩ¨ÂºÇÊ≠•&lt;br&gt;
‰ºòÂåñ‰πãÂâçÔºå‰∏âÊñπ‰ºÅ‰∏öÂÄüË¥∑ËØ∑Ê±ÇÔºåÊòØÂêåÊ≠•Ë∞ÉÁî®ÔºåÂõ†‰∏∫‰∏ÄÊù°ÂÆåÊï¥ÁöÑÂÄüË¥∑‰∏öÂä°Á∫øÈùûÂ∏∏ÈïøÔºå‰∏≠Èó¥‰ºöRPCË∞ÉÁî®ÈùûÂ∏∏Â§öÁöÑÂ∫ïÂ±ÇÊúçÂä°‰ª•ÂèäÂÖ∂‰ªñËøúÁ®ãÊé•Âè£ÔºåËøôÊ†∑ÁöÑËØùËØ∑Ê±ÇÂà∞ÂìçÂ∫îÊó∂Èó¥‰ºöÊãâÁöÑÈùûÂ∏∏ÈïøÔºåÂΩ±ÂìçCÁ´ØÁöÑÁî®Êà∑‰ΩìÈ™å„ÄÇ&lt;br&gt;
‰ºòÂåñ‰πãÂêéÔºåÂêåÊ≠•ÊîπÂºÇÊ≠•ÔºåÂÖ∑‰ΩìÂÅöÊ≥ïÊòØÔºåÂÄüË¥∑ËØ∑Ê±ÇËøõÂÖ•Á≥ªÁªüÂêéÔºå‰ºöÂÖàÁîüÊàê‰∏Ä‰∏™ËøõË°å‰∏≠ÁöÑÁä∂ÊÄÅÂÄüË¥∑Êï∞ÊçÆÊèíÂÖ•Êï∞ÊçÆÂ∫ìÔºåÁÑ∂ÂêéÂ∞ÜÂîØ‰∏ÄÊ†áËØÜ‰∏¢ÂÖ•MQ‰∏≠ÔºåÁÑ∂ÂêéÂ∞±ËøîÂõûÊàêÂäü„ÄÇËøôÊ†∑ÂêûÂêêÈáè‰ºöÂ¢ûÂä†ÔºåÁî®Êà∑Á´Ø‰ΩìÈ™å‰ºöÈùûÂ∏∏Â•Ω„ÄÇ&lt;br&gt;
ÂΩìÁÑ∂Â¶ÇÊûúËØ¥Ë¶Å‰øùËØÅÈ´òÂèØÁî®ÔºåÂèØ‰ª•Âà©Áî®MQÁöÑ‰∫ãÂä°Ê∂àÊÅØÂÅöÔºåÂà©Áî®‰∫åÈò∂ÊÆµÊèê‰∫§ÊñπÂºè‰øùËØÅMQËÉΩÂ§üÊî∂Âà∞Ê∂àÊÅØ„ÄÇÂÖ∑‰ΩìÊñπÊ°àÂèØ‰ª•ÁúãÁ¨îËÄÖÁöÑËøôÁØáÊñáÁ´† &lt;a href=&#34;https://zhangyaoo.github.io/post/jin-rong-ji-ye-wu-xia-fen-bu-shi-shi-wu-bao-zheng-shu-ju-yi-zhi-xing//&#34;&gt;ÈáëËûçÁ∫ß‰∏öÂä°‰∏ãÂàÜÂ∏ÉÂºè‰∫ãÂä°‰øùËØÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄß&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;3„ÄÅËÉåÊôØÔºöCÁ´ØÁî®Êà∑Âú®APP‰∏äÔºåÊüê‰∏Ä‰∏™Ê†áÂºÄÂêØÂãüÈõÜËµÑÈáëÂêéËøõË°åÊäïÊ†áÔºåËøôÈáåÁöÑÊ†áÁ±ª‰ººÊîØ‰ªòÂÆùÁöÑÁêÜË¥¢‰∫ßÂìÅÔºåÂºÄÂßãÂãüÈõÜÁöÑÊó∂ÂÄô‰ºöÊúâÈ´òÂπ∂ÂèëÊµÅÈáèÊ∂åÂÖ•ÔºåÂΩìAPPÁ´ØÁî®Êà∑ÂêåÊó∂ÊäïÊ†áÔºå‰ºöÊúâÂ§ßÈáèËØ∑Ê±ÇÔºåËøôÂ∞±ÂΩ¢Êàê‰∫ÜÊä¢Ë¥≠ÁöÑÂä®‰ΩúÔºåÂõ†‰∏∫‰∏Ä‰∏™‰∫ßÂìÅÊ†áÁöÑÂèØÊäïÈáëÈ¢ùÊòØÊúâÈôêÁöÑÔºåÂè™ÊúâÂ∞ëÊï∞‰∫∫ËÉΩÊäïÊ†áÊàêÂäü&lt;br&gt;
‰ºòÂåñ‰πãÂâçÔºöÁ¨îËÄÖÂú®‰∏äÊñá‰∏≠ÊèêÂà∞ÁöÑÔºåÂ∞ΩÁÆ°ËØ¥È¢ëÁπÅÂ∞ÜÊõ¥Êñ∞Ë°åÈîÅÁöÑÊï∞ÊçÆÊîæÂà∞‰∫ãÂä°ÁöÑÊúÄÂêéÔºå ‰ºöÊúâÊÄßËÉΩÊèêÂçáÔºå‰ΩÜÊòØÈöèÁùÄÂπ∂ÂèëÊï∞Â¢ûÈïøÔºåMySQL‰πü‰ºöÊàê‰∏∫ÊÄßËÉΩÁì∂È¢à„ÄÇ&lt;br&gt;
‰ºòÂåñ‰πãÂêéÔºöÂà©Áî®redisÁöÑÁ∫ØÂÜÖÂ≠òÊìç‰ΩúÈ´òÊÄßËÉΩÁöÑ‰ºòÁÇπÔºåÂ∞Ü‰∫ßÂìÅÁöÑÂèØÊäïÈáëÈ¢ùÊîæÂÖ•ÁºìÂ≠òredisÔºàËøôÈáåredisÈáåÈù¢ÁöÑÈáëÈ¢ùÊØîÊï∞ÊçÆÂ∫ì‰∏≠Â∞ë‰øùËØÅ‰∏çË∂ÖÂçñÔºâÔºåÂà©Áî®redisÁöÑdecrbyÂëΩ‰ª§ÊàñËÄÖluaËÑöÊú¨Ôºå‰øùËØÅ‰∫ßÂìÅÊ†áÂâ©‰ΩôÂèØÊäïÈáëÈ¢ùËÉΩÂ§üËøõË°åÂéüÂ≠êÂáèÂ∞ëÔºåÊØè‰∏ÄÊ¨°ÂáèÂ∞ëÊàêÂäüÂêéÔºåÂ∞ÜÁî®Êà∑Ëøô‰∏ÄÊ¨°ÊäïÊ†áÁöÑÊï∞ÊçÆ‰∏¢ÂÖ•MQ‰∏≠ÂºÇÊ≠•Â§ÑÁêÜÔºåÊ∂àË¥πÁ´ØÂÅöÁöÑÂ∞±ÊòØÂ∞ÜÊèíÂÖ•È¢ÑÁä∂ÊÄÅÁöÑÂÄüÊ¨æÊï∞ÊçÆ„ÄÅÂÜªÁªìÁî®Êà∑ÈáëÈ¢ùÂíåÂáèÂ∞ë‰∫ßÂìÅÁöÑÂèØÊäïÈáëÈ¢ùÊîæÂÖ•Âêå‰∏Ä‰∏™‰∫ãÂä°‰∏≠Â§ÑÁêÜ„ÄÇ&lt;br&gt;
‰∏äÈù¢ÂÅöÁöÑ‰ºòÂåñËÉΩÂ§ü‰øùËØÅCÁ´ØÁî®Êà∑ÁöÑËâØÂ•Ω‰ΩìÈ™åÔºå‰ΩÜÊòØÂºïÂÖ•ÂêÑÁßç‰∏≠Èó¥‰ª∂ÁöÑËØù‰ºöÂá∫Áé∞ÂêÑÁßçÈóÆÈ¢òÈúÄË¶ÅÂéªËß£ÂÜ≥ÔºåÊØîÂ¶ÇÈáçÂ§çÊäïÊ†áÊÄé‰πàÂäûÔºåRedisÊåÇ‰∫ÜÊÄé‰πàÔºüMQÊåÇ‰∫ÜÊÄé‰πàÂäûÔºüÊ∂àÊÅØ‰∏¢Â§±ÊÄé‰πàÂäûÔºüÁ≠â‰∏ÄÁ≥ªÂàóÈóÆÈ¢ò„ÄÇ&lt;br&gt;
ÈáçÂ§çÊäïÊ†áÔºåÂèØ‰ª•Âà©Áî®Áî®Êà∑Ê†áËØÜÁöÑÂîØ‰∏ÄtokenÂÅöÔºåÁü≠‰ø°ÁîüÊàêtokenÔºåËÆæÁΩÆtokenÂ§±ÊïàÊó∂Èó¥ÔºàÁü≠‰ø°Â§±ÊïàÊó∂Èó¥60sÔºâÔºåÊäïÊ†áÊó∂ÂÄôÊ†°È™åtokenÊòØÂê¶ËøáÊúüÂíå‰ΩøÁî®Ëøá„ÄÇ&lt;br&gt;
RedisÊåÇÔºåËøôÊó∂ÂÄôÂ∞±Ë¶ÅËÄÉËôëÊåÅ‰πÖÂåñÂíåÈõÜÁæ§Âì®ÂÖµ‰øùÊåÅredisÈ´òÂèØÁî®„ÄÇ&lt;br&gt;
MQÊåÇ‰∫ÜÔºåÊ∂àÊÅØ‰∏¢Â§±ÔºåÈáçÂ§çÊ∂àË¥πÁ≠âÔºåËøôÊó∂ÂÄôÂ∞±Ë¶ÅËÄÉËôëbrokerÁöÑÊåÅ‰πÖÂåñÔºåÁîü‰∫ßÁ´ØÂíåÊ∂àË¥πÁ´ØÁöÑÈáçËØïÊú∫Âà∂ÂíåackÊú∫Âà∂„ÄÇ&lt;br&gt;
‰ª•‰∏äÈúÄË¶ÅÂºÄÂèë‰∫∫ÂëòÂéªÂ∫îÂØπÊØè‰∏Ä‰∏™ÂèØËÉΩÂá∫Áé∞ÈóÆÈ¢òÁöÑÂú∫ÊôØ„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;‰∏â-ÂêéÁª≠ÊµÅÈáèÂ¢ûÈïøÁ≥ªÁªüÊÄßËÉΩ‰ºòÂåñÊÄùË∑Ø&#34;&gt;‰∏â„ÄÅÂêéÁª≠ÊµÅÈáèÂ¢ûÈïøÁ≥ªÁªüÊÄßËÉΩ‰ºòÂåñÊÄùË∑Ø&lt;/h2&gt;
&lt;p&gt;ÂΩìÊµÅÈáèÊøÄÂ¢ûÁöÑÊó∂ÂÄôÔºåÈ¶ñÂÖàË¶ÅËÄÉËôëÂà∞Á≥ªÁªüÁöÑÁ®≥ÂÆöÊÄßÂíåÈ´òÂèØÁî®ÔºåÂêéÁª≠ÈíàÂØπÁâπÂÆöÁöÑÂú∫ÊôØÔºåÂàÜÊûêÊÄßËÉΩÁì∂È¢àÔºåÁÑ∂ÂêéÂÜçÂéªÂÅöÂπ∂ÂèëÁöÑ‰ºòÂåñ„ÄÇËøôÈáåÁ¨îËÄÖÂ∞±&lt;strong&gt;ÁÆÄÂçïÁöÑ&lt;/strong&gt;Âàó‰∏æ‰∏Ä‰∏ã‰∏öÁïåÁöÑÂÅöÊ≥ïÔºå‰∏ãÈù¢ÊØè‰∏ÄÊù°ËØªËÄÖÈÉΩÂèØ‰ª•Ëá™Ë°åÊâ©Â±ïÂ§ßÁØáÂπÖÊ∑±ÂÖ•Âéª‰∫ÜËß£„ÄÇ&lt;/p&gt;
&lt;h4 id=&#34;È´òÂèØÁî®&#34;&gt;È´òÂèØÁî®&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;‰ΩøÁî®ÂèçÂêë‰ª£ÁêÜÂíå&lt;strong&gt;Ë¥üËΩΩÂùáË°°&lt;/strong&gt;ÂÆûÁé∞ÂàÜÊµÅÔºåÂπ∂‰∏îÂÆûÁé∞Âä®ÊÄÅÂàáÊç¢‰∏ªÂ§áÊú∫Âô®Ôºå ÁΩëÂÖ≥Ë¥üËΩΩÂùáË°°ÔºåDNSÂ§öÊú∫ÊàøË¥üËΩΩÂùáË°°&lt;/li&gt;
&lt;li&gt;ÈÄöËøá&lt;strong&gt;ÈôêÊµÅ&lt;/strong&gt;‰øùÊä§Â∫îÁî®ÂÖçÂèóÈõ™Â¥©‰πãÁÅæ&lt;/li&gt;
&lt;li&gt;ÈÄöËøá&lt;strong&gt;ÈôçÁ∫ß&lt;/strong&gt;ÂÆûÁé∞Ê†∏ÂøÉÊúçÂä°ÊúçÂä°ÂèØÁî®ÔºåÁâ∫Áâ≤ÈùûÊ†∏ÂøÉÊúçÂä°&lt;/li&gt;
&lt;li&gt;ÈÄöËøá&lt;strong&gt;ÈöîÁ¶ª&lt;/strong&gt;ÂÆûÁé∞ÊïÖÈöúÈöîÁ¶ªÂíåËµÑÊ∫êÈöîÁ¶ªÔºåÊØîÂ¶ÇÁ∫øÁ®ãÈöîÁ¶ªÔºåÂØπÊñπÊ≥ïÊàñËÄÖÁ±ªÂÖ∑‰ΩìÂàÜÈÖçÁ∫øÁ®ãÊï∞ÈáèÔºåÈò≤Ê≠¢Áõ∏‰∫íÂΩ±Âìç&lt;/li&gt;
&lt;li&gt;ÈÄöËøáËÆæÁΩÆÂêàÁêÜÁöÑ&lt;strong&gt;Ë∂ÖÊó∂&lt;/strong&gt;Ë∞ÉÁî®‰∏éÈáçËØïÊú∫Âà∂ÈÅøÂÖçËØ∑Ê±ÇÂ†ÜÁßØÈÄ†ÊàêÈõ™Â¥©&lt;/li&gt;
&lt;li&gt;ÈÄöËøá&lt;strong&gt;ÂõûÊªö&lt;/strong&gt;Êú∫Âà∂Âø´ÈÄü‰øÆÂ§çÈîôËØØÁâàÊú¨&lt;/li&gt;
&lt;li&gt;Redis&lt;strong&gt;ÈõÜÁæ§&lt;/strong&gt;‰øùËØÅÈ´òÂèØÁî®Ôºå&lt;strong&gt;Âì®ÂÖµ&lt;/strong&gt;Ê®°Âºè‰øùËØÅÊïÖÈöúËΩ¨Áßª&lt;/li&gt;
&lt;li&gt;Redis MQÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÂºÄÂêØ&lt;strong&gt;ÊåÅ‰πÖÂåñ&lt;/strong&gt;Ôºå‰øùËØÅÊï∞ÊçÆ‰∏ç‰∏¢Ôºõ&lt;strong&gt;ackÊú∫Âà∂&lt;/strong&gt;Âíå&lt;strong&gt;ÈáçËØïÊú∫Âà∂&lt;/strong&gt;‰øùËØÅÊï∞ÊçÆÁöÑÂèØÈù†ÊÄß&lt;/li&gt;
&lt;li&gt;ÂàÜÂ∏ÉÂºèÊúçÂä°ÁéØÂ¢É&lt;strong&gt;ÈìæË∑ØË∑üË∏™&lt;/strong&gt;ÔºåÁõëÊéßÊï¥‰∏™ÊúçÂä°ÁöÑÊúçÂä°Ë¥®Èáè&lt;/li&gt;
&lt;li&gt;Á°¨‰ª∂ËµÑÊ∫ê&lt;strong&gt;ÁõëÊéß&lt;/strong&gt;„ÄÅCPU„ÄÅÂÜÖÂ≠ò„ÄÅË¥üËΩΩ„ÄÅIO„ÄÅÂ†ÜÂÜÖÂ≠ò„ÄÅJVM GC„ÄÅÁ∫øÁ®ãÊ±†‰ª•ÂèäÂêÑÁßç‰∏≠Èó¥‰ª∂ÁõëÊéßÁ≠âÁ≠â&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;È´òÂπ∂Âèë&#34;&gt;È´òÂπ∂Âèë&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;Âà©Áî®MQÂêåÊ≠•ËΩ¨ÂºÇÊ≠•ÔºåÊµÅÈáèÂâäÂ≥∞ÔºåÂ§öÁ∫øÁ®ãÂºÇÊ≠•Ê∂àË¥π&lt;/li&gt;
&lt;li&gt;ËØªÂú∫ÊôØÊØîËæÉÂ§öÁöÑÊé•Âè£ÂèØ‰ª•Âà©Áî®ÁºìÂ≠òRedisÔºåÂåÖÊã¨ÁÉ≠ÁÇπkeyÁºìÂ≠òÈ¢ÑÁÉ≠ÔºåÂ§öÁ∫ßÁºìÂ≠òÔºåÊØîÂ¶ÇÂàÜÂ∏ÉÂºèÁºìÂ≠òÔºåÊú¨Âú∞ÁºìÂ≠òÂíåCDNÁºìÂ≠ò„ÄÇËøòÂèØ‰ª•ÂÅöÈõÜÁæ§„ÄÅÂì®ÂÖµ„ÄÅÈ´òÂèØÁî®‰øùËØÅRedisÊÄßËÉΩ&lt;/li&gt;
&lt;li&gt;ÂØπ‰∫éÂº∫‰∏ÄËá¥ÁöÑÂêåÊ≠•‰∏ãÂçïÂú∫ÊôØÔºåÂèØ‰ª•Â∞ÜÂØπMySQLÁöÑÊìç‰ΩúÊîπ‰∏∫RedisÔºåÁÑ∂ÂêéÂà©Áî®MQÂÅöÂºÇÊ≠•&lt;/li&gt;
&lt;li&gt;‰ºòÂåñJVMÔºåÂåÖÊã¨Êñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£ÁöÑÂ§ßÂ∞è„ÄÅGCÁÆóÊ≥ïÁöÑÈÄâÊã©Á≠âÔºåÂ∞ΩÂèØËÉΩÂáèÂ∞ëGCÈ¢ëÁéáÂíåËÄóÊó∂&lt;/li&gt;
&lt;li&gt;ÈùûÊ†∏ÂøÉ‰∏öÂä°ÈÄªËæë„ÄÅÂª∂Ëøü‰ªªÂä°ÈÄªËæë„ÄÅ‰∏âÊñπË∞ÉÁî®ÈÄªËæëÔºåÂèØ‰ª•ÂÅöÂºÇÊ≠•&lt;/li&gt;
&lt;li&gt;ÂØπ‰∫éÊû∂ÊûÑÊñπÈù¢ÔºåÂèØ‰ª•ÂÅöË¥üËΩΩÂùáË°°ÈõÜÁæ§ÈÉ®ÁΩ≤ÔºåMySQL‰∏ª‰ªé„ÄÅÂàÜÂ∫ìÂàÜË°®ÊàñËÄÖÂΩíÊ°£„ÄÅRedisÈõÜÁæ§„ÄÅÂ§öÁ∫ßÁºìÂ≠ò„ÄÅÂàÜÂ∏ÉÂºèÂûÇÁõ¥ÊãÜÂàÜÈÉ®ÁΩ≤„ÄÅÊêúÁ¥¢Âú∫ÊôØÂºïÂÖ•ESÁ≠âÂ§ö‰∏™ÊñπÈù¢ËÄÉËôë&lt;/li&gt;
&lt;li&gt;ÂØπ‰∫éÁ®ãÂ∫èÊñπÈù¢ÔºåÂèØ‰ª•‰ªéForÂæ™ÁéØÁöÑËÆ°ÁÆóÈÄªËæë‰ºòÂåñ„ÄÅÊâπÂ§ÑÁêÜÊú∫Âà∂ÂáèÂ∞ëIO„ÄÅÈááÁî®Êó∂Èó¥Â§çÊùÇÂ∫¶Êõ¥Â∞èÁöÑÊï∞ÊçÆÁªìÊûÑÂíåÁÆóÊ≥ï„ÄÅ‰πêËßÇÈîÅÂíåÂàÜÊÆµÈîÅÂíåÊó†ÈîÅÁºñÁ®ãÂáèÂ∞ëÈîÅÂÜ≤Á™ÅÁ≠âÊñπÈù¢ËÄÉËôë&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;Âõõ-ÊÄªÁªì&#34;&gt;Âõõ„ÄÅÊÄªÁªì&lt;/h2&gt;
&lt;p&gt;‰ª•‰∏äÔºåÁ¨îËÄÖ‰ªéÁ°¨‰ª∂Â±Ç„ÄÅ‰ª£Á†ÅÂ±Ç„ÄÅ‰∏≠Èó¥‰ª∂Â±Ç„ÄÅ‰∏öÂä°Â±ÇÁ≠â‰∏çÂêåÊñπÂêëÔºåÁÆÄÂçïÁöÑÂàÜÊûê‰∫ÜÂΩ±ÂìçÁ≥ªÁªüÊÄßËÉΩÂêÑ‰∏™Âõ†Á¥†Ôºå‰ª•ÂèäÊèê‰æõ‰∫ÜÁÆÄÂçïÁöÑ‰ºòÂåñÁöÑÊÄùË∑ØÂíå‰æãÂ≠ê„ÄÇÂõ†Á¨îËÄÖÂ∑•‰ΩúÁªèÈ™åËÉΩÂäõÊúâÈôêÔºåÊó†Ê≥ïÂÅöÂà∞ÂÖ®Èù¢ÁöÑÂàÜÊûêÔºåËøòÊúõËØªËÄÖËÉΩÂ§üÊåáÊ≠£ÈîôËØØ‰ª•ÂèäÊèê‰æõÂª∫ËÆÆ„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;ÂèÇËÄÉ&#34;&gt;ÂèÇËÄÉ&lt;/h2&gt;
&lt;p&gt;1„ÄÅÁßíÊùÄÂú∫ÊôØ‰∏ãMySQLÁöÑ‰ΩéÊïà‚Äî‚Äî‰∏ÅÂ•á&lt;br&gt;
2„ÄÅÊ≠ªÁ£ïElasticSearchÁ§æÂå∫‚Äî‚ÄîElasticSearch‰ºòÂåñ&lt;br&gt;
3„ÄÅMySQLÊÄßËÉΩÂéãÊµã‚Äî‚Äîhttps://my.oschina.net/u/867417/blog/758690&lt;br&gt;
4„ÄÅÈ´òÂèØÁî®Á≥ªÁªüÊñπÊ°à‚Äî‚Äîhttps://blog.csdn.net/hustspy1990/article/details/78008324&lt;br&gt;
5„ÄÅRedisÊÄßËÉΩÊµãËØï‚Äî‚Äîhttps://redis.io/topics/benchmarks&lt;/p&gt;
&lt;!--ÂèÇËÄÉ --&gt;
">Á≥ªÁªüÊÄßËÉΩ‰ºòÂåñÁöÑÊÄùËÄÉÂíåÊÄªÁªì</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/o1shi-jian-fu-za-du-xia-shuang-xiang-lian-biao-shi-xian-lru/"" data-c="
          &lt;h3 id=&#34;ÂâçË®Ä&#34;&gt;ÂâçË®Ä&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Á¨îËÄÖÂÖà‰ªélinkedHashMapÊ∫êÁ†Å‰∏≠ÂÄüÈâ¥ÊèíÂÖ•È°∫Â∫èËÆøÈóÆÁöÑ‰ª£Á†ÅÔºåÁÑ∂ÂêéÁÑ∂ÂêéËá™Â∑±ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™LRU&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;linkedhashmapÂ∫ïÂ±ÇÁöÑÊï∞ÊçÆÁªìÊûÑ&#34;&gt;linkedHashMapÂ∫ïÂ±ÇÁöÑÊï∞ÊçÆÁªìÊûÑ&lt;/h3&gt;
&lt;p&gt;linkedHashMapÂ∫ïÂ±ÇÁªìÊûÑÔºàÈ°∫Â∫èËÆøÈóÆÔºâÔºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1„ÄÅlinkedHashMapÁª¥Êä§‰∫ÜÊØè‰∏™nodeÁöÑÂèåÂêëÈìæË°®ÔºåÂàùÂßãÂåñÊó∂ÂÄôÁª¥Êä§‰∫ÜÁ©∫ÁöÑentry headerÂ§¥ÔºåÊñ∞Âä†ÂÖ•ÁöÑËäÇÁÇπÊîæÂà∞entryÁöÑÂ§¥ÈÉ®headerÁöÑnext&lt;/li&gt;
&lt;li&gt;2„ÄÅputËøòÊòØgetÈÉΩ‰ºöËøõË°åÈáçÊéíÂ∫èÔºåget entry1 ËøòÊòØput entry1ÈÉΩ‰ºöÂÖàÊääEntry1‰ªéÂèåÂêëÈìæË°®‰∏≠Âà†Èô§ÔºåÁÑ∂ÂêéÂÜçÊääEntry1Âä†ÂÖ•Âà∞ÂèåÂêëÈìæË°®ÁöÑË°®Â∞æ„ÄÇ&lt;/li&gt;
&lt;li&gt;3„ÄÅÈÅçÂéÜËÆøÈóÆÁöÑÊó∂ÂÄôÔºå‰ºöËÆøÈóÆheaderÁöÑ‰∏ã‰∏Ä‰∏™nextËäÇÁÇπÔºåËøôÂ∞±ÂΩ¢Êàê‰∫ÜÈ°∫Â∫èËÆøÈóÆ&lt;/li&gt;
&lt;/ul&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1592968145044.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;ÈìæË°®ÂÆûÁé∞&#34;&gt;ÈìæË°®ÂÆûÁé∞&lt;/h3&gt;
&lt;p&gt;ÂÆûÁé∞ÊÄùË∑ØÔºö&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1„ÄÅÊï∞ÊçÆÊòØÁõ¥Êé•Âà©Áî® HashMap Êù•Â≠òÊîæÁöÑ„ÄÇ&lt;/li&gt;
&lt;li&gt;2„ÄÅÂÜÖÈÉ®‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÂèåÂêëÈìæË°®Êù•Â≠òÊîæÊï∞ÊçÆÔºåÊâÄ‰ª•Êúâ‰∏Ä‰∏™Â§¥ÁªìÁÇπ headerÔºå‰ª•ÂèäÂ∞æÁªìÁÇπ tailer„ÄÇ&lt;/li&gt;
&lt;li&gt;3„ÄÅÊØèÊ¨°ÂÜôÂÖ•Â§¥ÁªìÁÇπÔºåÂà†Èô§Â∞æÁªìÁÇπÊó∂ÈÉΩÊòØ‰æùËµñ‰∫é header tailer&lt;br&gt;
&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1592220507945.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;import com.google.common.collect.Maps;
import java.util.Map;

/**
 * Á∫øÁ®ã‰∏çÂÆâÂÖ®ÔºåÂêåÊ≠•Êú∫Âà∂Ëá™Ë°åÊéßÂà∂„ÄÇ
 */
public class LRUCacheV2 {
    /**
     * ÁºìÂ≠òmap
     */
    private final Map&amp;lt;String, Node&amp;gt; cacheMap;

    /**
     * Â§¥ÊåáÈíà
     */
    private Node head;

    /**
     * Â∞æÊåáÈíà
     */
    private Node tail;

    /**
     * ÂÆπÈáè
     */
    private final int cacheSize;

    /**
     * ÂΩìÂâçÂÆπÈáè
     */
    private int currentCacheSize;

    LRUCacheV2(int capacity){
        cacheMap = Maps.newHashMapWithExpectedSize(capacity);
        cacheSize = capacity;
        currentCacheSize = 0;
    }

    public Object get(String key){
        Node node = cacheMap.get(key);
        if(node != null){
            // ÁßªÂä®Âà∞Â§¥ÊåáÈíà
            move2head(node);
            return node.getData();
        }
        return null;
    }

    public void remove(String key){
        Node node = cacheMap.get(key);
        if(node != null){
            Node pre = node.getPre();
            Node next = node.getNext();
            if(pre != null){
                pre.setNext(next);
            }
            if(next != null){
                next.setPre(pre);
            }

            // Â¶ÇÊûúÂà†Èô§ÂàöÂ•ΩÊòØÂ§¥ËäÇÁÇπÊàñËÄÖÂ∞æËäÇÁÇπÔºå‰πüË¶ÅÁßªÂä®ÊåáÈíà
            if(node.getKey().equals(head.getKey())){
                head = pre;
            }
            if(node.getKey().equals(tail.getKey())){
                tail = next;
            }

            cacheMap.remove(key);
        }
    }

    public void put(String key, Object value){
        Node node = cacheMap.get(key);
        if(node != null){
            // Â≠òÂú®ËäÇÁÇπÁöÑËØùÔºåÂ∞±Ë¶ÜÁõñÔºåÂπ∂‰∏îÊîæÂà∞Â§¥
            node.setData(value);
            move2head(node);
            cacheMap.put(key, node);
        }else {
            // ‰∏çÂ≠òÂú®ËäÇÁÇπÔºåÊûÑÈÄ†Âπ∂‰∏îÊîæÂà∞Â§¥
            if(currentCacheSize == cacheSize){
                // Âà†Èô§Â∞ænode
                String delKey = tail.getKey();
                cacheMap.remove(delKey);

                // Â∞æÊåáÈíàÁßªÂä®
                Node next = tail.getNext();
                if(next != null){
                    next.setPre(null);
                }
                tail.setNext(null);
                tail = next;

            }else{
                currentCacheSize++;
            }
            node = new Node();
            node.setData(value);
            node.setKey(key);
            // Â§¥ÊåáÈíàÁßªÂä®
            move2head(node);
        }
        cacheMap.put(key, node);
    }

    /**
     * ËäÇÁÇπÁßªÂà∞Â§¥
     */
    private void move2head(Node node){
        if(head == null){
            // ÂàùÂßãÂåñhead Âíå tail
            head = node;
            head.setNext(null);
            head.setPre(null);
            tail = node;
        }else {
            // Â¶ÇÊûúÊòØÁõ∏ÂêåÁöÑKeyÔºåÂï•ÈÉΩ‰∏çÁî®Âä®ÔºånodeÂ∞±ÊòØÊúÄÊñ∞ÁöÑÂ§¥
            if(node.getKey().equals(head.getKey())){
                return;
            }

            // Êà™Âèñnode
            Node pre = node.getPre();
            Node next = node.getNext();
            if(pre != null){
                pre.setNext(next);
            }
            if(next != null){
                next.setPre(pre);
            }

            // Â¶ÇÊûúË¶ÅÊà™ÂèñÁöÑËäÇÁÇπÊòØÂ∞æËäÇÁÇπÔºåÈÇ£‰πàÂ∞æËäÇÁÇπÊåáÈíà‰πüË¶ÅÂêëÂâçÁßªÂä®
            if(node.getKey().equals(tail.getKey())){
                tail = next;
            }

            // ÊîæÂú®Â§¥ÂâçÈù¢
            head.setNext(node);
            node.setPre(head);
            // node‰∏ã‰∏™ÊåáÈíàÊåáÂêënull
            node.setNext(null);
            head = node;
        }
    }

    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder() ;
        Node node = head;
        while (node != null){
            sb.append(node.getKey()).append(&amp;quot;:&amp;quot;)
                    .append(node.getData())
                    .append(&amp;quot;--&amp;gt;&amp;quot;) ;
            node = node.getPre();
        }
        return sb.toString();
    }

    public static void main(String[] args) {
        LRUCacheV2 lruCacheV2 = new LRUCacheV2(4);
        lruCacheV2.put(&amp;quot;1&amp;quot;,&amp;quot;1&amp;quot;);
        lruCacheV2.put(&amp;quot;2&amp;quot;,&amp;quot;2&amp;quot;);
        lruCacheV2.put(&amp;quot;3&amp;quot;,&amp;quot;3&amp;quot;);
        lruCacheV2.put(&amp;quot;4&amp;quot;,&amp;quot;4&amp;quot;);
        lruCacheV2.put(&amp;quot;5&amp;quot;,&amp;quot;5&amp;quot;);
        //lruCacheV2.get(&amp;quot;2&amp;quot;);
        //lruCacheV2.put(&amp;quot;2&amp;quot;,&amp;quot;22&amp;quot;);
        lruCacheV2.remove(&amp;quot;5&amp;quot;);
        System.out.println(lruCacheV2.toString());
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;ÈìæË°®ÂÆûÁé∞v2&#34;&gt;ÈìæË°®ÂÆûÁé∞V2&lt;/h3&gt;
&lt;p&gt;2021.3.15Êõ¥Êñ∞&lt;br&gt;
‰∏äËø∞ÁöÑÈìæË°®ÊúâÁÇπÂ§çÊùÇÔºåÊ≤°ÊúâËÄÉËôëÂà∞Âà©Áî®mapÁöÑsizeÔºåÊ≤°ÊúâÂà©Áî®Â•ΩÂ§¥Â∞æËäÇÁÇπÂèåÂêëÁâπÊÄßÔºåÁ¨îËÄÖÈáçÊñ∞ÂÆûÁé∞‰∫Ü‰∏ãÔºåÂèÇËÄÉleetcode146È¢ò&lt;br&gt;
ÂÆûÁé∞ÁöÑÂá†‰∏™Ë¶ÅÁÇπ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ë¶ÅÊûÑÈÄ†Â•ΩÂ§¥Â∞æËäÇÁÇπÔºåÂΩ¢ÊàêÊåáÈíàÈó≠ÁéØÔºå‰∏∫ÂêéÁª≠ÁöÑÂ¢ûÂà†ÁßªÂÅöÂ•ΩÂáÜÂ§á&lt;/li&gt;
&lt;li&gt;Âà†Èô§ËäÇÁÇπÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•Ê†πÊçÆmapÁöÑvalue‰πüÂ∞±ÊòØNodeÁöÑkeyÔºåÊù•Âà†Èô§map‰∏≠ÁöÑÊï∞ÊçÆÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÂèØ‰ª•Ê†πÊçÆmapÁöÑkeyÊù•Âà†Èô§Êï∞ÊçÆÔºå‰πüÂèØ‰ª•Ê†πÊçÆmapÁöÑvalue‰∏≠ÁöÑkeyÊù•Âà†Èô§Êï∞ÊçÆ&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-java&#34;&gt;package com.zyblue.fastim.common.algorithm.distribute;

import java.util.HashMap;
import java.util.Map;

/**
 * @author will
 * @date 2021/3/15 10:18
 */
public class LRUCacheV3&amp;lt;K, V&amp;gt;{
    public static class Node&amp;lt;K,V&amp;gt;{
        public K key;
        public V value;
        public Node&amp;lt;K,V&amp;gt; pre;
        public Node&amp;lt;K,V&amp;gt; next;
        public Node(){}
        public Node(K key, V value) {
            this.key = key;
            this.value = value;
        }
    }

    /**
     * mapËøôÊ†∑ËÆæËÆ°ÁöÑÂéüÂõ†ÊòØ
     * 1„ÄÅ
     */
    private Map&amp;lt;K, Node&amp;lt;K,V&amp;gt;&amp;gt; map = new HashMap&amp;lt;&amp;gt;();

    private int capacity;

    private Node&amp;lt;K,V&amp;gt; head;

    private Node&amp;lt;K,V&amp;gt; tail;

    public LRUCacheV3(int capacity){
        this.capacity = capacity;
        this.head = new Node&amp;lt;&amp;gt;();
        this.tail = new Node&amp;lt;&amp;gt;();
        head.pre = tail;
        tail.next = head;
    }

    private void remove2Head(Node&amp;lt;K,V&amp;gt; node){
        Node&amp;lt;K, V&amp;gt; pre = node.pre;
        Node&amp;lt;K, V&amp;gt; next = node.next;
        pre.next = next;
        next.pre = pre;

        add2Head(node);
    }

    private void removeTail(){
        Node&amp;lt;K, V&amp;gt; next = tail.next.next;
        tail.next = next;
        next.pre = tail;
    }

    private void add2Head(Node&amp;lt;K,V&amp;gt; node){
        Node&amp;lt;K, V&amp;gt; pre = head.pre;
        pre.next = node;
        node.next = head;
        node.pre = pre;
        head.pre = node;
    }

    public V get(K key){
        Node&amp;lt;K,V&amp;gt; node = map.get(key);
        if(node == null){
            return null;
        }
        remove2Head(node);
        return node.value;
    }

    public void put(K key, V value){
        Node&amp;lt;K,V&amp;gt; node = map.get(key);
        if(node == null){
            // Âà©Áî®mapÁöÑsize
            if(map.size() &amp;gt;= capacity){
                // ÂéªÈô§Â∞æÈÉ®ËäÇÁÇπ
                removeTail();
                // Âà†Èô§mapÁöÑnode
                map.remove(tail.next.key);
            }
            Node&amp;lt;K,V&amp;gt; nodeAdd = new Node&amp;lt;&amp;gt;(key, value);
            add2Head(nodeAdd);
            map.put(key, nodeAdd);
        }else {
            node.value = value;
            remove2Head(node);
        }
    }
}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ÂèÇËÄÉÔºö&lt;br&gt;
1„ÄÅhttps://www.iteye.com/blog/gogole-692103&lt;br&gt;
2„ÄÅhttps://crossoverjie.top/2018/04/07/algorithm/LRU-cache/&lt;/p&gt;
">O(1)Êó∂Èó¥Â§çÊùÇÂ∫¶‰∏ãÔºåÂèåÂêëÈìæË°®ÂÆûÁé∞LRU</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/2019-nian-zong-jie/"" data-c="
          &lt;p&gt;Â∞èÊèêÁ§∫ÔºöÈòÖËØªÊ≠§ÁØáÊñáÁ´†Â§ßÁ∫¶ÈúÄË¶Å‰∏âÂàÜÈíüÊó∂Èó¥Ôºå‰ª•‰∏ãÈÉΩÊòØ‰∏™‰∫∫‰∏Ä‰∫õÁîüÊ¥ªÂ∑•‰Ωú‰∏äÁ¢éÁ¢éÂøµÂøµÔºåÂî†Âè®Á¢éËØ≠ÔºåËØ∑ÊñüÈÖåÈòÖËØª~&lt;/p&gt;
&lt;p&gt;ÁõÆÂΩï&lt;br&gt;
ÂºÄÂ§¥&lt;br&gt;
Â≠¶‰π†&lt;br&gt;
Â∑•‰Ωú&lt;br&gt;
ËøêÂä®&lt;br&gt;
ÁîüÊ¥ª&lt;br&gt;
Ê∏∏Êàè&lt;br&gt;
ÁæéÈ£ü&lt;br&gt;
‰∫≤ÊÉÖ&lt;br&gt;
Áà±ÊÉÖ&lt;br&gt;
2020flag&lt;/p&gt;
&lt;p&gt;‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚ÄîÊàëÊòØÂàÜÂâ≤Á∫ø‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî&lt;/p&gt;
&lt;p&gt;ÂºÄÂ§¥&lt;br&gt;
ÂèàËøá‰∫Ü‰∏ÄÂπ¥ÔºåËÆ∞Âæó‰∏ä‰∏ÄÊ¨°ÂÜôÂπ¥ÁªàÊÄªÁªìËøòÊòØÂú®ÊàëÁãóÁ™ù(Âá∫ÁßüÊàø)ÈáåÈù¢ÂÜôÁöÑÔºåËøô‰∏ÄÊ¨°ÊòØÂú®Âçó‰∫¨ÂçóÁ´ôÂºÄÂßãÂÜôÁöÑ„ÄÇ&lt;br&gt;
Ê∑±Âú≥ÁöÑÂ§©Ê∞îÂ∞±ÊòØËøô‰πàÁ•ûÂ•áÔºå‰∏ÄÂπ¥Âà∞Â§¥Á©øÁü≠Ë¢ñÔºåÊõæÂíåÊàëÊúãÂèãÁ´ã‰∏ã‰∏Ä‰∏™flagÔºåËØ¥Âú®Ê∑±Âú≥365Â§©300Â§©Á©øÁü≠Ë¢ñÔºå‰∏çÁÑ∂Â∞±Ê¥ó‰∏Ä‰∏™ÊúàÁ¢óÔºå‰ºº‰πé‰ªäÂπ¥Ê∏©Â∫¶ÈôçÁöÑÊó©ÔºåÊó©Êó©Â∞±Á©ø‰∏ä‰∫ÜÁü≠Ë¢ñÔºå(flagÊûúÁÑ∂ÂØπ‰∫éÊàëÊù•ËØ¥Â∞±ÊòØÊâìËÑ∏ÁöÑ)ÔºåÊâÄ‰ª•ÊòéÂπ¥Êù•Â∞±ÁªôËá™Â∑±Ë£ÖÈÄºË°å‰∏∫‰ªòÂá∫‰ª£‰ª∑Ôºà‚ïØ&#39; - &#39;)‚ïØÔ∏µ ‚îª‚îÅ‚îª&lt;br&gt;
ËøôÈáå‰∏ÄÁõ¥ÈÉΩÊòØÂ§èÂ§©Ôºå‰∏çËÉΩÂÉèÂÆ∂‰π°‰∏ÄÊ†∑ËÉΩÊÑüÂèóÂà∞ÂõõÂ≠£ÁöÑÂèòÂåñÔºåÊÑüËßâÊó∂Èó¥ËøáÁöÑÁâπÂà´Âø´ÔºåÊúâ‰∏ÄÊ¨°Âú®ÂÖ¨Âè∏Êï≤‰ª£Á†ÅÊó∂ÂÄôÔºåÂê¨Âà∞‰∫ÜÈ∏üÈ∏£Â£∞ÔºåÁû¨Èó¥Â∞±ÊÉ≥Ëµ∑‰∫ÜÂÆ∂‰π°Áî∞Èáé‰∏≠ÁöÑÈ∏üÂè´Ëô´È∏£ÔºåËÑëÊµ∑ÈáåÂ∞±ÊµÆÁé∞‰∫ÜÈÇ£Âπ¥Â§èÂ§©ÔºåÂêÉÁùÄÂÜ∞Ê£çÔºåÂê¨ÁùÄËùâÈ∏£ÁöÑÊóßÊó∂ÂÖâ„ÄÇ&lt;br&gt;
Ëøô‰∏ÄÂπ¥ÊúâËÆ∏Â§öÂÄºÂæóÂÜôÁöÑ‰∏úË•øÔºåÁîüÊ¥ª‰∏≠ÁöÑÂêÑ‰∏™ÊñπÈù¢ÈÉΩÊúâ„ÄÇÁî®ÊàëËÄÅÁàπ‰∏ÄÂè•ËØùÔºå‰∏ÄÂπ¥Êó∂Èó¥‰∏çÁÆ°ÊòØËøõÊ≠•Â§öÂ∞ëÔºåÂè™Ë¶Å‰∏çÊòØÂéüÂú∞Ë∏èÊ≠•Ëµ∞Â∞±ÂèØ‰ª•„ÄÇËøôÊ¨°ËøòÊòØÂÉè2018Âπ¥ÊÄªÁªì‰∏ÄÊ†∑ÁªôËá™ÂêÑÂÅö‰∏Ä‰∫õÊÄªÁªìÂíå‰∏Ä‰∫õÔºàÁªôËá™Â∑±ÊâìËÑ∏ÁöÑÔºâflag&lt;/p&gt;
&lt;p&gt;Â≠¶‰π†&lt;br&gt;
ËØ¥Ëµ∑Â≠¶‰π†ÔºåËøôÈáåÊîæÂú®ÊúÄÂºÄÂßãÂÜôÔºåËá™ËÆ§‰∏∫Â≠¶‰π†ÊòØËá™Â∑±ÊèêÂçáËá™Â∑±ÁöÑÊúÄÁõ¥Êé•ÊúÄÊúâÊïàÁöÑÊñπÂºè„ÄÇ‰ªéÂ∞èÂ≠¶Âà∞È´ò‰∏≠‰ª•Ëá≥‰∫éÂ§ßÂ≠¶ÁöÑÁü•ËØÜÔºåÈÉΩÊòØÁöÆÊØõ„ÄÇÈáçË¶ÅÊòØÂüπÂÖª‰∫ÜÂø´ÈÄüÂ≠¶‰π†ËÉΩÂäõÂíåËá™Â≠¶ÁöÑ‰π†ÊÉØÔºåËøô‰∏™ÂèØ‰ª•ËØ¥ÊòØËá™ÂêÑÂ≠¶‰∏öÁîüÊ∂Ø‰∏≠Ëé∑ÂæóÊúÄÊúâ‰ª∑ÂÄºÁöÑ‰∏úË•ø‰∫Ü„ÄÇ‰ΩÜÊòØËøôÊòØ‰∏çÂ§üÁöÑÔºåÂØπ‰∫éÁîüÊ¥ª‰∏≠ËÆ§Áü•ÂíåÂ∑•‰ΩúÁöÑÊñπÈù¢ÔºåËá™ÊàëÁã¨Á´ãÊÄùËÄÉ‰πüÊòØÂøÖ‰∏çÂèØÂ∞ëÁöÑ„ÄÇËá™ÂêÑ‰πüÂú®ÁâπÊÑèÂéªÊ≥®ÈáçÔºåÂüπÂÖªËá™ÂêÑÁöÑÁã¨Á´ãÊÄùËÄÉÁöÑËÉΩÂäõ„ÄÇ&lt;br&gt;
Âú®ËøôÊÑüË∞¢‰∫ëÊô∫ÊÉ†IPOÊâÄÊúâÂêéÂè∞ÂêåÂ≠¶Ôºå‰ª•Âèä@ÈôàÁß¶ÂúÜ ÂêåÂ≠¶ÔºåËÆ©Ëá™Â∑±ËÆ§ËØÜÂà∞Áã¨Á´ãÊÄùËÄÉÂíåÂõ¢ÈòüÂêà‰ΩúÁöÑÈáçË¶ÅÊÄß„ÄÇ&lt;/p&gt;
&lt;p&gt;Ëøô‰∏ÄÂπ¥ÊúâÂ≠¶‰π†Âà∞‰∏úË•øÊúâÔºö&lt;br&gt;
ÊûÅÂÆ¢Êó∂Èó¥ÁöÑÊï∞ÊçÆÁªìÊûÑÂíåÁÆóÊ≥ï‰πãÁæé&lt;br&gt;
ËÆæËÆ°Ê®°Âºè‰πãÁæé(Âè™Áúã‰∫Ü‰∏ÄÁ´†)&lt;br&gt;
ÁâõÂÆ¢ÁΩëÁöÑÂâëÊåáoffer(Âè™Âà∑‰∫Ü30ÈÅì)&lt;br&gt;
ÂäõÊâ£leetcode(Âè™Âà∑‰∫Ü60ÈÅì)&lt;br&gt;
„ÄänettyÂÆûÊàò„Äã&lt;br&gt;
Êê≠Âª∫ÂºÄÊ∫êÈ°πÁõÆfast-imËÑöÊâãÊû∂&lt;br&gt;
ÈáëËûç‰∏öÂä°Áü•ËØÜ&lt;br&gt;
Ê≤àÂâëÁöÑÊû∂ÊûÑÂ∏à‰πãË∑ØÔºàÂè™Áúã‰∫Ü‰∫åÂçÅÁØáÔºâ&lt;/p&gt;
&lt;p&gt;Êù•Âπ¥ÁõÆÊ†áÔºö&lt;br&gt;
ÁªßÁª≠ÂÆåÊàêÂºÄÊ∫êÈ°πÁõÆ&lt;br&gt;
ÁªèËê•Â•Ω‰∏™‰∫∫ÂçöÂÆ¢&lt;br&gt;
Êû∂ÊûÑÂ∏à‰πãË∑ØÂ≠¶‰π†&lt;br&gt;
„ÄäredisËøõÈò∂„Äã&lt;br&gt;
„ÄäÂâëÊåáoffer„Äã&lt;br&gt;
Â§ßÊï∞ÊçÆÁõ∏ÂÖ≥Áü•ËØÜ&lt;/p&gt;
&lt;p&gt;Áúã‰∫ÜÂÖ∂‰ªñ‰π¶Á±çÔºö&lt;br&gt;
„Ää‰∫ÆÂâë„Äã&lt;br&gt;
„ÄäÂØªË∑Ø‰∏≠ÂõΩ„Äã&lt;/p&gt;
&lt;p&gt;ÁîªÂ§ñÈü≥Ôºö‰∏ÄÂπ¥Êó∂Èó¥Â≠¶ÁöÑËøô‰πàÂ∞ëÔºåËøòË¥¥Âá∫Êù•ÔºàËÑ∏ÁöÆÊúâÁÇπÂéöüòÇÔºåÊâãÂä®ÁãóÂ§¥Ôºâ&lt;/p&gt;
&lt;p&gt;Â∑•‰Ωú&lt;br&gt;
Âú®‰∫ëÊô∫ÊÉ†ÁöÑ‰∏ÄÂπ¥ÂçäÊó∂Èó¥ÈáåÔºåËá™ÂêÑÂ≠¶‰π†‰∫ÜËÆ∏Â§öÂíåÂ∑•‰ΩúÁõ∏ÂÖ≥ÁöÑÁü•ËØÜÔºåËÆ§ËØÜ‰∫ÜËÆ∏Â§ö‰ºòÁßÄÁöÑÂêåÂ≠¶ÔºåÊàêÈïø‰∫ÜÂπ∂‰∏îÊî∂Ëé∑‰∫ÜËÆ∏Â§öÔºåÊÑüË∞¢‰∫ëÊô∫ÊÉ†Êèê‰æõÁöÑËÅåÂú∫Âπ≥Âè∞„ÄÇËôΩÁÑ∂Áé∞Âú®Â∑≤ÁªèÂø´Ë¶ÅËß£Êï£‰∫ÜÔºå‰ΩÜÊòØËøòÊòØË°®Á§∫Ë°∑ÂøÉÊÑüË∞¢„ÄÇÊ±üÊπñÂÜçËßÅÔºÅ&lt;/p&gt;
&lt;p&gt;ËøêÂä®&lt;br&gt;
ÂîØ‰∏Ä‰∏Ä‰∏™Âú®2019Âπ¥Á´ãÂæóÊ≤°ÊúâË¢´ÊâìËÑ∏ÁöÑflagÔºåÂ∞±ÊòØËøêÂä®„ÄÇÊØèÂë®‰∏ÄÊ¨°ÁØÆÁêÉÊàñËÄÖË∑ëÊ≠•„ÄÇ&lt;br&gt;
Ë∑ëÊ≠•Âë¢Ôºå‰∏ÄËà¨Ë∑ë‰∏™4ÂÖ¨Èáå‰∏ÄÊ¨°„ÄÇÂ§ßÊ¶ÇË∑ë‰∫Ü‰∫åÂçÅÊ¨°Ôºå100ÂÖ¨ÈáåÂ∑¶Âè≥ÔºåËøôÈáåÂè™ËÆ∞ÂΩï‰∫Ü‰∏ÄÂçäÔºåÂè¶Â§ñ‰∏ÄÂçäÊ≤°ÊúâËÆ∞ÂΩïÔºàËøôÂè•ÊòØÁúüÁöÑÔºâ„ÄåÂì≠Á¨ë:-D„Äç&lt;/p&gt;
&lt;p&gt;ÁØÆÁêÉÂë¢ÔºåÁé∞Âú®ÊäïÁØÆ‰∏çÂáÜÔºåËøêÁêÉËæ£ÁúºÁùõÔºåÂ∑≤ÁÑ∂‰∏ÄÂâØËÄÅÂπ¥ÁØÆÁêÉÁöÑÊ†∑Â≠ê„ÄÇ‰ΩÜÊòØËøòÊòØÈòªÊå°‰∏ç‰∫ÜÊàëÂñúÊ¨¢Ëøô‰∏ÄÈ°πËøêÂä®ÔºåÂ∞±ÂÉèÁÅåÁØÆÈ´òÊâãÂä®Êº´‰∏≠‰∏ÄÂè•ËØù‚ÄúÊïôÁªÉÔºåÊàëÊÉ≥ÊâìÁØÆÁêÉ‚ÄùËøôÊ†∑ÔºåÊ∫êËá™‰∫éÂÜÖÂøÉÁöÑÁÉ≠Áà±„ÄÇ&lt;/p&gt;
&lt;p&gt;ÁîüÊ¥ª&lt;br&gt;
Ëøô‰∏ÄÂπ¥ÊàëÊÉ≥‰∫ÜÂæà‰πÖÔºåÂæóÂà∞‰∫Ü‰ªÄ‰πàÂ§±Âéª‰∫Ü‰ªÄ‰πà„ÄÇ„ÄÇÊàëÊÉ≥‰∫ÜÂæà‰πÖÔºåÁ™ÅÁÑ∂ÊÉ≥Ëµ∑Êù•Ôºå&lt;br&gt;
ÂæóÂà∞ÁöÑÂΩìÁÑ∂ÊòØËÇöÂ≠êÁöÑËÇ•ËÇâËµòËÇâÂíØÔºåÔºåÂ§±ÂéªÁöÑ‰Ω†‰ª¨‰πüÁü•ÈÅìÔºåËÇØÂÆöÊòØÊàëÁ®ÄËñÑÁöÑÂ§¥Âèë„ÄÇ„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂΩìËá™ÂêÑÂèëÈôÖÁ∫øË∂äÊù•Ë∂äÈ´òÁöÑÊó∂ÂÄôÔºåÂ∞±Âú®ÊÄùËÄÉ‰∫∫ÁîüÔºå‰∏∫‰ªÄ‰πàÈïøÂæóËøô‰πàÂ∏ÖÔºåÂà∞Ë¶ÅÊéâÂ§¥Âèë&lt;/p&gt;
&lt;p&gt;‰ªéÊ≠§ËèäËä±Ëå∂‚ûïÊû∏ÊùûÂ∑≤ÊòØÊ†áÈÖçÔºåÊó©Áù°Êó©Ëµ∑Â∑≤ÊòØ‰∫∫ÁîüÁÆ¥Ë®ÄüòÇÔºåÁãóÂëΩË¶ÅÁ¥ß&lt;/p&gt;
&lt;p&gt;Ê∏∏Êàè&lt;br&gt;
Âπ≥Â∏∏È∏≠Ê¢®Â§ßÊó∂ÂÄôÂÅ∂Â∞îÊâìÊâìÊ∏∏ÊàèÊîæÊùæÊîæÊùæÔºå&lt;br&gt;
‰ªäÂπ¥Âá≠ÂÄüËá™Â∑±ÁöÑÂ§©Ëµã(Ë£Ö‰∏Ä‰∏ãB)Âíå‰∏çÊáàÂä™ÂäõÔºåÊâìÂà∞ÁôΩÈáë‰∏Ä„ÄÇÁ¶ªËá™Â∑±ÁöÑÂ∞èÁõÆÊ†áÂèàËøë‰∫Ü‰∏ÄÊ≠•Ôºå‰∫âÂèñ‰ªäÂπ¥‰∏äÁ†ñÁü≥ÔºåËÆ©ÊàëÂΩì‰∏™Á†ñÁü≥ÂÆàÈó®Âëò‰πüË°åü§ê„ÄÇ&lt;/p&gt;
&lt;p&gt;Âú®ËøôÂÜô‰∏äÊúÄÂñúÊ¨¢Ëã±ÈõÑÁöáÂ≠êÁöÑÂè∞ËØçÔºö‚ÄúÊâÄÂà∞‰πãÂ§ÑÔºåÊó†‰∫∫ËÉΩÊå°ÔºÅ‚Äù&lt;/p&gt;
&lt;p&gt;ÁæéÈ£ü&lt;/p&gt;
&lt;p&gt;‰ªÄ‰πàÊúÄÈáçË¶ÅÔºåÂΩìÁÑ∂ÊòØÂêÉ„ÄÇ&lt;br&gt;
ÊÉ≥ÊÉ≥Ëøô‰∏ÄÂπ¥ÂÅöÁöÑÁæéÈ£üÔºåÂíåÂêåÂ≠¶‰∏ÄËµ∑ÂÅöÁöÑÔºåÊ≠§Â§Ñ@ËÇâÂíåÊù®‰∏Ω‰∏ΩÔºåÊÑüË∞¢‰∏ÄËµ∑Áõ∏Â§Ñ‰∏ÄÂπ¥ÔºåÂ≠¶Âà∞‰∫ÜÂæàÂ§öÁæéÈ£üÊòØÂ¶Ç‰ΩïÂÅöÁöÑÔºåÊàëË∫´ËæπÁöÑÈöêËóèÂ§ßÂé®üòÇ„ÄÇ&lt;br&gt;
‰ªäÂπ¥Â≠¶Âà∞‰∫ÜÊúâÁ∫¢ÁÉßÈ≤´È±ºÔºåÁ≥ñÈÜãÊéíÈ™®ÔºåËë±Ëä±È•ºÔºåÂèØ‰πêÈ∏°ÁøÖÔºåÁ∫¢ÁÉßËÇâÔºåËá™Âà∂ÂáâËèúÔºåÊ∞¥ÁÖÆËÇâÁâáÔºåËá™Âà∂ÁÉ§È±ºÔºåÂõûÈîÖËÇâÁ≠âÁ≠âÁ≠âÁ≠âÔºåÂ∞±Êîæ‰∏ÄÂº†ÂíåÂêåÂ≠¶‰∏ÄËµ∑ÂÅöÈ•∫Â≠êÁöÑÂõæÁâáÔºå‰∏çÂ§öÊîæ‰∫ÜÔºåÂÖçÂæóÊôö‰∏ä‰∏≠ÊØíÂ§™Ê∑±„ÄÇ„ÄÇ„ÄÇ&lt;/p&gt;
&lt;p&gt;ÁîªÂ§ñÈü≥Ôºö‰∏äÈù¢È•∫Â≠êÔºàÁúãËµ∑Êù•ÂÉèÔºâÁúüÁöÑ‰∏çÊòØÊàëÂåÖÁöÑ&lt;/p&gt;
&lt;p&gt;‰∫≤ÊÉÖ&lt;br&gt;
ÁâπÂà´ÂñúÊ¨¢„ÄäËØ∑ÂõûÁ≠î1988„ÄãÈáåÈù¢ÂÆ∂Â∫≠‰∫≤ÊÉÖÔºåÊï¥ÈÉ®ÁâáËôΩÁÑ∂‰∏ç‰πèÁà±ÊÉÖÂèãÊÉÖÁ≠âÔºå‰ΩÜÊòØÊàëËßâÂæóÊ†∏ÂøÉÊòØ‰∫≤ÊÉÖÔºåÊúÄÊúâÂç∞Ë±°ËøòÊòØÂÆùÊãâÂ¶àÂ¶à‰∏ãÈõ®Â§©Êä§ÁùÄÂÆùÊãâÈÇ£ÊÆµ„ÄÇ&amp;quot;‰∫∫ÁúüÊ≠£ÂèòÂº∫Â§ßÔºå‰∏çÊòØÂõ†‰∏∫ÂÆàÊä§ÁùÄËá™Â∞äÂøÉÔºåËÄåÊòØÊäõÂºÄËá™Â∞äÂøÉÁöÑÊó∂ÂÄôÔºåÂõ†‰∏∫ÊúâÈúÄË¶ÅÂÆàÊä§ÁöÑ‰∫∫&amp;quot;&lt;br&gt;
ËøôÂè•ËØùËøòÊòØÈúÄË¶ÅËá™Â∑±ÂéªÁªèÂéÜ‰Ωì‰ºöÁöÑ„ÄÇ&lt;br&gt;
‰ª•ÂâçËßâÂæóÔºåÂá∫ÁúÅ‰∏äÂ≠¶ÔºåÂá∫ÁúÅÂ∑•‰ΩúÔºåÂèØ‰ª•Á¶ªÂÆ∂‰∫∫Ëøú‰∏ÄÁÇπÔºåÂ∞±ÂÉèÊòØÊò•Â§©ÁöÑÁáïÂ≠êÔºåÈïøÂ§ß‰∫ÜÈÉΩÊÉ≥ÁúãÁúãÂ§ñÈù¢ÁöÑ‰∏ñÁïåÔºåÂéªÈóØËç°ÂéªÁªèÂéÜÔºåÂéª‰∏∞ÂØåËá™Â∑±ÁöÑÁîüÊ¥ªÂ¢ûÈïøËá™Â∑±ËßÅËØÜ„ÄÇÂèØÂà∞‰∫Ü‰∏ÄÂÆöÁöÑÂπ¥ÈæÑÊàñËÄÖËÆ§Áü•Ôºå‰ºöÊÑèËØÜÂà∞ÔºåÊúâÂÆ∂‰∫∫Âú®ÁöÑÂú∞ÊñπÔºåÈÉΩËßâÂæóÂæàÁü•Ë∂≥„ÄÇÁâπÂà´ÂñúÊ¨¢„ÄäÂõõ‰∏™Êò•Â§©„ÄãÁ∫™ÂΩïÁâáÈáåÈù¢ÁáïÂ≠êÂΩíÊù•‰πãÊó∂ÔºåÈÇ£ÁßçÊÑüËßâÔºåÁ∫™ÂΩïÁâá‰∏≠Áà∂ÊØçÁúãÂà∞ÁáïÂ≠êÂΩíÊù•ÔºåÂøÉÈáåÂøµÂè®ÁùÄÔºåÂí±ÂÆ∂Â∞èÁáïÂ≠ê‰πüËØ•ÂõûÂÆ∂‰∫Ü„ÄÇ&lt;/p&gt;
&lt;p&gt;Áà±ÊÉÖ&lt;br&gt;
ÊÑüË∞¢ÂÖöÊÑüË∞¢ÂõΩÂÆ∂ÁªôÊàëÂèë‰∫Ü‰∏Ä‰∏™Â•≥ÊúãÂèãÔºåÂÖçË¥πÊª¥„ÄÇ&amp;lt;( Àò ¬≥Àò)/üíØ&lt;br&gt;
‰ªäÂπ¥ÊúÄÂ§ßÊî∂Ë¥ßÔºåÂΩìÁÑ∂ÊòØÈÅáÂà∞ÊñπÂ∞èÁöÆÂêåÂ≠¶Âï¶ÔºåÔºàÈªòÈªòÊíí‰∏Ä‰∏ãÊñ∞È≤úÁãóÁ≤ÆÔºâÂ∏åÊúõÂú®‰ª•ÂêéÁöÑÊó•Â≠êÈáåÔºå‰Ω†ËÉΩÂ§üÊó©Áù°Êó©Ëµ∑ÔºåÂêÉÂ•ΩÂñùÂ•ΩÔºåË∫´‰ΩìÊ£íÊ£í„ÄÇ&lt;/p&gt;
&lt;p&gt;ÊúÄÂêéËÇØÂÆöÊòØÂÜô‰∏Ä‰∫õÊâìËÑ∏ÁöÑ‰∏úË•ø„ÄÇ„ÄÇ&lt;br&gt;
2020Âπ¥flag&lt;br&gt;
Ëá™‰ø°&lt;br&gt;
‰∏ÄÂë®‰∏ÄÊ¨°Ë∑ëÊ≠•ÊàñËÄÖÁØÆÁêÉ&lt;br&gt;
ÁúãÂÆåÂâ©‰Ωô‰π¶Á±ç&lt;br&gt;
ÁªèËê•Â•Ω‰∏™‰∫∫ÂçöÂÆ¢&lt;br&gt;
Ê¥óËÑöÂüéÊ¥ó‰∏ÄÊ¨°ËÑö(Êúâ‰ªÄ‰πà‰∏úË•øÊ∏óÂÖ•ËøõÊù•‰∫Ü)&lt;br&gt;
‰ΩìÈáç‰∏çË∂Ö130&lt;br&gt;
Êó©Áù°Êó©Ëµ∑Ôºå11ÁÇπ‰πãÂâçÁù°ÔºàËôΩÁÑ∂ÊòØ‰∏çÂèØËÉΩÁöÑÔºâ&lt;br&gt;
Â≠¶‰π†Â§ßÊï∞ÊçÆÁõ∏ÂÖ≥Áü•ËØÜ&lt;br&gt;
‰øùÊä§ÁúºÁùõ&lt;/p&gt;
&lt;p&gt;‰ª•‰∏äÔºåÂÆå&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://zhangyaoo.github.io/post-images/1593268924481.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÊúÄÂêéË¥¥‰∏äËá™ÂêÑÊúÄÂñúÊ¨¢ÁöÑÁÖßÁâáÔºå2015Âπ¥‰∫éË•øËóèÊãç&lt;/p&gt;
">2019Âπ¥ÊÄªÁªì</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/about/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;Ê¨¢ËøéÊù•Âà∞ÊàëÁöÑÂ∞èÁ´ôÂëÄÔºåÂæàÈ´òÂÖ¥ÈÅáËßÅ‰Ω†ÔºÅü§ù&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ÂÖ≥‰∫éÊú¨Á´ô&#34;&gt;üè† ÂÖ≥‰∫éÊú¨Á´ô&lt;/h2&gt;
&lt;p&gt;‰∏Ä‰∫õÊäÄÊúØÂçöÂÆ¢Âíå‰∏Ä‰∫õÈó≤Ë®ÄÁ¢éËØ≠&lt;/p&gt;
&lt;h2 id=&#34;Âçö‰∏ªÊòØË∞Å&#34;&gt;üë®‚Äçüíª Âçö‰∏ªÊòØË∞Å&lt;/h2&gt;
&lt;p&gt;ËøòÂú®ÊâìÊÄ™ÂçáÁ∫ßÁöÑËèúÈ∏ü&lt;/p&gt;
&lt;h2 id=&#34;ÂÖ¥Ë∂£Áà±Â•Ω&#34;&gt;‚õπ ÂÖ¥Ë∂£Áà±Â•Ω&lt;/h2&gt;
&lt;p&gt;Êí∏Á†Å„ÄÅ‰∫åÊ¨°ÂÖÉ„ÄÅÈ™ëË°å„ÄÅÁØÆÁêÉ„ÄÅLOL&lt;/p&gt;
&lt;h2 id=&#34;ËÅîÁ≥ªÊàëÂëÄ&#34;&gt;üì¨ ËÅîÁ≥ªÊàëÂëÄ&lt;/h2&gt;
&lt;p&gt;ÊâãÊú∫ÔºàÂæÆ‰ø°ÂêåÔºâÔºö15112342449&lt;/p&gt;
">ÂÖ≥‰∫é</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://zhangyaoo.github.io/post/2018-nian-zong-jie/"" data-c="
          &lt;h2 id=&#34;ÂÜôÁªôËá™Â∑±ÁöÑ2018Âπ¥ÊÄªÁªì&#34;&gt;ÂÜôÁªôËá™Â∑±ÁöÑ2018Âπ¥ÊÄªÁªì&lt;/h2&gt;
&lt;h2 id=&#34;È¢òËÆ∞&#34;&gt;È¢òËÆ∞&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://img-blog.csdnimg.cn/20181231115831927.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p5MTUxMTIzNDI0NDk=,size_16,color_FFFFFF,t_70&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
‰∏çËßâ‰∏≠Ôºå2018Âπ¥Â∞±Âø´Ëøá‰∫ÜÔºåÂú®Ëøô‰πãÂâç‰ªéÊù•Ê≤°ÊúâÂÜôËøá‰∏Ä‰∫õÊÄªÁªìÊÄßÁöÑÊñáÁ´†Ôºå‰ªéÂ∞èÂ≠¶Âàù‰∏≠Êó•Âøó‰Ωú‰∏öÔºåÂà∞È´ò‰∏≠ÁöÑÊó•Â§ç‰∏ÄÂ§úÁöÑÂ≠¶‰π†ÂÜçÂà∞Â§ßÂ≠¶ÁöÑÊµëÊµëÂô©Âô©ÁöÑÂÉµÁ°¨ÂºèÁöÑÂ≠¶‰π†Ôºå‰∏ÄÁõ¥ÈÉΩÂú®ËøõË°åÊµÅÊ∞¥Ë¥¶ÂºèÁöÑÂ≠¶‰π†ËæìÂÖ•Ôºå‰ªéÊ≤°ÊúâÂÜôËøáÂÖ≥‰∫é‰∏ÄÂπ¥ÁöÑËÆ°ÂàíÁîöËá≥ÊòØ‰∏Ä‰∏™ÊúàÁöÑÂ∞èÁõÆÊ†á„ÄÇ&lt;/p&gt;
&lt;p&gt;Ëá≥‰∫é‰∏∫‰ªÄ‰πàË¶ÅÂÅöËøô‰∏™ÊÄªÁªìÔºåÊàëÊÉ≥ÊòØÂõ†‰∏∫ÔºåÂπ¥Â§ç‰∏ÄÂπ¥ÁöÑÂ∫¶ËøáÔºåÊúâÊó∂ÂÄôËá™Â∑±ÈÉΩ‰∏çÁü•ÈÅìÂú®Ëøô‰∏ÄÂπ¥Âπ≤Ëøá‰ªÄ‰πà‰∫ãÊÉÖ„ÄÅÊî∂Ëé∑‰∫Ü‰ªÄ‰πàÂíåÂ§±Âéª‰∫Ü‰ªÄ‰πàÔºåÂåÖÊã¨ÂØπÂèãÊÉÖ„ÄÅ‰∫≤ÊÉÖÂíå‰∫ã‰∏öÁ≠âÁ≠â„ÄÇÊòØÂõ†‰∏∫ÊàëËÆ∞ÊÄßÂ§™Â∑ÆÔºåËøòÊòØËØ¥Âú®Ëøô‰∏™Â®±‰πê‰ø°ÊÅØÁàÜÁÇ∏ÁöÑÊó∂‰ª£ÔºåÊàëÊ≥®ÊÑèÂäõÈÉΩÈõÜ‰∏≠Âú®Âø´È§êÂºèÁöÑÁöÑËÆ§Áü•‰∏äÔºåÂæàÈöæÊúâÁ≤æÂäõÊàñËÄÖÈõÜ‰∏≠Ê≥®ÊÑèÂäõÂéªÊ±≤ÂèñËá™Â∑±ÊÉ≥Ë¶ÅÁöÑÈ´òË¥®ÈáèÁöÑ‰ø°ÊÅØ‰∏äÔºå‰∏çÂæóËÄåÁü•„ÄÇÊâÄ‰ª•‰ªäÂπ¥ÊàëËßâÂæóÊúâÂøÖË¶ÅÂéªÊÄªÁªìËá™Â∑±ÁöÑËøô‰∏ÄÂπ¥„ÄÇ&lt;/p&gt;
&lt;p&gt;ÊÄªÁªìÁõÆÂΩïÔºö&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ÂÖ≥‰∫éÊäÄÊúØ&lt;/li&gt;
&lt;li&gt;ÂÖ≥‰∫éËÆ§Áü•&lt;/li&gt;
&lt;li&gt;ÂÖ≥‰∫é‰∏∫‰∫∫Â§Ñ‰∫ã&lt;/li&gt;
&lt;li&gt;ÂÖ≥‰∫éÂèãÊÉÖÁà±ÊÉÖ‰∫≤ÊÉÖ&lt;/li&gt;
&lt;li&gt;2019Â±ïÊúõ&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;1-ÂÖ≥‰∫éÊäÄÊúØ&#34;&gt;1„ÄÅÂÖ≥‰∫éÊäÄÊúØ&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://img-blog.csdnimg.cn/20181231120336118.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p5MTUxMTIzNDI0NDk=,size_16,color_FFFFFF,t_70&#34; alt=&#34;Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
1„ÄÅÊäÄÊúØÁßØÁ¥Ø&lt;br&gt;
Â∏àËåÉ‰∏ì‰∏öÊØï‰∏öÁöÑÊàë‰ªéÂ§ß‰∏âÂºÄÂßãÊé•Ëß¶ËÆ°ÁÆóÊú∫ÔºåÂ§ß‰∏âÈÇ£Âπ¥Â≠¶ÁöÑÁΩëÁªúÂ∑•Á®ãÔºåËøòËÄÉ‰∫Ü‰∏™CCNAÔºåÁõÆÂâçÂèëÁé∞Ê≤°Êúâ‰ªÄ‰πàÁî®ÔºåÂØπ‰∫éÁé∞Âú®ÁöÑÊàëÊù•ËØ¥„ÄÇÁÑ∂ÂêéË¢´‰ΩèÂú®‰∏äÈì∫ÁöÑÂÖÑÂºü67‰ª£ÂÖ•ÂùëÈáåÂ≠¶‰π†codeÊê¨Á†ñÔºå‰ªéÈÇ£ÂºÄÂßã‰æø‰∏ÄÂèë‰∏çÂèØÊî∂ÊãæÔºåÂüãÂ§¥Ëã¶Â≠¶ÔºåËøûÊïôÂ∏àËµÑÊ†ºËØÅÈÉΩ‰∏çËÄÉÔºåË∑ëÂá∫ÂéªÂÖ¨Âè∏ÈáåÈù¢ÂΩìÂ∞èÂºüÂÆû‰π†„ÄÇËá≥Ê≠§Â∞±ÂºÄÂßãÊäÄÊúØÁßØÁ¥Ø‰πãË∑Ø‰∫Ü„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂΩìÂ∞èÂºüÈÇ£‰∏ÄÊÆµÊó∂Èó¥ÔºåÂ∞±ÂÉèÂàöËêåÂèëÁöÑÁßçÂ≠ê‰∏ÄÊ†∑ÁñØÁãÇÂê∏Êî∂Ëê•ÂÖªÔºåÂ≠¶‰∫õ‰∫ÜpythonÁà¨Ëô´„ÄÅpython webÂºÄÂèë„ÄÅJavaÂÖ¨‰ºóÂè∑ÂºÄÂèëÔºåSSM JavaÂÖ®ÂÆ∂Ê°∂ÂºÄÂèë„ÄÇËøô‰∫õÈÉΩÊòØÂú®Â≠¶Ê†°Â≠¶‰∏çÂà∞ÁöÑ‰∏úË•øÔºåÂΩìÊó∂ÊÑüËßâËá™Â∑±ÂæàÁâõÈÄºÔºåÁõ¥Âà∞ÊØï‰∏öÊâæÂ∑•‰Ωú„ÄÇ&lt;/p&gt;
&lt;p&gt;ÊØï‰∏öÈÇ£‰∏ÄÂàªËµ∑ÔºåÂõ†‰∏∫ÊäÄÊúØÂèëÂ±ïÁì∂È¢àÔºåÊàëÂèàËÉå‰∏äË°åÂõäÊ®™Ë∑®Â§ßÂçä‰∏™‰∏≠ÂõΩ‰ªéÂ±±‰∏úÂéªÂçóÊñπ‰∏ÄÁ∫øÂüéÂ∏ÇÊºÇ„ÄÇÊãøËøôËá™‰ª•‰∏∫È´òÂ§ß‰∏äÁöÑÁÆÄÂéÜÂéªÊäïÈÄíÔºåÁÑ∂ÂêéÈù¢ËØïÔºåÊÉ®ÈÅ≠Èù¢ËØïÂÆòÁöÑÂï™Âï™ÊâìËÑ∏ÔºåËøû‰∏Ä‰∏™hashmapÁöÑÂ∫ïÂ±ÇÂéüÁêÜÈÉΩ‰∏çÁü•ÈÅìÔºåÊúÄÊúâÂç∞Ë±°ÁöÑÊòØJava Âæ™ÁéØÂà†Èô§listÊÄé‰πàÂà†Èô§ÔºåÂõûÁ≠îÂÆåÂêéÂà´Èù¢ËØïÂÆò‰∏ÄËÑ∏Â´åÂºÉ-„ÄÇ-&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Âè™‰ºöÊãøÁùÄÁé∞ÊàêÁöÑÊ°ÜÊû∂ÂíåÂ∫îÁî®ÂéªÁî®ÔºåËÄå‰∏çÁü•ÈÅìÂ∫ïÂ±ÇÁöÑÂÆûÁé∞ÊñπÂºèÂíåÂéüÁêÜÔºåÈÇ£‰πàÂ∑•‰ΩúÊÄßË¥®Â∞±ÂíåÁΩëÁÆ°Â∑Æ‰∏çÂ§ö&lt;/strong&gt;„ÄÇ&lt;br&gt;
‰∏ç‰ºö‰∏æ‰∏ÄÂèç‰∏âÔºåÂ¶ÇÊûúÂèàÊúâÊñ∞ÁöÑÊ°ÜÊû∂Âá∫Êù•ÂèàÂøÖÈ°ªË¶ÅÂ≠¶‰π†‰∏ÄÈÅçÔºåÂ¶ÇÊûúËØ¥ÊéåÊè°‰∫ÜÂ∫ïÂ±ÇÂ∑•‰ΩúÂéüÁêÜÔºåÈÇ£‰πàÁî®Ëµ∑Êù•‰ºöËàíÊúçÂæàÂ§ö„ÄÇ&lt;/p&gt;
&lt;p&gt;2„ÄÅÊäÄÊúØÂàÜ‰∫´&lt;br&gt;
&lt;img src=&#34;https://img-blog.csdnimg.cn/20181231124820725.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p5MTUxMTIzNDI0NDk=,size_16,color_FFFFFF,t_70&#34; alt=&#34;Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;strong&gt;ÂàÜ‰∫´ÁöÑ‰πêË∂£Ôºå‰ªé‰∏ÄÂºÄÂßãÂ∞±ÂÅú‰∏ç‰∏ãÊù•„ÄÇ&lt;/strong&gt;&lt;br&gt;
ÂÖ¨Âè∏‰ºöÂë®ÊúüÊÄßÁöÑÈÄâ‰∏Ä‰∫õÂΩì‰∏ãÁÉ≠Èó®ÁöÑÊäÄÊúØËÆ©Êàë‰ª¨ÂéªÁ†îÁ©∂ÔºåÁÑ∂ÂêéÂéªÊääËá™Â∑±Á†îÁ©∂ÁöÑÂÜÖÂÆπÂàÜ‰∫´Âá∫Êù•„ÄÇÊàëËÆ§‰∏∫ËøôÊòØÈùûÂ∏∏Ê£íÁöÑ‰∏ÄÁßçÂ≠¶‰π†ÊñπÂºè„ÄÇ‰∏∫‰ªÄ‰πàËøô‰πàËØ¥„ÄÇÂõ†‰∏∫Ëøô‰∏™ÊòØÈùûÂ∏∏ÂÖ∑‰ΩìÊåëÊàòÊÄßÁöÑÔºå‰Ω†ÁêÜËß£‰∫ÜÊòØ‰∏Ä‰∏™Â±ÇÊ¨°ÔºåÂ¶ÇÊûúËØ¥Ë¶ÅÁªôÂà´‰∫∫Â∞ÜÊòéÁôΩÂèàÊòØÂè¶Â§ñ‰∏Ä‰∏™Â±ÇÊ¨°ÔºåËøôÊòØ‰∏§‰∏™‰∏çÂêåÂ±ÇÊ¨°ÁöÑÊ¶ÇÂøµ„ÄÇÂ¶ÇÊûúËØ¥‰Ω†ÁöÑËØ≠Ë®ÄË°®ËææÊÄß‰∏çË°åÔºåÈÇ£‰πàËøô‰∏™Â∞±ÊòØÊõ¥Âä†Èöæ‰∏äÂä†Èöæ‰∫Ü„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂàÜ‰∫´ÁöÑ‰πêË∂£‰∏ç‰ªÖÊòØËøô‰∏™ÔºåÂΩì‰Ω†ÁªôÂà´‰∫∫ËÆ≤ÂÆåÂêéÔºå‰Ω†ËøòÂèØ‰ª•ÈÄöËøáÂà´‰∫∫Êèê‰æõÁöÑÈóÆÈ¢òÂíåÂª∫ËÆÆÊñπÊ°àÔºåÂíå‰Ω†Ëá™Â∑±ÁöÑÁêÜËß£ËøõË°åÁ¢∞ÊíûÔºåÁÑ∂Âêé‰∫ßÁîüÊñ∞ÁöÑËÆ§Áü•ÂÖÉÁ¥†ÔºåÂà∞‰∏ã‰∏ÄÊ¨°ÂàÜ‰∫´Â∞±ÂèØ‰ª•ËûçÂÖ•‰∏äÊ¨°ÂàÜ‰∫´ÁöÑËÆ§Áü•ËøõÊù•„ÄÇ&lt;/p&gt;
&lt;p&gt;Âà∞Áé∞Âú®‰∏∫Ê≠¢ÔºåÊàëËøòÂú®ÊÉ≥ÔºåÊÄé‰πàÂú®ÁªôÂà´‰∫∫ËÆ≤Ëß£ÂàÜ‰∫´ÁöÑÊó∂ÂÄôËÉΩÂ§üÊõ¥ËÉΩËÆ©Âà´‰∫∫Âê¨ÊáÇÔºåËÄå‰∏îÊÑøÊÑèÂéªÂê¨„ÄÇÊàëÊúÄÊÄïËøòÊòØÂú®ÂàÜ‰∫´ÁöÑÊó∂ÂÄôÂà´‰∫∫Âú®Áé©ÊâãÊú∫„ÄÇÂõ†‰∏∫Êúâ‰∫ÜËøô‰∏™Áé∞Ë±°Â∞±Ë°®Êòé‰Ω†ÁöÑÂàÜ‰∫´ÂÅöÁöÑ‰∏çÂ§üÂ•Ω„ÄÇ&lt;/p&gt;
&lt;p&gt;3„ÄÅ‰π¶Á±ç&lt;br&gt;
&lt;strong&gt;Âú®Ëøô‰∏™ÊâãÊú∫‰∏áËÉΩÁöÑÊó∂‰ª£ÔºåËÉΩÂ§üÈùô‰∏ãÂøÉÊù•ÁúãÂÆå‰∏ÄÊú¨‰π¶Âπ∂ÁêÜËß£ÊòØÈùûÂ∏∏‰∏çÂÆπÊòìÁöÑ&lt;/strong&gt;„ÄÇ&lt;br&gt;
ÊàñËÆ∏‰Ω†‰ª¨ÈÉΩËØ¥Âì™ÊúâÊó∂Èó¥Áúã‰π¶ÔºåÈÉΩÂøôÂ∑•‰Ωú‰ªªÂä°‰∫ÜÔºåÁîöËá≥ÊúâÊó∂ÂÄôÊàëËá™Â∑±ÈÉΩ‰∏çÊï¢ËØ¥‰∏Ä‰∏™ÊúàÁúãÂÆå‰∏ÄÊú¨‰π¶Ôºå‰∏çÁÆ°ÊòØÊñáÂ≠¶ËøòÊòØ‰∏ì‰∏öÊäÄÊúØÊÄß‰π¶Á±ç„ÄÇ&lt;/p&gt;
&lt;p&gt;‰ªäÂπ¥ÔºåÊàëÁúã‰∫Ü‰ª•‰∏ãÂá†Êú¨‰π¶ÔºåÊúâÁöÑÂè™Áúã‰∫Ü‰∏ÄÊú¨‰π¶‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂ§ßÈÉ®ÂàÜÈÉΩÊòØÊ∂âÂèä‰∏ì‰∏öÊäÄÊúØÁöÑÔºöNettyÊùÉÂ®ÅÊåáÂçó„ÄÅÊ∑±ÂÖ•ÁêÜËß£JavaÂ§öÁ∫øÁ®ã„ÄÅJavaEE‰∫íËÅîÁΩëËΩªÈáèÁ∫ßÊäÄÊúØÊï¥ÂêàÂºÄÂèë„ÄÅJavaÈ´òÂπ∂ÂèëÁ®ãÂ∫èËÆæËÆ°„ÄÇËøòÊúâÂÖ∂‰ªñÁöÑ‰∏Ä‰∫õÈùûÊäÄÊúØ‰π¶Â∞±‰∏ç‰∏Ä‰∏ÄÂàó‰∏æ‰∫Ü„ÄÇ‰∏ÄÂπ¥ÊâçÁúãËøôÂá†Êú¨‰π¶ÁúüÊòØÊúâÁÇπ‰∏¢‰∫∫-„ÄÇ-&lt;/p&gt;
&lt;p&gt;Ëá™ËÆ§‰∏∫ÁΩëÁªúÊäÄÊúØÂçöÂÆ¢ÂíåÁ∫∏Ë¥®‰π¶ËøòÊòØÊúâÂêÑÊúâÂêÑËá™ÁöÑÂ≠òÂú®ÁöÑÊÑè‰πâÁöÑ„ÄÇÂ∞±ÊãøÁ∫∏Ë¥®‰π¶Êù•ËØ¥ÔºåÂÆÉËÉΩÂ§üÈÄöËøá‰∏ÄÁ≥ªÂàóÁöÑÁõÆÂΩïÔºåËÉΩÂ§ü‰ªéÂü∫Êú¨Êù•Ê∫ê„ÄÅÂü∫Êú¨ÂéüÁêÜ„ÄÅ‰ΩøÁî®Âú∫ÊôØ„ÄÅÂ∫ïÂ±ÇÂéüÁêÜÊäÄÊúØ„ÄÅÂ∑•‰ΩúÂ∫îÁî®Âú∫ÊôØÊù•‰∏Ä‰∏ÄËøõË°åÊúâÈ°∫Â∫èÁöÑÁªô‰∫∫‰ª•ÁúüÊ≠£ÁêÜËß£ÂíåÊéåÊè°„ÄÇ‰∏çÈúÄË¶ÅËá™Â∑±‰ªéÁΩë‰∏äÊêúÂàÜÊï£ÁöÑÁü•ËØÜÁÇπ„ÄÇ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;‰∏çÊòØÁúãÂÆå‰π¶ÂêéÂ∞±ÂÆå‰∫ÜÔºåËøòÈúÄË¶ÅËá™Â∑±ÈÄöËøáÂÆûË∑µÂéªËØÅÊòé‰Ω†Ëá™Â∑±ÁöÑÁêÜËß£ÊòØÂê¶Ê≠£Á°Æ&lt;/strong&gt;ÔºåËøô‰πüÊòØ‰∏™‰∏çÂèØÊ¨†Áº∫ÁöÑËøáÁ®ã„ÄÇ&lt;/p&gt;
&lt;p&gt;‰∏∫‰ªÄ‰πàËøòÈúÄË¶ÅËØª‰π¶Âë¢ÔºåÊàëËÆ§‰∏∫ÁΩë‰∏ä‰∏ÄÂè•ËØùËøòÊòØ‰∏çÈîôÁöÑÔºåÊòØ„ÄäÁâ©ÊºîÈÄöËÆ∫„Äã‰ΩúËÄÖÁéã‰∏úÂ≤≥ËØ¥ÁöÑÔºö‚ÄúÂõ†‰∏∫ÈÄöËøáÁîµËßÜÊàñËÄÖÂÖ∂‰ªñÊñπÂºèÊêúÈõÜÁöÑ‰ø°ÊÅØÔºåÂç≥ÈÇ£ÁßçÈÄöËøáÁõ¥ËßÇÊñπÂºèÊé•ÂèóÁöÑÁü•ËØÜÔºåÊòØÊúÄÊµÖÊòæ„ÄÅÊúÄÁ≤óÁñè‰∏îÊ≤°ÊúâÁªèËøáÁ≤æÂØÜÈÄªËæëËØÅÊòéÁöÑ‰∏úË•ø‚Äù„ÄÇ&lt;/p&gt;
&lt;p&gt;4„ÄÅÊÄùËÄÉ&lt;br&gt;
&lt;img src=&#34;https://img-blog.csdnimg.cn/20181231141547586.png&#34; alt=&#34;Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÂÖ≥‰∫éÁ®ãÂ∫èÂëòÊäÄÊúØÊ∑±Â∫¶ÂíåÂπøÂ∫¶ÁöÑÈÄâÊã©Ôºå‰πüÊòØ‰ªéÁΩë‰∏äÁúãÁöÑ‰∏ÄÂè•ËØùÔºåOracleÊäÄÊúØÂ§ßÁâõÊù®ÊôìÂ≥∞ÊåáÂá∫Ôºö‚Äú&lt;strong&gt;ÊäÄÊúØ‰∫∫ÂÖç‰∏ç‰∫ÜË¶ÅÊûÑÂª∫ÂπøÊ≥õÁöÑÁü•ËØÜ‰ΩìÁ≥ªÔºå‰ΩÜÁªàÁ©∂ËøòÊòØË¶ÅÂÖãÂà∂‰ΩèËØ±ÊÉëÔºåÂ∞ÜÊüê‰∏™È¢ÜÂüüÂÅöÂà∞Á≤æÊ∑±&lt;/strong&gt;„ÄÇÊ∞¥Ê°∂ÁöÑÊ∞¥ÈáèÂèñÂÜ≥‰∫éÊúÄÁü≠ÊùøÔºå‰ΩÜÊòØÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨Âú®Â∑•‰Ωú‰∏≠ÁöÑÂõûÊä•ÔºåÊõ¥Â§öÁöÑÊ∫êËá™‰∫éËá™Ë∫´ÁöÑÈïøÂ§ÑÔºåÁîöËá≥ÊüêÁßçÁ®ãÂ∫¶‰∏äËøòÂÜ≥ÂÆö‰∫ÜÊàë‰ª¨ÊòØÊã•ÊúâËá™Â∑±ÈÄâÊã©ÁöÑËá™Áî±ÔºåËøòÊòØÁñ≤‰∫éÂ•îÂëΩÔºåÂøÖÁªèÊàë‰ª¨ÊØè‰∏™‰∫∫ÁöÑ‰ΩìÂäõ„ÄÅÁªèÂéÜÊúâÁé∞ÂÆûÁöÑ‰∏äÈôêÁöÑ‚Äù„ÄÇ&lt;br&gt;
Ëá™ËÆ§‰∏∫ËøòÊòØÂæàÊúâÈÅìÁêÜÁöÑÔºåÂÖàÂª∫Á´ãËá™Â∑±ÂπøÂ∫¶ÁΩëÔºåÁÑ∂Âêé‰∏ìÈó®Êâæ‰∏ÄÈ°πËá™Â∑±ÂñúÊ¨¢ÁöÑÊñπÂêëÔºåÁÑ∂ÂêéÊîæÂºÄÊâãËÑöÂéªÁ†îÁ©∂„ÄÇËá≥Â∞ëË¶ÅÊúâ‰∏Ä‰∏™ÈùûÂ∏∏Ê∑±ÁöÑÈ¢ÜÂüüÁü•ËØÜÔºåÊâÄË∞ìÁü•ËØÜ‰ΩìÁ≥ªÁöÑÊê≠Âª∫ÊòØÂü∫‰∫éÂ§ö‰∏™ÊâéÂÆûÁöÑÁü•ËØÜÁÇπÊ±áÈõÜËÄåÊàêÔºåÁÇπ‰∏çÊâéÂÆû‰∏çÊ∑±ÂÖ•„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;2-ÂÖ≥‰∫éËÆ§Áü•&#34;&gt;2„ÄÅÂÖ≥‰∫éËÆ§Áü•&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://img-blog.csdnimg.cn/20181231154812245.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p5MTUxMTIzNDI0NDk=,size_16,color_FFFFFF,t_70&#34; alt=&#34;Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
1„ÄÅ&lt;strong&gt;‰∫∫‰∏é‰∫∫ÊúÄÂ§ßÁöÑ‰∏çÂêåÔºöËÆ§Áü•‰∏çÂêå&lt;/strong&gt;&lt;br&gt;
ÊàëËÆ§‰∏∫ÁöÑÊàêÈïøÂ∞±ÊòØËÆ§Áü•ÊàêÈïøÔºåÊòØÂØπ‰∏ÄÈó¥‰∫ãÁâ©ÁöÑÁêÜËß£ÂíåÂ§ÑÁêÜÊñπÊ≥ï„ÄÇÁî±‰∫éÊØè‰∏™‰∫∫ÁöÑÂá∫ÁîüÂÆ∂Â¢É‰∏çÂêåÔºåÁîüÊ¥ªÁéØÂ¢É‰∏çÂêåÔºå‰πüÂ∞±ÂΩ±Âìç‰∫ÜÊØè‰∏™‰∫∫ÁöÑËÆ§Áü•ÔºåÊâÄ‰ª•‰∫∫Êâç‰ºöÊúâÂêÑËá™ÁöÑÊÉ≥Ê≥ïÔºåÂÅö‰∫ãÂáÜÂàôÂíåÂ§Ñ‰∏ñÊñπÂºè„ÄÇ&lt;/p&gt;
&lt;p&gt;2„ÄÅ&lt;strong&gt;‰∏çÊñ≠Â≠¶‰π†Ôºå‰ΩøËá™Â∑±Êõ¥ÂÄºÈí±„ÄÇ&lt;/strong&gt;&lt;br&gt;
ÈÉΩËØ¥2018Âπ¥ÊòØ‰∫íËÅîÁΩëÂØíÂÜ¨Ôºå‰ΩÜÊòØÂØπÊàë‰ª¨ÊäÄÊúØ‰∫∫Êù•ËØ¥ÔºåÈöæ‰ª•ÊûÑÊàêÂΩ±ÂìçÔºåÂõ†‰∏∫Âè™Ë¶Å‰Ω†ÊúâË∂≥Â§üÁöÑÊäÄÊúØÂ∫ïÂ≠êÔºåÂú®Âì™ÈÉΩÂèØ‰ª•ÂÖªÊ¥ªËá™Â∑±„ÄÇÁî®Êàë‰ª¨ÂÆ∂‰π°ËØùÊù•ËØ¥Ôºå‚ÄùÂ≠¶Â•ΩÊäÄÊúØÔºåËµ∞Âà∞Â§©‰∏ãÈÉΩ‰∏çÊÄï‚ÄúÔºåËøôÈáåÊàëÁßÅËá™ÊääÁâ©ÁêÜÂåñÊîπÊàêÊäÄÊúØÔºåÂìàÂìà„ÄÇ&lt;br&gt;
ÁªèÂ∏∏ÈÉΩËÉΩÂú®ÁΩë‰∏äÁúãÂà∞‰∏ÄÂè•ËØùÔºå‚Äù&lt;strong&gt;‰∫∫ÁîüÊúÄÈáçË¶ÅÁöÑÊäïËµÑÊòØËá™Â∑±„ÄÇ‰ΩøËá™Â∑±Êõ¥ÂÄºÈí±ÊâçÊòØÁ´ãË∫´‰πãÊú¨„ÄÇ&lt;/strong&gt;‚Äú&lt;/p&gt;
&lt;p&gt;3„ÄÅ&lt;strong&gt;È´òË¥®ÈáèÁöÑËæìÂÖ•ÈáçË¶ÅÔºåËæìÂá∫ÊØîËæìÂÖ•Êõ¥ÈáçË¶Å&lt;/strong&gt;&lt;br&gt;
Â∞±ÊãøÁúã‰π¶ÂÜôÊñáÁ´†Êù•ËØ¥ÔºåÂΩìÊàë‰ª¨Ë¶ÅÂÜôÁ±ª‰ººÈ´òËÄÉÈÇ£Áßç‰ΩúÊñáÈ¢òÁõÆÊó∂ÂÄôÔºåÂ¶ÇÊûúËøôÊó∂ËØªÊ≠¶‰æ†Â∞èËØ¥ÔºåÈÇ£‰πàËÇØÂÆöÊòØÂØπ‰∫éÂÜô‰ΩúÊñáÊòØÊó†ÁõäÁöÑÔºåËøôÂ∞±ÊòØ‰ΩéË¥®ÈáèÁöÑËæìÂÖ•ÔºåÂ¶ÇÊûúÁúã‰∏Ä‰∫õÊñáÂ≠¶ÊñπÈù¢ÁöÑ‰π¶ÁöÑËØùÔºåÈÇ£‰πàÂØπ‰∫éÂÜô‰ΩúÊòØÈùûÂ∏∏ÊúâÂ•ΩÂ§ÑÁöÑ„ÄÇ&lt;br&gt;
‰ΩÜÊòØ‰∏ÄÂë≥ÁöÑËæìÂÖ•ÔºåÊèêÂçáÁöÑÊÑè‰πâ‰∏çÈ´òÔºå‰∏™‰∫∫ËßÇÁÇπ„ÄÇÊØîÂ¶ÇÊàë‰ªéÂ∞èÂ≠¶Âà∞Â§ßÔºåÂà∞Áé∞Âú®ÈÉΩÊ≤°ÂÜôËøáÊñáÁ´†ÁöÑËØùÔºå‰ª•ÂâçÂú®È´ò‰∏≠Â≠¶‰π†ÁöÑÂÜôÊñáÁ´†ÁöÑËÉΩÂäõÈÉΩÊ≤°Êúâ‰∫Ü„ÄÇÊâÄ‰ª•Â¶ÇÊûú‰∏çÂéªËæìÂá∫ÔºåÈÇ£‰πàÂ≠¶‰π†Âà∞ÁöÑ‰∏úË•øÂ∞ÜÂú®‰ª•ÂêéÊüê‰∏™Êó∂ÂàªÈÉΩ‰ºöÂøòËÆ∞„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;3-ÂÖ≥‰∫é‰∏∫‰∫∫Â§Ñ‰∫ã&#34;&gt;3„ÄÅÂÖ≥‰∫é‰∏∫‰∫∫Â§Ñ‰∫ã&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://img-blog.csdnimg.cn/20181231150512794.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p5MTUxMTIzNDI0NDk=,size_16,color_FFFFFF,t_70&#34; alt=&#34;Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÊàëËøô‰∏æ‰∏§‰∏™‰æãÂ≠êÔºö&lt;br&gt;
‰æã1Ôºö‰∏äÂ≠¶ÈÇ£‰ºöÔºåÊàëÁà∏ÈÄÅÊàëÂéªÁÅ´ËΩ¶Á´ôÔºåÂà∞‰∫ÜÈ©¨Ë∑Ø‰∏äÂáÜÂ§áÂè´Âá∫ÁßüËΩ¶„ÄÇËøôÊó∂ÂØπÈù¢È©¨Ë∑Ø‰∏äÊù•‰∫Ü‰∏ÄËæÜÁ©∫ËΩ¶ÔºåÂè∏Êú∫Â∏àÂÇÖÁúãÂà∞Êàë‰ª¨ÊãõÊâãÔºåÂ∞±ÂáÜÂ§áÂà∞‰∏çËøúÂ§ÑÊéâÂ§¥ÔºåÁÑ∂ÂêéËøôÊó∂ÂÄôÂè¶Â§ñ‰∏ÄËæÜÂá∫ÁßüËΩ¶Â∞±ÂàöÂ•ΩÂÅúÂú®Êàë‰ª¨Èù¢ÂâçÔºåÊàëÂáÜÂ§á‰∏äÁúºÂâçËøôËæÜËΩ¶ÁöÑÊó∂ÂÄôÔºåÊàëÁà∏Â∞±ÊääÊàëÊãâ‰ΩèÂè´ÊàëÁ≠â‰πãÂâçÈÇ£‰∏ÄËæÜËΩ¶ÊéâÂ§¥ÂùêÈÇ£ËæÜËΩ¶ÔºåËÄå‰∏îÈÇ£ËæÜËΩ¶Â∑≤ÁªèÊãêÂºØÈ©¨‰∏äÂà∞Êàë‰ª¨ËøôËæπÊù•‰∫Ü„ÄÇ‰πãÂêéÁªìÊûúÂ∞±ÊòØÔºåÊàëÂíåÊàëÁà∏Âùê‰∏ä‰∫Ü‰πãÂâç‰∏ÄËæÜËΩ¶ÔºåËÄå‰∏îÂíåÂÅúÂú®Êàë‰ª¨Èù¢ÂâçÁöÑÂêé‰∏ÄËæÜËΩ¶Â∏àÂÇÖËØ¥‚Äú‰∏çÂ•ΩÊÑèÊÄùÊàë‰ª¨Â∑≤ÁªèÂè´‰∫ÜÈ©¨Ë∑ØÂØπÈù¢ÈÇ£‰∏ÄËæÜËΩ¶‰∫Ü‚Äú„ÄÇ&lt;/p&gt;
&lt;p&gt;Ëøô‰ª∂‰∫ãÂà∞Áé∞Âú®ÊàëËøòÊúâËÆ∞ÂøÜÊ∑±ÂàªÔºåËøôÈáåÊàëÊÉ≥ËØ¥ÁöÑÊòØÔºå&lt;strong&gt;Êàë‰ª¨Âú®Êñπ‰æøËá™Â∑±ÁöÑÂêåÊó∂Ôºå‰πüË¶ÅÊç¢‰ΩçÊÄùËÄÉËÄÉËôëÂà´‰∫∫ÁöÑÊÑüÂèó&lt;/strong&gt;„ÄÇ&lt;br&gt;
ÊàñËÆ∏ÂØπ‰∫é‰Ω†Êù•ËØ¥ÊòØ‰∏Ä‰ª∂Â∞è‰∫ãÊÉÖÔºåÁõ¥Êé•ÂõæÊñπ‰æøÂùê‰∏äÁ¶ªËá™Â∑±ÊúÄËøëÁöÑËΩ¶„ÄÇÈÇ£‰πüÊó†ÂèØÂéöÈùûÔºåÊç¢‰Ωú‰ª•ÂâçÁöÑÊàë‰πüÊòØÔºåÊ≤°ÊúâÊç¢‰ΩçÊÄùËÄÉËøá„ÄÇ‰ΩÜÊòØÁé∞Âú®ÊàëËßâÂæóÊç¢‰ΩçÊÄùËÄÉ‰πüÊòØ‰∏Ä‰∏™ÊàêÂπ¥‰∫∫Â∫îÂÖ∑Â§áÁöÑÁ¥†Ë¥®„ÄÇ&lt;/p&gt;
&lt;p&gt;‰æã2Ôºö‰∏ä‰∏ÄÊ¨°ÂÖ¨Âè∏ÊäÄÊúØËÅîË∞ÉÔºåÊàëËøôËæπÈúÄË¶ÅËøúÁ®ãÂíåÂè¶‰∏Ä‰∏™ÂàÜÂÖ¨Âè∏Âêå‰∫ãËÅîË∞ÉÔºåÊàëËøôËæπÂÆå‰∫ãÂêéÈúÄË¶ÅÈÄöÁü•‰ªñÈÇ£ËæπÔºå‰ªñÈÇ£ËæπÊâçËÉΩÁªßÁª≠ÂÆåÊàêÂ∑•‰ΩúÔºåÁî±‰∫éËá™Â∑±ÁöÑÂéüÂõ†ÔºåËøôËæπÂÅöÂÆåÔºåÊ≤°ÊúâÂèäÊó∂ÈÄöÁü•Âà∞‰ªñ‰ª¨ÔºåÂØºËá¥‰ªñ‰ª¨ÈÇ£ËæπÂª∂Êúü„ÄÇ&lt;/p&gt;
&lt;p&gt;Ëøô‰ª∂‰∫ãÊàëÊÉ≥ËØ¥ÁöÑÊòØÔºå&lt;strong&gt;Êàë‰ª¨Âú®ÂÅö‰∫ãÁöÑÊó∂ÂÄôÔºåÊó†ËÆ∫ÊòØÂ∑•‰ΩúËøòÊòØÁîüÊ¥ªÔºåÈÉΩ‰∏çËÉΩÂéªÂõ†‰∏∫Ëá™Â∑±ËÄΩÊêÅÂà´‰∫∫&lt;/strong&gt;ÔºåÂõ†‰∏∫Âà´‰∫∫ÁöÑÊó∂Èó¥‰πüÊòØÊó∂Èó¥ÔºåÂíåÊàë‰ª¨Ëá™Â∑±ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;4-ÂÖ≥‰∫éÂèãÊÉÖÁà±ÊÉÖ‰∫≤ÊÉÖ&#34;&gt;4„ÄÅÂÖ≥‰∫éÂèãÊÉÖÁà±ÊÉÖ‰∫≤ÊÉÖ&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://img-blog.csdnimg.cn/20181231151002819.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p5MTUxMTIzNDI0NDk=,size_16,color_FFFFFF,t_70&#34; alt=&#34;Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
ÂÖ≥‰∫éÂèãÊÉÖÔºöÊÉ≥ÂØπËøúÊñπÁöÑÊúãÂèãËØ¥ &lt;strong&gt;ÂΩì‰Ω†ËæâÁÖåÊó∂ÂÄôÔºåÊàëÁ•ùË¥∫‰Ω†ÔºåÂΩì‰Ω†ËêΩÈ≠ÑÁöÑÊó∂ÂÄôÔºåÊàëÈöèÊó∂Â∏ÆÂä©‰Ω†&lt;/strong&gt;„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂÖ≥‰∫éÁà±ÊÉÖÔºöÂà∞Áé∞Âú®ÊàëËøòÂú®ÊÉ≥Ëá™Â∑±ÁúüÊ≠£ÊÉ≥ÂéªÊã•ÊúâÁöÑÊòØ‰ªÄ‰πà„ÄÇ&lt;/p&gt;
&lt;p&gt;ÂÖ≥‰∫é‰∫≤ÊÉÖÔºöÂè™ÊúâÂà´‰∫∫ÂÖ≥ÂøÉ‰Ω†È£ûÁöÑÈ´ò‰∏çÈ´òÔºåÊ≤°Êúâ‰∫∫‰ºöÂÖ≥ÂøÉ‰Ω†È£ûÁöÑÁ¥Ø‰∏çÁ¥ØÔºåÈô§‰∫ÜÂÆ∂‰∫∫„ÄÇ&lt;/p&gt;
&lt;h2 id=&#34;5-2019Âπ¥Â±ïÊúõ&#34;&gt;5„ÄÅ2019Âπ¥Â±ïÊúõ&lt;/h2&gt;
&lt;p&gt;Á´ã‰∏™flagÔºåÊØïÁ´üÊòØÊú™Êù•ÁöÑ‰∫ã&lt;br&gt;
1„ÄÅ‰∏ÄÂë®‰∏ÄÊ¨°Ë∑ëÊ≠•+ÁØÆÁêÉ&lt;br&gt;
2„ÄÅ‰∏§‰∏™ÊúàËá≥Â∞ëÁúãÂÆå‰∏ÄÊú¨‰π¶&lt;br&gt;
3„ÄÅ‰øùÊä§Â•ΩËßÜÂäõ&lt;br&gt;
4„ÄÅÁÜüÊÇâÈáëËûçÊ†∏ÂøÉ‰∏öÂä°&lt;br&gt;
5„ÄÅ‰ΩìÈáç‰∏çË∂Ö140&lt;/p&gt;
&lt;h2 id=&#34;ÊÄªÁªì‰∏Ä‰∏ã&#34;&gt;ÊÄªÁªì‰∏Ä‰∏ã&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://img-blog.csdnimg.cn/20181231162952878.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p5MTUxMTIzNDI0NDk=,size_16,color_FFFFFF,t_70&#34; alt=&#34;Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
‰∫∫ÁöÑÊàêÈïøÊòØ‰∏çÊñ≠ËÆ§ËØÜÂà∞‰ª•ÂâçÁöÑËá™Â∑±ÊòØ‰∏Ä‰∏™ÂÇªXÁöÑËøáÁ®ãÔºåÂ∏åÊúõÊòéÂπ¥ÁöÑÊàëËÆ§‰∏∫‰ªäÂπ¥ÁöÑÊàëÊòØ‰∏Ä‰∏™ÂÇªX„ÄÇ&lt;/p&gt;
&lt;p&gt;&lt;em&gt;2018-12-31 ‰∫éÂº†ÈÅ•Âá∫ÁßüÂ±ãÂÜô&lt;/em&gt;&lt;/p&gt;
">2018Âπ¥ÊÄªÁªì</a>
      </div>
      
    </div>
    <div class="page">
      <div id="page_ul"></div>
    </div>
  </div>
</div>
<script>
  !function () {
    let searchMask = document.querySelector('#search_mask');
    let result = document.querySelector('#result');
    let items = document.querySelectorAll('.item');
    let searchBox = document.querySelector('#search');
    let statCount = document.querySelector('#stat_count');
    let statTimes = document.querySelector('#stat_times');
    let pageUl = document.querySelector('#page_ul');
    let close = document.querySelector('#close');
    
    close.addEventListener('click', function() {
      searchMask.style = 'display: none;'
    })

    let finds = [];
    let contents = [];
    let pageSize = 10;
    items.forEach(item => {
      let a = item.querySelector('a');
      contents.push({
        title: a.innerText,
        details: a.dataset.c,
        link: a.href
      })
      item.remove();
    })

    function insertStr(soure, start, count) {
      let newStr = soure.substr(start, count);
      return soure.slice(0, start) + '<em>' + newStr + '</em>' + soure.slice(start + count);
    }

    pageUl.addEventListener('click', function(event) {
      let target = event.target;
      if (target.__proto__ === HTMLSpanElement.prototype) {
        appendResults(parseInt(target.dataset.i));
      }
    })

    function appendResults(index) {
      let htmlResult = '';
      let start = index || 0;
      let end = Math.min(start + pageSize, finds.length);
      for (let i = start; i < end; i++) {
        const current = finds[i];
        let html = current.title;
        let sum = 0;
        let positions = current.positions;
        positions.forEach(position => {
          html = insertStr(html, position.start + sum, position.count);
          sum += 9;
        })
        htmlResult += `<div class="item"><a class="result-title" href="${current.link}">${html}</a></div>`;
      }
      result.innerHTML = htmlResult;
      pageUl.innerHTML = '';
      let count = finds.length / pageSize;
      let lis = '';
      if (start !== 0) {
        lis += `<span class="fa fa-angle-left" data-i='${start - 1}'></span>`;
      }
      for (let i = 0; i < count; i++) {
        lis += `<span class='${i === start?'current':''}' data-i='${i}'>${i+1}</span>`;     
      }
      if (start+1 < count) {
        lis += `<span class="fa fa-angle-right" data-i='${start+1}'></span>`;  
      }
      pageUl.innerHTML = lis;
    }

    function search(delay) {
      let timer = null
      return function () {
        clearTimeout(timer)
        timer = setTimeout(() => {
          let start = Date.now();
          let segments = searchBox.value.split(' ').filter(c => c != '');
          if (segments.length <= 0) {
            return;
          }
          finds = [];
          let htmlResult = '';
          contents.forEach(content => {
            let title = content.title;
            let positions = [];
            let find = false;
            segments.forEach((segment) => {
              if (content.title.includes(segment)) {
                find = true;
                positions.push({
                  start: content.title.indexOf(segment),
                  count: segment.length
                })
              } else if (content.details.includes(segment)) {
                find = true;
              }
            });
            if (find) {
              finds.push({
                title: content.title,
                link: content.link,
                positions
              });
            }
          })
          appendResults(0);
          statCount.textContent = finds.length;
          statTimes.textContent = Date.now() - start;
        }, delay)
      }
    }
    searchBox.addEventListener('input', search(200));
  }()
</script>

<input hidden id="copy" />
<script>
  let language = '';
  if (language !== '') {
    let map = new Map();
    if (language === 'en') {
      map.set('search', 'Search');
      map.set('category', 'Categories');
      map.set('article', 'Articles');
      map.set('tag', 'Tags');
      map.set('top', 'Top');
      map.set('publish', 'published');
      map.set('minute', ' minutes');
      map.set('read-more', 'Read More');
      map.set('view', 'View');
      map.set('words', ' words');
      map.set('category-in', 'category in');
      map.set('preview', 'Meta');
      map.set('index', 'Toc');
      map.set('no-archives', "You haven't created yet");
      map.set('archives', " articles in total");
      map.set('cloud-tags', " tags in total");
      map.set('copyright', "Copyright: ");
      map.set('author', "Author: ");
      map.set('link', "Link: ");
      map.set('leave-message', "Leave a message");
      map.set('format', "Links Format");
      map.set('site-name', "Name: ");
      map.set('site-link', "Link: ");
      map.set('site-desc', "Desc: ");
      map.set('stat', " related results, taking ");
      map.set('stat-time', " ms");
      map.set('site-img', "Image: ");
    }

    if (map.size > 0) {
      let lanElems = document.querySelectorAll('.language');
      lanElems.forEach(elem => {
        let lan = elem.dataset.lan, text = map.get(lan);
        if (elem.__proto__ === HTMLInputElement.prototype) {
          elem.placeholder = text
        } else {
          if (elem.dataset.count) {
            text = elem.dataset.count + text;
          }
          elem.textContent = text;
        }
      })
    }
  }
  //ÊãøÊù•‰∏ª‰πâ(ÁúüÈ¶ô)^_^ÔºåClipboard ÂÆûÁé∞ÊëòËá™ÊéòÈáë https://juejin.im/post/5aefeb6e6fb9a07aa43c20af
  window.Clipboard = (function (window, document, navigator) {
    var textArea,
      copy;

    // Âà§Êñ≠ÊòØ‰∏çÊòØiosÁ´Ø
    function isOS() {
      return navigator.userAgent.match(/ipad|iphone/i);
    }
    //ÂàõÂª∫ÊñáÊú¨ÂÖÉÁ¥†
    function createTextArea(text) {
      textArea = document.createElement('textArea');
      textArea.value = text;
      textArea.style.width = 0;
      textArea.style.height = 0;
      textArea.clientHeight = 0;
      textArea.clientWidth = 0;
      document.body.appendChild(textArea);
    }
    //ÈÄâÊã©ÂÜÖÂÆπ
    function selectText() {
      var range,
        selection;

      if (isOS()) {
        range = document.createRange();
        range.selectNodeContents(textArea);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
      } else {
        textArea.select();
      }
    }

    //Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø
    function copyToClipboard() {
      try {
        document.execCommand("Copy")
      } catch (err) {
        alert("Â§çÂà∂ÈîôËØØÔºÅËØ∑ÊâãÂä®Â§çÂà∂ÔºÅ")
      }
      document.body.removeChild(textArea);
    }

    copy = function (text) {
      createTextArea(text);
      selectText();
      copyToClipboard();
    };

    return {
      copy: copy
    };
  })(window, document, navigator);

  function copyCode(e) {
    if (e.srcElement.tagName === 'SPAN' && e.srcElement.classList.contains('copy-code')) {
      let code = e.currentTarget.querySelector('code');
      var text = code.innerText;
      if (e.srcElement.textContent === 'Â§çÂà∂ÊàêÂäü') {
        console.log('Â§çÂà∂Êìç‰ΩúÈ¢ëÁéáËøáÈ´ò');
        return;
      }
      e.srcElement.textContent = 'Â§çÂà∂ÊàêÂäü';
      (function (elem) {
        setTimeout(() => {
          if (elem.textContent === 'Â§çÂà∂ÊàêÂäü') {
            elem.textContent = 'Â§çÂà∂‰ª£Á†Å'
          }
        }, 1000);
      })(e.srcElement)
      Clipboard.copy(text);
    }
  }

  let pres = document.querySelectorAll('pre');
  pres.forEach(pre => {
    let code = pre.querySelector('code');
    let copyElem = document.createElement('span');
    copyElem.classList.add('copy-code');
    copyElem.textContent = 'Â§çÂà∂‰ª£Á†Å';
    pre.appendChild(copyElem);
    pre.onclick = copyCode
  })

</script>
<script src="/media/js/motion.js"></script>

<script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
<script>
  var scroll = new SmoothScroll('a[href*="#"]', {
    speed: 200
  });
</script>


<script src="/media/js/mouse/love.js"></script>



</html>